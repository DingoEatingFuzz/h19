{"all":[{"hash":"f50c358988c8f6c51288bf18c500257558ffd8bc","date":"2018-10-25 13:40:15 -0500","message":"remove unnecessary return","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"1f87a25d54b8f74483940f4d173e0d81e758e472","date":"2018-10-25 13:40:28 -0500","message":"Remove unnecessary return","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"2cf48b931dbce2267d19c92f0db182e01ce62adb","date":"2018-10-25 13:41:24 -0500","message":"update comment","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"2101d58d0fbdb13e41e9cda3dc4c5541ceb723e8","date":"2018-10-25 13:42:20 -0500","message":"remove newline","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"1744b4d1232b68eb6f49811f35a2d3901f44252e","date":"2018-10-25 13:43:29 -0500","message":"Fix copy pasted comment","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"c99b8701de1dd9603ea9b1c9ed931774546e9fa8","date":"2018-10-25 13:45:44 -0500","message":"Fix imports","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"76ad56c73f806cbb93190553ae871fbcae1f6e68","date":"2018-10-25 13:47:17 -0500","message":"Fix hclog log line formatting","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"0ec59305ee02ab949ed78e5f91650727b926e119","date":"2018-10-25 13:51:06 -0500","message":"remove driver config struct from qemu driver since its not used","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"9937dc93b9381f45df268577e7074dfe549d862f","date":"2018-10-25 13:51:58 -0500","message":"Merge branch 'f-driver-plugin-qemu' of github.com:hashicorp/nomad into f-driver-plugin-qemu","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1809a89d0c3ee7385201f091309fb0273a7520ea","date":"2018-10-26 09:11:56 -0500","message":"Merge pull request #4800 from hashicorp/f-driver-plugin-qemu","refs":[],"body":"QEMU driver plugin","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"af3a62e7508f3db179893ffd57cccfa1c78a373b","date":"2018-10-26 10:30:12 -0500","message":"Fix test linting","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4231dc4729b4d2a758c2ec66af5456692e709c7d","date":"2018-10-26 17:24:05 -0500","message":"Stat path to binary to handle raw exec driver interpolated binary path","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"7404666f07fdc1df03a6b6c7c68b27d6befd2b61","date":"2018-10-26 19:09:18 -0500","message":"Merge pull request #4813 from hashicorp/b-executor_path_fix","refs":[],"body":"Stat path to binary to handle raw exec driver interpolated binary path","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"645fe97fa08aff4da0f00b9a404fef2046c2833e","date":"2018-10-26 19:14:13 -0500","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"9d2b28e9bec3c1f49b1e3a1a767a4cacd2416a5d","date":"2018-10-29 14:21:05 -0700","message":"tests: fix usages of TestClient cleanup and mock driver","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"0b4e15c3661af3c354453d0f2f9f05f51e644996","date":"2018-10-29 15:25:22 -0700","message":"tests: more fixes due to api changes","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"16c25b8a6055e4fdccb6b41b4dd25cf882f083e7","date":"2018-10-29 17:38:59 -0500","message":"Merge pull request #4803 from hashicorp/b-leader-fixes","refs":[],"body":"AR Fixes: task leader handling, restoring, state updating, AR.Destroy deadlocks","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"95d381cff7690c459a677164250db71c38c7b08c","date":"2018-10-29 21:34:34 -0400","message":"rename NomadConfig to ClientAgentConfig","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"394cbc81b602eb10ef29c6a0203549bf9bfdd8c6","date":"2018-10-29 21:43:19 -0400","message":"plugins/drivers: nil gaurd driver config when building executor config","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"da7563b8c375768bf0a164dc3b5ce074a81505d3","date":"2018-10-29 18:42:27 -0700","message":"Merge pull request #4795 from hashicorp/f-plugin-config","refs":[],"body":"Pass client configuration to plugins through loader","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"4b08ef0534cfa3d4a7f90e50df4144310e13c60d","date":"2018-10-29 18:46:30 -0700","message":"Merge pull request #4765 from jippi/increase-line-scan-limit","refs":[],"body":"fix: increase log rotator line scan limit","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"7d28d346d5f923887bd2483c90441385630c613f","date":"2018-10-29 22:10:37 -0700","message":"qemu: fix build and register by default","refs":[],"body":"API changes had broken the build.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"5f27e0010dfb50f60e7a8dd1a0dbb29cb4d6c60b","date":"2018-09-10 12:38:36 -0500","message":"structs and API changes to plan and alloc structs needed for preemption","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"80041603043fd1a09aa05f835c60b1ace14b558c","date":"2018-09-10 13:13:10 -0500","message":"REview feedback","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"bf7192c58d8503ac4123660f33a6f989e0c28242","date":"2018-09-11 11:36:15 -0500","message":"Add number of evictions to DesiredUpdates struct to use in CLI/API","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"fc266f79872d6e7bb1eb8c985f2f57f863600a74","date":"2018-09-10 12:38:36 -0500","message":"structs and API changes to plan and alloc structs needed for preemption","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"715d869499514c4fe1b0df7719f11adcb77ca40e","date":"2018-09-21 16:05:00 -0500","message":"Implement preemption for system jobs.","refs":[],"body":"This commit implements an allocation selection algorithm for finding\nallocations to preempt. It currently special cases network resource asks\nfrom others (cpu/memory/disk/iops).\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"b5cbd73924f0434c3817d9885d2e2a604ab58d9a","date":"2018-09-23 20:09:14 -0500","message":"Fix comment","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"13e314cb5650e84f30d920456acddaae1a604db7","date":"2018-09-23 20:42:03 -0500","message":"Fix logic bug, unit test for plan apply method in state store","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"fd6bff23329f47f8360d6b2c5aece10982674b8b","date":"2018-09-23 21:26:24 -0500","message":"Fix linting and better comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"51c5bae393d530be41346734219dc24db3f92445","date":"2018-09-27 15:10:15 -0500","message":"Fix linting","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"784b96c104373bbf0005ed541d37e1411becb4ea","date":"2018-09-27 23:27:38 -0500","message":"Support for new scheduler config API, first use case is to disable preemption","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"2143fa2ab7b7ec6d56aa8eaf1b0a90b96bea7f0a","date":"2018-09-27 23:44:01 -0500","message":"Use scheduler config from state store to enable/disable preemption","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"6966e3c3e8636455a5ef65c43afe63869ab13a41","date":"2018-10-01 09:26:52 -0500","message":"Make preemption config a struct to allow for enabling based on scheduler type","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"24b393483aaf9b1d95ecfd0e6779d4b84e18f7ee","date":"2018-10-16 18:23:21 -0500","message":"Modify preemption code to use new style of resource structs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"9f35923db07a660d1f6af5679c4e78d69c8a930c","date":"2018-10-16 20:46:44 -0500","message":"fix end to end scheduler test to use new resource structs correctly","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a960cced8c3ead7a4f97279d69207f78edbd1cff","date":"2018-10-16 21:21:55 -0500","message":"comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"655689a743d10f8c43b1f734dcbff4ad3a08e085","date":"2018-10-16 21:26:42 -0500","message":"Preempted allocations should be removed from proposed allocations","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c4e0e66c5b2d62b202ac8843f25e95f9f268c5a9","date":"2018-10-17 21:40:14 -0500","message":"Restore/Snapshot plus unit tests for scheduler configuration","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c3b8e4f5737cd40ff140d55fa72a42b106c154dc","date":"2018-10-17 22:29:29 -0500","message":"Add fsm layer tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"12af2aed49d4f7649bdcbccd30897fc3a472ed00","date":"2018-10-17 22:38:05 -0500","message":"make default config a variable","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c4a04eb1b209356b9f613a803458223f84ff70d4","date":"2018-10-17 22:45:40 -0500","message":"style fixes","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"191b8626d25c0558b168ceac58a278167b7ea0e1","date":"2018-10-17 23:06:53 -0500","message":"More review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"21432d69dc12cef32c7dc1612fb7b143e527bf85","date":"2018-10-17 23:49:37 -0500","message":"More style and readablity fixes from review","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4cc21fbcfa10063452c2721ebdaf0a7d811811f2","date":"2018-10-18 00:07:56 -0500","message":"more minor cleanup","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"35635ba39a26ce3f01118f334ce31392933644a5","date":"2018-10-29 12:34:03 -0500","message":"refactor preemption code to use method recievers and setters for common fields","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"88005852e3c2b0985f6b74bba40fcd062d131996","date":"2018-10-29 13:10:43 -0500","message":"Introduce a response object for scheduler configuration","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"17344a7f3a4eb525f96ffa193cadd2d16d1aad8c","date":"2018-10-30 09:14:56 -0500","message":"Introduce interface with multiple implementations for resource distance","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f2b027797bce74087ac893ff073c3a292755e404","date":"2018-10-30 11:10:46 -0500","message":"Fix return type in tests after refactor","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4a35d62887c67ce138a841a08ec9b2f67326c386","date":"2018-10-17 21:06:24 -0500","message":"Fix formatting of allocation score metrics","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e9fa36f9ef3ffb57f9929117a6f7208131bbd2df","date":"2018-10-30 13:24:30 -0400","message":"Allow artifacts checksum interpolation","refs":[],"body":"Fixes https://github.com/hashicorp/nomad/issues/4814\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"dd04ca6384bcffb6b962b5672b0aa011a399e1d7","date":"2018-10-30 12:49:50 -0500","message":"Merge pull request #4816 from hashicorp/b-qemu","refs":[],"body":"qemu: fix build and register by default","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"badb6c42d01028455e58cf4743a01a9976101021","date":"2018-10-30 10:50:24 -0700","message":"Add onChange hook to the search-box component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"f7ad2ce8bbb0684515591edf2dc44071c656bbf4","date":"2018-10-30 10:50:50 -0700","message":"Add a resetPagination method to the searchable mixin","refs":[],"body":"Searchable can be used without pagination, but reseting pagination\nis more a function of search than pagination insofar as if you\nadd search to a page, you are also going to want automatic pagination\nresetting.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"44e33d01f0f9694566b3ef552a969f50a640e9db","date":"2018-10-30 10:52:54 -0700","message":"Add the resetPagination hook to search boxes across the app","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"abd2451d527ee66428db986dc9fa709f41793c69","date":"2018-10-30 13:58:52 -0400","message":"address review comments","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"61ff1854c38ceea913d8365bca50c2fdcd58e382","date":"2018-10-30 13:32:16 -0500","message":"Merge pull request #4818 from hashicorp/b-affinities-cli-formatting","refs":[],"body":"Fix formatting of allocation score metrics","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"9fb39b35c60b61cde66715783ea1d9d180cbdd8b","date":"2018-10-30 14:05:31 -0700","message":"drivers: remove stutter from exported driver names","refs":[],"body":"Also fix a comment on the logger that got copy/pasted around.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"b00916ac177a11c4f2fbd36ea374f06750839cbc","date":"2018-10-30 14:17:23 -0700","message":"Test coverage for resetPagination","refs":["b-ui-reset-page-param"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"fd2fcd7cb6712f99e20c27f84a7c1d7134306f27","date":"2018-10-30 17:13:35 -0700","message":"drivers: only log non-cancellation errors","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"e7bf482eaa42acde0095c68cf4bdc35724981e56","date":"2018-10-30 17:14:27 -0700","message":"plugins: SetConfig shouldn't panic on nil driver configs","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"7d250fc58c7f6b933e8cfd4b5d693fb8122c1854","date":"2018-10-30 17:15:47 -0700","message":"rawexec: fix race around h.procState","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"0d1a8bf7fdd684ab6686de3c71b7b021bbc41824","date":"2018-10-30 17:16:22 -0700","message":"rawexec: fix fingerprint results and tests","refs":[],"body":"In tests:\n* always cleanup (Kill) the harness\n* don't call SetConfig more than once (a race)\n* avoid cgroups to allow running without being root\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"8f78d1d164e546bfbc724b422a6df32988457e97","date":"2018-10-30 17:34:08 -0700","message":"qemu: fix fingerprint description and handle race","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"864d545284686b67afd119be90fa5653096377e0","date":"2018-10-30 17:37:00 -0700","message":"rkt: fix race, register by default, fix fingerprint","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"55d79c6022d2a57a2aa71cc7d1e1f4ab2696168a","date":"2018-10-30 17:38:23 -0700","message":"mock_driver: match other's fingerprint message","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"e7e7302c23e9076f615ae73740fe63a6a228dd60","date":"2018-10-31 12:35:22 -0400","message":"Merge pull request #4819 from hashicorp/b-artifacts-checksum","refs":[],"body":"Allow artifacts checksum interpolation","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"a5e1e4b59ee0363bc9beaa8f2f5961fa38ecf0d6","date":"2018-10-31 13:52:15 -0400","message":"Register exec driver plugin among some fixes","refs":[],"body":"Namely, remove the `enabled` configuration flag, as it's specific to\n`raw_exec` driver.  Also, pass resource limits to underlying call.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e949416e127ef73e837a4cb9e5f238e8e7bd460f","date":"2018-10-31 11:52:51 -0700","message":"drivers/mock: standardize names/code","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"5a8af30afde2f872999512cfca3f4de520fb6f3d","date":"2018-10-31 15:28:22 -0400","message":"Update changelog with GH-4819","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"17d405d97363d1e4f0fa435af90b5ac39b0d8436","date":"2018-10-31 15:45:38 -0400","message":"Merge pull request #4827 from hashicorp/ch-gh-4819","refs":[],"body":"Update changelog with GH-4819","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"daf4493228c6976bc219f6936003728880a698ab","date":"2018-10-17 07:09:29 -0700","message":"Provide the namespace query param to the task group link","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4e36c529354a11ff11a50b0cf04bd6db79e8a1e1","date":"2018-10-17 12:55:00 -0700","message":"Test coverage for breadcrumb qp change","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b7ef2d5e15fdeb74a69b62dbe9989dbb06b43c8f","date":"2018-11-01 00:02:26 -0500","message":"batch jobs GC removes terminal allocs if job modifyindex is older than running job","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"22d156f5a031ff750b0038c1ca8ac05240fdbc7c","date":"2018-11-01 12:01:59 -0500","message":"review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"58230b3b40d0a75facffcdd75e719bd978d0bc5b","date":"2018-11-01 13:20:02 -0700","message":"Merge pull request #4822 from hashicorp/b-ui-reset-page-param","refs":[],"body":"UI: Reset page query param on search","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"993b6a272a66c6c46b1a3e9ca46fae7916728bb5","date":"2018-11-01 16:15:58 -0500","message":"Cleaner way to exit early, and fixed a couple more places reading from alloc.Resources","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"6021f72dac00f4cb0c9812063101f16beb96014e","date":"2018-11-01 14:19:22 -0700","message":"Speed up builds by cutting corners given config and env","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3ad7b3fb5b9f7fd76fdc0b04fa1cc1aefb6b96b3","date":"2018-11-01 16:36:11 -0500","message":"More review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"68ef1660642ebaa3c31718dcf1958a3773f4956a","date":"2018-11-01 14:37:39 -0700","message":"Remove unused bourbon dependency","refs":["f-ui-build-perf"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"06ad182026ee3f14bfaf03f52ea7595893897389","date":"2018-11-01 16:44:43 -0500","message":"Plumb alloc resource cache in a few more places.","refs":[],"body":"also removed now unused method\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"67b60eef3690e5e338c1e602c42fb41b16d50c84","date":"2018-11-01 15:04:30 -0700","message":"Merge pull request #4829 from hashicorp/f-ui-build-perf","refs":[],"body":"UI: build time performance improvements","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"35d31f8be6eab0da942f68aae2f0e86014779c65","date":"2018-11-01 17:05:17 -0500","message":"more minor review feedback","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"84c8dbe5c94d0dc64a08ecc834ddce9bb8004e4e","date":"2018-10-31 11:53:37 -0700","message":"qemu: standardize names/code","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"4d707b5e8c6171a93f47e01b0154900bc5b90812","date":"2018-10-31 11:54:08 -0700","message":"rawexec: standardize names/code","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"ce604b8b86c277df44d1012c86c18dd51bd2ca32","date":"2018-10-31 11:54:29 -0700","message":"rkt: standardize names/code","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"ae833a53c5b3e879341816afae551a146095f978","date":"2018-11-01 17:55:32 -0500","message":"Merge pull request #4821 from hashicorp/r-drivers","refs":[],"body":"Fix driver naming, fingerprint output, races/tests","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"b3738a0c226654f8ff3eaef0324cf9aa0e29ff49","date":"2018-11-01 20:06:32 -0500","message":"unit test plan apply with preemptions","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"022573a07259878b94b73ca188a7e884ff7b51ce","date":"2018-11-01 22:07:58 -0700","message":"Move jsonWithDefault to a util","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"9f98029898970985f41144272643287ab51f87b0","date":"2018-11-01 22:08:57 -0700","message":"Gracefully handle response errors in stat trackers","refs":[],"body":"1. Check if the response is a 4xx/5xx\n2. If it is, skip the append step and track a frame miss\n3. If enough frame misses occur in a row, treat it as a pause\n\nA \"pause\" is when a null data frame is added, which shows up as a\ngap in line charts.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b0a1a360ba598b60e12ff7458e9cf593fe265eb7","date":"2018-11-01 22:11:56 -0700","message":"Improve client stat simulation and add a chance for requests to error","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"6b79e5bd12140168caa3046fbf535678c31c7af4","date":"2018-11-02 08:39:18 -0400","message":"add plugin config","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0015095b57f8db80f5dbf62d66118dfecd6a1718","date":"2018-11-02 09:09:50 -0500","message":"Handle static port preemption when there are multiple devices","refs":[],"body":"Also added test case\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"11a64f133205a87589c18db475c2a784bae22c03","date":"2018-11-02 10:11:05 -0400","message":"Merge pull request #4826 from hashicorp/b-driver-exec-tweaks-20181031","refs":[],"body":"Register exec driver plugin among some fixes","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"f40c7e8d4992b572c84b2f5ba3c1cfbeb39253aa","date":"2018-11-02 15:32:43 +0100","message":"Change 1hr to 1h on reschedule doc as 1hr is not supported by nomad","refs":[],"body":"","author_name":"Matthieu Antoine","author_email":"matthieu.antoine@n26.com"},{"hash":"002f46f42317221c8ca826ea57c34e707a56e2ea","date":"2018-11-02 10:15:52 -0700","message":"Merge pull request #4835 from thehunt33r/Fix-Reschedule-Doc","refs":[],"body":"Fixing mistake in reschedule doc","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"82359191589d65b994cef40a49b1bb3ef1d1fc87","date":"2018-11-02 13:07:24 -0500","message":"Fix static port preemption to be device aware","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1380acbf564e6ae7e94f1f84a1a0b3bda36e20e8","date":"2018-11-02 15:58:59 -0500","message":"dereference safely","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c49a3e20c5214e12436c79d5cb2906cfb6bb9e57","date":"2018-11-02 16:06:25 -0500","message":"Fix test setup","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"97cf4e1d7a058449813611c0924df0e4bdc86266","date":"2018-11-02 16:26:34 -0500","message":"Address more minor code review feedback","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"6aa0c7ffa9ecf7b5b28c99edfb6835f9da140295","date":"2018-11-02 16:28:06 -0500","message":"Merge pull request #4794 from hashicorp/f-preemption-systemjobs","refs":[],"body":"Preemption for system jobs","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"ea5d8cb625c0ad402dcc96c14d862f630687e809","date":"2018-11-02 17:59:53 -0500","message":"update preemption tests to use new node resource structs","refs":[],"body":"also includes a fix to remove unnecessary subtraction of network mbits\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1b787a15bf44f0c1ef19b8466e22bbe1616a6464","date":"2018-11-02 18:11:36 -0500","message":"add comment","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"ee813524a9ec4d98a0f8f9c69142f70f33953c6c","date":"2018-11-02 18:12:49 -0500","message":"Merge pull request #4836 from hashicorp/b-preemption-testfix","refs":[],"body":"update preemption tests to use new node resource structs","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"5aef27ccd8dd44c9bd2b010b1b9339b4c030a84a","date":"2018-11-02 17:08:02 -0700","message":"Guard against the element already being destroyed","refs":["b-ui-d3-race-condition"],"body":"Since DOM code is in a run.next, it's possible that between the DOM\ncode being queued and running the element is destroyed. So the DOM\ncode needs to guard against this using the isDestroyed API.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"1e00702624f4d5b9809dc1c5d93940ea9eb90674","date":"2018-11-02 18:24:33 -0700","message":"Handle the job 404 case in task group routes","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"d9bd1a1c7d7bfd7924a999e9ee1a0592c623e02a","date":"2018-11-03 15:45:36 -0400","message":"docs: Fix broken link to cloud auto join","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"fdbe446ea68a1b0e23448c2497fcf757a6316587","date":"2018-10-18 13:39:02 -0700","message":"client: first pass at implementing task restoring","refs":[],"body":"Task restoring works but dead tasks may be restarted\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"9b82025608b188f4ca3451df7f23e479141ae473","date":"2018-10-31 17:41:37 -0700","message":"client: do not run terminal allocs","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"d5c8e5bd260bac0b58569a84e787e822fd051106","date":"2018-10-31 21:23:44 -0700","message":"client: fix ar and tr tests","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"d2e48e35c031f6363aca2d9af0aa280d117a11d8","date":"2018-10-31 21:36:15 -0700","message":"tests: get consul integration tests building","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"740ca8e6ca23a5ad3a62f2be0199b6496dd5233f","date":"2018-11-05 12:20:45 -0800","message":"client: fix tr lifecycle logic and shutdown delay","refs":[],"body":"ShutdownDelay must be honored whenever the task is killed or restarted.\nServices were not being deregistered prior to restarting.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"a22205cd8f6e6d2370e6efca866cf621a83885db","date":"2018-11-05 12:22:45 -0800","message":"client: block on context as well as waitCh","refs":[],"body":"For lifecycle operations such as Restart and Kill, the client should not\nexpect driver plugins to be well behaved and close their waitCh on\ncontext cancelation. Always wait on the passed in context as well as the\nwaitCh.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"97bce10c35a928cc16950a2667f3c6dc238d1189","date":"2018-11-05 14:45:52 -0600","message":"Affinity stanza documentation","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c0868c576570223473bf1e57e3c3b40c0131f260","date":"2018-11-05 16:41:20 -0600","message":"More docs for affinities","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e58a91b701f8f48b70e1fa18e6ddfa5810565638","date":"2018-11-05 15:11:10 -0800","message":"client: update alloc status when terminating","refs":[],"body":"Defensively update alloc status whenever killing all tasks.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"1226a079f91c193b68805ba3cf3e86a5c5fbf730","date":"2018-11-05 15:20:31 -0800","message":"Handle the job 404 case in the job definition route","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"cb5bd66dd6667f05d802b673d2be2ef56aa5ff1f","date":"2018-11-05 15:42:04 -0800","message":"Handle the job 404 error case in versions","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"11ba511471e6a73ea39c267fb1b6045818178298","date":"2018-11-05 16:06:08 -0800","message":"Handle the job 404 error case on the other job sub pages","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"8615b1d558c85b9d6e49f6a1ea1729036c1f12bb","date":"2018-11-05 14:43:07 -0800","message":"Fix multiple tgs with progress deadline handling","refs":[],"body":"Fix an issue in which the deployment watcher would fail the deployment\nbased on the earliest progress deadline of the deployment regardless of\nif the task group has finished.\n\nFurther fix an issue where the blocked eval optimization would make it\nso no evals were created to progress the deployment. To reproduce this\nissue, prior to this commit, you can create a job with two task groups.\nThe first group has count 1 and resources such that it can not be\nplaced. The second group has count 3, max_parallel=1, and can be placed.\nRun this first and then update the second group to do a deployment. It\nwill place the first of three, but never progress since there exists a\nblocked eval. However, that doesn't capture the fact that there are two\ngroups being deployed.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"705efadfe7f99ccdd8605e16fdbc9c14d4dfb441","date":"2018-11-05 16:33:33 -0800","message":"Clean up the remaining routes","refs":["f-ui-error-handling-on-all-pages"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ccb7440316455ca6c4bb3d9a6f90a8e2dfb4b3f4","date":"2018-11-05 16:39:09 -0800","message":"more robust merging of the deployment status when getting updates from the client","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"8122c76cd65393712e58484da7a5fe07e15843f2","date":"2018-11-05 18:50:15 -0600","message":"Merge pull request #4828 from hashicorp/b-restore","refs":[],"body":"Implement client agent restarting","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"05aacc86e30fc23db5c81e401941201d4e8da576","date":"2018-11-06 12:26:26 -0600","message":"Fix failing resource subtraction test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f7d83d7e8008be0d6372c7f6c063f1ac9857591b","date":"2018-10-31 10:30:13 -0400","message":"Implement java driver","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0022496e5bc28542adbef0264f2ad7164429e9c7","date":"2018-10-31 12:19:07 -0400","message":"add java driver tests","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"efe9a60556c1ec1ce2c37b03c0e8cc96788dd2af","date":"2018-10-31 12:25:46 -0400","message":"register the java plugin","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"dc0d244dd82f03fc3d90ecbd30a38453af165144","date":"2018-11-02 08:29:39 -0400","message":"Reconcile with latest master patterns","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"12149c38046cb526a92329566a33ab011eb8df47","date":"2018-11-02 10:31:23 -0400","message":"driver/java: support non-linux targets","refs":[],"body":"Java driver supports non-linux targets, so LinuxResources fields isn't\nguaranteed to be not-nil.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"62d24ce9effb1b27cf5c8cae8293e8fd0a931519","date":"2018-11-06 12:49:29 -0800","message":"reconcile java with latest patterns","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e869d1f37bd0d65954cd82cc9aab2de320121e2c","date":"2018-11-06 15:07:29 -0800","message":"Merge pull request #4825 from hashicorp/f-driver-plugin-java","refs":[],"body":"Implement java driver plugin","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"333e76ba73d10a1734fb3743d8e9182912f6515f","date":"2018-11-01 22:12:44 -0700","message":"Test coverage for frame misses","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c95821e84e06612523d266e4c15b33ca043ca8fb","date":"2018-11-01 22:12:57 -0700","message":"Make your tests orders of magnitude faster with One Neat Trick™","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"31e21aed2a4466ad59ee31dde87db2432805507a","date":"2018-11-06 16:28:45 -0800","message":"Merge pull request #4837 from hashicorp/b-ui-d3-race-condition","refs":[],"body":"UI: Guard against the line chart element already being destroyed","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7af84f347a9c9183d245f786a7c203bc44a10bdf","date":"2018-11-06 16:41:46 -0800","message":"Merge pull request #4801 from hashicorp/b-ui-proper-task-group-breadcrumb","refs":[],"body":"UI: Proper task group breadcrumb on the allocation pages","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"0397cbc8d15686eb274b5a55e38a6dedda4fd5a0","date":"2018-11-07 10:08:23 -0800","message":"Duplicate blocked evals cancelling improved","refs":[],"body":"The old logic for cancelling duplicate blocked evaluations by job id had\nthe issue where the newer evaluation could have additional node classes\nthat it is (in)eligible for that we would not capture. This could make\nit such that cluster state could change such that the job would make\nprogress but no evaluation was unblocked.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"19af9c9b32fed6df6adf708856a9cc9ec43cbaa1","date":"2018-11-07 10:22:08 -0800","message":"Track jobs by namespace","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"c153282be9a7b7237ae97becf14ecce2c58255ea","date":"2018-10-15 13:45:38 -0700","message":"Add devices to allocated resources","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"77ad27de6083f1260192ffdd4200f140b07ad63f","date":"2018-10-15 15:15:46 -0700","message":"assign devices","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"7ab3ce4bde9ee7fbdc4a54f6c68986052b80443b","date":"2018-10-17 11:04:54 -0700","message":"affinities","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"dcbf9bdbab54a5b5ed57bcf0992e617949d45410","date":"2018-10-17 14:26:25 -0700","message":"Split device accounter and allocator","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"ea5fd244f65c8b8610c5a663fe3cdd5c0c371be7","date":"2018-10-17 15:03:38 -0700","message":"allocs fit checks if devices get oversubscribed","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"a36b682cf46c9d0b0849948f7cd21eb60ad2ad35","date":"2018-10-31 13:57:43 -0700","message":"review comments","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"4351c49969c4e1dbfe53177403a10b8d2044bc33","date":"2018-11-07 10:35:11 -0800","message":"Merge pull request #4802 from hashicorp/f-device-binpack","refs":[],"body":"Schedule Devices","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"57f40c7e3e545cb592762172515d6923c27bae74","date":"2018-09-28 10:09:01 -0700","message":"Device manager","refs":[],"body":"Introduce a device manager that manages the lifecycle of device plugins\non the client. It fingerprints, collects stats, and forwards Reserve\nrequests to the correct plugin. The manager, also handles device plugins\nfailing and validates their output.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"a8e95502fe2ffc9eeec373947b3b483de6cd6b54","date":"2018-10-31 18:00:30 -0700","message":"tests","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"eae45992dbafd1981e6b961f33cd3b588d55a416","date":"2018-11-01 16:23:04 -0700","message":"reserve uses donectx","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"25101789de51157529fb8078f3993b16e768137e","date":"2018-11-07 11:16:06 -0800","message":"Merge pull request #4841 from hashicorp/f-ui-error-handling-on-all-pages","refs":[],"body":"UI: Error handling on all pages","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ad4c26a1e3f4dd8531d4688d19245f5a13ed7c49","date":"2018-11-07 11:09:30 -0800","message":"review comments","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"873cf30af14baaaa58ed857920d30c5eb14f4deb","date":"2018-11-07 11:51:03 -0800","message":"seperate struct and proto generation","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"72755c20399914f975c63d6646311e9ce6060a0f","date":"2018-11-07 11:55:06 -0800","message":"remove unused struct field","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"2c6ea24f3c0e78a9aad1de318955431365fea22f","date":"2018-11-07 11:59:24 -0800","message":"fix test","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"37f239ea74f1ec9aef8851e57920f053f7127ddc","date":"2018-11-07 12:22:07 -0800","message":"fix race","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"b52780133be6c993fbca420f5cd6a952f4c5a789","date":"2018-11-07 13:58:32 -0800","message":"Merge pull request #4830 from hashicorp/f-device-manager","refs":[],"body":"Device Manager","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"feb133bc280e69fc9544be16c6952f7c4dbf86cd","date":"2018-11-07 16:08:05 -0800","message":"Add support for link in error containers","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"d75aa8f99a4792b5c42c2e2b2d98519f7c4eb55b","date":"2018-11-07 16:08:26 -0800","message":"Fix a bug where with-watchers wasn't bubbling the willTransition event","refs":[],"body":"The impact was the application error was no longer being nulled out,\ncausing the application error to continue to be shown after\ntransitioning.\n\nThis never happened in apps since it's not possible to transition away\nfrom the error screen.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ac43c0ab7778b261fc09ddca6cfee2fe44fd5e8c","date":"2018-11-07 16:09:23 -0800","message":"Add escape hatch links to the error page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"d49631bb8aa27918aed5b5c8d02c641fdce953ec","date":"2018-11-07 16:19:45 -0800","message":"Test coverage for error page escape hatch links","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"9ef79cd92c758029bc5018320769ceb7a199efed","date":"2018-11-07 17:07:40 -0800","message":"Correctly mark parameterized children as parameterized: true","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"5c4abbec47e07ba8c0418ad12fad4e09689a43c9","date":"2018-11-07 17:47:23 -0800","message":"typo fix","refs":[],"body":"","author_name":"Paul Giles","author_email":"pgiles@users.noreply.github.com"},{"hash":"5801b79b8101d668e697a3abfc60b32f70fff355","date":"2018-11-07 21:04:27 -0800","message":"Show the correct template for parameterized job children","refs":["b-ui-dispatched-job-page"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"6bb8e5aa58abe9526f6fab1066107479c510f628","date":"2018-10-30 18:26:23 -0500","message":"Show preemption output in plan CLI","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4c97c5ea0cfc5d49dfd8a6875faee739cb07c9ca","date":"2018-11-05 10:46:24 -0600","message":"Comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c5757f44eec7982a6a23f619ee6879a098ee1e83","date":"2018-11-06 09:52:32 -0600","message":"review feedback","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1d7ebb98eec5aeb173c30c2dd6e5b75918eabc89","date":"2018-11-08 09:04:49 -0600","message":"Fix vet error","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"8573c9feed1548e4e990ffe35b13a4701a9ad097","date":"2018-11-08 09:55:07 -0600","message":"Merge pull request #4823 from hashicorp/f-preemption-plan-cli","refs":[],"body":"show preemptions in nomad plan CLI","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"fba6cbfad619d1972be04cc81eb0036749a21e5e","date":"2018-11-08 10:56:26 -0500","message":"Merge pull request #4851 from pgiles/patch-1","refs":[],"body":"typo fix","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"66670c0f027afd9a5cc9eafea69dd30e6ac0eda1","date":"2018-11-08 10:31:19 -0600","message":"Fixes device scheduling unit tests","refs":[],"body":"Also changes the logic for score when there is more than one task\nrequesting a device. Since inter task affinities are already normalized,\nwe take the average of the scores across tasks.\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"ad1564976cba8d345dd024e2e5a3378c860245a9","date":"2018-11-08 09:48:36 -0800","message":"review fixes","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"c794e70c4d6a230364b8b36ffa8f62228a7706cb","date":"2018-11-04 10:11:34 -0500","message":"Update exec driver to match rawexec","refs":[],"body":"Update exec driver with latest patterns used by rawexec, and eliminate\naccidental diffs.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"60166374d9c50adc7c50f8c71c5a35f4ee19fbf3","date":"2018-11-07 11:53:11 -0800","message":"Add a helper functions for checking unix root","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"26fc1b140f3219fc91c18e8897cd61727b6596ba","date":"2018-11-07 13:52:08 -0800","message":"shorter health descriptions","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b06f6745a929a74436f38b86601a8d3f81d78c6a","date":"2018-11-08 10:59:31 -0800","message":"Merge pull request #4838 from dantoml/dani/fix-docs-typo","refs":[],"body":"docs: Fix broken link to cloud auto join","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"361d384651ddf8c8027520fc6139c4ada3176ea8","date":"2018-11-08 13:28:27 -0800","message":"typo fix","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"08b75d412069e42b34f983691fd740ef09605b89","date":"2018-11-08 13:31:54 -0800","message":"Merge pull request #4842 from hashicorp/b-deployment-progress-deadline","refs":[],"body":" Fix multiple bugs with progress deadline handling","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"1e3a20f0acab3bca3a020431e8d328980e247fd4","date":"2018-11-08 13:40:01 -0800","message":"Merge pull request #4847 from hashicorp/b-blocked-eval","refs":[],"body":"Blocked evaluation fixes","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"1c23bc83e24d1b9a9ff18955a8d373bb5a0f0535","date":"2018-11-08 14:27:44 -0800","message":"changelog","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"eda98fb070246fbdb9eb208dfc28eda0a2c28a04","date":"2018-11-08 17:01:58 -0600","message":"Normalize scores correctly","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"2409f72d0d42a3225d59347d2604f005bc132636","date":"2018-11-09 11:44:21 -0600","message":"Use create index as trigger condition to gc old terminal allocs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"92c1ed8c103f8d988e388c5eaa46d1a839b6d26d","date":"2018-11-09 12:21:42 -0600","message":"Merge pull request #4839 from hashicorp/b-gc-alloc-jobversion","refs":[],"body":"Remove terminal allocations associated with older job modify index","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"397235b72f3a45de18b74cb6eca66ce656e4161b","date":"2018-11-09 12:28:11 -0600","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"ad905a38b31eef54a678bc11a0bbc57ccd8fd2a1","date":"2018-11-09 12:29:12 -0600","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"82b176453168d552134e1531fa217009dfe497ce","date":"2018-11-08 22:14:27 -0500","message":"handle nil resources limits","refs":[],"body":"Config may not express resource constraints on the job!\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b0028237d5e1388648bf64b53776abb6e73be2fa","date":"2018-11-09 13:19:30 -0800","message":"Get error messages closer to Structure designs","refs":["f-ui-links-on-error-pages"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b5348aacf08140f623c3299e6488641bf93fe650","date":"2018-11-09 14:25:32 -0800","message":"Add missing module dependencies to the node adapter tests","refs":["b-ui-gracefully-handle-stat-errors"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c45efccee6143171de0c89569a49c57d73f6636f","date":"2018-11-09 14:35:48 -0800","message":"Merge pull request #4833 from hashicorp/b-ui-gracefully-handle-stat-errors","refs":[],"body":"UI: Gracefully handle stat errors","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"31045da9bedfde4a416d271718e645d6ca0bc716","date":"2018-11-09 14:36:35 -0800","message":"Merge pull request #4852 from hashicorp/b-ui-dispatched-job-page","refs":[],"body":"UI: Show the correct template for dispatched jobs","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"32954fa71e3c303fcf92ea9eb6b6e912ba26f95e","date":"2018-11-09 17:11:47 -0800","message":"Improve mirage modeling of allocations","refs":[],"body":"Pending allocations never have tasks\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"75488007bcbf18969f023be4cb15aac7baf3745e","date":"2018-11-09 18:30:53 -0500","message":"Run job deregistering in a single transaction","refs":[],"body":"Fixes https://github.com/hashicorp/nomad/issues/4299\n\nUpon investigating this case further, we determined the issue to be a race between applying `JobBatchDeregisterRequest` fsm operation and processing job-deregister evals.\n\nProcessing job-deregister evals should wait until the FSM log message finishes applying, by using the snapshot index.  However, with `JobBatchDeregister`, any single individual job deregistering was applied accidentally incremented the snapshot index and resulted into processing job-deregister evals.  When a Nomad server receives an eval for a job in the batch that is yet to be deleted, we accidentally re-run it depending on the state of allocation.\n\nThis change ensures that we delete deregister all of the jobs and inserts all evals in a single transactions, thus blocking processing related evals until deregistering complete.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"1a17741e869521c4374e8acdf53b173182b86869","date":"2018-11-09 16:43:37 -0800","message":"rawexec: Only use cgroups when running as root.","refs":[],"body":"If Nomad is not running as root, we should not try to use cgroups for pid\nfreezing.\n\nThis originally was implemented pre-driver-support in\nhttps://github.com/hashicorp/nomad/blob/v0.8.6/client/driver/raw_exec.go#L120-L130\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"1fe9203aa663d18608aa81f2b6f358f409824e59","date":"2018-11-10 10:31:10 -0600","message":"Use response object/querymeta/writemeta in scheduler config API","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"fe41b5addc530994e77103989e38f89db5d06c5b","date":"2018-11-10 17:37:33 -0600","message":"Smaller methods, and added tests for RPC layer","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"2ec4c235be9777cad0b952d60e144a086da06d81","date":"2018-11-10 19:53:47 -0600","message":"Fix failing test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"9f7dfb17a598ad657103414740b6eb5c613ed799","date":"2018-11-12 15:06:45 -0600","message":"Fix logic bug in tracking sum of matched affinity weights","refs":[],"body":"We need to track the sum of matching weights per device, but only\nchange the final return value if its the highest scoring choice\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"9405473329a83c91a1cf5c5bcf2ae47db0111007","date":"2018-11-12 16:04:27 -0500","message":"Comment public functions and batch write txn","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7eb67b0d9cf3bf922d4d0cff66dcc32aef85920e","date":"2018-11-12 13:47:07 -0800","message":"Merge pull request #4859 from hashicorp/b-rawexec-cgroups-root","refs":[],"body":"rawexec: Only use cgroups when running as root.","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"3a2d5f01785296183f15a1f530d548fd4301dcb2","date":"2018-11-12 15:50:14 -0600","message":"blank line","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"3eeb229116bf813c8e139c582ddab87b0f073e08","date":"2018-11-12 15:57:45 -0600","message":"change path to v1/scheduler/configuration","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"3c5762ba027ec273efa707389e7eeb01842e3020","date":"2018-11-12 16:54:58 -0600","message":"Merge pull request #4865 from hashicorp/b-preemption-config","refs":[],"body":"improvements to scheduler config API","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"0200000d535b16d21335b48bd824e0d0998955b9","date":"2018-11-12 16:55:23 -0600","message":"Merge pull request #4855 from hashicorp/b-device-scheduling-fixtest","refs":[],"body":"Fixes device scheduling unit tests","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"8460726980cb102133084959c9167a6bd8caff19","date":"2018-11-12 16:02:23 -0800","message":"Handle new eval being the duplicate properly","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"9d42f4d0398229db2907506c38e251dd5da48e1f","date":"2018-11-12 17:09:27 -0800","message":"Plugin client's handle plugin dying","refs":[],"body":"This PR plumbs the plugins done ctx through the base and driver plugin\nclients (device already had it). Further, it adds generic handling of\ngRPC stream errors.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"66fc70fe50d0eed5211b2b87250fc6df447958d4","date":"2018-11-12 20:59:32 -0500","message":"Merge pull request #4845 from hashicorp/r-exec-refactor","refs":[],"body":"Update exec driver to match rawexec","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"91ea405e3f215ed67ea98a874ed85ba2c63ebb8e","date":"2018-11-12 20:59:44 -0500","message":"Merge pull request #4861 from hashicorp/b-batch-deregister-transaction","refs":[],"body":"Run job deregistering in a single transaction","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"04577f7e158343a26c0853b164bce8fb0296e061","date":"2018-11-12 22:08:04 -0800","message":"executor: Fix stdout stderr copy/paste","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"13f9c80e72d0e5eefec6e53865fc557f659dd5ea","date":"2018-11-13 07:36:06 -0500","message":"Changelog job re-run fix","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6702df2106e9be76793c8c5a93cf7521fa937a94","date":"2018-11-13 10:18:54 -0500","message":"Merge pull request #4871 from hashicorp/r-job-rerun-bug-changelog","refs":[],"body":"changelog job re-run fix","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"a24fd59d4b524d1ee9ae12d05e9706973a253ade","date":"2018-11-07 18:00:34 -0800","message":"Fix java driver tests","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"cc52606a07c281a1d576f20a22fe2bca37336b6e","date":"2018-11-07 19:13:27 -0800","message":"distinguish java driver tests from others","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"416b5240f4a30a63e44a098030acffc906183b24","date":"2018-11-04 21:22:29 -0800","message":"Handle time.Duration in mock","refs":[],"body":"Mock driver config uses `time.Duration` fields but we initialize them\ninconsistently, as time.Duration sometimes and as duration strings other\ntimes.  Previously, `mapstructure` handles it and does the right thing.\n\nThis is no longer the case with MsgPack.  I could not find a good way to\nbring back old behavior without too much complexity.  `MsgPack` extended\ntypes weren't ideal here as we lose type information (e.g. int64 vs\nstring), and the input is a generic map and not a MsgPack serialization\nof duration.\n\nAs such, I went with the simple solution of declaring the config field\nas duration string, and panicing if the test doesn't pass a valid\nstring.\n\nI found this to cause the smallest change in tests, but we can\nalternatively force all to be int64 instead.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7049b4347190e209e479747c3b581d223e3932b3","date":"2018-11-05 23:31:16 -0800","message":"Adjust streaming duration","refs":[],"body":"This test expects 11 repeats of the same message emitted at intervals of\n200ms; so we need more than 2 seconds to adjust for time sleep\nvariations and the like.  So raising it to 3s here that should be\nenough.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8ccb80bcea43fe2d1dee422aaf8ec761253152a5","date":"2018-11-05 23:41:20 -0800","message":"pull alpine image needed for test","refs":[],"body":"The test requires the image to be present locally, so importing it as\npart of setup.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"73077e36fe306513abafd183da31543e472b9262","date":"2018-11-09 15:43:37 -0500","message":"Update Docker name parsing lookup","refs":[],"body":"`ParseNamed` function changed in e9f3f2cfee9d729a8642344c4fa4ea70b2d49468\nwhere became `ParsedNormalizedName` with extra checks.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2357e886ce50ff126115ffc7373930ce17d75fc6","date":"2018-11-09 15:19:08 -0500","message":"mark and skip failing consul failing tests","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f9295631c47a38ec8009742352182ed2d51f89ba","date":"2018-11-06 09:04:07 -0800","message":"Set clean config for mock driver","refs":[],"body":"The default job here contains some exec task config (for setting\ncommand and args) that aren't used for mock driver.  Now, the alloc\nrunner seems stricter about validating fields and errors on unexpected\nfields.\n\nUpdating configs in tests so we can have an explicit task config\nwhenever driver is set explicitly.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6b8c6836a9cf0e6acea94182c9a199d7e6164911","date":"2018-11-06 12:39:21 -0800","message":"Prioritize checking consumer context cancellation","refs":[],"body":"Tests expect that as soon as eventer shuts down immediately on context\ncancellations; but golang does not guarantee priority when multiple\npending channels are ready in a select statement.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9d8a71dc446d91e961d1bca8abfed5398c5235e0","date":"2018-11-07 23:37:16 -0800","message":"killing should be done with wait client","refs":[],"body":"Incidentally changed in 5b14d24bf4626bab420d00783d92bcf25e0b641e\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9933f4a45c726c1b7e7836dde4b932218da61b95","date":"2018-11-08 12:24:25 -0800","message":"Fix docker log fetching in tests","refs":[],"body":"We no longer use syslog for tracking logs so tracking them explicitly\nhere\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7ca535aa90748caff1522468cc0c4ab672a74abb","date":"2018-11-08 17:20:52 -0500","message":"increase timeout to 30 minutes","refs":[],"body":"nomad/client take very long and exceed 15m sometimes:\n\nIn https://travis-ci.org/hashicorp/nomad/jobs/452990197 :\n\n```\npanic: test timed out after 15m0s\n\ngoroutine 4739 [running]:\ntesting.(*M).startAlarm.func1()\n\t/home/travis/.gimme/versions/go1.11.2.linux.amd64/src/testing/testing.go:1296 +0xfd\n....\ngoroutine 4665 [select]:\ngithub.com/hashicorp/nomad/vendor/google.golang.org/grpc.newClientStream.func5(0xc0003dd500, 0xc000420120, 0x2b3f86295588, 0xc000496810)\n\t/home/travis/gopath/src/github.com/hashicorp/nomad/vendor/google.golang.org/grpc/stream.go:287 +0xd7\ncreated by github.com/hashicorp/nomad/vendor/google.golang.org/grpc.newClientStream\n\t/home/travis/gopath/src/github.com/hashicorp/nomad/vendor/google.golang.org/grpc/stream.go:286 +0x842\nFAIL\tgithub.com/hashicorp/nomad/client/driver\t900.036s\n```\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"572a1a205b5cdb2d07bc3a230123edb0d16cb2f1","date":"2018-11-08 22:36:25 -0500","message":"fix plugin test","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5fe433efe7843ccc548f718d91e293d01d3590e6","date":"2018-11-08 22:48:32 -0500","message":"avoid setting resource limit on rkt command","refs":[],"body":"Was accidentally modified in 5b14d24bf4626bab420d00783d92bcf25e0b641e .\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"179cdc6277988fc6e5437763ab0a20a586013262","date":"2018-11-12 21:39:11 -0500","message":"Address review comments","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9254bdb92e134517ac62fe2be74af7cc642a1d88","date":"2018-11-12 21:39:23 -0500","message":"Avoid downloading image if present locally","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5c906aa08575b4a8197073c5d02529d6823ca548","date":"2018-11-12 21:52:12 -0500","message":"convert all config durations to strings in tests","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9d6a362b948d0784366e637ac2b010b39bc96e1a","date":"2018-11-12 22:15:57 -0500","message":"Use materialized duration fields for driver config","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d575e1df2993dbe113e60508bfdef158edfea8d8","date":"2018-11-13 08:02:34 -0500","message":"Ignore apt-get update failures in CI","refs":[],"body":"We run with ~120 apt sources, and apt-get update fails if any of them is\ndown.\n\nTrue errors would be raised again at install phase as true dependencies\nfetch would fail.\n;\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6d0cd01a6a3078ffac2b946e77a0450b8e8e2e75","date":"2018-11-13 10:26:53 -0800","message":"Merge pull request #4868 from hashicorp/b-plugin-ctx","refs":[],"body":"Plugin client's handle plugin dying","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"895fdb79f1fe2a2cb3e62febe7ea4fc922696dbb","date":"2018-11-13 10:29:03 -0800","message":"Merge pull request #4867 from hashicorp/b-deployment-progress-deadline","refs":[],"body":"Blocked evaluation fixes","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"851b275afccc1f0e936c07fe28d411d3562642b5","date":"2018-11-13 16:08:26 -0500","message":"Merge pull request #4858 from hashicorp/b-fix-master-20181109","refs":[],"body":"Fix some tests in master","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"0925bfe6184af5eea425d0c5dce63405a369c1b3","date":"2018-11-13 13:28:10 -0800","message":"scheduler: Allow comparisons of nil values","refs":[],"body":"This commit allows the ConstraintChecker to test values that do not exist.\nThis is useful when wanting to _exclude_ given nodes from executing a\njob, for example, if you wanted to give canary nodes an attribute, and\nnot run critical services on them, you may specify something like the\nbelow, but not want to tag all other nodes with the inverse.\n\n```hcl\nconstraint {\n  attribute = \"${node.attr.canary}\n  operator = \"!=\"\n  value = \"1\"\n}\n```\n\nThis also requires all constraint checkers to allow for nil target\nvalues, as they will no longer be short circuited by resolving a target.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"14dab7a67f5321bfdc8e7432735782dfe0d3a861","date":"2018-11-13 17:36:13 -0500","message":"Update open graph image","refs":[],"body":"","author_name":"Jen","author_email":"lunchbag@gmail.com"},{"hash":"f16d96bdd83bb58abbaa7bbfbd78e100ba05c6d6","date":"2018-11-13 19:22:37 -0800","message":"Merge pull request #4869 from hashicorp/b-executor-stdout","refs":[],"body":"executor: Fix stdout stderr copy/paste","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"3ad663be6099bd349828a98c39bb15b68a27d54f","date":"2018-11-13 23:21:01 -0500","message":"AWS sandbox environment upgrade (#4873)","refs":[],"body":"* upgrade Nomad from 0.8.4 to 0.8.6\r\n\r\n* update deprecated nomad and vault commands\r\n\r\n* update AMI ID\r\n\r\n* add ingress rule for default fabio port and fabio UI\r\n\r\n* upgrade Consul and Vault versions\r\n\r\n* update AMI ID in README.md and terraform.tfvars\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"5697cbb183342f3b5f8d1d32d70bafc08f1a91be","date":"2018-11-14 08:36:14 -0500","message":"fix comment typos","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"df694eb3befdb0897b588d0a8968e655d2d49860","date":"2018-11-13 09:42:11 -0500","message":"Regenerate proto files with protoc-gen-go@v1.2.0","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2f4c510cb7b1b65457360f38d884c0a35dac6bf2","date":"2018-11-11 19:36:20 -0500","message":"Move Stat{Object|Value} to plugins/shared/structs","refs":[],"body":"Moving them as they may be useful for other packages/plugins besides\ndevices.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"dd47c590f05a34717935d685a014e30300b16c32","date":"2018-11-13 10:06:44 -0500","message":"Allow nullable fields in StatValues","refs":[],"body":"In state values, we need to be able to distinguish between zero values\n(e.g. `false`) and unset values (e.g. `nil`).\n\nWe can alternatively use protobuf `oneOf` and nested map to ensure\nconsistency of fields that are set together, but the golang\nrepresentation does not represent that well and introducing a mismatch\nbetween representations.  Thus, I opted not to use it.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5af9296bb49cf3e535b299a1a3ead85e3d1ad340","date":"2018-11-13 11:49:14 -0500","message":"Expose Device Stats in /client/stats API endpoint","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ba3fe15f7e1fa2e7d7ab6af3d2bdc5e9238a4e92","date":"2018-11-13 15:35:42 -0500","message":"Add Client Device Stats structs in `api` package","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"04ecb5c72a6e9bd71e2085c576127b1cb24ffa91","date":"2018-11-13 22:20:03 -0500","message":"Track Node Device attributes and serve them in API","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c212716dda40cfecec25af5b63ece9e299ebc631","date":"2018-11-13 17:24:15 -0500","message":"Add NodeResource Device types in `api` package","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ab39343b91397e95717af0cb69daa22f1ba7faa7","date":"2018-11-14 14:36:44 -0800","message":"Merge pull request #4874 from lunchbag/jen/update-share-img","refs":[],"body":"Update open graph image","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"e102b3751f840d85cd47d10dca66019c377864c9","date":"2018-11-14 20:17:11 -0500","message":"format vendor.json","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0ed1ab65b439c623d19336f5de49111983c09156","date":"2018-11-14 21:18:23 -0500","message":"Merge pull request #4872 from hashicorp/f-devices-client-stats","refs":[],"body":"Expose Device Stats in Clients API","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"276149eaa7f719223726dcbc69a1476670038b22","date":"2018-11-14 11:51:50 -0500","message":"device stats summary in `node status`","refs":[],"body":"Sample output with a mock device:\n\n```\nHost Resource Utilization\nCPU             Memory          Disk\n2651/26400 MHz  9.6 GiB/16 GiB  98 GiB/234 GiB\n\nDevice Resource Utilization\nnomad/file/mock[README.md]    511 bytes\nnomad/file/mock[e2e.go]       239 bytes\nnomad/file/mock[e2e_test.go]  128 bytes\n\nAllocations\nNo allocations placed\n```\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"85f5007043ea2edf21710d068e68539086f6125b","date":"2018-11-14 12:17:17 -0500","message":"Print verbose device in `nomad node status -stats`","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8274555d1c54a677bff264fe42a12344a79e2bef","date":"2018-11-14 14:02:04 -0500","message":"Use disk display format for devices","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5e2cdb48d45af795d2901659bc28aee6d770c681","date":"2018-11-14 22:11:59 -0500","message":"Display StatsObject nested objects as well","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9dfc27915c6b173b9bb382688d17bf39cdb8584d","date":"2018-11-14 21:23:38 -0600","message":"Initial implementation of device preemption","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e04b503dca8fac5061ac2dc03d960b4596873e42","date":"2018-11-15 11:32:22 -0600","message":"review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a71dea2ac9add2abac8101612978c0a6ebd1c99d","date":"2018-11-15 13:12:58 -0500","message":"Change misleading boolean example in env stanza coercion section","refs":[],"body":"","author_name":"Sébastien Portebois","author_email":"sportebois@gmail.com"},{"hash":"813143fee5c8a0261867e4c33597b7695b8613f5","date":"2018-11-15 12:27:32 -0600","message":"fix linting","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"3d0a45f6e57b9019de45f9ee5e2d9bdf9a66d759","date":"2018-11-13 15:57:59 -0800","message":"scheduler: Add is_set/is_not_set constraints","refs":[],"body":"This adds constraints for asserting that a given attribute or value\nexists, or does not exist. This acts as a companion to =, or !=\noperators, e.g:\n\n```hcl\nconstraint {\n        attribute = \"${attrs.type}\"\n        operator  = \"!=\"\n        value     = \"database\"\n}\n\nconstraint {\n        attribute = \"${attrs.type}\"\n        operator  = \"is_set\"\n}\n```\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"cf8bc3224d5faa50fc67c4301773aeb86906b918","date":"2018-11-13 19:07:13 -0800","message":"docs: Add is_set/is_not_set","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"5aac3047e0ec08f8168dfe882186659b977e3d4e","date":"2018-11-14 17:10:12 -0800","message":"Add changelog entry for != operator","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"6542d6de75ae968c92a7ac55fd89c9838528da88","date":"2018-11-15 14:02:22 -0500","message":"Merge pull request #4879 from hashicorp/f-node-devices-cli","refs":[],"body":"Show device stats in nomad CLI","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"60c6cb858669261473ee59119e8dcd04055a2eef","date":"2018-11-15 11:04:21 -0800","message":"Merge pull request #4875 from hashicorp/f-constraints","refs":[],"body":"scheduler: Make != constraints more flexible","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"a9c557508d20b06e8058a401956c47dd1c0abbb9","date":"2018-11-15 14:15:12 -0600","message":"update consul template","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"ca4e237d628122703cf2370eb4f6d755299d5f32","date":"2018-11-15 14:14:05 -0800","message":"gofmt -s -w command/helper_stats_test.go","refs":[],"body":"Fixes the static checks build\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"2a90a336cd466fc5eab76b2da8630029c03f7865","date":"2018-11-13 14:09:33 -0800","message":"boltdd: return error on use-after-Close","refs":[],"body":"Return the same error as boltdb instead of panic'ing.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"43b359914b36aec6985130194a57b2eb538f1f2a","date":"2018-11-05 17:39:02 -0800","message":"client: interpolate driver configurations","refs":[],"body":"Also add missing SetDriverNetwork calls.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"26211408a6cf66183eae732458e5610fcdf80a33","date":"2018-11-09 11:27:18 -0800","message":"client: turn env into nested objects for task configs","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"c4c0869a2e7d974762ec96f06547360831f1339f","date":"2018-11-09 11:27:48 -0800","message":"docs: document new interpolation behavior and options","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"b878bbf3f741705799be8e3df78fca5bcefeced5","date":"2018-11-12 10:13:25 -0800","message":"client: add new nested variables to task's hcl ctx","refs":[],"body":"The error messages are really bad, but it's extremely difficult to\nproduce good error messages without the original HCL.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"926e3dc7061ca82f606f52a07b39ff5f7bcb7324","date":"2018-11-15 16:07:16 -0800","message":"client: test more env key variations","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"2283c8fff3c090ddc8fe15323688d7d054fa9174","date":"2018-11-15 16:07:35 -0800","message":"client: remove old proxy references from comments","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"a552a0c42c05a85a93367be975f3bd5c165c5c70","date":"2018-11-15 16:07:56 -0800","message":"client/tr: add a bit of context to envbuilder errors","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"91891736496c9b17e28293393522364dd65f43f4","date":"2018-11-15 17:39:45 -0800","message":"tests: fix tests post-rebase","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"fff2d6f4d8cdc3ff18b33d3a35122a95da622d25","date":"2018-11-16 08:00:56 -0600","message":"Merge pull request #4882 from sportebois/f-update-docs-env-stanza-coercion","refs":[],"body":"Change misleading boolean example in env stanza coercion section (#4820)","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"eaa1b7b2ce9348a4f27f851cc24ea0fa0afedca3","date":"2018-11-16 14:28:36 +0000","message":"config docs: added explicit clarification, that lexicographical ordering is with respect to files in the specified folder","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"58cbafe9138182135645beb4f974fd37e31720d0","date":"2018-11-15 10:13:14 -0500","message":"Populate alloc stats API with device stats","refs":[],"body":"This change makes few compromises:\n\n* Looks up the devices associated with tasks at look up time.  Given\nthat `nomad alloc status` is called rarely generally (compared to stats\ntelemetry and general job reporting), it seems fine.  However, the\nlookup overhead grows bounded by number of `tasks x total-host-devices`,\nwhich can be significant.\n\n* `client.Client` performs the task devices->statistics lookup.  It\npasses self to alloc/task runners so they can look up the device statistics\nallocated to them.\n  * Currently alloc/task runners are responsible for constructing the\nentire RPC response for stats\n  * The alternatives for making task runners device statistics aware\ndon't seem appealing (e.g. having task runners contain reference to hostStats)\n\n* On the alloc aggregation resource usage, I did a naive merging of task device statistics.\n  * Personally, I question the value of such aggregation, compared to\ncosts of struct duplication and bloating the response - but opted to be\nconsistent in the API.\n  * With naive concatination, device instances from a single device group used by separate tasks in the alloc, would be aggregated in two separate device group statistics.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6208d532756c98fc660277a9402386a5625f9137","date":"2018-11-15 14:44:13 -0500","message":"Prepare to reuse device resources printing","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4f18086d357836d40842a84ffef4e840d7aeceed","date":"2018-11-15 14:57:15 -0500","message":"Display device stats in `nomad alloc status`","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"17eb416df70924d8fe5716e254139eb88cdfbbbe","date":"2018-11-16 10:37:39 -0500","message":"tweak whitespace in device stats output","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3cf22d2903c0338d30f05908f7e23d06dbccc4c0","date":"2018-11-16 11:28:56 -0600","message":"Pass service metadata \"external-source\" for consul UI integration","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"5003f51dc98114cb195e89b0795cb52c1ee07802","date":"2018-11-16 12:24:21 -0600","message":"Merge pull request #4889 from hashicorp/f-service-meta","refs":[],"body":"Pass service metadata \"external-source\" for consul UI integration","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"07e31669ba22c3b07556d6f2717c446d76fa9f7b","date":"2018-11-16 12:31:54 -0600","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"b0dcbb7665f9b76bc34408070157d7c2519d2f08","date":"2018-11-16 12:45:43 -0600","message":"Merge pull request #4843 from hashicorp/b-driver-env","refs":[],"body":"client: interpolate driver configurations","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"fd49039f09ac33a841637dceb37e43f46a5df051","date":"2018-11-16 17:13:01 -0500","message":"address review comments","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d8d0a55ee480a037108da530ab8c2e7d59d91437","date":"2018-11-16 17:28:17 -0500","message":"Show stable order of device attributes","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"551a13b7b68e9c78c458040f6ba2e9b4ddb94f69","date":"2018-11-16 17:30:48 -0500","message":"show Device Stats header in alloc status","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6b7953af21417c28c8f4d78e7a031f86be0d842d","date":"2018-11-16 18:04:54 -0500","message":"Merge pull request #4884 from hashicorp/f-alloc-devices-cli","refs":[],"body":"Report alloc device statistics in API and CLI","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"dce594bb6d62a179cc2bf455686cf4a7c8249ab7","date":"2018-11-16 19:52:31 -0500","message":"clarification regarding Nomad client generating token vs retrieving (#4890)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"7f2826097de9bea9f241403695936e85b694957a","date":"2018-11-16 20:32:10 -0600","message":"Fix preemption logic bug, need to group allocations by device first.","refs":[],"body":"This ensures that the set of allocations chosen for preemption all share\nthe same device where ID is <vendor/type/device>\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e8088e404b56bb84223eeb2118bb0cafaed67909","date":"2018-11-16 20:45:52 -0600","message":"Fix formatting","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c5a222bd19ea5412e4d442b6669261de94314436","date":"2018-11-17 01:10:44 -0500","message":"change instrumented webserver job file (#4897)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"654611ea9aff6167ef6bcd6098f2b46dbea1bdbe","date":"2018-11-19 12:17:36 -0800","message":"Merge pull request #4850 from hashicorp/f-ui-links-on-error-pages","refs":[],"body":"UI: Escape hatch links on error pages","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"122a8a12e8f800e364aecbd27336abd84380731d","date":"2018-11-09 17:13:08 -0800","message":"Add an empty state to the allocation detail task list","refs":["b-ui-allocation-detail-empty-state"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a1d5f127e3e17449f388d5ae2cb40b42ad6c2c90","date":"2018-11-19 12:43:39 -0800","message":"Merge pull request #4860 from hashicorp/b-ui-allocation-detail-empty-state","refs":[],"body":"UI: Allocation detail empty state","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"31f113ba4d930b6866b44627e410024a22085457","date":"2018-11-14 10:29:07 -0800","message":"client: support graceful shutdowns","refs":[],"body":"Client.Shutdown now blocks until all AllocRunners and TaskRunners have\nexited their Run loops. Tasks are left running.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"4b236cc4ce2b14efd597b64e79d40ffa7bcda5bb","date":"2018-11-14 16:08:17 -0800","message":"client.rpc: don't log errors on shutdown","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"f5f5948203037a790b468b0aa8238b29570b535b","date":"2018-11-19 17:07:59 -0800","message":"vault: fix panic by checking for nil secret","refs":[],"body":"Vault's RenewSelf(...) API may return (nil, nil). We failed to check if\nsecret was nil before attempting to use it.\n\nRenewSelf:\nhttps://github.com/hashicorp/vault/blob/e3eee5b4fb386418d10b6a248252ec6e2e05d980/api/auth_token.go#L138-L155\n\nCalls ParseSecret:\nhttps://github.com/hashicorp/vault/blob/e3eee5b4fb386418d10b6a248252ec6e2e05d980/api/secret.go#L309-L311\n\nIf anyone has an idea on how to test this I didn't see any options. We\nuse a real Vault service, so there's no opportunity to mock the\nresponse.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"616ef214d94e846560fe9140709e6f9816f7aeda","date":"2018-11-19 20:54:46 -0500","message":"Reproduce a panic related to batch GC","refs":[],"body":"Test case that reproduces a panic with the following stacktrace:\n\n```\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\n\tpanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x38 pc=0x1149715]\n\ngoroutine 35 [running]:\ntesting.tRunner.func1(0xc0001e2200)\n\t/usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:792 +0x387\npanic(0x167e400, 0x1c43a30)\n\t/usr/local/Cellar/go/1.11.2/libexec/src/runtime/panic.go:513 +0x1b9\ngithub.com/hashicorp/nomad/vendor/github.com/hashicorp/go-immutable-radix.(*Iterator).Next(0xc0003a4080, 0x17f7ba0, 0x0, 0xc0002e74a0, 0xc0003a0510, 0xc0003a0530, 0xc0003a0530)\n\t/go/src/github.com/hashicorp/nomad/vendor/github.com/hashicorp/go-immutable-radix/iter.go:81 +0xa5\ngithub.com/hashicorp/nomad/vendor/github.com/hashicorp/go-memdb.(*radixIterator).Next(0xc0003a0420, 0x1756059, 0xb)\n\t/go/src/github.com/hashicorp/nomad/vendor/github.com/hashicorp/go-memdb/txn.go:634 +0x2e\ngithub.com/hashicorp/nomad/nomad/state.(*StateStore).deleteJobVersions(0xc00028f7d0, 0x2711, 0xc0002e7680, 0xc000392100, 0xc0003a4040, 0x0)\n\t/go/src/github.com/hashicorp/nomad/nomad/state/state_store.go:1130 +0x1a1\ngithub.com/hashicorp/nomad/nomad/state.(*StateStore).DeleteJobTxn(0xc00028f7d0, 0x2711, 0x175334f, 0x7, 0xc000306810, 0x2f, 0xc000392100, 0x0, 0x0)\n\t/go/src/github.com/hashicorp/nomad/nomad/state/state_store.go:1102 +0x46c\ngithub.com/hashicorp/nomad/nomad/state.TestStateStore_DeleteJobTxn_BatchDeletes.func1(0xc000392100, 0x1777ce0, 0xc000392100)\n\t/go/src/github.com/hashicorp/nomad/nomad/state/state_store_test.go:1705 +0x1a2\ngithub.com/hashicorp/nomad/nomad/state.(*StateStore).WithWriteTransaction(0xc00028f7d0, 0xc0000d5e48, 0x0, 0x0)\n\t/go/src/github.com/hashicorp/nomad/nomad/state/state_store.go:3953 +0x79\ngithub.com/hashicorp/nomad/nomad/state.TestStateStore_DeleteJobTxn_BatchDeletes(0xc0001e2200)\n\t/go/src/github.com/hashicorp/nomad/nomad/state/state_store_test.go:1703 +0x685\ntesting.tRunner(0xc0001e2200, 0x1777138)\n\t/usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:827 +0xbf\ncreated by testing.(*T).Run\n\t/usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:878 +0x353\n```\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"cf51bc62e47eab93cad27d1eb4d3fb7780d0f760","date":"2018-11-19 20:56:32 -0500","message":"Fix a panic related to batch GC","refs":[],"body":"`deleteJobVersions` does concurrent modifications to iterated items\nwhile iterating, by deleting job versions while it's iterating on them,\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"10b073a81b44f94c03ad4e61d7fdbf56c14f89c8","date":"2018-11-19 21:08:03 -0500","message":"add a missing no errorassertion","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0f211d11d5546c7ebb942d90dbb1e0a0229c05dc","date":"2018-11-19 18:50:42 -0800","message":"webiste -> website","refs":[],"body":"","author_name":"Sevag Hanssian","author_email":"sevag.hanssian@gmail.com"},{"hash":"9d8d3e158af944a976c4aa00ede8d20630489d68","date":"2018-11-06 00:39:00 -0500","message":"docker: properly launch docker logger process","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"98b295d61713be89a78f43b8263f2ef799b2363c","date":"2018-11-06 00:39:48 -0500","message":"docker: started work on porting docker driver to new plugin framework","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"c2d94dc86acb0ef043f65ce8370de5f2b743ecc3","date":"2018-11-08 23:37:50 -0500","message":"drivers: support recoverable errors in the plugin RPC layer","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"5c777a37de31d8dd4dc2a21723efeaea74ea39f9","date":"2018-11-08 23:38:47 -0500","message":"drivers/docker: more work porting tests from old driver plugin","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"9c154d7135769e1ec497c356041a2742a57528f1","date":"2018-11-12 07:39:34 -0500","message":"drivers: added NodeResources to drivers.TaskConfig","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"902eb9475ca660083c31594888b2409b6f09995f","date":"2018-11-12 07:39:55 -0500","message":"docker: finished porting tests","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"396f6ab1fb55227262169b432b595bc83b3b426f","date":"2018-11-12 13:51:53 -0500","message":"docker: implement recover task logic","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"37ed75502e2514eb53ed06512bd3330140f8193a","date":"2018-11-14 06:20:35 -0500","message":"docker: move recoverable error proto to shared structs","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"3601e4241d1b345a4ee6aa63018682d01a16ebae","date":"2018-11-16 11:08:53 -0500","message":"plugins/driver: remove NodeResources from task Resources and use PercentTicks field for docker driver","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"0c62b9adf46f0af59072abe7d684cf9d9af56e98","date":"2018-11-16 13:52:54 -0500","message":"docker: moved fingerprint code to it's own file","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"cf69895d313a9617a658cc8544a66533e264f6fb","date":"2018-11-16 14:17:23 -0500","message":"task_runner: emit event on task exit with exit result details","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"7d09ae57cc5c45536aad1507941c7da706db1031","date":"2018-11-19 13:15:15 -0500","message":"docker: remove call to global metrics instance","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"3468880f50bdb1a7c24bab0d4f9727c67110bf90","date":"2018-11-19 15:06:07 -0500","message":"docker: remove global pull coordinator","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"455e75492c9fc2f0c9417aa9c0ebab74f22d69fe","date":"2018-11-19 15:12:30 -0500","message":"Apply suggestions from code review","refs":[],"body":"Co-Authored-By: nickethier <ncethier@gmail.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"577d4a2ea8b70be9d3428b0e4893adaee2817bd9","date":"2018-11-19 21:07:30 -0500","message":"docker: group common config into blocks","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"d7631e3b2372ff73eea11efae9534d1666f438dd","date":"2018-11-19 21:32:08 -0500","message":"docker: move volume driver options to seperate block","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"0462c8a7f8b11482077e68509533a7f22bddb033","date":"2018-11-19 21:41:25 -0500","message":"docker: remove container pointer from task handle","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"8ae89327831b6cbb3d5db985f7a5ba97a8b9d2c3","date":"2018-11-19 21:51:26 -0500","message":"docker: fix tests","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"249dbfffd2859d158216ea98523e689b5630a09f","date":"2018-11-19 22:41:14 -0500","message":"docker: move config RPCs to config.go","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"fab76c6c0b05d5b1b83350bb16760d0cb4a8a098","date":"2018-11-19 22:58:05 -0500","message":"docker: add default blocks for driver plugin config schema","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"2393f6a008d815c9f965ba5b9fceea2b5d898904","date":"2018-11-19 23:07:07 -0500","message":"docker: unexport new coordinator func","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4182e3e141e555b1faeebed5f86b40ceb789d13c","date":"2018-11-14 11:13:52 -0500","message":"nomad: add flag to disable publishing of job_summary metrics for dispatched jobs","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"af3f535f0a888e2f01277717af48af1289559cfc","date":"2018-11-14 15:02:49 -0500","message":"agent: suppose filter_default telemetry option","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"8de254c5c50d6c978d9ac4d6dea1fcd863eca27e","date":"2018-11-14 15:42:35 -0500","message":"nomad: lookup job instead of adding Dispatched to summary","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"825c2ffca98bc22d9677218b2b9374ca1953cf0c","date":"2018-11-14 16:04:03 -0500","message":"nomad: only lookup job is disable_dispatched_job_summary_metrics is set","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"19c260a4a55b29c90aeed7a79ea940ee8a10954d","date":"2018-11-14 16:04:33 -0500","message":"command/agent: additional tests for telemetry config parsing","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"1f98eed8b017482b7dd9f337799f7925058917b4","date":"2018-11-20 09:25:09 -0500","message":"Merge pull request #4905 from sevagh/fix-typo","refs":[],"body":"Fix typo in GNUmakefile","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"e8475fe86a3b976c4e724e54fd5aa0a63a232eff","date":"2018-11-20 12:09:35 -0600","message":"Merge pull request #4904 from hashicorp/b-vault-panic","refs":[],"body":"vault: fix panic by checking for nil secret","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"206d98cf0dc3289f5222e1f11b3c63560e493d9b","date":"2018-11-20 10:16:03 -0800","message":"Remove committed test output and gitignore it","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"72df87b101fee71871bd00cd3de618dc592bee79","date":"2018-11-20 13:21:39 -0500","message":"address review comments","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4dfcc80a0bd41342551b7f97a3dbe21862e538d3","date":"2018-11-20 13:34:46 -0500","message":"task_runner: use task and alloc copies instead of referencing the original pointer","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"6dfa2309c4b23038295e74e3bdb72ced77d7cd04","date":"2018-11-20 13:46:39 -0500","message":"task_runner: use NodeResources instead of deprecated struct","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"d213b1e77889392332643064e3fd2e6ec7dc023e","date":"2018-11-20 11:37:09 -0800","message":"changelog: mention #4904","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"38e9d9a7d581f5138728549d52ccd30fd8eeb9ed","date":"2018-11-20 14:15:14 -0600","message":"Merge pull request #4885 from hashicorp/f-update-consultemplate","refs":[],"body":"Vendor update consul template","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"f098c9ada38dff619fe2e163d687eaeab925cfc8","date":"2018-11-20 15:16:02 -0500","message":"Merge pull request #4903 from hashicorp/b-delete-versions-mod-while-iter","refs":[],"body":"Fix a panic related to batch GC","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"afe4c614477b7979efb8c3e2c3bcd3146a910f2c","date":"2018-11-20 14:16:37 -0600","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"582a52d100b3bba7ad965fb025496141f9f53ce1","date":"2018-11-20 14:17:28 -0600","message":"Merge pull request #4857 from hashicorp/f-affinity-docs","refs":[],"body":"docs for affinity","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"d73c2f3c8d0e966555b0ce80716fe8cb970a2834","date":"2018-11-20 21:52:23 +0100","message":"taskrunner: Return the restart delay correctly","refs":[],"body":"We were incorrectly returning a 0 duration to the taskrunner when\ndetermining when a task should restart. This would cause tasks to be\nrestarted immediately, ignoring the restart {} stanza in a users\nconfiguration.\n\nThis commit causes us to return the restart duration to the task runner\nso it may correctly delay further execution.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"2c7bea7190aea1b0770732cdccce819979f54811","date":"2018-11-20 09:49:50 -0500","message":"Add support for storage opt","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9b48b09498113337903a250bfb68ded1f7f75a5f","date":"2018-11-20 09:38:09 -0500","message":"document storage opts","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"926aa0994d05ad3f12a26260d1ea77089773962b","date":"2018-11-20 16:49:40 -0500","message":"add circleci website build","refs":[],"body":"","author_name":"Alvin Huang","author_email":"alvin@hashicorp.com"},{"hash":"b688f7de4381e0f78a4f38e150b52289d0fa4f18","date":"2018-11-20 16:49:49 -0500","message":"remove packer.json since CircleCI builds the site","refs":[],"body":"","author_name":"Alvin Huang","author_email":"alvin@hashicorp.com"},{"hash":"084693ffe0278d354c2aae6af480a8852e135986","date":"2018-11-20 16:01:57 -0600","message":"Merge pull request #4911 from hashicorp/add-circleci-master","refs":[],"body":"Add CircleCI configuration for website build","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"feaf6214f992d9140a42b946b08a57d8b22ed051","date":"2018-10-30 09:08:53 -0400","message":"Set User-Agent header when hitting Vault API","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"05d9b399423824b438103db5e77a7c4484afd160","date":"2018-10-30 10:19:25 -0400","message":"Set a 1s floor for Vault renew operation backoff","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"88c1698ef50b09edebb0f4d53245d7a80089175c","date":"2018-10-30 10:53:19 -0400","message":"Emit metric counters for Vault token and renewal failures","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f181f1a07a9d9bfefbaeaf3793bdcdab040e5751","date":"2018-10-30 12:38:32 -0400","message":"Wrap Vault API api errors for easing debugging","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0fc84f4cfb0a0602ef0bca5b88c795aa490da717","date":"2018-11-01 08:40:28 -0400","message":"address review comments","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a0921cc34ffd304d7bf95e86a0211d9fca732756","date":"2018-11-16 13:32:02 -0500","message":"More metrics for Server vault","refs":[],"body":"Add a gauge to track remaining time-to-live, duration of renewal request API call.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"887704e7044714341b827c15c000b596fc3971d1","date":"2018-11-02 16:10:56 -0400","message":"Avoid explicit precomputed stats field","refs":[],"body":"Seems like the stats field is a micro-optimization that doesn't justify\nthe complexity it introduces.  Removing it and computing the stats from\nrevoking field directly.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0816841fddad183030237575453a332ac1890f9b","date":"2018-11-02 16:28:51 -0400","message":"Populate agent-info with vault","refs":[],"body":"Return Vault TTL info to /agent/self API and `nomad agent-info` command.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"612825dd5c350314b9bdfa7589006dd1d127596b","date":"2018-11-09 11:19:59 -0500","message":"reconcile interface","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"df0cddda0600586ce4e024c5d07af832e5f471b7","date":"2018-11-09 11:34:09 -0500","message":"Track renewal expiration properly","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"91500c0823451ef5f6116445cf74e5fb5c79557f","date":"2018-11-09 13:51:19 -0500","message":"round ttl duration for users","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6445745c740ea66303ea2cc86b972aed387daeb2","date":"2018-11-20 08:54:21 -0500","message":"fix typo","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"118300ae33ca18bf4191beaece8f3fe8e1eebdb1","date":"2018-11-20 15:14:57 -0500","message":"Renew past recorded expiry till unrecoverable error","refs":[],"body":"Keep attempting to renew Vault token past locally recorded expiry, just\nin case the token was renewed out of band, e.g. on another Nomad server,\nuntil Vault returns an unrecoverable error.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3a57b9c2fee2aced5f263ea7e6844f444657b0c2","date":"2018-11-20 17:11:55 -0500","message":"nil secrets as recoverable to keep renew attempts","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d7f02ed474424d8639d0a2333d3980bd94349a61","date":"2018-11-20 18:31:49 -0500","message":"Merge pull request #4817 from hashicorp/b-vault-client-tweaks","refs":[],"body":"Vault API Client Tweaks","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ace09b3a84f4c014c5b39d70de8f2606d67cca55","date":"2018-11-20 20:33:31 -0500","message":"Apply suggestions from code review","refs":[],"body":"Co-Authored-By: nickethier <ncethier@gmail.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"fc53f5f6357ce64a4b36b279a907eaea4396ceca","date":"2018-11-20 20:41:32 -0500","message":"docker: sync access to exit result within a handle","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"66674116dc361078725f0f52732741180c628b6f","date":"2018-11-20 20:43:03 -0500","message":"Merge pull request #4844 from hashicorp/f-docker-plugin","refs":[],"body":"Docker driver plugin","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"2aa034e174f8616ba4cf82721fc5087267894604","date":"2018-11-20 21:08:27 -0500","message":"Merge pull request #4908 from hashicorp/f-docker-opts-storageopt","refs":[],"body":"Add support for docker storage options","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ef52080b0a64ec685cf3443c3f4b276b58fe979d","date":"2018-11-25 11:53:21 -0500","message":"Formatting and typo fixes","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"8cab430ac96b631d7a0007da754874c30cd77140","date":"2018-11-25 15:35:51 -0500","message":"Merge pull request #4917 from hashicorp/r-docker-plugin-followup-1","refs":[],"body":"Fix linter job","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"790fe0b1dbb814408922090bae1a8234965ccb22","date":"2018-11-16 20:36:28 +0000","message":"modified TaskConfig to include AllocID use this for volume names in drivers/rkt to address #1150","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"8a38680ae15a77e06d8376bb7c17ca99c427467e","date":"2018-11-26 15:18:57 -0500","message":"Move current telemetry page to docs (#4898)","refs":[],"body":"* move current telemetry page to docs\r\n\r\n* fix broken links to telemetry doc\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"021c0cc4bfd288c8416325d9ed7df6df144e3795","date":"2018-11-26 12:50:35 -0800","message":"client: document how AR/TR Run methods behave","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"134c04744e77d8d1654b6c581a934183c8ac3efc","date":"2018-11-26 12:51:18 -0800","message":"client/ar: remove useless wait ch from runTasks","refs":[],"body":"Arguably this makes task.WaitCh() useless, but I think exposing a wait\nchan from TaskRunners is a generically useful API.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"0efa2d24e43aa952ff1fea74d91092e7130f1b57","date":"2018-11-26 12:52:31 -0800","message":"client: reuse group instead of diy'ing it","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"f06b2a872d39f69fa12f600c4c5b433061731e51","date":"2018-11-26 12:52:55 -0800","message":"client: fix races in use of goroutine group","refs":[],"body":"The group utility struct does not support asynchronously launched\ngoroutines (goroutines-inside-of-goroutines), so switch those uses to a\nnormal go call.\n\nThis means watchNodeUpdates and watchNodeEvents may not be shutdown when\nShutdown() exits. During nomad agent shutdown this does not matter.\n\nDuring tests this means a test may leak those goroutines or be unable to\nknow when those goroutines have exited.\n\nSince there's no runtime impact and these goroutines do not affect alloc\nstate syncing it seems ok to risk leaking them.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"4b6faec9bca8186049bdfccc5d9abb90cb8e5e90","date":"2018-11-26 21:37:58 +0000","message":"drivers/rkt: updated test to include new AllocID field in TaskConfig","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"22ac0498ca4836dc8fc788e57a2a031e3a87f9cb","date":"2018-11-26 15:53:15 -0600","message":"Fix nil dereference in copy method","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"0af9e85812a295800e5cbf70741b09cfde38d59b","date":"2018-11-26 21:42:45 -0600","message":"Fix panic in test setup when task does not have resources","refs":[],"body":"This affects exec/rawexec drivers\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"9c89ea4e08e2fbf57beee1b894d3cee34ad3add6","date":"2018-11-26 16:45:01 -0500","message":"Support docker bind mounts","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"fb5ffe62de4f92e971a9999850f35e20568f29db","date":"2018-11-26 17:22:57 -0500","message":"add support for tmpfs","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"cb453e7b3efa7121b11e1c559d7e69d7d9efe5f3","date":"2018-11-27 07:19:40 -0500","message":"document bind and tmpfs options","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b4e3544ff7624e14a6973ac2a0847ddcb1589630","date":"2018-11-27 10:28:01 -0500","message":"New Nomad Vault Integration Guide (#4886)","refs":[],"body":"* add vault integration guide in guides section and move current vault integration content to docs section\r\n\r\n* complete guide with image\r\n\r\n* fix typos\r\n\r\n* rename step 6 and fix typos\r\n\r\n* fix typos and awkward phrasing along with links\r\n\r\n* fix duplicated step #\r\n\r\n* fix typo\r\n\r\n* fix links so that pages that pointed to the original vault integration content still point there\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"026f976761611d4fbcac4280f745eaff164b7296","date":"2018-11-27 09:59:57 -0600","message":"code review suggestion","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"e7257fe5bed18b376898d42ae1c674d944467701","date":"2018-11-27 10:03:11 -0600","message":"Simplify map count update logic","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"e023b367fa30678d62d753698ff9fdf64eb619a5","date":"2018-11-27 11:02:06 -0600","message":"addresses some code clarity review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"2310600d91e00ecb5f785edff5ec6783845245e3","date":"2018-11-27 16:09:13 -0500","message":"Use user provided image name to launch container","refs":[],"body":"This allows the container to be tagged with a user friendly image name\n(e.g. `redis:3.2`) rather than the image ID (e.g.\n`sha256:87856cc39862cec77541d68382e4867d7ccb29a85a17221446c857ddaebca916`).\n\nUseful for human debugging, as well as some debugging and image scanning\ntools.\n\nThis risks two bad changes:\n1. Discrepancy in image resolution between docker and Nomad's image\nloader.\n  * I checked the image creation paths in Nomad, and noticed that we\neither pulled the image or inspect the image with the user provided\nname.\n\n2. A race in image tagging where the tag is modified between image\nloading and container creation.\n  * I, personally, don't think this case is cause for concern, as it is\nanalogous to the task running a bit later.  As long as the image is\nstill present, creating the container should be good.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5d6d4bf2906d36175000f912420dd50d9de48285","date":"2018-11-27 15:55:15 -0600","message":"Merge pull request #4883 from hashicorp/f-graceful-shutdown","refs":[],"body":"Support graceful shutdowns in agent","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"6d49163b1217491133907eab11cf48e07d827fbe","date":"2018-11-16 17:29:25 -0800","message":"client: emit last sent alloc to new listeners","refs":[],"body":"Fixes a deadlock where the allocwatcher would block forever waiting for\nan update from a terminal alloc.\n\nMade the broadcaster easier to debug as well.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"17a611bf9859fb7006a881e0a9d8d2204b2b5e1f","date":"2018-11-19 16:13:04 -0800","message":"client: check if prev alloc is already terminated","refs":[],"body":"This is a defensive fast-path as 7c6aa0be already fixed the deadlock.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"ff7df70f32539f6e9b285b1e030ceba797c4a1e5","date":"2018-11-19 16:33:24 -0800","message":"client: fix send-after-close in broadcaster","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"9e1d51659b9f82c04ca2badd48bd4f99d99f1403","date":"2018-11-27 16:03:15 -0600","message":"Update client/structs/broadcaster.go","refs":[],"body":"Co-Authored-By: schmichael <michael.schurter@gmail.com>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"748448970bfa2ec65a7dcb08e87e8e3438e77ed4","date":"2018-11-27 14:11:32 -0800","message":"client: comment on importance of chan ops ordering","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"d361015562575a0e636021611957b62cd65e3d59","date":"2018-11-27 23:55:54 +0100","message":"Merge pull request #4909 from hashicorp/b-restart-delay","refs":[],"body":"taskrunner: Return the restart delay correctly","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"f84045098cc76ee45d492aa7359bc5c766f92c91","date":"2018-11-27 23:52:24 +0000","message":"change to docs in the driver proto to reflect standard pattern","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"e3108507c55210777093f862a01c916870cb78ce","date":"2018-11-27 18:55:00 -0500","message":"Merge pull request #4891 from hashicorp/b-1150-rkt-volume-names","refs":[],"body":"drivers/rkt: fix invalid volumes","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"518d03d7cdc3c32f337a0297b2da74b533bb177a","date":"2018-11-27 16:33:55 -0800","message":"fix mispelings","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"3a61c2bb37ed24b13844ce4953a6777ad37f5400","date":"2018-11-27 16:34:01 -0800","message":"fix test breakage caused by rebase","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"e660046f06d0b396e8870bea60ae0dc02c5c3562","date":"2018-11-27 19:07:16 -0600","message":"Merge pull request #4896 from hashicorp/b-prevalloc-deadlock","refs":[],"body":"Fix deadlock in previous alloc watcher by emitting last alloc update","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"60aadc853bbf84730c2fea0452769e9f1121e8d2","date":"2018-11-27 17:24:23 -0800","message":"gofmt -s -w drivers/rkt/driver_test.go","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"429c5bb885bfc9a0699d2f3634d611c691f70046","date":"2018-11-16 15:29:59 -0800","message":"Device hook and devices affect computed node class","refs":[],"body":"This PR introduces a device hook that retrieves the device mount\ninformation for an allocation. It also updates the computed node class\ncomputation to take into account devices.\n\nTODO Fix the task runner unit test. The environment variable is being\nlost even though it is being properly set in the prestart hook.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"a13607f2d9d6f706ccefb44e37666906ffe7243d","date":"2018-11-27 11:53:47 -0800","message":"client: properly support hook env vars","refs":[],"body":"The old approach was incomplete. Hook env vars are now:\n\n * persisted and restored between agent restarts\n * deterministic (LWW if 2 hooks set the same key)\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"c7b4ee1546400599163292cf7288e292598b6297","date":"2018-11-27 16:38:34 -0800","message":"assume that slices contain only non-nil items","refs":[],"body":"","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"b959d9831c8b8320eb7ae0f83fb253defdc6bcbc","date":"2018-11-27 16:50:42 -0800","message":"add nil check around task resources in device hook","refs":[],"body":"Looking at NewTaskRunner I'm unsure whether TaskRunner.TaskResources\n(from which req.TaskResources is set) is intended to be nil at times or\nif the TODO in NewTaskRunner is intended to ensure it is always non-nil.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"08349b5a94e6a4ea50b8443f744bc5617fe833ea","date":"2018-11-25 11:55:01 -0500","message":"Update go-lxc library to handle LXC 3.0","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"90daa8b2d334e5e0793b87b8323a2a857cae8358","date":"2018-11-25 11:55:01 -0500","message":"Fixes in old lxc driver","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"b5462476268b255c8f65a926f1f5e96af2fa73f8","date":"2018-11-25 11:55:01 -0500","message":"Add Driver Plugin for LXC","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"aa28f71bbe34f2201e8e10fb914d0d5714f2b1d0","date":"2018-11-27 21:39:43 -0500","message":"address review comments","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"4922256170d737db18c0a16e6f2dadb6ef0346af","date":"2018-11-27 22:06:42 -0500","message":"Merge pull request #4918 from hashicorp/f-lxc-driver","refs":[],"body":"Add LXC driver","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"5b11495b31faa187eb7f2d2621e4b9626628da21","date":"2018-11-26 23:40:55 -0500","message":"client/plugin: add generic plugin mananger interface and orchestration","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"6ead1a8f7293b5748b23e73b9b91c67ca862c2c2","date":"2018-11-27 16:48:59 -0500","message":"client/plugin: lint/spelling errors","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"635205221102a662924c173ea0f331c53664df79","date":"2018-11-27 22:36:55 -0500","message":"client/plugin: remove println from plugin group func","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"829bf74aa8eafd8c4e241401135fe92e24515e7d","date":"2018-11-20 18:30:39 -0600","message":"modify fingerprint interface to use typed attribute struct","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"d36ba880a38b8e5c04fdf56933519cf377d65e19","date":"2018-11-26 14:44:39 -0600","message":"Fix docker driver to use new fingerprint typed attributes","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"27fb643f5ef70b96d696d6abd91989e933d1f242","date":"2018-11-28 10:09:10 -0600","message":"Fix LXC driver fingerprint to use typedattributes","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"76f27a111d68fd6c7fbb53a6966583202aa87360","date":"2018-11-28 11:05:35 -0600","message":"Fix failing lxc test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"8cdce8b2571f0f5d6943cf8c8e076b248ab4e492","date":"2018-11-28 12:10:43 -0600","message":"Merge pull request #4894 from hashicorp/f-device-hook","refs":[],"body":"Device hook and devices affect computed node class","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"22ddb4d18d1ae07ff62610a5db69f1d0d9a0b733","date":"2018-11-28 13:56:17 -0600","message":"Fix lxc test panic","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"be65442002303c81831c4e0402dbf108eede18f0","date":"2018-11-28 14:18:28 -0600","message":"Merge pull request #4919 from hashicorp/f-fingerprint-attribute-type","refs":[],"body":"Modify fingerprint interface to use typed attribute struct","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"72ca56dabe54dcdd3224a9ce6cd15482b9bdb2e8","date":"2018-11-28 22:19:48 +0000","message":"testing: in MkAllocDir, do not update TaskConfig with All() from the task builder, just with Env() (because it pollutes environment variables with node attributes and fails the rkt tests)","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"97c9e42fbed0d93e83ea64b0a741bc1800cdd204","date":"2018-11-28 22:17:04 -0500","message":"Merge pull request #4922 from hashicorp/f-drivermananger","refs":[],"body":"add generic plugin manager interface and orchestration","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"6f2502e803ce8254cb45a162792a0e74eee0fb94","date":"2018-11-29 09:18:10 -0500","message":"Merge pull request #4932 from hashicorp/b-1172-rkt-env-vars","refs":[],"body":"change to testing utilities to fix rkt tests","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"f3853f11daa51336a2d46d883b1aff6feeddc7ec","date":"2018-11-29 09:09:55 -0500","message":"vault: protect against empty Vault secret response","refs":[],"body":"Also, fix a case where a successful second attempt of loading token can\ncause a panic.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4dfd952e058d1076bfd128cd052cfd8b9ebfe639","date":"2018-11-29 15:37:26 +0100","message":"make: Fix invocation of vault e2e test","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"e78c4365a703a0c322c334055c9128807344b27f","date":"2018-11-29 10:35:58 -0500","message":"Merge pull request #4937 from hashicorp/b-vault-panic","refs":[],"body":"vault: protect against empty Vault secret response\r\n\r\nFixes #4921\r\n\r\nSadly, we don't have proper mechanism to mock Vault client, so not sure how to best test this.\r\n\r\nI inspected the Vault client interactions, specially for cases where returned value is nil even if the error is also nil.  I believe we covered all correctly now:\r\n* [`v.client.Sys().InitStatus()`](https://github.com/hashicorp/nomad/blob/f3853f11daa51336a2d46d883b1aff6feeddc7ec/nomad/vault.go#L427) - the value is non-nil boolean\r\n* [`v.client.Sys().CapabilitiesSelf(path)`](https://github.com/hashicorp/nomad/blob/f3853f11daa51336a2d46d883b1aff6feeddc7ec/nomad/vault.go#L812): Capabilities handles empty bodies in [`hasCapability`](https://github.com/hashicorp/nomad/blob/f3853f11daa51336a2d46d883b1aff6feeddc7ec/vendor/github.com/hashicorp/vault/api/sys_capabilities.go#L43-L45) - also the `nil` array is handled with proper fail-safe default.\r\n* [`v.client.Logical().Read(fmt.Sprintf(\"auth/token/roles/%s\", role))`](https://github.com/hashicorp/nomad/blob/f3853f11daa51336a2d46d883b1aff6feeddc7ec/nomad/vault.go#L834-L840) handles when `rsecret` is nil\r\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"c5905a9fc9498f522a0fab01bd3939aa3bb483cd","date":"2018-11-29 14:35:39 -0500","message":"fix step 5 broken link (#4939)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"ac8adc2ca72dfd9e4d3c7b151e9575d437cb114c","date":"2018-11-29 21:15:06 +0100","message":"Merge pull request #4938 from hashicorp/b-fix-make","refs":[],"body":"make: Fix invocation of vault e2e test","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"69e6b0ea215cafca87afbc178b2002e2b68ece3c","date":"2018-11-29 22:27:39 -0500","message":"nomad: fix hclog usage","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"bff6484df3e9c956e9adcad74da25b2c9b8fc765","date":"2018-11-29 22:27:47 -0500","message":"Merge pull request #4906 from hashicorp/f-metric-prefix-master","refs":[],"body":"Port metric prefix filtering to master","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"6756ffd05211bfe4cba79374c71699622ced2f13","date":"2018-11-28 16:41:59 +0100","message":"drivers: Move client/drivers/env to drivers/shared/env","refs":[],"body":"As part of deprecating legacy drivers, we're moving the env package to a\nnew drivers/shared tree, as it is used by the modern docker and rkt\ndriver packages, and is useful for 3rd party plugins.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"d2136e0aa7c5a0df57b9877c7db29923156a397d","date":"2018-11-28 17:05:10 +0100","message":"drivers: Move client/drivers/executor to drivers/shared/executor","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"23197ec6b45527c91dd5fcbbd6418ddad122c30d","date":"2018-11-28 17:29:57 +0100","message":"drivers: Create drivers/shared/structs","refs":[],"body":"This creates a drivers/shared/structs package and moves the buffer size\nchecks into it.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"c36bc2ce9ba345efe8e6817be24c23731c869f5f","date":"2018-11-29 00:15:13 +0100","message":"client: Remove test dependency on client/driver","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"bacd6175f5e71b8e61216d06dee73a5b35529879","date":"2018-11-29 00:23:07 +0100","message":"client: Migrate DriverStats optout to drivers/shared/structs","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"eeb0bbae9cd920124eb1c890ddd7200f851c458b","date":"2018-11-29 00:25:33 +0100","message":"client: Move driver/logging to logmon/logging","refs":[],"body":"The logging package is used by logmon and the legacy mock_driver. Because the\nlegacy drivers are going away, I'm moving it here to signify its actual\nownership.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"5050c5ffedbc48ba04a53431364a185fd8cbb2f4","date":"2018-11-29 00:49:00 +0100","message":"command: Remove Extraneous field in nodedrain test","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"d4ef3b68d938185984102d2f8cd4fb5f122cb9ae","date":"2018-11-29 00:49:37 +0100","message":"driver: Flatten SetEnvvars into taskdirhook","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"75d333fe024fb9bd5236dd0495ef7ab64968e45d","date":"2018-11-29 14:33:39 +0100","message":"client: Move executor plugins into own package","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"db31a9cd991a7f6cad79dc802b6ff31375abac68","date":"2018-11-29 14:58:36 +0100","message":"client/driver: Vendor setEnvvars into docker_test","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"5262e42d62db381ba4d48430cf6679d834229c03","date":"2018-11-29 14:59:53 +0100","message":"fixup: executorplugin: fix rkt build","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"9dedec5378eda12581751cf7eb0e1dcf86c9d942","date":"2018-11-29 16:39:27 +0100","message":"nomad: Remove on-submission job validation","refs":[],"body":"With the introduction of driver plugins, we're temporarily relying on\n_run time validation_ of driver configurations, rather than submission\ntime.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"9d4329b57ac5490cb4c474e8ff1b289e1a4b3104","date":"2018-11-29 16:45:19 +0100","message":"client/driver: Remove package","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"756325bcbd9836bd699fcfe326019ae5bec18312","date":"2018-11-30 10:56:45 +0100","message":"client: Merge driver/shared/structs and client/structs","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"17d14d7f520349c68b9ebfc8470fc34901c78677","date":"2018-11-30 10:59:23 +0100","message":"executors: Unify go-plugin handshake","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"ca91d503edfea2da3b82ff3f8538ee6fc15dc396","date":"2018-11-30 11:01:09 +0100","message":"Revert accidental changes to vendor/","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"03db4cf82d4d5a9bc23595a40c468c0fa486cdf5","date":"2018-11-30 12:18:39 +0100","message":"client: Rename drivers/shared/env => client/taskenv","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"fe238dc6e312313a38184879454110fc5ee3b357","date":"2018-11-30 07:25:56 -0500","message":"docs: Use valid docker bind propagation field","refs":[],"body":"Co-Authored-By: notnoop <mahmood@notnoop.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"5c354ad8faf07d8c18e998ef3f0255d20885e4c4","date":"2018-11-30 07:27:17 -0500","message":"Merge pull request #4924 from hashicorp/f-docker-mounts","refs":[],"body":"Support bind and tmpfs docker mounts","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ef424132d0239aa62c7470fb3355481a526f357e","date":"2018-11-30 07:27:39 -0500","message":"Merge pull request #4926 from hashicorp/f-docker-image-ref","refs":[],"body":"Use user provided image name to launch container","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"b8b4ce2fa6bde58768d9f20544f8d6e157b23898","date":"2018-11-30 13:38:06 +0100","message":"Merge pull request #4936 from hashicorp/f-legacy-refactor","refs":[],"body":"Refactor and repackage client/driver","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"acae110c7bf3ebafbb364fd0e4af0a2324e15395","date":"2018-11-30 13:14:57 -0500","message":"remove redirects for vault-integration docs (#4943)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"8261f3ebf74e4cb8f1823569964c01eee9045bf4","date":"2018-12-01 07:46:34 -0500","message":"Update changelog (#4942)","refs":[],"body":"Batch update for the PRs I recently merged.","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"da48a7eab317a498c8f5bdff93068968bd43184a","date":"2018-12-01 17:10:39 +0100","message":"client: Move fingerprint structs to pkg","refs":[],"body":"This removes a cyclical dependency when importing client/structs from\ndependencies of the plugin_loader, specifically, drivers. Due to\nclient/config also depending on the plugin_loader.\n\nIt also better reflects the ownership of fingerprint structs, as they\nare fairly internal to the fingerprint manager.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"8a71b21fbee949c989ff20607f5a4560b829f809","date":"2018-11-27 20:20:53 +0100","message":"testfix: Fix import cycle in allocdir tests","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"1c98fdf93540afaf2294c4675b17238717287131","date":"2018-11-27 20:03:58 +0100","message":"plugins: Move driver testing support to subpackage","refs":[],"body":"this allows us to drop a cyclical import, but is subobptimal as it\nrequires BaseDriver tests to move. This falls firmly into the realm of\nbeing a hack. Alternatives welcome.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"113205318c2e92267d675a9bad7a1be033accb49","date":"2018-11-27 20:04:43 +0100","message":"plugins: Add support for serving driver plugins","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"4d5593921c037504e406967c7438716fce471c88","date":"2018-12-02 01:03:44 +0300","message":"no need to double the work","refs":[],"body":"","author_name":"githubfoam","author_email":"lequestionis@gmail.com"},{"hash":"4afd512f45372800eb0ca3ff5da10458a8d1989d","date":"2018-12-03 08:31:41 -0600","message":"use structured logging everywhere consistently","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"813f0a22828602b9786d04d3787e539597a67f8c","date":"2018-12-03 10:41:01 -0500","message":"libcontainer to manage /dev and /proc (#4945)","refs":[],"body":"libcontainer already manages `/dev`, overriding task_dir - so let's use it for `/proc` as well and remove deadcode.\r\n\r\n\r\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"5b3953275992a0b7c91a2b3990a4fedbf06828bd","date":"2018-12-03 11:16:35 -0600","message":"Add guards around subtracting summary count","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"56bd4828807e4581a56d9f71f4612c43069e9d2f","date":"2018-12-03 11:17:08 -0800","message":"Merge pull request #4947 from githubfoam/update-demo-vagrantfile","refs":[],"body":"no need to double the work","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"cd8c5c55bd60abc4cd2865e731b903904e421a5f","date":"2018-12-03 20:48:19 +0100","message":"Merge pull request #4925 from hashicorp/f-driver-plugins-dani","refs":[],"body":"Third Party Driver Plugins Support","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"87c12861729d5b575dd81154746df3c1a7c08b8d","date":"2018-12-01 18:39:24 -0500","message":"Test Stopping a multi-process exec","refs":[],"body":"Ensure that exec children processes get killed as well.\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"781d8558f29baac6b9165605f8e34b54f2a66ecf","date":"2018-12-01 18:42:02 -0500","message":"Kill all container processes on shutdown","refs":[],"body":"Currently, libcontainer-based executor, upon shutdown, kills the\ncontainer initial process.  The children of the killed process remain\nrunning, and the executor is never marked as terminated until they do.\n\nAlso, fix a case where we treat processes as successful, when\n`proc.Wait()` fails.  In some attempts, I was getting \"waitid no child\nprocesses\" errors and such error shouldn't get process to be considered\nsuccessful.\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"104bbf78d97617562370e435e1f8b2dea15eb4af","date":"2018-12-03 18:49:12 -0800","message":"consul: fix script checks exiting after 1 run","refs":[],"body":"Fixes a regression caused in d335a82859ca2177bc6deda0c2c85b559daf2db3\n\nThe removal of the inner context made the remaining cancels cancel the\nouter context and cause script checks to exit prematurely.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"fc406801634ff368dbc0096243c9d9d449a0d724","date":"2018-12-03 23:08:52 -0500","message":"Fix docker tests","refs":[],"body":"Some tests have containers that die almost immediately, and may die\nand cleaned up before `driver.WaitUntilStarted` runs.\n\nThe causes for container dying seems special for each test:\n* TestDockerDriver_Cleanup: `hello-world` image just emits a message and exits immediately\n* TestDockerDriver_ForcePull_RepoDigest: the busybox image in `TestDockerDriver_ForcePull_RepoDigest` test didn't support `-p 0` argument\n* TestDockerDriver_Entrypoint: with the entrypoint being `/bin/sh -c`, the command needs to be the entire string; otherwise, it ignores the comments\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"383c85ae6faa4eb1fa81d3e10bebcf8ba3320f0c","date":"2018-12-03 20:26:31 -0800","message":"consul: add ScriptExecutor context wrapper","refs":[],"body":"Since d335a82859ca2177bc6deda0c2c85b559daf2db3 ScriptExecutors now take\na timeout duration instead of a context. This broke the script check\nremoval code which used context cancelation propagation to remove\nscript checks while they were executing.\n\nThis commit adds a wrapper around ScriptExecutors that obeys context\ncancelation again. The only downside is that it leaks a goroutine until\nthe underlying Exec call completes or timeouts.\n\nSince check removal is relatively rare, check timeouts usually low, and\nscripts usually fast, the risk of leaking a goroutine seems very small.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"5f124c7ce3dbfb2aaa270dbbc2fa59ca60ebcfcc","date":"2018-12-04 08:57:54 -0500","message":"Update LXC with drivers/testutils changes (#4951)","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"f6efac6c1225d375a34fc3cbbdc1f559b5d4e1d0","date":"2018-12-04 09:04:04 -0500","message":"no t.Parallel() in excutor table driven tests (#4948)","refs":[],"body":"When `t.Parallel()` is used inside a `t.Run()` sub-set, the closure\r\ndoesn't behave as expected, and some cases effectively get skipped.\r\nMore details can be found in\r\nhttps://gist.github.com/posener/92a55c4cd441fc5e5e85f27bca008721","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"2f8b1eb5eb8845001920e2b5b758b383a4bf0f44","date":"2018-12-04 09:27:37 -0500","message":"server/nomad: Lock Vault expiration tracking","refs":[],"body":"`currentExpiration` field is accessed in multiple goroutines: Stats and\nrenewal, so needs locking.\n\nI don't anticipate high contention, so simple mutex suffices.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8f7b78af0c581516c4917a677970b33abaf99cb7","date":"2018-12-04 08:52:53 -0500","message":"tests: don't assert in WaitForResult","refs":[],"body":"WaitForResult expects body to fail and retries few times before giving\nup.  Assertions inside the testfn body causes it to terminate abruptly\nwithout retrying.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2c9b6cd7c4c92dd8bb05fec2547b97c871e00fc7","date":"2018-12-04 11:23:26 -0500","message":"drivers/rkt: use image isolation for rkt","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d1cc66ae493f6381740f22f801e6b766651041a6","date":"2018-12-04 16:49:35 +0000","message":"Add Reference Architecture and Deployment Guide (#4768)","refs":[],"body":"* Add Nomad RA\r\n\r\n* Add deployment guide and nav\r\n\r\n* Deployment Guide update\r\n\r\n* Minor typo fixes\r\n\r\n* Update diagrams\r\n\r\n* Fixes for review\r\n\r\n* Link fixes and typo fix\r\n\r\n* Edits following review\r\n\r\n- Update image text from \"zone\" to \"datacenter\" to match Nomad terminology\r\n- Clean up text based on Preetha's feedback\r\n\r\n* Text updates\r\n\r\nBased on feedback from Rob\r\n\r\n* Update diagrams\r\n\r\n* fixing spelling\r\n\r\n* Add suggestions from Preetha and Omar\r\n","author_name":"Dan Brown","author_email":"roooms@gmail.com"},{"hash":"6a5238eb48d2c10b59341e0ed0e121aee2300273","date":"2018-12-04 11:50:59 -0500","message":"tests: stop integration tests tasks explicitly","refs":[],"body":"Also update the new recommended `nomad job` subcommands\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e5d125e8514bb116dab93da6d1670fe00fc78e48","date":"2018-12-04 12:52:58 -0600","message":"Merge pull request #4949 from hashicorp/b-neg-running-summary","refs":[],"body":"Add guards around subtracting summary count","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"92b57036a8fe26d0f8812b230837a3b090aeecbe","date":"2018-12-04 14:00:45 -0500","message":"driver/rkt: use rkt environment","refs":[],"body":"The rkt command itself needs an environment with PATH set to find iptables.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e9dc31c68f69ecfe9c18e4224790be3980396f69","date":"2018-12-04 18:57:14 -0500","message":"executor: Keep 0.8.6 exit code for wait() failures","refs":[],"body":"0.8.6 uses exit code 1 when `proc.Wait()` fails: https://github.com/hashicorp/nomad/blob/v0.8.6/client/driver/executor/executor.go#L442\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"615c525cf6b06321fe3a9404e851b2e6a02777d1","date":"2018-12-04 19:46:41 -0500","message":"Merge pull request #4959 from hashicorp/fix-rkt-tests-20181204","refs":[],"body":"tests: fix rkt tests","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"661dc4b386ab4dc1030cdadfddec692ad8d57419","date":"2018-12-04 19:46:59 -0500","message":"Merge pull request #4956 from hashicorp/b-vault-client-tweaks-followup","refs":[],"body":"server/vault: Lock Vault expiration tracking","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"7a49e9b68e519050a0c2ef0b67c33503bfbc51be","date":"2018-12-04 19:35:20 -0500","message":"drivers/exec: refactor stop/kill tests","refs":[],"body":"Simplify the tests to do all assertions within the main goroutine and\naccount for status propagation delay.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"65e9b3b8be7ea44a4bc533140dfad5bba7293480","date":"2018-12-04 14:50:59 -0500","message":"refactor device manipulation","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"04af0970084bb1c1b96910a5846d42ef4efe8828","date":"2018-12-04 16:46:16 -0500","message":"driver/docker: honor plugin devices","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"467930f650d123322df15f877607fd00a9fce820","date":"2018-12-05 11:03:56 -0500","message":"executor: use grpc instead of netrpc as plugin protocol","refs":[],"body":" * Added protobuf spec for executor\n * Seperated executor structs into their own package\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"2d33d48980ad53787e5185de72ec20e2be2bbd92","date":"2018-12-05 11:04:18 -0500","message":"executor: update driver references","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"8690d0ae75ec67f20c683a63accb307c4653484c","date":"2018-12-05 11:07:48 -0500","message":"executor: update test references","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"5a98dfa493702aa5dd7260616d470f7b077e97b6","date":"2018-12-05 13:01:12 -0800","message":"Don't GC running but desired stop allocations","refs":[],"body":"This PR fixes an edge case where we could GC an allocation that was in a\ndesired stop state but had not terminated yet. This can be hit if the\nclient hasn't shutdown the allocation yet or if the allocation is still\nshutting down (long kill_timeout).\n\nFixes https://github.com/hashicorp/nomad/issues/4940\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"8b624340ad94592d9de7c8d354ed83dec3fb8e01","date":"2018-12-05 14:27:07 -0800","message":"Fix various bugs with task events","refs":[],"body":"Fixes the following:\n* Emitting events when the task fails to start\n* Don't double emit events on task shutdown (nomad stop)\n* Don't emit a OOM kill metric unless actually OOM'd\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"d7dbf14c463d3e68022ad28b52b92425bed5d760","date":"2018-12-05 14:43:50 -0800","message":"Merge pull request #4966 from hashicorp/b-failure-event","refs":[],"body":"Fix various bugs with task events","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"104be1cad6bd58db564db8c5e85c40e29b543e33","date":"2018-12-05 22:07:44 -0800","message":"Grow the default 0 to 1 bounds to the domain of the data when necessary","refs":["b-ui-stat-charts-can-escape-canvas"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"62ac40ab099bee69f3208dc9f74088aae5196604","date":"2018-12-04 18:16:39 +0100","message":"allocrunner: Basic test alloc runner","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"419ae3299cac4375112bca2c7f937dfb454c2f20","date":"2018-12-04 18:16:50 +0100","message":"client: Re-enable GC tests","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"f3c057d7e01e4257cfbcae8e71730693e53a89a9","date":"2018-12-05 16:24:06 +0100","message":"client/gc: Replace GC integration test with unit","refs":[],"body":"The previous integration test was broken during the client refactor, and\nit seems to be some sort of race with state updating.\n\nI'm going to try and construct a replacement test as part of work on\nperformance, but for now, the underlying behaviour is still being\ntested.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"12dc1877790dce6687111a3bcdd00bdbd1275a9c","date":"2018-12-06 10:56:37 -0800","message":"Merge pull request #4967 from hashicorp/b-ui-stat-charts-can-escape-canvas","refs":[],"body":"UI: Keep line charts in their canvases at all times","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"75ac7c4be0fcd9a2389b2c4bbe44cd88a08a9d1c","date":"2018-12-06 12:30:31 -0800","message":"Make alloc health watcher a postrun hook rather than shutdown hook","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"5fd8d3fe681c791693e36ae98b12d67770d2a116","date":"2018-12-04 07:31:30 -0500","message":"tests: ensure image is loaded as test setup","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"a0a58473157d2ea3069973c51d11e834d7f7fe37","date":"2018-12-06 15:44:08 -0500","message":"fixup: add missed docker utils test","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bfa2854c8b323ce3d5c3f43c9f15551d8bba7def","date":"2018-11-28 11:57:38 -0500","message":"driver/lxc: mount plugin devices","refs":[],"body":"Also, LXC requires target paths to be relative.  Container paths in LXC\nbinds should never be absolute paths, so we strip any preceeding `/`,\neven if a user sets one.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8c5e2e39a48d8b528a4c4dfb3401f6f154de715b","date":"2018-11-28 14:13:23 -0500","message":"driver/rkt: mount plugin devices","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"b78130eaaf27170f4da579c6bdeb147ddc7210fc","date":"2018-12-04 21:00:54 -0500","message":"Use absolute path in example device plugin","refs":[],"body":"deviceDir is used for specifying mount/device host paths, and those\nshould be absolute paths.\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"f6e2687f5b936088996a22d75940659b476ae528","date":"2018-12-06 15:04:37 +0100","message":"gc: Fix maxallocs integration test","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"aef1c9dc963bd446aedce96ffc8955b0066e386c","date":"2018-12-06 16:41:33 -0500","message":"Merge pull request #4955 from hashicorp/fix-docker-tests-20181203","refs":[],"body":"Fix docker driver tests","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"e668e55fa5238000fa66cc6a1309fa53dd47f2ca","date":"2018-12-06 23:18:36 +0100","message":"Merge pull request #4960 from hashicorp/dani/b-gc-tests","refs":[],"body":"Re-enable Client GC tests","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"0953d913ed2aa31998534a4d9931ca7f812b4dc3","date":"2018-12-06 15:09:26 -0800","message":"Deprecate IOPS","refs":[],"body":"IOPS have been modelled as a resource since Nomad 0.1 but has never\nactually been detected and there is no plan in the short term to add\ndetection. This is because IOPS is a bit simplistic of a unit to define\nthe performance requirements from the underlying storage system. In its\ncurrent state it adds unnecessary confusion and can be removed without\nimpacting any users. This PR leaves IOPS defined at the jobspec parsing\nlevel and in the api/ resources since these are the two public uses of\nthe field. These should be considered deprecated and only exist to allow\nusers to stop using them during the Nomad 0.9.x release. In the future,\nthere should be no expectation that the field will exist.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"f555dc3f67730afc2cbb54aaba70aa80d6118ac8","date":"2018-12-06 16:17:09 -0800","message":"Warn if IOPS is being used","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"0087a51a7ade86caa22b67e1007878864e68a81c","date":"2018-12-06 20:54:14 -0500","message":"executor: remove structs package","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"13b582fcfb717fa201fcf592de3482fe63b4019b","date":"2018-12-06 21:13:45 -0500","message":"executor: merge plugin shim with executor package","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"224c68860da73ab462029f7ace1a935509f45084","date":"2018-12-06 21:22:02 -0500","message":"executor: use drivers.Resources as resource model","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"ff1990064bc65ad3b1188754e3f4814bc2afaa6f","date":"2018-12-06 21:33:20 -0500","message":"executor: fix broken non-linux build","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"9e3c2492e55e23a3de2c251d372d342272a8cea9","date":"2018-12-06 21:39:53 -0500","message":"executor: fix tests","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"6b39bb33b6923bcd655f8709c00e97a952035f7f","date":"2018-12-06 21:42:38 -0500","message":"Merge branch 'master' into f-grpc-executor","refs":[],"body":"","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"379e79ceff5e2a44c8d76893d0054ec89212451a","date":"2018-12-05 11:33:03 -0500","message":"Vendor libcontainer/devices","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"c74e2d0243a1b5b878fc2cfa867282dba2052b64","date":"2018-12-07 10:32:03 -0500","message":"Merge pull request #4933 from hashicorp/f-mount-device","refs":[],"body":"Mount Devices in container based drivers","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"b91fa87d31655560527d48d9e09415b99999ebca","date":"2018-12-07 18:05:53 +0100","message":"Recover from any possible io error when invoking Write on FileRotator","refs":[],"body":"As of now, FileRotator uses bufio.Write under the hood to write data to\nconfigured output file. Due to the way how bufio handles any occurred io\nerror - saves it into `err` variable never resetting it automatically -\nany operation like `Write`, `Flush` etc will become a no-op, returning the very same,\nsaved error (eg. Out of disk space) even when the problem is fixed (eg. disk\nspace is available again).\n\nThat automatically means that FileRotator will stop writing any logs,\nreporting the same error over and over again, even if it's no longer\nvalid.\n\nThis PR fixes it by resetting the bufio Writer, which resets any errors\nand tries to write requested data.\n","author_name":"Marcin Matlaszek","author_email":"mmatlaszek@gmail.com"},{"hash":"a6cb63a96489e951ab4ed6202cde3ab19def679b","date":"2018-12-07 14:03:13 -0500","message":"executor: don't drop errors when configuring libcontainer cfg, add nil check on resources","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"22a4bcd3ca80090decce5459fc3beafd2f56840a","date":"2018-12-07 20:11:46 +0000","message":"rpc accept loop: added backoff on logging for failed connections, in case there is a fast fail loop (NMD-1173)","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"9a220c8d40b3e7585659bfdb697f9dfb8054ec8a","date":"2018-12-07 13:36:33 -0800","message":"Merge pull request #4965 from hashicorp/b-gc-running","refs":[],"body":"Don't GC running but desired stop allocations","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"591cdb00a4db8832372f0c3e1c26a0072ccdae8d","date":"2018-12-07 22:14:15 +0000","message":"nomad/rpc listener: modified to throttle logging on \"permanent\" Accept() errors as well (with a higher delay cap)","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"bbe531ca0493e028f807d177042ac087e3c34def","date":"2018-12-07 22:15:05 +0000","message":"updated memberlist dependency to latest, which is missing NMD-1173 error","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"3921793030877804921108bdb4bdcb0a46b25bb0","date":"2018-12-07 18:35:47 -0600","message":"Score combinations of allocs from multiple devices for preemption","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"3fe18c2f2d37f5f3bbee9010565e0381614863be","date":"2018-12-08 00:05:42 -0500","message":"Merge pull request #4973 from emate/recover-filerotator-from-io-errors","refs":[],"body":"Recover from any possible io error when invoking Write on FileRotator","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"4243b7d5f3fed4abe33b41d07e1801e37ec2571f","date":"2018-12-08 01:52:06 -0500","message":"executor: misspell","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"2fb5e3501270af15a5f5edd72931098852a45549","date":"2018-12-08 09:52:42 -0500","message":"Merge pull request #4950 from hashicorp/b-exc-libcontainer-kill","refs":[],"body":"executor: kill all container processes","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"070ed8b654978b1d78645eb75e46c0903f1b19d5","date":"2018-12-08 09:58:23 -0500","message":"fix dtestutil.NewDriverHarness ref","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bf17eae7c30c7cc7c5608687b684cc662a4dea02","date":"2018-12-06 07:10:22 -0500","message":"devices/nvidia: memory state as the summary stat","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"612f79bd454491fc5e2a36e940df82105d3d3f80","date":"2018-12-10 10:33:34 -0500","message":"Rename helper_stats -> helper_devices","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a802984c9ad9d3b7523f76771fe217c600597ce3","date":"2018-12-10 11:51:43 -0500","message":"device attributes in `nomad node status -verbose`","refs":[],"body":"This reports device attributes like the following:\n\n```\n$ nomad node status -self -verbose\nID          = f7adb958-29e1-2a5a-2303-9d61ffaab33a\nName        = mars.local\nClass       = <none>\nDC          = dc1\nDrain       = false\nEligibility = eligible\nStatus      = ready\nUptime      = 12h40m13s\n\nDrivers\nDriver       Detected  Healthy  Message                               Time\ndocker       true      true     healthy                               2018-12-10T11:47:19-05:00\n...\n\nAttributes\ncpu.arch                      = amd64\ncpu.frequency                 = 2200\ncpu.modelname                 = Intel(R) Core(TM) i7-8750H CPU @ 2.20GHz\ncpu.numcores                  = 12\n...\n\nDevice Group Attributes\nDevice Group = nomad/file/mock\nblock_device = sda1\nfilesystem   = ext4\nsize         = 63.2 GB\n\nMeta\n```\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"40164b3dc68cffec818473dd03531c2b14fa866c","date":"2018-12-10 12:17:00 -0500","message":"Use max 3 precision in displaying floats","refs":[],"body":"When formating floats in `nomad node status`, use a maximum precision of\n3.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ff1f007f918f65ebe633339b056657e49da0ca5d","date":"2018-12-10 15:34:21 -0800","message":"merge 087 and 090 changelog","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"aeb9995daa697836582a0a332f8e9d615bebb632","date":"2018-12-10 15:35:26 -0800","message":"typo","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"c6d19819556bed2b685e5b006ab019b9b2516c3a","date":"2018-12-05 18:17:33 +0100","message":"allocwatcher: Add Group AllocWatcher","refs":[],"body":"The Group Alloc watcher is an implementation of a PrevAllocWatcher that\ncan wait for multiple previous allocs before terminating.\n\nThis is to be used when running an allocation that is preempting upstream\nallocations, and thus only supports being ran with a local alloc watcher.\n\nIt also currently requires all of its child watchers to correctly handle\ncontext cancellation. Should this be a problem, it should be fairly easy\nto implement a replacement using channels rather than a waitgroup.\n\nIt obeys the PrevAllocWatcher interface for convenience, but it may be\nbetter to extract Migration capabilities into a seperate interface for\ngreater clarity.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"a4cf83d00c6004141e102281af1de29a4679f0bc","date":"2018-12-05 19:18:04 +0100","message":"client: Wait for preempted allocs to terminate","refs":[],"body":"When starting an allocation that is preempting other allocs, we create a\nnew group allocation watcher, and then wait for the allocations to\nterminate in the allocation PreRun hooks.\n\nIf there's no preempted allocations, then we simply provide a\nNoopAllocWatcher.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"961f7fae157df81217b5fc5832150d755dfca187","date":"2018-12-10 17:22:15 -0800","message":"Merge pull request #4952 from hashicorp/b-script-context","refs":[],"body":"consul: fix script checks exiting after 1 run","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"5306b1e9537a9b4203deebc615394cc4fdcf750e","date":"2018-12-10 17:22:53 -0800","message":"Merge pull request #4953 from hashicorp/b-script-context-wrapper","refs":[],"body":"consul: add ScriptExecutor context wrapper","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"d44d4b57de9d76e8179f5adebd4bd06c9d17050b","date":"2018-12-06 12:15:59 +0100","message":"client: Unify handling of previous and preempted allocs","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"d9e9265e8ab448d579345189037073d653089a1b","date":"2018-12-11 13:09:37 +0100","message":"allocwatcher: Cleanup new migrator/watcher interface","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"419743f1657a9473623178fc8dbe9152a102a116","date":"2018-12-11 13:12:01 +0100","message":"allocrunner: Test alloc runners should include a noop migrator","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"744aab57515653aaf08c1e115a69f9c345b73b62","date":"2018-12-08 14:50:47 -0500","message":"tests: Lower package runtime","refs":[],"body":"Lowering the runtime here to pre 7ca535aa90748caff1522468cc0c4ab672a74abb expectations.\n\nThe longest package at the time `client/driver` shrunk significantly,\nand now the longest packages take less than 5 minutes.\n\nWe do have some long running timed out projects due to a stuck shutdown,\nbut in completed jobs (though they failed), the longest packages took\nless than 5 minutes.  The longest running packages in\nhttps://travis-ci.org/hashicorp/nomad/jobs/464640776 were:\n\n```\nFAIL  github.com/hashicorp/nomad/nomad                                   268.089s\nok    github.com/hashicorp/nomad/drivers/docker                          203.903s  coverage:  68.8%   of  statements\nok    github.com/hashicorp/nomad/drivers/rkt                             132.104s  coverage:  65.0%   of  statements\nok    github.com/hashicorp/nomad/api                                     123.193s  coverage:  62.9%   of  statements\nok    github.com/hashicorp/nomad/command/agent                           74.657s   coverage:  72.3%   of  statements\nok    github.com/hashicorp/nomad/command                                 63.592s   coverage:  42.7%   of  statements\n```\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d6e708fe2da24ed128686de095b11bd51a1df7b3","date":"2018-12-08 18:15:13 -0500","message":"tests: setup libcontainer rootfs","refs":[],"body":"Using statically linked busybox binary to setup a basic rootfs for\ntesting, by symlinking it to provide the basic commands used in tests.\n\nI considered using a proper rootfs tarball, but the overhead of managing\ntarfile and expanding it seems significant enough that I went with this\nimplementation.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"da070a58b770bb574a47f13dd44bf690015d7ab4","date":"2018-12-08 18:47:37 -0500","message":"test: fix TestFingerprintManager_Run_Combination","refs":[],"body":"Let's use a fingerprinter that doesn't have values prepopulated in test\nfixtures.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d31e52b1f649aa11e0c145ff041c431960146bf4","date":"2018-12-08 19:25:57 -0500","message":"tests: update stop/kill tests with new pattern","refs":[],"body":"Update rawexec and rkt stop/kill tests with the patterns introduced in\n7a49e9b68e519050a0c2ef0b67c33503bfbc51be.  This implementation should be\nmore resilient to discrepancy between task stopping and task being marked as exited.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"06a4b4add2d0a3b265270f7db39ad43af6c08fec","date":"2018-12-08 18:24:42 -0500","message":"tests: prevent indefinite blocking in some tests","refs":[],"body":"Noticed few places where tests seem to block indefinitely and panic\nafter the test run reaches the test package timeout.\n\nI intend to follow up with the proper fix later, but timing out is much\nbetter than indefinitely blocking.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8a752066f84be91db13d89059830315b97afd70d","date":"2018-12-11 06:49:20 -0500","message":"tests: no need for buffer channel","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c02dbc7f67c2c05a448599d041d3de06c574d5a7","date":"2018-12-11 09:34:01 -0500","message":"add a note about busybox license","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"cbdc8f4c3265ec1531e37030e25773e45f2e5d6d","date":"2018-12-11 15:46:58 +0100","message":"client: Correctly pass a noop PrevAllocMigrator when restoring","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"36d1045e7ff61d2d363dedad89e78c8fa3ebce1d","date":"2018-11-08 12:09:00 -0800","message":"acl: Add support for globbing namespaces","refs":[],"body":"This commit adds basic support for globbing namespaces in acl\ndefinitions.\n\nFor concrete definitions, we merge all of the defined policies at load time, and\nperform a simple lookup later on. If an exact match of a concrete\ndefinition is found, we do not attempt to resolve globs.\n\nFor glob definitions, we merge definitions of exact replicas of a glob.\n\nWhen loading a policy for a glob defintion, we choose the glob that has\nthe closest match to the namespace we are resolving for. We define the\nclosest match as the one with the _smallest character difference_\nbetween the glob and the namespace we are matching.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"e7162e8bd8aee7521a1a8315c6720a2be59f0016","date":"2018-12-11 10:12:18 -0600","message":"Early continue after meeting needed count","refs":[],"body":"Also adds another optimization that filters out un-needed allocations\nas a final filtering step\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"db635bf81176b986c644a71bd237b2c36052cd4f","date":"2018-12-11 17:35:51 +0100","message":"fixup: Correctly sort based on distance, use iradix for ordering","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"971586d73c2e58df7dc112604f0f6401435e1916","date":"2018-12-11 18:03:45 +0100","message":"client: Style: use fluent style for building loggers","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"0a2fba0d0c2758d2b8742b0d3040bcb5e3036153","date":"2018-12-11 18:06:34 +0100","message":"Merge pull request #4963 from hashicorp/dani/f-preempt-alloc-wait","refs":[],"body":"client: Wait for preemptions to terminate","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"1678a8499b1752455efcbb5713415fe6f0d9cfbc","date":"2018-12-11 14:22:50 -0500","message":"drivers/docker: enforce volumes.enabled (#4983)","refs":["b-ui-hide-ember-errors-in-job-run"],"body":"When volumes.enable flag is off in Docker driver, disable all mounts of\r\npaths outside alloc dir.","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"cae36e49a6b17c93658047ce27cf28abffe611a6","date":"2018-12-11 12:20:51 -0500","message":"client: update driver info on new fingerprint","refs":[],"body":"Fixes a bug where a driver health and attributes are never updated from\ntheir initial status.  If a driver started unhealthy, it may never go\ninto a healthy status.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"338683a4db22a2490abcc55e44872fcdd3d70aa9","date":"2018-12-11 09:44:42 -0500","message":"ci: use Ubuntu 16.04 (Xenial) in TravisCI","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8f2454029acc9d991f121580107957e85fc1dcb3","date":"2018-12-11 15:13:43 -0500","message":"tests: skip checking rdma cgroup","refs":[],"body":"rdma was added in most recent kernels and libcontainer/docker\ndon't isolate them by default.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d0215f42302c99174797914e94e52eab8b97885b","date":"2018-12-11 15:14:57 -0500","message":"ci: install lxc-templates explicitly","refs":[],"body":"LXC package on Ubuntu 16.04 doesn't depend on lxc-template, but we\nrequire it in our tests.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f42c060d3599b0fbb6878484aaedee93fb82f43d","date":"2018-12-11 12:51:22 -0800","message":"Merge pull request #4970 from hashicorp/f-no-iops","refs":[],"body":"Deprecate IOPS","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"ce01603e04b7d762d5de640063645f95c0685282","date":"2018-12-11 12:52:45 -0800","message":"changelog","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"e716c451a96c0dc9b8325db3d4a6b327cc5138f0","date":"2018-12-08 21:19:39 -0500","message":"tests: tag image explicitly","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"51707199a6e4e1322ef654260439af3bec5620a4","date":"2018-12-11 18:00:21 -0500","message":"Merge pull request #4975 from hashicorp/fix-master-20181209","refs":[],"body":"Some test fixes and remedies","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"5f110007144f1e49b9aca9d31a11aa2927597176","date":"2018-12-11 18:00:39 -0500","message":"Merge pull request #4985 from hashicorp/test-with-xenial","refs":[],"body":"ci: Test with Ubuntu 16.04 in TravisCI","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"926428fe0f63bc5156aad73e4b2670dd4924d39b","date":"2018-12-11 18:01:03 -0500","message":"Merge pull request #4984 from hashicorp/b-client-update-driver","refs":[],"body":"client: update driver info on new driver fingerprint","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"aa59ea6ac7a96c3a53a26f599e91aff1ea7b2807","date":"2018-12-11 15:23:39 -0800","message":"fix iops bug and increase test matrix coverage","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"97f33bb1537d04905cb84199672bcdf46ebb4e65","date":"2018-12-09 22:30:23 -0500","message":"drivers/exec: support device binds and mounts","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d9cc4c8a28e145df76516b451f714dac6793ef9e","date":"2018-12-11 15:52:29 -0800","message":"Merge pull request #4986 from hashicorp/b-vault-e2e","refs":[],"body":"fix iops bug and increase test matrix coverage","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"44cc76c4a3eec466cd021e886f53655d52e4f4d9","date":"2018-12-11 18:34:19 -0600","message":"Merge pull request #4881 from hashicorp/f-device-preemption","refs":[],"body":"Device preemption","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"68a271e7d18cc9a52263dd4c8c091111493467ec","date":"2018-12-11 20:20:01 -0500","message":"Merge pull request #4962 from hashicorp/f-exec-device-mounts","refs":[],"body":"drivers/exec: Support devices mounts","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"4e59d473f797b13a8ba1b66e978b7416eceef4c8","date":"2018-12-12 12:43:16 +0100","message":"fixup: Code Review","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"bc6929b8fdf6feed62fc975d132e43121ffacc5f","date":"2018-12-12 09:17:31 -0500","message":"fixup! device attributes in `nomad node status -verbose`","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"875dd737cbe987bc92c5007880448d76f97ade75","date":"2018-12-12 16:30:01 +0100","message":"client: updateAlloc release lock after read","refs":[],"body":"The allocLock is used to synchronize access to the alloc runner map, not\nto ensure internal consistency of the alloc runners themselves. This\nupdates the updateAlloc process to avoid hanging on to an exclusive lock\nof the map while applying changes to allocrunners themselves, as they\nshould be internally consistent.\n\nThis fixes a bug where any client allocation api will block during the\nshutdown or updating of an allocrunner and its child taskrunners.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"1a34550c8a42377803b137da3868d956d8c88b7d","date":"2018-12-12 18:52:06 +0000","message":"improved code for readability","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"44a6d9dffd1cd2cd366b4062d8c32ac4b88cacc9","date":"2018-12-12 19:09:06 +0000","message":"gofmt","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"33b9f9d3aec755aa7f274cd778c07d9fbfe7cf17","date":"2018-12-12 19:16:41 +0000","message":"fixed bug in loop delay","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"d5dd9c2c692f951356f81bcc74847441c7c19eea","date":"2018-12-12 14:32:22 -0800","message":"fix iops related tests","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"20189c2f7df4f09042c42ff4afb950a6cf2850fa","date":"2018-12-12 14:34:36 -0800","message":"Merge pull request #4969 from hashicorp/f-alloc-hooks","refs":[],"body":"Make alloc health watcher a postrun hook rather than shutdown hook","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"3ee692cb45fe20423ef271b74ba2cad5d2d85cef","date":"2018-12-12 23:10:24 +0000","message":"some changes for more idiomatic code","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"313fc5f10d0f30630d9f0787fe0924cc3502dcc8","date":"2018-12-12 19:45:07 -0500","message":"Merge pull request #4978 from hashicorp/f-device-tweaks","refs":[],"body":"Display device attributes in `nomad node status -verbose`","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"5bcb24b1d52001235d1b197175c768d8e8b6917c","date":"2018-12-12 16:54:42 -0800","message":"Merge pull request #4974 from hashicorp/b-1173-log-spam","refs":[],"body":"rpc accept loop: added backoff on logging","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"5ef81ed6734cfa814c54784fbd4849ddcf27d6b8","date":"2018-12-12 20:40:38 -0500","message":"tests: ensure exec tests pass valid task resources (#4992)","refs":[],"body":"Prior to 97f33bb1537d04905cb84199672bcdf46ebb4e65, executor cgroup validation errors were\r\nsilently ignored.  Enforcing them reveals test cases that missed them.\r\n\r\nThis doesn't change customer facing contract, as resource struct is\r\nis either configured or we default to 100 (much higher than 2).","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"30bed980f172844ef8fde66f2b4419a7b7f0c532","date":"2018-12-12 16:20:19 +0100","message":"client: Give a copy of clientconfig to allocrunner","refs":[],"body":"Currently, there is a race condition between creating a taskrunner, and\nupdating node attributes via fingerprinting.\n\nThis is because the taskenv builder will try to iterate over the\nclientconfig.Node.Attributes map, which can be concurrently updated by\nthe fingerprinting process, thus causing a panic.\n\nThis fixes that by providing a copy of the clientconfg to the\nallocrunner inside the Read lock during config creation.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"98dc399d5c0132366d73f4cc064ee85890ba895f","date":"2018-12-13 12:43:59 +0100","message":"Merge pull request #4990 from hashicorp/dani/b-alloc-lock","refs":[],"body":"client: updateAlloc release lock after read","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"63cd9c972bba194842c60bd8e16f716c038c9e94","date":"2018-12-13 07:39:16 -0800","message":"Always create a running allocation when testing task state","refs":["b-ui-test-failure"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"6e39a3ea59e73692b2f4283637c63e7e0cbd1c09","date":"2018-12-13 07:52:30 -0800","message":"Merge pull request #4998 from hashicorp/b-ui-test-failure","refs":[],"body":"UI: Fix intermittent test failure \"cannot read property name of undefined\"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"605d7a245f7e7fe11bdd59f90a6721cd10e15b43","date":"2018-12-06 17:11:01 -0800","message":"Model isRunning based on the client status of the allocation","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c1c40af236cf97a47849db78060f9e70a034adfa","date":"2018-12-10 15:24:39 -0800","message":"Task isRunning is based on both the task state and the allocation state","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"25a29cb4eee4a905b2c982662701a7c5f2627404","date":"2018-12-10 15:25:48 -0800","message":"Conditionally show utilization metrics on alloc and task rows","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"e9ba939bd6329ef0ce33a106fc1a7c0c370ccbfa","date":"2018-12-10 15:26:27 -0800","message":"Conditionally show the utilization graphs on the allocation and task detail pages","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"453f11d0c60fb67f6fdc55e09d572e9901d355d7","date":"2018-12-10 17:28:23 -0800","message":"Test coverage for allocation rows","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"bf9ff6ed8b19d6df7e545a5a28d07a746c32fb1f","date":"2018-12-10 17:28:35 -0800","message":"Test coverage for resource graph empty states","refs":["b-ui-hide-stats-graphs-for-non-running-resources"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7143b3048b98fcea2d5c09eccfb1e4977d6cabb0","date":"2018-12-12 16:07:56 -0800","message":"Don't use Ember.get in conjunction with dynamic strings in the evaluation serializer","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3a07f68d4f461c67802fc2d32397b12b41345aa4","date":"2018-12-12 16:24:57 -0800","message":"Don't use Ember.get in conjunction with dynamic strings in the job-summary serializer","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c3fdeb3fa6230c35114a35ca15f345a7bfee70c5","date":"2018-12-12 16:49:52 -0800","message":"Don't use Ember.get in conjunction with dynamic strings in the deployment serializer","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"2a554e3954b4093f817139186924fde647d7109f","date":"2018-12-12 17:23:09 -0800","message":"Don't use Ember.get in conjunction with dynamic strings in the node serializer","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"f2b4fbcbe8ede9967ffa360bcb20ef9aa282a050","date":"2018-12-12 18:21:36 -0800","message":"Don't use Ember.get in conjunction with dynamic strings in the allocation serializer","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"8909046f155bdcd8a811d7d47fc93bbec30fbfba","date":"2018-12-12 18:40:10 -0800","message":"Don't use Ember.get in conjunction with dynamic strings in the job-plan serializer","refs":["b-ui-dots-in-tasks"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4d4201331c041cc1f6af32abe9495878b5a0ef9b","date":"2018-12-13 18:20:18 +0100","message":"taskrunner: Emit task events when a hook fails","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"40697ab6c15a219a2ff896ccaddbb531c7c45ee6","date":"2018-12-13 13:22:17 -0500","message":"Fix output of 'nomad deployment fail' with no arg","refs":[],"body":"","author_name":"Brian Lalor","author_email":"blalor@bravo5.org"},{"hash":"0826042a7d3df5af9d5af8b13e994bce1a6d7276","date":"2018-12-13 12:30:43 -0600","message":"Merge pull request #4999 from hashicorp/blalor-patch-1","refs":[],"body":"Fix output of 'nomad deployment fail' with no arg","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"8a344412e88d189aef659964755836cd26ac7f2d","date":"2018-12-13 14:41:09 -0500","message":"Merge branch 'master' into f-grpc-executor","refs":[],"body":"* master: (71 commits)\n  Fix output of 'nomad deployment fail' with no arg\n  Always create a running allocation when testing task state\n  tests: ensure exec tests pass valid task resources (#4992)\n  some changes for more idiomatic code\n  fix iops related tests\n  fixed bug in loop delay\n  gofmt\n  improved code for readability\n  client: updateAlloc release lock after read\n  fixup! device attributes in `nomad node status -verbose`\n  drivers/exec: support device binds and mounts\n  fix iops bug and increase test matrix coverage\n  tests: tag image explicitly\n  changelog\n  ci: install lxc-templates explicitly\n  tests: skip checking rdma cgroup\n  ci: use Ubuntu 16.04 (Xenial) in TravisCI\n  client: update driver info on new fingerprint\n  drivers/docker: enforce volumes.enabled (#4983)\n  client: Style: use fluent style for building loggers\n  ...\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"3ee0e0f2d6f873ba2b2bec3a194b7a02da877a73","date":"2018-12-14 09:20:17 -0500","message":"Update changelog (#4993)","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"edf5674796e38f564fdf412265733d787890e046","date":"2018-12-14 09:41:41 -0500","message":"dev: upgrade go to 1.11.3","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bb248e86cc5d0993eaaf9e1629f1b982bb34f0de","date":"2018-12-14 09:38:49 -0500","message":"dev: expand ... in go get","refs":[],"body":"workaround a regression in 1.11.3\n\n> We are aware of a functionality regression in \"go get\" when executed in GOPATH mode on an import path pattern containing \"...\" (e.g., \"go get github.com/golang/pkg/...\"), when downloading packages not already present in the GOPATH workspace. This is issue golang.org/issue/29241. It will be resolved in the next minor patch releases, Go 1.11.4 and Go 1.10.7, which we plan to release soon. We apologize for any disruption.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c784d59ab3ff1ee929465e499f9c46a14e71bce6","date":"2018-12-14 11:11:55 -0500","message":"Merge pull request #5005 from hashicorp/dev-update-golang-1.11.3","refs":[],"body":"Upgrade to Golang 1.11.3","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"c8a3c0e96ef9786089fdb3123b5cbf5907059a9b","date":"2018-12-14 22:20:01 -0500","message":"executor: use int when encoding signal in RPC","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"d0efb72846ba6e9035ccea4b2f955bd8f6245129","date":"2018-12-14 23:40:37 -0500","message":"rawexec: fix misleading log","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"81ba18d74a2e7722f879756ac960e7a849c331c6","date":"2018-12-15 00:08:23 -0500","message":"executor: encode mounts and devices correctly when using grpc","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"3fb53e87de4089000796a1a4b243cad0552f91b5","date":"2018-12-15 00:34:36 -0500","message":"Merge pull request #4961 from hashicorp/f-grpc-executor","refs":[],"body":"GRPC Executor","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"e3cee5323072e5357879654758352811b76bd8e9","date":"2018-12-14 10:58:31 -0500","message":"tests: pin busybox image to a specific point tag","refs":[],"body":"Using `:latest` tag is typically a cause of pain, as underlying image\nchanges behavior.  Here, I'm switching to using a point release, and\nre-updating the stored tarballs with it.\n\nSadly, when saving/loading images, the repo digeset is not supported:\nhttps://github.com/moby/moby/issues/22011 ; but using point releases\nshould mitigate the problem.\n\nThe motivation here is that docker tests have some flakiness due to\naccidental importing of `busybox:latest` which has `/bin/nc` that no\nlonger supports `-p 0`:\n\n```\n$ docker run -it --rm busybox /bin/nc -l 127.0.0.1 -p 0\nUnable to find image 'busybox:latest' locally\nlatest: Pulling from library/busybox\nDigest: sha256:2a03a6059f21e150ae84b0973863609494aad70f0a80eaeb64bddd8d92465812\nStatus: Downloaded newer image for busybox:latest\nnc: bad local port '0'\n```\n\nLooks like older busybox versions (e.g. `busybox:1.24` do honor `-p 0`\nas the test expect, but I would rather update busybox to fix.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"29fc3f77c843afcb26136f132a4891cb88c3fed5","date":"2018-12-14 11:06:14 -0500","message":"tests: try deflake TestDockerDriver_OOMKilled","refs":[],"body":"Noticed an issue in Docker daemon failing to handle the OOM test case\nfailure in build https://travis-ci.org/hashicorp/nomad/jobs/468027848 ,\nand I suspect it's related to the process dying so quickly, and\npotentially the way we are starting the task, so added a start up delay\nand made it more consistent with other tests that don't seem as flaky.\n\nThe following is the log line showing Docker returning 500 error condition; while we can probably handle it gracefully without retrying, the retry is very cheap in this case and it's more of an optimization that we can handle in follow up PR.\n\n```\n    testlog.go:32: 2018-12-14T14:57:52.626Z [DEBUG] docker/driver.go:852: docker: setting container startup command: task_name=nc-demo command=\"/bin/nc -l 127.0.0.1 -p 0\"\n    testlog.go:32: 2018-12-14T14:57:52.626Z [DEBUG] docker/driver.go:866: docker: setting container name: task_name=nc-demo container_name=724a3e77-8b15-e657-f6aa-84c2d3243b18\n    testlog.go:32: 2018-12-14T14:57:52.694Z [INFO ] docker/driver.go:196: docker: created container: container_id=362b6ea183f3c4ce472d7d7571ca47023cea1df0f5eb920827921716f17718be\n    testlog.go:32: 2018-12-14T14:57:53.523Z [DEBUG] docker/driver.go:416: docker: failed to start container: container_id=362b6ea183f3c4ce472d7d7571ca47023cea1df0f5eb920827921716f17718be attempt=1 error=\"API error (500): {\"message\":\"cannot start a stopped process: unknown\"}\n        \"\n    testlog.go:32: 2018-12-14T14:57:55.394Z [DEBUG] docker/driver.go:416: docker: failed to start container: container_id=362b6ea183f3c4ce472d7d7571ca47023cea1df0f5eb920827921716f17718be attempt=2 error=\"API error (500): {\"message\":\"cannot start a stopped process: unknown\"}\n        \"\n    testlog.go:32: 2018-12-14T14:57:57.243Z [DEBUG] docker/driver.go:416: docker: failed to start container: container_id=362b6ea183f3c4ce472d7d7571ca47023cea1df0f5eb920827921716f17718be attempt=3 error=\"API error (500): {\"message\":\"cannot start a stopped process: unknown\"}\n        \"\n```\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2502ffe589fd439595da89503a67bfbf1e11513d","date":"2018-12-14 22:04:33 -0500","message":"tests: assert docker containers start","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"f248fefdbf77c316afc1d4886844abda1a353937","date":"2018-12-15 14:30:29 -0500","message":"driver/docker: stopping a dead container not error","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"119aabe77b078e70da1ba27233687b79a67406da","date":"2018-12-15 14:42:40 -0500","message":"testes: remove TestDockerDriver_Kill","refs":[],"body":"We already have two other Kill tests (e.g.\nTestDockerDriver_Start_Kill_Wait and\nTestDockerDriver_Start_KillTimeout), so don't need yet another flaky\ntest.\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"29ef7ecf2372f980d12a9900e1b2a351568dd415","date":"2018-12-15 15:26:29 -0500","message":"tests: avoid implicitly asserting clean shutdown","refs":[],"body":"The assertion here is causing many spurious failures that aren't\nactually relevant to the test itself.\n\nWe are tracking the cause for this failure independently, and it would\nmake more sense to have a dedicated test for clean shutdown.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4a51769250a63939c893c0697945b849dbba4904","date":"2018-12-15 16:03:00 -0500","message":"Merge pull request #5008 from hashicorp/b-docker-test-20181214","refs":[],"body":"Fix flakiness in docker tests","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ee652be312941fd67dfa90d5d2d2e5a37284e88d","date":"2018-12-15 20:25:36 -0500","message":"tests: fix rkt command environment (#5011)","refs":[],"body":"The environment variables needed for envoking `rkt` command line\r\nshould include host PATH (to access `iptables`).\r\n\r\nGiven that the command runs outside the VM, untrusted task environment\r\nvariables should NOT be honored here.\r\n\r\nWe do this already with `rkt`, but the change is quite subtle to miss\r\nwhen refactoring.","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"8b53ff978aee822a623be2da6971d6233f838e1d","date":"2018-12-15 14:00:27 -0500","message":"ci: use gotestsum for running tests","refs":["origin/test-flakiness-20181216-1"],"body":"`gotestsum` has user friendlier output that emits final summary, also it can emit junit xml file for\nautomated analysis instead of current format that should significantly\nease automated analysis of CI.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c526ddb0683dfadddac0eaa9727ea774ccba1cc2","date":"2018-12-16 09:13:21 -0500","message":"Remove implicit check","refs":[],"body":"I intended to remove this line in 29ef7ecf2372f980d12a9900e1b2a351568dd415 - see my notes there for details.\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"61a17621e3dd65252d5c96fdad318c4d560f31d4","date":"2018-12-13 18:21:32 +0100","message":"taskrunner: Use hook errors for artifacts","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"a282cf69c95790f42626438834209ec4c540c81d","date":"2018-12-17 10:42:57 +0100","message":"Merge pull request #5004 from hashicorp/dani/f-hook-errors","refs":[],"body":"client: Emit TaskEvents when task hooks fail","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"bba8b4ef4f8d5fab9925d13813be67e34eb39749","date":"2018-12-17 10:49:46 +0100","message":"Merge pull request #4989 from hashicorp/dani/b-client-update-race-condition","refs":[],"body":"client: Give a copy of clientconfig to allocrunner","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"dca95c2e571a5c587acd73da4ada3130f43bfb04","date":"2018-12-17 11:40:09 -0600","message":"Terraform configs for e2e tests","refs":[],"body":"","author_name":"Jack Pearkes","author_email":"jack@hashicorp.com"},{"hash":"82f95b2e0c572f50161df68df2f9491623ba9a72","date":"2018-12-17 15:06:22 -0600","message":"suggestions from code review","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"fc7455c10494c80be512e55d65a9bdda17c30800","date":"2018-12-17 15:50:31 -0800","message":"Merge pull request #4994 from hashicorp/b-ui-dots-in-tasks","refs":[],"body":"UI: Bugs around dots in task/task-group/driver names","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ad4bac8d77137804f6c14fed154870ad3e0644ca","date":"2018-12-18 15:53:31 +0100","message":"docker: Delete Task on Destroy","refs":[],"body":"Currently the docker driver does not remove tasks from its state map\nwhen destroying the task, which leads to issues when restarting tasks in\nplace, and leaks expired handles over time.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"be9763dc9b6bdb94cbce167bd0444b7afaff74d9","date":"2018-12-18 18:22:36 +0100","message":"Merge pull request #5016 from hashicorp/dani/b-docker-delete-task-on-destroy","refs":[],"body":"docker: Delete Task on Destroy","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"5084eda8667b6ecbd3174d3bdcdb663d1830bad4","date":"2018-12-18 11:15:39 -0800","message":"Merge pull request #4981 from hashicorp/b-ui-hide-stats-graphs-for-non-running-resources","refs":[],"body":"UI: Hide stats graphs for non running resources","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"75294a781a67bc410d76f0859b9dbb40660b0247","date":"2018-12-18 13:37:03 -0600","message":"added readme","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"08ffb0b15fc77124f5c1f00a1f51c7504b2ddf40","date":"2018-12-18 13:45:58 -0600","message":"Merge pull request #5012 from hashicorp/f-e2e-provisioning","refs":[],"body":"Terraform configs for e2e tests","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"a6e15202ce1457a3c60cbe320af176a4f575b4db","date":"2018-12-18 17:26:51 -0500","message":"Commenting out dead link to demo.nomadproject.io (#5017)","refs":[],"body":"* removing dead link\r\n\r\n* comment out header and footer to UI demo\r\n\r\n* adding reference to link back and commenting it out\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"800bd5733388ab9bfe8030392911e4d9c04f803d","date":"2018-12-14 16:02:47 +0100","message":"allocrunner: Async shutdown and destroy","refs":[],"body":"This commit reduces the locking required to shutdown or destroy\nallocrunners, and allows parallel shutdown and destroy of allocrunners during\nshutdown.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"934d2e6bf6e14f80d5b6ab46dc36cc3a73be1be4","date":"2018-12-14 16:04:58 +0100","message":"client: Async API for shutdown/destroy allocrunners","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"6f636ea15aa741d7b4d94aeffc6cf680d6382d4d","date":"2018-12-14 16:05:16 +0100","message":"gc: Wait for allocrunners to be destroyed","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"69fc73767a31ed737db3b83e5cccaacedb3f3174","date":"2018-12-17 13:27:54 +0100","message":"allocrunner: Handle updates asynchronously","refs":[],"body":"This creates a new buffered channel and goroutine on the allocrunner for\nserializing updates to allocations. This allows us to take updates off\nthe routine that is used from processing updates from the server,\nwithout having complicated machinery for tracking update lifetimes, or\nother external synchronization.\n\nThis results in a nice performance improvement and signficantly better\nthroughput on batch changes such as preempting a large number of jobs\nfor a larger placement.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"9f1b53f2a8e39ed6cf26ab22ebd06fdc6bfde663","date":"2018-12-17 15:55:36 +0100","message":"fixup: Log when we detect out of order updates","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"5464a9565ac48203a49554a8d71b63424bb5227a","date":"2018-12-18 23:28:48 +0100","message":"allocrunner: Documentation for ShutdownCh/DestroyCh","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"502f36335e7b321efbd408f504db0003c4875ddb","date":"2018-12-18 23:36:29 +0100","message":"allocrunner: Drop and log updates after closing waitCh","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"f619db297f0299e882f6b44381a06b0790f658d3","date":"2018-12-18 23:38:28 +0100","message":"client: Update tests for async destroy","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"b92bc1178d80db2509237f9f4519f160a7622814","date":"2018-12-18 23:11:25 +0100","message":"taskrunner: Use a random suffix for Task Config","refs":[],"body":"The RestartCount is not really suitable for use as a source of\nuniqueness within task invocations as it is not monotonic, and interacts\nwith the restart stanza in a users config, so conflates restarts due to\ntask failures, with restarts due to enviromental changes, such as consul\ntemplate or vault secrets changing.\n\nHere we instead use a substring from a uuid, which is more random than\nwe strictly need, but is nicer than rolling our own random string\ngenerator here.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"0984bf181243a768f4ab6d8404d8a740aa6ec7a9","date":"2018-12-19 00:39:55 +0100","message":"Merge pull request #5021 from hashicorp/dani/rand-tasks","refs":[],"body":"taskrunner: Use a random suffix for Task Config","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"0ab23c30abf7ef5479553c92d276284e382f713f","date":"2018-12-18 14:45:30 -0800","message":"change retry_join to a map for easier tag handling","refs":[],"body":"","author_name":"Nathan R Valentine","author_email":"nrvale00@gmail.com"},{"hash":"e1cf3ac69e5b1a6de1fcda34ecdac363ecb4b0ea","date":"2018-12-13 14:41:31 -0800","message":"protos","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"da6925bfc10004302fb48ad779c61a95a24f07c9","date":"2018-12-13 15:06:48 -0800","message":"utilities","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"cd6879409cf1737865821c5feb01a3e2e148ed19","date":"2018-12-13 16:21:41 -0800","message":"Drivers","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"7a0b73341ad379eaf22cd13ccad4340bd50844e8","date":"2018-12-18 14:47:54 -0800","message":"LinuxResources doesn't use task.Resources","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"d5512c39f02cbe2f940a50f2ef52497631646efb","date":"2018-12-18 15:10:13 -0800","message":"Lint","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"517bf1c35f571f3e036e6ac41bfad11e084cff6f","date":"2018-12-18 15:47:40 -0800","message":"Fix unit tests + upgrade pathing resources","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"5d3e27e69120fd841707a2df393aee5fd139edcf","date":"2018-12-19 01:26:41 +0100","message":"Merge pull request #5007 from hashicorp/dani/f-allocrunner-async","refs":[],"body":"allocrunner: Async api for shutdown/destroy/update","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"d10b9b79a28c87a0707b2b7a999def4f49fcdfaf","date":"2018-12-18 18:39:45 -0600","message":"Affinities e2e tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e6aa2168be4a557b7e1d3b50106f8192745b3ca5","date":"2018-12-18 18:41:16 -0600","message":"Merge pull request #5024 from hashicorp/f-affinities-e2e","refs":[],"body":"Affinities e2e tests","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"296141bb585b7c43bd3006d2cce6a1e9fd536103","date":"2018-12-18 16:46:34 -0800","message":"Merge pull request #5002 from hashicorp/b-task-config-resources","refs":[],"body":"Convert driver resource to AllocatedTaskResource","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"d4fd73d536f150e9de8cdaec2c2df80dd3a4d088","date":"2018-12-14 14:46:32 -0800","message":"protos","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"0cdf6634a52bf1fee6dbf366ad5c59f4c37150d7","date":"2018-12-14 15:03:31 -0800","message":"base fixes","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"ed4f8eac6e94e27e43dc6b3b99685a0b96eb8f25","date":"2018-12-17 16:40:58 -0800","message":"Add plugin API versioning to plugin loader and plugins","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"07a7555acdcae7076c279f04b827d782315519f0","date":"2018-12-18 15:07:30 -0800","message":"lint","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"52202c68fc2e5edc44a69c1630dd28f60389d24d","date":"2018-12-18 15:21:10 -0800","message":"fix docker launching plugins","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"c6bb070bdf095baecaa2ccd3905faf03d8e681ee","date":"2018-12-18 16:49:02 -0800","message":"Merge pull request #5015 from hashicorp/f-plugin-versions","refs":[],"body":"Add plugin API versioning to plugin loader and plugins","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"39ca1b00dd74384a5017e009b084b3f84b9805d4","date":"2018-11-27 22:42:22 -0500","message":"client/drivermananger: add driver manager","refs":[],"body":"The driver manager is modeled after the device manager and is started by the client.\nIt's responsible for handling driver lifecycle and reattachment state, as well as\nprocessing the incomming fingerprint and task events from each driver. The mananger\nexposes a method for registering event handlers for task events that is used by the\ntask runner to update the server when a task has been updated with an event.\n\nSince driver fingerprinting has been implemented by the driver manager, it is no\nlonger needed in the fingerprint mananger and has been removed.\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"32aaedd6b78f0b9d0f35d3fca02e64df5d8c0b52","date":"2018-12-07 16:02:26 -0500","message":"tr: deregister task handler on cleanup","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"2f010a2f2515cc41c78c33b7d8a2476c7f8ddd45","date":"2018-12-08 01:04:52 -0500","message":"client/drivermananger: fixup issues from rebase and address PR comments","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"331793e283dec33add7ef6907bdc76af6be733ce","date":"2018-12-13 01:41:44 -0500","message":"client: batch initial fingerprinting in plugin manangers","refs":[],"body":"drivermanager: fix pr comments/feedback\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"3100f7bd64a566484d6ca3764b092720c9c04a52","date":"2018-12-17 13:19:51 -0500","message":"client/pluginmanager: add plugin manager interface to device/driver managers","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"6951ca487df8864ff4427d2c837aa235c7bc8d31","date":"2018-12-17 22:36:06 -0500","message":"drivermanager: use allocID and task name to route task events","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"12528cadda28d8c819574363ecf3fe3fb6fbb649","date":"2018-12-17 22:54:25 -0500","message":"drivermanager: attempt to reattach and shutdown driver plugin if blocked by allow/block lists","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"1ff3b681da8a6af8037ad76d37c26782d7f12cc9","date":"2018-12-18 23:07:01 -0500","message":"drivermanager: use correct plugin config types","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"c98aaad3427a441b5416327433bf12167c5ba0c9","date":"2018-12-19 00:35:12 -0500","message":"devicemanager: fix devicemanager tests","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"a57dc29cbfaae17df04265c4644bc6d596cf28e2","date":"2018-12-19 00:44:14 -0500","message":"Merge pull request #4964 from hashicorp/f-drivermananger-part2","refs":[],"body":"client driver manager","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"f10dbbec54ec42e236f92953db5c5ace25d1339f","date":"2018-12-12 13:02:44 +0100","message":"guides: Update for globbed namespace rules","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"0ca8b236ffa2a65a029e3498b38273465894e210","date":"2018-12-19 12:49:43 +0100","message":"Merge pull request #4982 from hashicorp/f-acls-glob-ns","refs":[],"body":"acl: Add support for globbing namespaces","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"0b12ef11a2f7b63da23f5219e3d8b19019dc0bdc","date":"2018-12-19 13:09:45 +0100","message":"changelog: Add entry for glob namespaces","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"f86c6976ed7edfee93dc249f141fdce006f7b1c1","date":"2018-12-19 09:05:01 -0600","message":"minor refactoring of affinities tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4453602c24f71b8ed79efaec07a79e5bca4b8dcc","date":"2018-12-19 09:56:44 -0600","message":"Make affinity e2e tests wait for leader through Before method","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"b63095db602651701af1593c4fe6b6087545f396","date":"2018-12-19 18:32:51 +0100","message":"allocrunner: Close updates routine correctly","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"4cac8448726749d859890a0752f255a39ec5a5f2","date":"2018-12-19 18:40:16 +0100","message":"Merge pull request #5027 from hashicorp/dani/b-allocrunner-routine","refs":[],"body":"allocrunner: Close updates routine correctly","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"3a41fd7b318b6f1c46651fa8295e98fcbc8a49e3","date":"2018-12-06 17:25:23 -0800","message":"tr: fix HookState Copy() and Equal() methods","refs":[],"body":"They did not take into account the Env field.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"bd53ccf548c0f145fab72b787264feb7964fd845","date":"2018-12-04 17:01:08 -0800","message":"client/state: reorg state buckets to ease transition","refs":[],"body":"* Prefix task bucket with task- to prevent name conflicts\n* Shorten device manager bucket name\n* Remove commented out outdated var\n* Update layout comment\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"784706a1e51c7d8eff558b91db645ea02c1cbf92","date":"2018-12-06 17:24:43 -0800","message":"client/state: support upgrading from 0.8->0.9","refs":[],"body":"Also persist and load DeploymentStatus to avoid rechecking health after\nclient restarts.\n","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"cba472485b1117433adc4032acfab49fc1746bd5","date":"2018-12-18 14:49:09 -0800","message":"client/state: use 2 as version; test error path","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"11e923e508dc85091bbbaab160bff11900b57978","date":"2018-12-18 14:49:38 -0800","message":"client/state: add context to errors","refs":[],"body":"Unfortunately I don't know how to test these errors. As far as I can\ntell they should only happen if there was a programming error in the\nupgrade code or the underlying boltdb was corrupted somehow.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"fc7be6b7f021ce075bded60a1ba80cdfbd8215c2","date":"2018-12-18 15:36:32 -0800","message":"client/state: improve upgradeTaskBucket error handling","refs":[],"body":"And add a test\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"ab34578740b8d6a18c1dc31232ef918947c27445","date":"2018-12-18 16:49:21 -0800","message":"gofmt -s -w upgrade_int_test.go","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"75a889244e80c84475651a0b96fe0f461afcbc32","date":"2018-12-18 16:53:18 -0800","message":"tests: implement HasHealth for mock health","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f07fe3459a2f83cf4b6e0b821d4aef6ee532402e","date":"2018-12-18 17:44:33 -0800","message":"client/state: missing deploy status isn't an error","refs":[],"body":"Fixes TestClient_SaveRestoreState\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"8c1d713ed3706af1091dcca38ea5fd75184caf11","date":"2018-12-19 14:13:13 -0500","message":"add link on monitoring home for easier navigation (#5028)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"d5f4de38f8456c9890d03e384e4e7ac6da88bbfe","date":"2018-12-19 11:41:53 -0800","message":"client: assert alloc status updates work","refs":[],"body":"Re-enabling and updating an old test. Able to cut out a ton of extra\nwork by using WaitForRunning which does almost everything this test\nneeds.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f89aa787f469d7ac43fd873348dda6513a581078","date":"2018-12-19 11:49:46 -0800","message":"Merge pull request #5003 from hashicorp/f-state-upgrade","refs":[],"body":"Support upgrading state from ","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"9a017adfc9dea9c8adaafff90597030eaba1a2d2","date":"2018-12-19 13:05:33 -0800","message":"proto","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"99df4c98c701d15dc1ab514146b7cf512732eacf","date":"2018-12-19 14:23:09 -0800","message":"Store device envs separately and pass to drivers","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"60522ac457083cadd4e9413fc9843a9960e3dd8a","date":"2018-12-19 14:55:34 -0800","message":"Merge pull request #5030 from hashicorp/test-client-statusupdate","refs":[],"body":"client: assert alloc status updates work","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"69988ba8dc326942bbac13a0e7f1c80e814b6484","date":"2018-12-17 12:29:56 -0600","message":"Initial e2e tests for spread","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e514d0a617e61d28e00d828bddd5b36844f94146","date":"2018-12-17 14:39:14 -0600","message":"Fix spread e2e test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"33b74334b71956d149292e85a50695fc3a804f00","date":"2018-12-19 12:09:05 -0800","message":"test: fix race around updateCh handling","refs":[],"body":"PeriodicDispatch.SetEnabled sets updateCh in one goroutine, and\nPeriodicDispatch.run accesses updateCh in another.\n\nThe race can be prevented by having SetEnabled pass updateCh to run.\n\nRace detector output from `go test -race -run TestServer_RPC` in nomad/\n\n```\n==================\nWARNING: DATA RACE\nWrite at 0x00c0001d3f48 by goroutine 75:\n  github.com/hashicorp/nomad/nomad.(*PeriodicDispatch).SetEnabled()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/periodic.go:468\n+0x256\n  github.com/hashicorp/nomad/nomad.(*Server).revokeLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:724\n+0x267\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:131\n+0x3c\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:163\n+0x4dd\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:72\n+0x6c\n\nPrevious read at 0x00c0001d3f48 by goroutine 515:\n  github.com/hashicorp/nomad/nomad.(*PeriodicDispatch).run()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/periodic.go:338\n+0x177\n\nGoroutine 75 (running) created at:\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:70\n+0x269\n\nGoroutine 515 (running) created at:\n  github.com/hashicorp/nomad/nomad.(*PeriodicDispatch).SetEnabled()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/periodic.go:176\n+0x1bc\n  github.com/hashicorp/nomad/nomad.(*Server).establishLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:231\n+0x582\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:117\n+0x82e\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:72\n+0x6c\n==================\n```\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b88dbdb516b603a3fa3122eb6753a84fd1bf9dc5","date":"2018-12-19 12:23:15 -0800","message":"test: fix race around block eval chans","refs":[],"body":"Similar to previous commit, stop and change chans were being set and\naccessed from different goroutines. Passing the chans on the stack\nresolves the race.\n\nOutput from `go test -race -run 'Server_RPC$' in nomad/\n\n```\n==================\nWARNING: DATA RACE\nWrite at 0x00c0002b4e10 by goroutine 63:\n  github.com/hashicorp/nomad/nomad.(*BlockedEvals).Flush()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/blocked_evals.go:648\n+0x32a\n  github.com/hashicorp/nomad/nomad.(*BlockedEvals).SetEnabled()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/blocked_evals.go:149\n+0x12b\n  github.com/hashicorp/nomad/nomad.(*Server).revokeLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:721\n+0x232\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:122\n+0x95d\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:72\n+0x6c\n\nPrevious read at 0x00c0002b4e10 by goroutine 75:\n  github.com/hashicorp/nomad/nomad.(*BlockedEvals).watchCapacity()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/blocked_evals.go:483\n+0xfe\n\nGoroutine 63 (running) created at:\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:70\n+0x269\n\nGoroutine 75 (finished) created at:\n  github.com/hashicorp/nomad/nomad.(*BlockedEvals).SetEnabled()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/blocked_evals.go:141\n+0xba\n  github.com/hashicorp/nomad/nomad.(*Server).establishLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:210\n+0x392\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:117\n+0x82e\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:72\n+0x6c\n==================\n==================\nWARNING: DATA RACE\nWrite at 0x00c0002b4e50 by goroutine 63:\n  github.com/hashicorp/nomad/nomad.(*BlockedEvals).Flush()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/blocked_evals.go:649\n+0x388\n  github.com/hashicorp/nomad/nomad.(*BlockedEvals).SetEnabled()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/blocked_evals.go:149\n+0x12b\n  github.com/hashicorp/nomad/nomad.(*Server).revokeLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:721\n+0x232\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:122\n+0x95d\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:72\n+0x6c\n\nPrevious read at 0x00c0002b4e50 by goroutine 77:\n  github.com/hashicorp/nomad/nomad.(*BlockedEvals).prune()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/blocked_evals.go:690\n+0xae\n\nGoroutine 63 (running) created at:\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:70\n+0x269\n\nGoroutine 77 (finished) created at:\n  github.com/hashicorp/nomad/nomad.(*BlockedEvals).SetEnabled()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/blocked_evals.go:142\n+0xdc\n  github.com/hashicorp/nomad/nomad.(*Server).establishLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:210\n+0x392\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:117\n+0x82e\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:72\n+0x6c\n==================\n```\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"4235b32a5c72154badebabe1f930be0e1f126007","date":"2018-12-19 12:26:57 -0800","message":"test: fix race in eval broker update chan","refs":[],"body":"Similar to previous commits the delayed eval update chan was set and\naccess from different goroutines causing a race. Passing the chan on the\nstack resolves the race.\n\nRace output from `go test -race -run 'Server_RPC$'` in nomad/\n\n```\n==================\nWARNING: DATA RACE\nWrite at 0x00c000339150 by goroutine 63:\n  github.com/hashicorp/nomad/nomad.(*EvalBroker).flush()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/eval_broker.go:708\n+0x3dc\n  github.com/hashicorp/nomad/nomad.(*EvalBroker).SetEnabled()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/eval_broker.go:174\n+0xc4\n  github.com/hashicorp/nomad/nomad.(*Server).revokeLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:718\n+0x1fd\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:122\n+0x95d\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:72\n+0x6c\n\nPrevious read at 0x00c000339150 by goroutine 73:\n  github.com/hashicorp/nomad/nomad.(*EvalBroker).runDelayedEvalsWatcher()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/eval_broker.go:771\n+0x176\n\nGoroutine 63 (running) created at:\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:70\n+0x269\n\nGoroutine 73 (running) created at:\n  github.com/hashicorp/nomad/nomad.(*EvalBroker).SetEnabled()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/eval_broker.go:170\n+0x173\n  github.com/hashicorp/nomad/nomad.(*Server).establishLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:207\n+0x355\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:117\n+0x82e\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:72\n+0x6c\n==================\n```\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"796542c07ec2c9fd4f52921b15748a9e860928c5","date":"2018-12-19 13:05:12 -0800","message":"test: fix race and nil panic in nomad/ tests","refs":[],"body":"Race was test only and due to unlocked map access.\n\nPanic was test only and due to checking a field on a struct even when we\nknew the struct was nil.\n\nRace output that was fixed:\n```\n==================\nWARNING: DATA RACE\nRead at 0x00c000697dd0 by goroutine 768:\n  runtime.mapaccess2()\n      /usr/local/go/src/runtime/map.go:439 +0x0\n  github.com/hashicorp/nomad/nomad.TestLeader_PeriodicDispatcher_Restore_Adds.func8()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader_test.go:402\n+0xe6\n  github.com/hashicorp/nomad/testutil.WaitForResultRetries()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/testutil/wait.go:30\n+0x5a\n  github.com/hashicorp/nomad/testutil.WaitForResult()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/testutil/wait.go:22\n+0x57\n  github.com/hashicorp/nomad/nomad.TestLeader_PeriodicDispatcher_Restore_Adds()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader_test.go:401\n+0xb53\n  testing.tRunner()\n      /usr/local/go/src/testing/testing.go:827 +0x162\n\nPrevious write at 0x00c000697dd0 by goroutine 569:\n  runtime.mapassign()\n      /usr/local/go/src/runtime/map.go:549 +0x0\n  github.com/hashicorp/nomad/nomad.(*PeriodicDispatch).Add()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/periodic.go:224\n+0x2eb\n  github.com/hashicorp/nomad/nomad.(*Server).restorePeriodicDispatcher()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:394\n+0x29a\n  github.com/hashicorp/nomad/nomad.(*Server).establishLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:234\n+0x593\n  github.com/hashicorp/nomad/nomad.(*Server).leaderLoop()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:117\n+0x82e\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership.func1()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:72\n+0x6c\n\nGoroutine 768 (running) created at:\n  testing.(*T).Run()\n      /usr/local/go/src/testing/testing.go:878 +0x650\n  testing.runTests.func1()\n      /usr/local/go/src/testing/testing.go:1119 +0xa8\n  testing.tRunner()\n      /usr/local/go/src/testing/testing.go:827 +0x162\n  testing.runTests()\n      /usr/local/go/src/testing/testing.go:1117 +0x4ee\n  testing.(*M).Run()\n      /usr/local/go/src/testing/testing.go:1034 +0x2ee\n  main.main()\n      _testmain.go:1150 +0x221\n\nGoroutine 569 (running) created at:\n  github.com/hashicorp/nomad/nomad.(*Server).monitorLeadership()\n      /home/schmichael/go/src/github.com/hashicorp/nomad/nomad/leader.go:70\n+0x269\n==================\n```\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6478a93aca950f1e9c35363b1f739256410a9b64","date":"2018-12-19 15:39:59 -0800","message":"drivermgr: fix race in building driver list","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"2cf3a3c56afc3b6d11e203bb4a23e790a1e28ed5","date":"2018-12-19 15:42:49 -0800","message":"test: copy AR's Alloc before mutating","refs":[],"body":"Fixes a race in client tests\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f2e8375e35782c90fcc0b895d817618d2632de11","date":"2018-12-19 17:08:24 -0800","message":"test: re-eanble periodic fingerprint test","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"848554ba61bd46b9d10b035d0f9a17f665f5d352","date":"2018-12-19 20:22:07 -0500","message":"client: add proper build flag to allocrunner testing.go","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"7ad040166d96d5b2095cf78241cd894fc2d9b014","date":"2018-12-19 21:25:32 -0600","message":"new e2e test for spread, and refactor affinity tests to share util methods","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"009d151fa19f92d403ed8b7093546059c9a9ebaa","date":"2018-12-19 23:26:42 -0500","message":"Merge pull request #5009 from hashicorp/ci-use-gotestsum","refs":[],"body":"ci: use gotestsum for running tests","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"145827d8b7338482b39c95b551347eface0113e6","date":"2018-12-20 00:53:44 -0500","message":"fix tests that fail as a result of async client startup","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"431d7af2812a80534a5b76d10e6dee29cd33fe28","date":"2018-12-20 01:01:53 -0500","message":"fix test","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"457ce6ca1ba0f659dc96e348321ec062f46c326f","date":"2018-12-20 01:05:17 -0500","message":"fix tests","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4798dacafd1c94a01e4ea1471190761d38d94aee","date":"2018-12-20 12:54:01 +0100","message":"plugins: Add consistent message for requires root","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"95dfb9f148d3ba0e00807fdea08125f31b62584b","date":"2018-12-20 12:54:19 +0100","message":"exec: Return undetected when not running as root","refs":[],"body":"This is an unrecoverable error, so we should only do this check once,\nrather than returning unhealthy constantly.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"aadb3df03c649b421a8afe520a91c938aa3cc7f0","date":"2018-12-20 12:55:07 +0100","message":"java: Return undetected when not running as root","refs":[],"body":"This is an unrecoverable error, so we should only do this check once,\nrather than returning unhealthy constantly.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"aa6b170506569640281dc476cdcf656c6bd67de5","date":"2018-12-20 12:55:23 +0100","message":"rkt: Return consistent error when not root","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"2c3b48279b3d8f4dd987e268545ced516a20def7","date":"2018-12-20 13:32:28 -0500","message":"Merge pull request #5036 from hashicorp/b-fix-release-build","refs":[],"body":"client: add proper build flag to allocrunner testing.go","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"617d102ce4252582a194e1f0b7417f186b70910f","date":"2018-12-20 13:52:33 -0500","message":"command: wait for drivers to be ready before test","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"0b235d89d9c4dd1830fe80ceb9f335d51c5c8343","date":"2018-12-20 13:54:29 -0500","message":"fix test","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"748bc58cb2f31c70fba80ed9c75428bf6193ad4d","date":"2018-12-20 11:37:46 -0800","message":"taskenv: have maps take precedence over primitives","refs":[],"body":"**The Bug:**\n\nYou may have seen log lines like this when running 0.9.0-dev:\n\n```\n... client.alloc_runner.task_runner: some environment variables not available for rendering: ... keys=\"attr.driver.docker.volumes.enabled, attr.driver.docker.version, attr.driver.docker.bridge_ip, attr.driver.qemu.version\"\n```\n\nNot only should we not be erroring on builtin driver attributes, but the\nresults were nondeterministic due to map iteration order!\n\nThe root cause is that we have an old root attribute for all drivers\nlike:\n\n```\nattr.driver.docker = \"1\"\n```\n\nWhen attributes were opaque variable names it was fine to also have\n\"nested\" attributes like:\n\n```\nattr.driver.docker.version = \"1.2.3\"\n```\n\nHowever in the HCLv2 world the variable names are no longer opaque: they\nform an object tree. The `docker` object can no longer both hold a value\n(`\"1\"`) *and* nested attributes (`version = \"1.2.3\"`).\n\n**The Fix:**\n\nSince the old `attr.driver.<name> = \"1\"` attribues are useless for task\nconfig interpolation, create a new precedence rule for creating the task\nconfig evaluation context:\n\n*Maps take precedence over primitives.*\n\nThis means `attr.driver.docker.version` will always take precedence over\n`attr.driver.docker`. The results are determinstic and give users access\nto the more useful metadata.\n\nI made this a general precedence rule instead of special-casing driver\nattrs because it seemed like better default behavior than spamming\nWARNings to logs that were likely unactionable by users.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"406474821550186dacf31e3b19b99810c64ec6b0","date":"2018-12-20 15:12:48 -0600","message":"Clean up map update code","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c54aad6231a9527e5c324066a0cf8516a99ac0f9","date":"2018-12-20 13:38:27 -0800","message":"Merge pull request #5032 from hashicorp/f-driver-env","refs":[],"body":"Store device envs separately and pass to drivers","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"c64b41d154e395cb83cc53beb43d4c2ea659ac56","date":"2018-12-20 15:39:08 -0600","message":"Merge pull request #5037 from hashicorp/f-e2e-spread","refs":[],"body":"e2e tests for spread stanza","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"54dde24bcbe703e115d7e3491b4577f9b5915751","date":"2019-01-03 13:13:57 +0100","message":"taskrunner: Persist environment from hooks","refs":[],"body":"https://github.com/hashicorp/nomad/pull/5032 introduced a regression\nwhere the origHookState was used in place of the response from the hook.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"26b5ad4532e4caf2967f6acae9857d232362988b","date":"2019-01-03 13:16:28 +0100","message":"Merge pull request #5041 from hashicorp/dani/b-driver-healt","refs":[],"body":"drivers: Cleanup root user fingerprinting","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"749eab7257fbf13dbfc8c53070fc411cf1dae777","date":"2019-01-03 13:31:26 +0100","message":"chore: Fix environement->environment typo","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"5dadb6cc7e62cf95021a9afc27894b0de5fc1a14","date":"2019-01-03 13:31:30 +0100","message":"chore: Fix environement->environment typo","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"002f19085a736bd0828981d1d1bfe2c3255e5067","date":"2019-01-03 13:31:49 +0100","message":"e2e: goimports e2eutil/utils.go","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"acf2c524f372ec1e7f064bc7f42fd4ff13ff1d05","date":"2019-01-03 14:04:31 +0100","message":"allocrunner: Standardised discard logs","refs":[],"body":"Follow up from https://github.com/hashicorp/nomad/pull/5007#pullrequestreview-186739124\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"634c6a85e05e13bb0c6e35fd057c004d45de1c3e","date":"2019-01-03 14:40:25 +0100","message":"Merge pull request #5141 from hashicorp/dani/fix-static-checks","refs":[],"body":"Fix `make check`","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"5673a2c33d3458532e19669b3930164552a8b606","date":"2019-01-03 09:30:52 -0600","message":"Merge pull request #5140 from hashicorp/dani/b-taskrunner","refs":[],"body":"taskrunner: Persist environment from hooks","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"1cfef83302acb2fb0f63e740c8ad8f7575e0b130","date":"2019-01-03 11:22:21 -0600","message":"Increase timeout in e2e test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1209d03a5c9c4025bfd5841a9c07ad88bb26de1a","date":"2019-01-03 18:40:48 +0100","message":"Merge pull request #5142 from hashicorp/dani/cleanup-allocrunner-logs","refs":[],"body":"allocrunner: Standardised discard logs","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"136e690d3e1e25f72d84e85fd55a99fb2f056b47","date":"2019-01-03 12:12:43 -0600","message":"Update README.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"4d6bf2a68be35325fba2b76ef5770a37d8c6dbc7","date":"2019-01-03 13:19:04 -0600","message":"Update README.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"70d7a63deb91edfdc48d03090e76445f3f02281e","date":"2019-01-03 13:24:58 -0600","message":"Update e2e readme","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"41d6635026b048f68256a4f7c6ee669ef0d616d8","date":"2019-01-03 12:36:22 -0500","message":"drivers/exec: run as `nobody` by default","refs":[],"body":"libcontainer based drivers (e.g. exec, java) should default to running\nprocesses as `nobody` [1]; but libcontainer treats empty user as `root`\nin our case (either because of default or due to `root` being current\nuser).\n\n[1] https://github.com/hashicorp/nomad/blob/94c28a4c6cc45f1b377d50a6bff2017b46c43d18/website/source/docs/job-specification/task.html.md#task-parameters\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ff9a4a17e59388dcab067949e0664f645b2f5bcf","date":"2019-01-03 13:39:42 -0500","message":"drivers/exec: bind mount /dev into rootfs","refs":[],"body":"Restores pre-0.9 behavior, where Nomad makes /dev available to exec\ntask.  Switching to libcontainer, we accidentally made only a small\nsubset available.\n\nHere, we err on the side of preserving behavior of 0.8, instead of going\nfor the sensible route, where only a reasonable subset of devices is\nmounted by default and user can opt to request more.\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"36b5435ed3cc0f8e54467e889fd3c949d1ab56fc","date":"2019-01-03 14:02:02 -0600","message":"Increase alloc wait timeout in e2e test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"d2c81c375c7d2747ab19f80cb905bd757f86f949","date":"2019-01-03 12:32:18 -0800","message":"Merge pull request #5038 from hashicorp/b-drivermanager-tests","refs":[],"body":"WIP: fix failing tests caused by async driver manager","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"38929049f40324853ea5dd7247b486bac6f3ebf1","date":"2019-01-03 15:31:19 -0600","message":"Update README.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"9a514aabd3888a832057c26639dfefb0249a61a9","date":"2019-01-03 16:15:59 -0600","message":"Update README.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"21810d0edd07a55000b72487fc1134064eb41c16","date":"2019-01-03 16:16:20 -0600","message":"Added waiting on client node ready state before running e2e tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"bce7c9372de20b0ad958b1df7a7106f36f2264c0","date":"2019-01-04 08:53:50 -0500","message":"goimport file","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4402b6635f62fca00c2280133444abf34aacb071","date":"2019-01-04 08:58:40 -0500","message":"Merge pull request #5143 from hashicorp/b-exec-regressions","refs":[],"body":"Restore some `exec` behavior ","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ad320b803a6dc36baff8ca97ac1ad16ccd94feb3","date":"2019-01-04 14:01:36 +0000","message":"updated to latest hashicorp/raft and hashicorp/memberlist to pull upstream fixes for accept-loop error handling","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"5c007301b960bb2dfd6a9701b893e148a95b3702","date":"2019-01-04 14:59:26 +0000","message":"Merge branch 'master' of github.com:hashicorp/nomad into b-1173-log-spam","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"5805c64a9f1c3b409693493dfa30e7136b9f547b","date":"2019-01-04 10:36:05 -0500","message":"driver/exec: use dedicated /dev mount (#5147)","refs":[],"body":"Use a dedicated /dev mount so we can inject more devices if necessary,\r\nand avoid allowing a container to contaminate host /dev.\r\n\r\nFollow up to https://github.com/hashicorp/nomad/pull/5143 - and fixes master.","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"b51021ac28ee6845c8919e03aa48281e0300cb4e","date":"2019-01-04 16:55:14 +0100","message":"e2e: Output setup instructions after terraform","refs":[],"body":"This adds a message that provides environment setup instructions for\nrunning e2e tests after running terraform apply.\n\nThis allows copy/pasting exports, rather than manually constructing\nthem.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"a9666e59b3cde2e1316ed8fa3ca0bcb847e75d7d","date":"2019-01-04 16:56:26 +0000","message":"updated serf along with raft","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"8c10992e78f1c637381d5d2e2163d7b5f1a87c10","date":"2019-01-04 16:56:34 +0000","message":"Merge branch 'master' of github.com:hashicorp/nomad into b-1173-log-spam","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"687e1cf0fe90c58b3b218e27984f8751c72f7f6d","date":"2019-01-04 12:55:18 -0500","message":"Merge pull request #5146 from hashicorp/b-1173-log-spam","refs":[],"body":"updated to latest hashicorp/raft and hashicorp/memberlist to pull","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"17b7490891aff8560862d3be8416423b3e1df552","date":"2019-01-04 12:00:29 -0500","message":"taskrunner: emit TaskReceived event","refs":[],"body":"Preserve pre-0.9, where task runner emits `Received: Task received by\nclient` event on task runner creation.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"53aa449aa7640fd499e52d663fa5cfd593166d0e","date":"2019-01-04 14:58:39 -0500","message":"Merge pull request #5150 from hashicorp/b-task-received-event","refs":[],"body":"taskrunner: emit TaskReceived event","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ad51e6cb24438e00750d1474d843073316d7d94e","date":"2019-01-04 22:14:03 +0100","message":"Merge pull request #5149 from hashicorp/dani/e2e-friendly","refs":[],"body":"e2e: Output setup instructions after terraform","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"c26dfb000c963f41a04c5ce8572a82444d365138","date":"2019-01-06 17:02:43 -0500","message":"drivers/exec: restrict devices exposed to tasks","refs":[],"body":"We ultimately decided to provide a limited set of devices in exec/java\ndrivers instead of all of host ones.  Pre-0.9, we made all host devices\navailable to exec tasks accidentally, yet most applications only use a\nsmall subset, and this choice limits our ability to restrict/isolate GPU\nand other devices.\n\nStarting with 0.9, by default, we only provide the same subset of\ndevices Docker provides, and allow users to provide more devices as\nneeded on case-by-case basis.\n\nThis reverts commit 5805c64a9f1c3b409693493dfa30e7136b9f547b.\nThis reverts commit ff9a4a17e59388dcab067949e0664f645b2f5bcf.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b8cbcdb3718ccf7b46d5c4f7cacee495ae5f2992","date":"2019-01-06 20:59:20 -0600","message":"remove unnecessary logging in rkt driver fingerprint method","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"511f6800668094a3f6c643c59a660c5812628945","date":"2019-01-06 21:37:58 -0600","message":"Merge pull request #5155 from hashicorp/b-remove-rkt-logging","refs":[],"body":"remove unnecessary logging in rkt driver fingerprint method","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"26594aa31e6bb49cd8c09574499b9b81b2e1f8db","date":"2019-01-06 22:04:15 -0600","message":"Standardize driver health description messages for all drivers","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c62cb0b0ae82889158301b25ab9cf099181d75ff","date":"2019-01-07 07:59:13 -0500","message":"Skip tests requiring Docker deamon if not found.","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"90f747d89549b9d793dd1ed1820c05585d824563","date":"2019-01-07 08:27:06 -0500","message":"tests: helper function for checking docker presense","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d28f7ecca781a1834ea8eba22546c6671e30476c","date":"2019-01-07 08:35:22 -0500","message":"tests: busybox only depends on arch","refs":["origin/r-docker-mac-tests"],"body":"Busybox is compiled for linux only.  Making the file used in executor\ntests even for non-linux targets, as having the file present has no\nside-effects.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b744fb1b7f4eb9f0ae6943ef0241b70e793fdf4f","date":"2019-01-07 09:49:28 -0600","message":"Merge pull request #5156 from hashicorp/f-standard-driver-health-messages","refs":[],"body":"Standardize driver health description messages for all drivers","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"646e077d32c27d75d1c9a0730a7e9fd1172cee9e","date":"2019-01-04 16:37:11 +0100","message":"e2e: Add consultemplate test","refs":[],"body":"This adds a basic test for consul template, that verifies the behaviour\nof consul-template with task blocking and restarting of tasks\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"8131eceb12661a17983fabca3af5d117e1bd5d3b","date":"2019-01-07 17:54:20 +0100","message":"Merge pull request #5148 from hashicorp/dani/f-e2e-consul","refs":[],"body":"e2e: Add consultemplate test","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"31f82895a941fed2e5b1bdcc3e50f3055dee087a","date":"2019-01-07 16:42:44 +0000","message":"added validation on client metadata keys","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"02a04b378a3e0d5433e120df40898d9c58043c83","date":"2019-01-07 17:32:45 +0000","message":"updated CHANGELOG to note backward incompatibility in node metadata validation","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"baa16f72fc0847cc9b6ec74444811d718552b730","date":"2019-01-07 18:01:59 +0000","message":"gofmt to make check happy","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"3e7fa0072ac183c70679e4e77cc8a21f270af464","date":"2019-01-07 12:34:48 -0800","message":"Merge pull request #5043 from hashicorp/b-taskenv-conflicts","refs":[],"body":"taskenv: have maps take precedence over primitives","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"ffadab1b203d11a7e14cf4fc91e1d3ead0e2ea99","date":"2018-12-19 15:26:37 -0800","message":"remove nil logger","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"06a52b57e68e95b09f1fabeae8cf401a324b171b","date":"2018-12-19 15:32:43 -0800","message":"rkt fingerprint logs once","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"bdf4e1f89ad9ff6f6d549a5d5bdfaeef2c410913","date":"2018-12-19 15:39:30 -0800","message":"Don't log event error on driver shutdown","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"d45d6c62518bd1a84204013d2b8cf83c8bc02405","date":"2018-12-19 16:32:42 -0800","message":"add docker logger to separate main","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"437f03d8770f33cf3f9c6660ed21fbdaf27d63d2","date":"2018-12-21 11:23:21 -0800","message":"recover","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"3257eb6d86d77dbeda6309414aba0209887b3964","date":"2019-01-03 15:00:52 -0800","message":"Fix hooks","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"b300306c4a9890f19059cb444bd1af72b9c25744","date":"2019-01-03 15:24:01 -0800","message":"comments","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"4e7da3ea4ed21122baebb3359f33b68f5722a55e","date":"2019-01-04 11:11:38 -0800","message":"regenerate protos","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"144866a87b0178a3c8206afd6547660ccfdaac1a","date":"2019-01-04 14:04:45 -0800","message":"Mock driver has recovery, stats","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"19e67a0916aed3e72cbea45258947190ed0c6686","date":"2019-01-04 16:08:47 -0800","message":"Test recovery","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"5424d3b540d8c24abbef617bb642b9e7899e65e9","date":"2019-01-04 16:36:06 -0800","message":"vet","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"e72aad749666446fb02a4f9480b393469d14b9e8","date":"2019-01-07 16:49:48 -0600","message":"Merge pull request #5023 from nrvale0/tf-autojoin-fix","refs":[],"body":"fix for user-specified auto-join tags","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"6bb99c93d0366e7ae7fced019bc28db44753d736","date":"2019-01-07 14:47:49 -0800","message":"Review comments","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"428cec9682f68abc089cfec1901f9bee97054966","date":"2019-01-07 15:27:33 -0800","message":"Merge pull request #5152 from hashicorp/f-recover","refs":[],"body":"Task runner recovers from external plugin exiting","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"1e132c6337bb58de42117c1c3b93acc4a38b2a9d","date":"2019-01-07 18:59:26 -0500","message":"Update CHANGELOG.md","refs":[],"body":"Co-Authored-By: cgbaker <cgbaker@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"64f591875db7fead5c88e0b4d0df24338232d069","date":"2019-01-08 00:09:21 +0000","message":"moved interp key regex out to a helper function","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"5cf081286acfbe0b2eedd885fc2680b768ed90ba","date":"2019-01-08 02:17:35 +0000","message":"Merge branch 'master' of github.com:hashicorp/nomad into f-1157-validate-node-meta-variables","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"fb61a1f6a9d0e58b13604de8e1192d624d51b06b","date":"2019-01-08 13:45:10 +0100","message":"deps: Update x/net/context","refs":[],"body":"This allows std context to be used in place of an x/net/context and\nunblocks updating to the latest version of go-plugin.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"994057abf41e21310ab2a7d28034bc1632cc3882","date":"2018-12-20 13:21:34 +0100","message":"drivers: Add internal interface for Shutdown","refs":[],"body":"This allows us to correctly terminate internal state during runs of the\nnomad test suite, e.g closing eventer contexts correctly.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"476e44b4e47daee0b7ad4ce03a7d1ee210c749fc","date":"2018-12-20 13:25:07 +0100","message":"drivers: Implement InternalPluginDriver interface","refs":[],"body":"This implements the InternalPluginDriver interface in each driver, and\ncalls the cancellation fn for their respective eventers.\n\nThis fixes a per task goroutine leak during test suite execution.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"d9a220fc855084af80e5434877aceefdcec67ad3","date":"2019-01-08 15:09:25 +0100","message":"Merge pull request #5042 from hashicorp/dani/f-shutdowns","refs":[],"body":"plugins: Shutdown internal plugins","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"bcf40e21ed6f8125469424bb12b3dda6c3bbbe73","date":"2019-01-08 15:09:40 +0100","message":"Merge pull request #5161 from hashicorp/dani/update-net-ctx","refs":[],"body":"deps: Update x/net/context","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"607e7f2ddee02daa2265ee337216a10c9bb7aae1","date":"2019-01-04 16:05:40 -0500","message":"remove always false parameter","refs":[],"body":"Simplify allocDir.Build() function to avoid depending on client/structs,\nand remove a parameter that's always set to `false`.\n\nThe motivation here is to avoid a dependency cycle between\ndrivers/cstructs and alloc_dir.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2831088fc5cde8102cf6dd10dedad19a7ab0996e","date":"2019-01-04 18:01:57 -0500","message":"remove deprecated allocrunner","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"694e3010c22f10240ff3ae713de7b7fe3edf530b","date":"2019-01-04 16:11:25 -0500","message":"use drivers.FSIsolation","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c0162fab35d1f5307e8f46a08f02b983a0af1c16","date":"2019-01-04 18:01:35 -0500","message":"move cstructs.DeviceNetwork to drivers pkg","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"800a3522e379b57fb5f6a5de666d4af5b4c9bf7d","date":"2019-01-07 10:01:46 -0500","message":"drivers: re-export ResourceUsage structs","refs":[],"body":"Re-export the ResourceUsage structs in drivers package to avoid drivers\ndirectly depending on the internal client/structs package directly.\n\nI attempted moving the structs to drivers, but that caused some import\ncycles that was a bit hard to disentagle.  Alternatively, I added an\nalias here that's sufficient for our purposes of avoiding external\ndrivers depend on internal packages, while allowing us to restructure\npackages in future without breaking source compatibility.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"34ee0ba6b931f64dd5a97ca9df0c44506c17f07e","date":"2019-01-04 18:33:27 -0500","message":"Remove some dead code","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b51ecacd23f060ea45b85aa7f6de2febf482093b","date":"2019-01-07 20:39:29 -0500","message":"remove lxc references","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"01fd0855750ff610244b5601dc0683fb214242d3","date":"2019-01-07 20:43:26 -0500","message":"remove unused go-lxc vendored library","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"838c8fcc7547a31538f2f2f8f8baa97b01caab9e","date":"2019-01-08 07:04:09 -0800","message":"Merge pull request #5034 from hashicorp/test-fix-races","refs":[],"body":"Test fix races","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"cdcc1db700bef473715cf6621a01b17fb4734e8f","date":"2019-01-08 15:07:36 +0000","message":"refactored config validation into a new method, modified Meta.Client tests appropriately","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"6c01ae4ae239ddfa745d262da73a58342f74278e","date":"2019-01-04 15:19:00 -0800","message":"e2e: add task events tests","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"1ae8261139f2f1127108c0806b8aea3dbfad07cc","date":"2019-01-04 15:19:57 -0800","message":"client: emit Killing/Killed task events","refs":[],"body":"We were just emitting Killed/Terminated events before. In v0.8 we\nemitted Killing/Killed, but lacked Terminated when explicitly stopping\na task. This change makes it so Terminated is always included, whether\nexplicitly stopping a task or it exiting on its own.\n\nNew output:\n\n2019-01-04T14:58:51-08:00  Killed            Task successfully killed\n2019-01-04T14:58:51-08:00  Terminated        Exit Code: 130, Signal: 2\n2019-01-04T14:58:51-08:00  Killing           Sent interrupt\n2019-01-04T14:58:51-08:00  Leader Task Dead  Leader Task in Group dead\n2019-01-04T14:58:49-08:00  Started           Task started by client\n2019-01-04T14:58:49-08:00  Task Setup        Building Task Directory\n2019-01-04T14:58:49-08:00  Received          Task received by client\n\nOld (v0.8.6) output:\n\n2019-01-04T22:14:54Z  Killed            Task successfully killed\n2019-01-04T22:14:54Z  Killing           Sent interrupt. Waiting 5s before force killing\n2019-01-04T22:14:54Z  Leader Task Dead  Leader Task in Group dead\n2019-01-04T22:14:53Z  Started           Task started by client\n2019-01-04T22:14:53Z  Task Setup        Building Task Directory\n2019-01-04T22:14:53Z  Received          Task received by client\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"ef2c835434bc0151cbf17fe043c6779499df70f6","date":"2019-01-08 07:37:39 -0800","message":"Merge pull request #5035 from hashicorp/test-client","refs":[],"body":"test: re-eanble periodic fingerprint test","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"d19245fa7bfb0b61138bc8d36678b209b19b0fb1","date":"2019-01-08 10:41:09 -0500","message":"appease linter","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"7b3ff40d2235be92bdc0ead146cda74c5407837c","date":"2019-01-08 11:15:38 -0500","message":"run gofmt","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a2535ed5807dce0c2a9285507792dfe43f29e055","date":"2018-12-12 16:54:19 +0100","message":"vendor: Update go-plugin","refs":[],"body":"This fixes a bug related to shutting down of GRPC plugin interfaces\n(more info: https://github.com/hashicorp/go-plugin/pull/88)\n\nThis does not yet fix all test cases for subprocess leaking, but is a\nuseful independant change.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"060588da3198dd07b08cc6e10a7be9ac1053b20b","date":"2019-01-08 12:10:26 -0500","message":"executor: add a comment detailing isolation","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b0a3f6b491d90738a187fc945132341079e80cac","date":"2019-01-08 09:17:11 -0500","message":"remove unused field","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"739bd9d33c4426160522667a9a64fcfe9486c557","date":"2019-01-08 12:18:18 -0500","message":"Fix panic on failure","refs":[],"body":"Error expects an odd number of arguments, and panics otherwise.\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"6c561efdf8e34136148213d97c3953718b048cfa","date":"2019-01-08 09:33:04 -0800","message":"Merge pull request #5151 from hashicorp/b-task-events","refs":[],"body":"Emit Killing task events and add e2e tests","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"4a70644df0c00793c579132ad24a64e13148c5c7","date":"2018-12-20 16:03:07 -0800","message":"drain: fix node drain monitoring","refs":[],"body":"The whole approach to monitoring drains has ordering issues and lacks\nstate to output useful error messages.\n\nAFAICT to get the tests passing reliably I needed to change the behavior\nof monitoring.\n\nParts of these tests are skipped in CI, and they should be rewritten as\ne2e tests.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"8a96bf84a1567eee12242dac3c55626b1648ab92","date":"2019-01-07 12:21:14 -0500","message":"tests: fix a test job constaints failing in macOS","refs":[],"body":"Allow scheduling mock job when running on MacOS (or Windows) hosts.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f8f285248de46ddb4f44dd0ee389da9000a489cc","date":"2019-01-08 12:43:06 -0500","message":"Merge pull request #5154 from hashicorp/f-revert-exec-devs","refs":[],"body":"drivers/exec: restrict devices exposed to tasks","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"855e3684e3edebdb3e0e3a3e4e0f5069d5316fc1","date":"2019-01-08 12:58:12 -0500","message":"fixup! remove unused field","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"39fa004f75cb79bea14d1c1a51325229065c25c1","date":"2019-01-08 14:35:40 -0500","message":"tests: run docker tests in macOS out of box","refs":[],"body":"Use `/tmp` as temporary directory for docker driver tests, so tests can\nrun out of the box without any intervention.\n\nmacOS sets tempdir as `/var`, which Docker does not whitelist as a path\nthat can be bind-mounted.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c506b56f96a1f9a4d215bca21dc535ce804feb85","date":"2019-01-08 17:18:14 -0500","message":"Merge pull request #4888 from hashicorp/f-docs-clarification-on-config-folders","refs":[],"body":"config dir clarification","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"1dc25090a53ba9cd1f98a75c95f134846dc9e8d1","date":"2019-01-08 22:21:48 +0000","message":"move `if dev` check into config validation, to support dev-mod validation in the future","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"c9dc5e49996312ef1556be6a08c5b0deb28557a7","date":"2019-01-08 14:37:08 -0800","message":"e2e: wait for at least N nodes to be ready","refs":[],"body":"Before it was *exactly* N nodes which limited test portability between\nclusters.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"fb12451ecf0bc4ae09dfa949acfd745e86f3005c","date":"2019-01-08 14:37:48 -0800","message":"e2e: test task events for a failed sibling task","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"745d1c7665eb15450716d10afd65391d99112388","date":"2019-01-09 00:54:52 +0100","message":"Merge pull request #4991 from hashicorp/dani/b-fix-leaked-procs","refs":[],"body":"vendor: Update go-plugin","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"7cca4b0d11ec5aaf57b4412741ae964feb96394f","date":"2019-01-08 19:32:26 -0500","message":"cli: support hitting pre-0.9 nomad agents","refs":[],"body":"node.NodeResources is nil when operating against pre-0.9.\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"a5ba15591a90a83630205054de8533cc0950a48e","date":"2019-01-08 16:42:26 -0800","message":"Improve Kill handling on task runner","refs":[],"body":"This PR improves how killing a task is handled. Before the kill function\ndirectly orchestrated the killing and was only valid while the task was\nrunning. The new behavior is to mark the desired state and wait for the\ntask runner to converge to that state.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"76d40947d723480cc60d3f630ae36288b793f8bf","date":"2019-01-09 08:22:30 -0500","message":"Merge pull request #5159 from hashicorp/r-macos-tests","refs":[],"body":"Fix Travis MacOS job ","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"7840ab51e2ca74f7ae5cd38933d1419900b72532","date":"2019-01-09 09:22:47 -0500","message":"fix more cases of logging arity errors","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2349a0127464f74a63db4854d8112ed6b8ef9e94","date":"2019-01-09 09:56:00 -0500","message":"Merge pull request #5163 from hashicorp/r-minor-changes-20180108","refs":[],"body":"Fix a panic on node.Deregister fail","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"c22de100392e4b12f32ad0fb688771bcc971b809","date":"2019-01-09 08:10:22 -0800","message":"Merge pull request #5167 from hashicorp/e2e-task-events","refs":[],"body":"Add another task events e2e test and fix test helper","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"d1fbd735f303672bb627cb8838a278a6afddf10f","date":"2019-01-09 13:06:46 -0500","message":"Merge pull request #5157 from hashicorp/r-drivers-no-cstructs","refs":[],"body":"drivers: avoid referencing client/structs package","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"d0efb37b80f8e682da6f5411364744780d6cb180","date":"2019-01-09 13:07:05 -0500","message":"Merge pull request #5162 from hashicorp/f-extract-lxc","refs":[],"body":"Extract LXC from nomad","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"f056ef5fa824361c0d402d203b6507c93f68c492","date":"2019-01-09 13:07:37 -0500","message":"Merge pull request #5166 from hashicorp/b-docker-tests-mac","refs":[],"body":"tests: run docker tests in macOS out of box","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"a646833aa3a3f5227b235f3716b0d437413cc26d","date":"2019-01-09 10:23:28 -0800","message":"Merge pull request #5045 from hashicorp/b-drivermanager-tests-drain","refs":[],"body":"drain: fix node drain monitoring","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"8a7c09aaab4a28eccb11ccb671f839ae15dd57ec","date":"2019-01-09 18:56:40 +0000","message":"increased config validation coverage for dev mode","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"b12e24ec99c2e591a3c616018d9d6bcd9040f5b8","date":"2019-01-09 18:56:49 +0000","message":"Merge branch 'master' of github.com:hashicorp/nomad into f-1157-validate-node-meta-variables","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"e44d51f4d0a4bdf5c2db501c360750c3f62d2590","date":"2019-01-09 11:42:40 -0800","message":"Spelling fix","refs":[],"body":"Co-Authored-By: dadgar <alex@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"d916c0dd12ff0f3b4d945b0bf0f70afc4c5eacba","date":"2019-01-09 12:04:22 -0800","message":"add more comments","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"c7fc39d38de76ceca56d8c90ed658bd4237cc8c7","date":"2019-01-09 12:05:10 -0800","message":"Merge pull request #5168 from hashicorp/b-kill-race","refs":[],"body":"Improve Kill handling on task runner","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"e7510596fbe16aa2ec8758cf279476b6713061d1","date":"2019-01-09 16:37:57 -0500","message":"Merge pull request #5158 from hashicorp/f-1157-validate-node-meta-variables","refs":[],"body":"added validation on client metadata keys","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"a5e77252e5a3ebb09f94f7d74b2386848c57086f","date":"2019-01-09 20:38:39 +0000","message":"Adds optional Consul service tags to nomad server and agent services, gh#4297","refs":[],"body":"","author_name":"Nick Wales","author_email":"nwales@homeaway.com"},{"hash":"1b7b70f47e725eb1e2866375db87181a1197ff26","date":"2019-01-08 16:21:49 -0500","message":"tests: enable and fix tests requiring mock driver","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4240d6ac1806e03b1a8971bddb88b6fdde6f20d1","date":"2019-01-08 16:17:47 -0500","message":"tests: ignore _JAVA_OPTIONS line","refs":[],"body":"ignore _JAVA_OPTIONS line in `java -version`, as it's relevant.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a99b7655cc296cebc9d8f7bc25e80a82ac11ab4c","date":"2019-01-09 21:29:53 -0500","message":"drivers/java: use libcontainer executor on java linux","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"d9ff8d01ffeea39ab913042d15de428a51ee4b14","date":"2019-01-10 10:21:48 -0500","message":"tests: remove tests for unsupported features","refs":[],"body":"With switching to driver plugins, driver validation is quite tricky and\nwe need to do some design thinking before supporting it against.\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"6b4c79c90f8adaf1e058979d06dddbebdd380c0d","date":"2018-12-10 11:54:23 -0600","message":"Initial spread docs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"7ef1669363dc5202f15663d5d60a606ef1f29609","date":"2019-01-03 21:59:23 -0600","message":"Spread json docs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"215a137e4af44ae8d8b2556de7e4e2997c1d5bdd","date":"2019-01-10 12:41:48 -0500","message":"Merge pull request #5176 from hashicorp/r-rm-validation-tests","refs":[],"body":"tests: remove tests for unsupported features","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"cfb68457bcdc6734f2748bef6f5f5ea80d959323","date":"2019-01-10 15:36:57 -0500","message":"tests: WaitForRunning checks for pending only","refs":[],"body":"WaitForRunning risks a race condition where the allocation succeeds and\ncompletes before WaitForRunning is called (or while it is running).\n\nHere, I made the behavior match the function documentation.\n\nI considered making it stricter, but callers need to account for\nallocation terminating immediately after WaitForRunning terminates\nanyway.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"1cd74582026e03ed7cc9a799fa6e4ba8963cf353","date":"2019-01-10 16:15:41 -0500","message":"Oxford comma in variable interpolation summary","refs":[],"body":"This improves the readability of this section.","author_name":"Brian Lalor","author_email":"blalor@hashicorp.com"},{"hash":"e12dd2f4d54a0405ad461051f2c54d8b2e2c2ebe","date":"2019-01-10 15:46:03 -0600","message":"Address review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"6d4a85356674654721ebf540fcbb9123a09cec8e","date":"2019-01-10 16:11:18 -0600","message":"Merge pull request #5178 from hashicorp/blalor-patch-1","refs":[],"body":"Oxford comma in variable interpolation summary","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"fc9c87c032a825383f9a7967d7cae9192965e481","date":"2019-01-10 16:36:47 -0600","message":"Remove unnecessary usage of alloc.Resource","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4af4e616a3eefded121dcc9ba40447b8b00ffa50","date":"2019-01-10 16:38:39 -0600","message":"Merge pull request #5144 from hashicorp/f-spread-docs","refs":[],"body":"Docs for spread stanza","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"180362f472763664ed019aa6fc880cb736b28c53","date":"2019-01-10 17:31:00 -0600","message":"Merge pull request #5179 from hashicorp/b-fix-deprecated-resources","refs":[],"body":"Remove unnecessary usage of alloc.Resource","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"8c9f22a5e42ea3baf00d25079c125a131f611439","date":"2019-01-11 10:08:16 -0500","message":"Merge pull request #5175 from hashicorp/c-re-enable-tests","refs":[],"body":"Re-enable client and java skipped tests","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"7cdaf6e37d5291e796246e6b731531267cc97536","date":"2019-01-11 09:48:12 -0600","message":"Make spread weight a pointer with default value if unset","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"dccf2a0de98f625d0b3cd8bcaf483dea87992f77","date":"2018-12-12 20:45:45 +0100","message":"client: Cleanup allocrunner access","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"c32ea36031b4a103b6acd0cabc07829af62a2dab","date":"2019-01-11 13:17:00 -0600","message":"Merge pull request #5181 from hashicorp/b-spread-weight","refs":[],"body":"Make spread weight a pointer with default value if unset","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"270ae48b824e4d77ef98d23ae43accff01da0429","date":"2019-01-09 15:06:58 -0800","message":"Plugins use parent loggers","refs":[],"body":"This PR fixes various instances of plugins being launched without using\nthe parent loggers. This meant that logs would not all go to the same\noutput, break formatting etc.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"e3859dc5e544fd29eeaffd1b8bdb77625fc824ab","date":"2019-01-09 16:52:06 -0800","message":"fix rkt use of executor","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"16e8cdf5bb6d83a3012847cc737ff69b23374ac9","date":"2019-01-10 09:58:24 -0800","message":"Update client1.hcl","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"f171a723cb0ed2609a470bbad9feddcb63abf2c7","date":"2019-01-11 11:36:26 -0800","message":"Enable json logs","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"754b84edb1742411c4e155e0ad755bf318692a6b","date":"2019-01-11 13:09:44 -0800","message":"changelog","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"03bf0bb65a8c2404b53f30328f2da262d0c42370","date":"2019-01-11 23:35:02 +0100","message":"Merge pull request #5025 from hashicorp/dani/allocLockCleanup","refs":[],"body":"client: Cleanup allocrunner access","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"cf9c39829623a6aab2eb9c466139fabb4da3d3aa","date":"2019-01-08 12:31:44 -0600","message":"Handle client initialization errors when adding allocs or restoring allocs","refs":[],"body":"We mark the alloc as failed and track failed allocs so that we don't send\nupdates after the first time\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"80d92481ca9669479649142fe8eb5d5c1f6b0e82","date":"2019-01-08 14:30:56 -0600","message":"Revert code that made an alloc update when restore fails","refs":[],"body":"Restore currently shuts down the client so the alloc update cant\nalways make it to the server\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"29894883a277423f79e149e3071c32b67a7c6439","date":"2019-01-08 17:39:04 -0600","message":"Add back code to mark alloc as failed when restore fails","refs":[],"body":"Also modify restore such that any handled errors don't propagate\nback to the client\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"80919bf713f2ff3e3fdf23b2e0138fd900c41872","date":"2019-01-09 10:16:33 -0600","message":"Modified destroy failure handling to rely on allocrunner's destroy method","refs":[],"body":"Added a unit test with custom statedb implementation that errors, to\nuse to verify destroy errors\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"5d7472fe8226a7656230760f64d197fde32a3c86","date":"2019-01-09 10:53:39 -0600","message":"Remove invalid allocs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"72dead74484aa527003198476ab1e554817784e6","date":"2019-01-09 12:57:56 -0600","message":"REfactor statedb factory config to set it directly in client config","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a20ae598c7be16c2b16cca168b0af4b3aa91925d","date":"2019-01-11 08:21:29 -0600","message":"Apply suggestions from code review","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"032ec425c2d1e5974c8cc40cd1316e09a9a5f7b7","date":"2019-01-11 08:49:31 -0600","message":"Only set deployment health if not already set","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a1a7a02e487a20cbf15e83d7f2962387bf3989de","date":"2019-01-11 09:15:25 -0600","message":"Add unit test to simulate alloc runner creation failure","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c66f2abefd91d10953d17d2b51fc3df33093359d","date":"2019-01-11 10:58:43 -0600","message":"Make unit test for allocrunner failure much nicer","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"19777b870b686c2efe9b69c8350d5ff1e28d983a","date":"2019-01-11 14:53:14 -0600","message":"linting fixes","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f10c6259cbe3594aa49a5461d8d3ecbc1551b5f9","date":"2019-01-12 10:40:41 -0600","message":"Merge pull request #5164 from hashicorp/b-client-addalloc-errhandle","refs":[],"body":"Handle client initialization errors when adding/restoring allocs","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"fbf9a4c77266cce37241e0491fbe95dbd2ad461c","date":"2018-12-11 15:27:50 -0500","message":"executor: implement streaming stats API","refs":[],"body":"plugins/driver: update driver interface to support streaming stats\n\nclient/tr: use streaming stats api\n\nTODO:\n * how to handle errors and closed channel during stats streaming\n * prevent tight loop if Stats(ctx) returns an error\n\ndrivers: update drivers TaskStats RPC to handle streaming results\n\nexecutor: better error handling in stats rpc\n\ndocker: better control and error handling of stats rpc\n\ndriver: allow stats to return a recoverable error\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"f6af1d4d04d0a29288a7a342b6fe66bdc7ef9447","date":"2019-01-10 13:31:43 -0500","message":"docker: add test for stats collection","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"9904463da2aeac8d1e2d9a89e70e48a7f4f2aa3d","date":"2019-01-10 14:20:18 -0500","message":"executor: fix failing stats related test","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"72a4685534ec2464bacd51181e87e669d9bb7d7c","date":"2019-01-11 22:27:23 -0500","message":"drivers: plumb grpc client logger","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"fc84e8f2bcaa68b4154e130011293b3af8b2bae8","date":"2019-01-12 12:16:12 -0500","message":"tr: add retry /w backoff to stats_hook failure","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"60acfc82895208af99d70ab372235a772d065cbd","date":"2019-01-12 21:33:55 -0500","message":"Update drivers/qemu/driver_test.go","refs":[],"body":"use t.Logf instead of fmt.Printf\n\nCo-Authored-By: nickethier <ncethier@gmail.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"d086bb2d200dcf0884972fb6a7b62640e2153443","date":"2019-01-13 16:06:56 -0500","message":"qemu: missing gofmt","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"091cdbcb126aa5533a86b95bc2d00fffa9747c7f","date":"2019-01-14 12:30:14 -0500","message":"tr: stop stats collection on Exited hook","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"903779769d54ea820e667387c86584191b5f3ff3","date":"2019-01-14 12:31:27 -0500","message":"Update client/allocrunner/taskrunner/stats_hook.go","refs":[],"body":"Co-Authored-By: nickethier <ncethier@gmail.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"99a5586aed029a3c79f18b7b36c79872a173a08b","date":"2019-01-09 13:35:16 -0800","message":"test: assert shutdown delay deregs first","refs":[],"body":"Restore a pre-0.9 test that asserts Consul services are deregistered\nbefore a task's shutdown delay.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"ceee126241ab84c0cf48fbb2e2e90266f8b98fce","date":"2019-01-09 13:36:21 -0800","message":"Remove old comment; it's been fixed!","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"df0a6dc34eb5b842a5f0718d428d7ed6920379db","date":"2019-01-09 13:36:43 -0800","message":"test: add some extra logging","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b58a77ecc007dc9f21585556db86e83a7a90e6a0","date":"2019-01-09 13:37:08 -0800","message":"test: assert service interpolation behavior","refs":[],"body":"Ported from pre-0.9 tests.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"7445e418ca9ead774aa25d456b955e7148206aa5","date":"2019-01-11 06:48:33 -0800","message":"test: port some pre-0.9 DeploymentHealth tests","refs":[],"body":"Skipping a failing one as I need to move to some other work and don't\nwant to leave this work orphaned on my machine.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"97a73e01166f2dbd4d4b4c4ea50acdbed9ce0d78","date":"2019-01-14 15:02:35 -0500","message":"Merge pull request #5018 from hashicorp/f-executor-stats","refs":[],"body":"executor: streaming stats api","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"b5c20aa50bb0a0fa18b471015d02644bb50f3d89","date":"2019-01-14 18:47:52 -0500","message":"Track Basic Memory Usage as reported by cgroups","refs":[],"body":"Track current memory usage, `memory.usage_in_bytes`, in addition to\n`memory.max_memory_usage_in_bytes` and friends.  This number is closer\nwhat Docker reports.\n\nRelated to https://github.com/hashicorp/nomad/issues/5165 .\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"109c5ef650206fc62334d202002cda92ceb67399","date":"2019-01-14 16:14:30 -0800","message":"Merge pull request #5173 from hashicorp/b-log-levels","refs":[],"body":"Plugins use parent loggers","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"2cc446657313bf88f7ee1aaa697645b6944eb1b2","date":"2019-01-15 08:25:03 -0500","message":"propogate logs to executor plugin","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f9a45940958cb93853d66d7ea7176fc068c81876","date":"2019-01-14 12:31:30 +0100","message":"docker: Terminate dockerlogger","refs":[],"body":"Previously, we did not attempt to stop Docker Logger processes until\nDestroyTask, which means that under many circumstances, we will never\nsuccessfully close the plugin client.\n\nThis commit terminates the plugin process when `run` terminates, or when\n`DestroyTask` is called.\n\nSteps to repro:\n\n```\n$ nomad agent -dev\n$ nomad init\n$ nomad run example.nomad\n$ nomad stop example\n$ ps aux | grep nomad # See docker logger process running\n$ signal the dev agent\n$ ps aux | grep nomad # See docker logger process running\n```\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"1bfec9e8e7c178802d818b711765c9eaa99e45c8","date":"2019-01-15 10:26:01 -0500","message":"Merge pull request #5189 from hashicorp/b-fix-executor-logs","refs":[],"body":"propagate logs to executor plugin","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"3a491ab2b4924dc16f523512949a47b6b0a07254","date":"2019-01-15 07:41:50 -0800","message":"Merge pull request #5187 from hashicorp/test-consul","refs":[],"body":"Port a bunch of pre-0.9 Consul tests to 0.9","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"17dbace46b495953080df4ad1e9e124159dc2d15","date":"2019-01-15 16:46:20 +0100","message":"executor: Always close stdout/stderr fifos","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"fb1e24d2b9c5ffa29fe50fb4f75bf5cfe9633322","date":"2019-01-15 16:48:40 +0100","message":"Merge pull request #5184 from hashicorp/dani/b-logmon-reattach","refs":[],"body":"docker: Terminate dockerlogger","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"9cf6e1ae278d6f5191cac063180348dfe0375267","date":"2019-01-15 17:49:04 +0100","message":"Merge pull request #5192 from hashicorp/dani/executor-close","refs":[],"body":"executor: Always close stdout/stderr fifos","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"25013af5b649a62ac0f92b1d58d5ac9332e7dd7c","date":"2019-01-15 17:43:03 +0000","message":"docs: updated tense around fixed bug","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"1e7b11096251f98bca48466b57b02087089be24d","date":"2019-01-15 09:47:13 -0800","message":"make change to the 0.8.7 release date","refs":[],"body":"","author_name":"Cathy Chang","author_email":"chang.cathy@gmail.com"},{"hash":"48283ae75263e95f76a2d2ad206362b8ab6aab39","date":"2019-01-15 09:53:07 -0800","message":"Merge pull request #5195 from hashicorp/d-update-087-date","refs":[],"body":"make change to the 0.8.7 release date","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"943b375b72be3a86d32bac12c723e2da0946e4de","date":"2018-11-29 14:08:16 -0800","message":"Update go-dockerclient and docker dependencies","refs":[],"body":" - go-dockerclient is updated because of lack of \"runtime\" API field\n - docker/docker is updated because go-dockerclient depends on docker\n master branch\n","author_name":"oleksii.shyman","author_email":"oleksii.shyman@gmail.com"},{"hash":"cc98f282d469e266d930396e7f1e5987bc8e68cf","date":"2018-12-17 17:03:43 -0800","message":"Add support for docker runtimes","refs":[],"body":"  - docker fingerprint issues a docker api system info call to get the\n  list of supported OCI runtimes.\n  - OCI runtimes are reported as comma separated list of names\n  - docker driver is aware of GPU runtime presence\n  - docker driver throws an error when user tries to run container with\n  GPU, when GPU runtime is not present\n  - docker GPU runtime name is configurable\n","author_name":"oleksii.shyman","author_email":"oleksii.shyman@gmail.com"},{"hash":"bb57f00f2c1971178a2c74f5b9a4e913903945f5","date":"2019-01-15 14:50:57 -0500","message":"Merge pull request #5194 from hashicorp/f-minor-update-docs-tense","refs":[],"body":"docs: updated tense around fixed bug","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"97be19b17672df6502828da487f6be20a9d7582b","date":"2019-01-15 13:15:28 -0800","message":"rkt: revert to pre-0.9 --cpu flag","refs":[],"body":"See\nhttps://github.com/hashicorp/nomad/issues/3394#issuecomment-453296121\nfor details. During 0.9 development we switched to shares, but we'd\nprefer to maintain backward compat.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"12ae83bb795e747fd2107e83e52c34b195bf7811","date":"2019-01-13 16:05:07 -0500","message":"executor: add pre 0.9 client and wrapper","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"9ce0347e59d98ec3cac27fead16f80345fd7f565","date":"2019-01-14 12:25:59 -0500","message":"driver: add pre09 migration logic","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"e7a4dbb8a78965aff2cc189e25d1eab3b549e840","date":"2019-01-15 17:07:21 -0500","message":"cleanup code comments and small fixes from refactor","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"8e9fefcb94d2d85bcc596947576d22ff338b2c74","date":"2019-01-15 14:34:14 -0800","message":"Merge pull request #5046 from oleksii-shyman/docker_runtimes","refs":[],"body":"Nvidia runtime","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"152ba0820743acf0bd53417dd40bd3d1b70271a4","date":"2019-01-15 15:19:51 -0800","message":"test: porting TestTaskRunner_SimpleRun_Dispatch","refs":[],"body":"Porting test from 0.8 to 0.9.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"828d5f5a53a8ed3f6a86a70bd9e455198a07d8f6","date":"2019-01-15 18:31:57 +0100","message":"logmon: Reattach to existing loggers","refs":[],"body":"This commit prevents us from creating duplicate logmon hooks when\nrestoring allocations by persisting the logmon reattach config using\nHookData.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"52c40c6403a1ae7bdbfc10510acb05f038ad416c","date":"2019-01-16 09:28:41 -0500","message":"drivers: fix test","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4dc1ce02cda67919a36f7406c2940d3be5a9b4af","date":"2019-01-16 06:33:51 -0800","message":"Merge pull request #5199 from hashicorp/test-dispatch","refs":[],"body":"test: porting TestTaskRunner_SimpleRun_Dispatch","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"35ab26658c4f9408d7e32e14d1cf5122dcec73a0","date":"2019-01-11 11:50:46 -0600","message":"Make docker driver logging less redundant","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"be81ecd5e6a4de5bfcacedd280bd5d63432f5346","date":"2019-01-16 11:19:25 -0500","message":"drivers: add upgrade path for rawexec, java, rkt and qemu","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"80c00fc26886bdf32595b07037578baea5b485dc","date":"2019-01-14 15:33:42 -0600","message":"Refactor logging in drivers to use a tri-state boolean","refs":[],"body":"Changes logging warnings/errors only if the state changes\nfrom healthy to unhealthy\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"435a8bae96b42c23180ed1a81b4c7fa4ca0f1f89","date":"2019-01-16 17:34:13 +0100","message":"Merge pull request #5193 from hashicorp/dani/logmon-reattach","refs":[],"body":"logmon: Reattach to existing loggers","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"3e16b523619a75ee8b8a90eeb3f2a57ed4fe9c28","date":"2019-01-16 11:04:11 -0600","message":"clean up read access","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"dab186a4a24df44d281d6b3131e491cd9e20355f","date":"2019-01-16 11:35:33 -0600","message":"Merge pull request #5182 from hashicorp/b-docker-fingerprint-log-once","refs":[],"body":"Make driver logging less redundant","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"10068422e0273caa04575d16d1ca2ad51922a0a6","date":"2019-01-16 15:05:21 -0800","message":"Merge pull request #5197 from hashicorp/b-rkt-cpu","refs":[],"body":"rkt: revert to pre-0.9 --cpu flag","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"3c9de20820c105b56ed1f054ba5339f43213358c","date":"2019-01-16 19:53:48 -0500","message":"fix imports","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7d80fe286fc6cb00414ea68c130bbd5469a87b21","date":"2019-01-16 21:52:31 -0500","message":"drivers: use consts for task handle version","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"f5a6ec04f6f2ddd204688faadda7a71365c178cc","date":"2019-01-16 22:01:18 -0500","message":"drivers: fix func naming","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"d6c3626d16256b785c97d213a7afd735728e145e","date":"2019-01-17 11:06:13 -0500","message":"Update shirou/gopsutil dep to use non-GPL code","refs":[],"body":"Previously used `github.com/shirou/gopsutil`[1], used some GPL code [2].\nThis was somewhat unintentional, and was addressed later [3].\n\nDue to being late in the cycle of Nomad release when this is noticed,\nand time elapsed since we updated the dependency, we want to be\nconservative in our package updates.\n\nAs such, we opted to go with forking the repo to use the previously used\nversion with the GPL removal code commit, done in [4].\n\n[1] https://github.com/shirou/gopsutil/commit/5776ff9c7c5d063d574ef53d740f75c68b448e53\n[2] https://github.com/shirou/gopsutil/blob/5776ff9c7c5d063d574ef53d740f75c68b448e53/host/include/smc.c\n[3] https://github.com/shirou/gopsutil/commit/c95755e4bcd7a62bb8bd33f3a597a7c7f35e2cf3\n[4] https://github.com/shirou/gopsutil/commits/62d5761ddb7d04fc475d6316c79ff0eed1e5f96b\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7f4f55bad554201e42d6022ee542f06febd8e0ee","date":"2019-01-17 10:18:19 -0600","message":"wip cluster with raw exec enabled","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4ff1e167063bea74675aa802ca19a938b2092ad5","date":"2019-01-17 11:40:04 -0500","message":"Merge pull request #5202 from hashicorp/b-no-gpl-gopsutil","refs":[],"body":"Update shirou/gopsutil dep to use non-GPL code","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"eab62662de10d0a6fe3c4b8cf0f716f0a2578f3b","date":"2019-01-08 18:13:50 +0100","message":"chore: Setup appveyor for windows test execution","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"a51aeb224f21d0aa992da36d9181a15c48b9fc8c","date":"2019-01-09 00:34:02 +0100","message":"testtask: Build on windows","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"b05d362eb15ca430d867142c66f8db565aed09c6","date":"2019-01-09 00:45:27 +0100","message":"fingerprinter: Use HCLogger for windows","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"3078c24f79d255b0ee7d52d44bfcb529498da703","date":"2019-01-09 20:30:47 +0000","message":"vaultclient: Update tests for vault 1.0","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"d33809b88634a6858c935ea9786d205514839dab","date":"2019-01-09 13:36:58 +0100","message":"fingerprint: Limit vault shutdown waiting","refs":[],"body":"When vault is installed through chocolatey, it also installs a shim that\nwill not pass kill signals to the child. This means the process will\nnever actually terminate, and we lose the process handle.\n\nHere, rather than waiting forever, we timeout fast.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"dcce2d72478a1ea987c64dac723c24a8ea3524a7","date":"2019-01-09 20:26:14 +0000","message":"vaultclient: use require for error assertions","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"d81e632157c36cb2df001f60597b670b0b7ea53f","date":"2019-01-09 20:26:54 +0000","message":"testutil: Start vault in the same routine as waiting","refs":[],"body":"This is a workaround for the windows process model.\n\nGo os/exec does not pass the parent process handle to the child\nprocesses STARTUPINFO struct, this means that unless we wait in\nthe _same_ execution context as Starting the process, the\nhandle will be lost, and we cannot kill it without regaining\na handle.\n\nA better long term solution would be a higher level process\nabstraction that uses windows.CreateProcess on windows.\n","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"e9a7978367fa6004e663a224ce0574d0814cebd2","date":"2019-01-10 09:00:41 +0000","message":"DROP: disable consul tests on windows","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"85474288076cdd247fb00c5732ec029913f9b6b1","date":"2019-01-10 09:59:04 +0000","message":"plugins: Load plugins on windows","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"c9edd612ef32fa5ac6bff99271bcff0908c992a9","date":"2019-01-10 11:45:56 +0100","message":"appveyor: Fix env access?","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"4ce7cc1ee483299c3b07c943ab8846e30c4cb2c5","date":"2019-01-10 13:14:07 +0100","message":"appveyor: Push test results as an artifact","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"4014ee30ae8ca5bb9550c1225d60765e644cc861","date":"2019-01-10 13:21:01 +0100","message":"appveyor: Add gopath/bin to PATH","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"cf08f85413488242e3c98e9cec4e538268af43bd","date":"2019-01-10 13:43:51 +0100","message":"api: Validate the slash variant of a given path","refs":[],"body":"This validates the slash variant of a RelativeDest, rather than the\nplatform native version, to support test execution on windows.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"20f40eada8020fd2ae2dbbfdf230d4579fce753e","date":"2019-01-10 13:57:29 +0100","message":"client/fs: windows error message for not found","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"041c01d58362784bb81459d0f975077c03cd35f8","date":"2019-01-10 14:11:47 +0100","message":"client/fs: Skip delete-while-streaming test on win","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"08267885abc966f4d4b1fcea7ccc19897e405054","date":"2019-01-10 14:49:02 +0100","message":"appveyor: GOMAXPROCS: 1","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"347b4ad24754e96be05f80b14b80eac815d2a216","date":"2019-01-10 16:04:34 +0100","message":"Expand unix build definition","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"a587be44a77b3efbfda1d76227bacf9bed42157c","date":"2019-01-10 16:04:23 +0100","message":"dockerlogger: Fix tests on windows","refs":[],"body":"Uses the home directory and windows path expansion, as c:\\tmp doesn't\nnecessarily exist, and mktemp would involve unnecessarily complicating\nthe commands.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"8a4ffea94a9a6904aad64f1b186d04090e28bce7","date":"2019-01-10 16:24:29 +0100","message":"chore: Cleanup formatting","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"76ee0240abc47e299efc991e2ba33ec4d8066ab9","date":"2019-01-10 16:52:22 +0100","message":"docker: ExpandPath tests validate slashpath","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"1e0825388ecc04de519430653df10bf8a388a307","date":"2019-01-11 14:28:40 +0100","message":"docker: Test cleanup for windows","refs":[],"body":"* Docker for Windows does not support ulimits\n* Use filepath.ToSlash to test workdir\n* Convert expected mount paths to system style\n* Skip security-opt test on windows\n  - Windows does not support seccomp, and it's unclear which options are\n    available.\n* Skip StartN due to lack of sigint\n* docker: Use api to get image info on windows\n* No bridge on windows\n* Stop hardcoding /bin/\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"ffcd76f03fb99fe4e3ee5f52475c5d83413ddf4c","date":"2019-01-11 17:28:52 +0100","message":"rawexec: SIGINT is not available on Windows","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"0ecef707153254fa1f85d4f30f4d7864191012f9","date":"2019-01-11 16:49:53 +0000","message":"rawexec: Fix Exec test on windows","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"8731fe3730be998577fa085d245ad8784157c9a5","date":"2019-01-11 17:55:41 +0100","message":"drivers/exec: SIGINT unavailable on windows","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"3f3eb68a27a7fe5523a75cfa3c0f38649b7762a6","date":"2019-01-14 13:34:24 +0100","message":"chore: Fix docker test linting","refs":[],"body":"Due to https://github.com/tsenart/deadcode/issues/3 we can't specify\nthese consts on their own. This moves them into the _platform_test.go\nfiles to avoid creating a package that only exposes a couple of values.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"0bc1dbef569529a43afa6d491c4cdd6f6b46aa33","date":"2019-01-14 14:16:23 +0100","message":"chore: Fix docklog linting","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"070558e18d46e9432a5c6754e3b900e8fdefa5c2","date":"2019-01-14 14:17:41 +0100","message":"fixup: Typo in docker test","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"2b3f5f2cb7eaecd8582f82a49bd6033ff77db649","date":"2019-01-14 14:18:35 +0100","message":"chore: goimports exec driver","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"8966c20155a849519c59c6d1088426810b581ef1","date":"2019-01-14 14:58:33 +0100","message":"docker: Only run Cleanup test on unix os'","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"db76db4b18b139eaff3606d3990a78197701e376","date":"2019-01-14 15:04:16 +0100","message":"allocwatcher: Stat_t is unavailable on win","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"06ea0b5377f2da28f6358c3aa0ff462959660b17","date":"2019-01-14 17:27:07 +0100","message":"appveyor: disable tests on windows again","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"fe8c60e1570e359761d34699cf85b2e7a9c060f0","date":"2019-01-14 20:03:42 +0100","message":"chore: Stylistic cleanup","refs":[],"body":"Co-Authored-By: dantoml <dani@tomlinson.io>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"9e4e2d812d4d0982b87c66afd7cbc364d4d733b9","date":"2019-01-15 22:01:59 +0100","message":"Update helper/testtask/testtask_windows.go","refs":[],"body":"Co-Authored-By: dantoml <dani@tomlinson.io>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"f40d243cbd5230850466bed47a573bda3064b8a5","date":"2019-01-15 22:02:41 +0100","message":"Update testutil/vault.go","refs":[],"body":"Co-Authored-By: dantoml <dani@tomlinson.io>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"3287c3f019a616af5fa02f8dc4ca4e0dd6a2c451","date":"2019-01-16 15:06:39 +0100","message":"chore: General Cleanup","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"8ffd94ca557a3461de0c1c6dfe75ddb30342cf7b","date":"2019-01-16 15:22:03 +0100","message":"plugins: Require an exe extension on windows","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"5637d816420bdedd4007d40e558e797ad08467f7","date":"2019-01-17 18:44:27 +0100","message":"docker: Fix missing import","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"b03833307b2c6ee6531ae83678767eaca4a45617","date":"2019-01-17 11:30:43 -0600","message":"Fix bug in reconcile summaries that affects periodic/parameterized jobs","refs":[],"body":"This fixes incorrect parent job summaries by recomputing them in the\nReconcileJobSummaries method in the state store\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"64e531e7bb63d213b8e4a52d55e64c9ed0057563","date":"2019-01-17 09:32:32 -0800","message":"client: restore Terminated event on every exit","refs":[],"body":"v0.9.0-dev started emitting a Terminated event every time a task process\nexited. While this wasn't true in previous versions, it's a useful task\nevent because it's the only place for job operators to view the task's\nexit code.\n\nThis behavior is asserted in the e2e/taskevents tests.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"1d5c04ee1d75651a319b1e2992bdb161e39a9699","date":"2019-01-17 19:09:27 +0100","message":"pluginloader: typo: s/validePluginConfig/validatePluginConfig","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"945181205b41e876196b16196217b34cd9d778a1","date":"2019-01-17 12:15:42 -0600","message":"Use IsParameterized/isPeriodic methods","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"be323011ceae0a19cb06e6132c323d8f9b11a9b7","date":"2019-01-17 14:29:48 -0600","message":"Refactor to find jobs with child instances more effeciently","refs":[],"body":"also added unit tests\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"946d47712bfc2ac8da04465fdcaed846790751b2","date":"2019-01-17 15:36:33 -0600","message":"fix linting","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"eb7663697b5055fac8c3534363ed36cb0748378b","date":"2019-01-17 15:52:51 -0600","message":"Fix one more place that should be using taskResources","refs":[],"body":"taskResources handles new resource fields in a backwards compatible way\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"ce44b93f975beccd1baf9e5f8373632c099c318d","date":"2019-01-17 19:40:37 -0600","message":"Merge pull request #5208 from hashicorp/b-tr-taskresources","refs":[],"body":"Fix one more place that should be using taskResources","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"6191fe3f2c8e1e68183fc4784ce826af63a247c1","date":"2019-01-17 23:32:45 -0500","message":"e2e: add tests for nomad driver upgrade path","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"2c8c1c45292a390d86c957bd6458ae09f2f7c754","date":"2019-01-18 11:21:53 +0100","message":"Merge pull request #5174 from hashicorp/dani/windows","refs":[],"body":"Some Windows fixes and CI","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"9b3456011a84707e379d2bdaf89f89397bf523d4","date":"2019-01-18 11:22:22 +0100","message":"Merge pull request #5204 from hashicorp/dani/loader-typo-2","refs":[],"body":"Fix typo in PluginLoader","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"cb6b5dd075e9b53c646462fe44eb66d0dad451f8","date":"2019-01-18 10:05:21 -0500","message":"fix vendor entry field name","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4e4ecc949f1e1e6e5d74b7152eb7d264ef1a7ebc","date":"2019-01-18 08:54:15 -0800","message":"Merge pull request #5203 from hashicorp/b-terminated","refs":[],"body":"client: restore Terminated event on every exit","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"361d1e177ce59a8519d845ca8e17644f9ea0ea95","date":"2019-01-18 12:48:15 -0500","message":"api: avoid import nomad/structs pkg","refs":[],"body":"nomad/structs is an internal package and imports many libraries (e.g.\nraft, codec) that are not relevant to api clients, and may cause\nunnecessary dependency pain (e.g. `github.com/ugorji/go/codec`\nversion is very old now).\n\nHere, we add a code generator that imports the relevant constants from\n`nomad/structs`.\n\nI considered using this approach for other structs, but didn't find a\nquick viable way to reduce duplication.  `nomad/structs` use values as\nstruct fields (e.g. `string`), while `api` uses value pointer (e.g.\n`*string`) instead.  Also, sometimes, `api` structs contain deprecated\nfields or additional documentation, so simple copy-paste doesn't work.\nFor these reasons, I opt to keep the status quo.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a5d60fd31c35a189dff3c5139107d1b9691bf20f","date":"2019-01-18 13:00:28 -0500","message":"api: remove MockJob from exported functions","refs":[],"body":"`api.MockJob` is a test utility, that's only used by `command/agent`\npackage.  This moves it to the package and removes it from the public\nAPI.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0502f255c75c1905ab6949d691099cd5c29787b0","date":"2019-01-18 19:58:26 +0000","message":"renamed mispelled function, fixed incorrect comment","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"d2f3dd75300cbca9f1e505d93059ab088806dc7b","date":"2019-01-18 20:00:19 +0000","message":"documenting test for task runner failure to set TaskGroupName","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"b43f803d36c9670208d46e01e15943c6df5c7d97","date":"2019-01-18 20:25:11 +0000","message":"set TaskGroupName in task_runner","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"41c3250ee59464cd4267d08ed41057dabe4329f5","date":"2019-01-18 13:28:35 -0500","message":"api: embed pointer conversion functions","refs":[],"body":"Embed pointer conversion functions in the API package to avoid\nunnecessary package dependency.  `helper` package imports more\ndependencies relevant for internal use (e.g. `hcl`).\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b1293a89934ce91050b06c2f2b3b1f3fde6005d0","date":"2019-01-18 13:36:49 -0500","message":"api: move formatFloat function","refs":[],"body":"`helpers.FormatFloat` function is only used in `api`.  Moving it and\nmarking it as private.  We can re-export it if we find value later.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"256ac52c5086ca702f6b6587b83f5e5aaeaa6c5b","date":"2019-01-18 16:21:23 -0500","message":"Merge pull request #5212 from hashicorp/b-taskrunner-does-not-set-taskgroupname","refs":[],"body":"task_runner does not set TaskGroupName in TaskConfig","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"9f7619344ee78bf596b413eb9ec859e026b11f52","date":"2019-01-18 16:46:02 -0500","message":"Merge pull request #5190 from hashicorp/f-memory-usage","refs":[],"body":"Track Basic Memory Usage as reported by cgroups","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"2118d94b2d63f1328d302042b8ddceb911f7aac2","date":"2019-01-13 16:05:07 -0500","message":"executor: add pre 0.9 client and wrapper","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"07cdedec2f3df32ff3a7779ec966baa388affa47","date":"2019-01-14 12:25:59 -0500","message":"driver: add pre09 migration logic","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"2f91ac88f7e8bf23157f7c1354fb1f8912a0faf6","date":"2019-01-15 17:07:21 -0500","message":"cleanup code comments and small fixes from refactor","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"7c440aa4370e01c389774ff12988b587e3a50aa5","date":"2019-01-16 09:28:41 -0500","message":"drivers: fix test","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"1d50ced70ad0a354659d16e3fd6da27975b7ef1d","date":"2019-01-16 11:19:25 -0500","message":"drivers: add upgrade path for rawexec, java, rkt and qemu","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"994c66f7d7f12c455b4393067c0561fa1964b0e2","date":"2019-01-16 21:52:31 -0500","message":"drivers: use consts for task handle version","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"82d16f8f6c8dc0f4d726ec748f8e0f4e1a4e16b7","date":"2019-01-16 22:01:18 -0500","message":"drivers: fix func naming","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"ce7bb88010f4dec014654863b633fb23d11ed8a9","date":"2019-01-18 18:09:38 -0500","message":"ar: return error from hooks if occured","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"e58fcf7ac74105f4470418f39c71b8ada188f5f9","date":"2019-01-18 17:36:35 -0600","message":"revert unintended change","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"b403c9bf14c6b1639b9856058cc23ea69933f261","date":"2019-01-18 17:41:39 -0600","message":"code review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"5e185386e07f2320423863e7fbb618edd918d2f7","date":"2019-01-18 18:36:16 -0500","message":"api: avoid codegen for syncing","refs":[],"body":"Given that the values will rarely change, specially considering that any\nchanges would be backward incompatible change.  As such, it's simpler to\nkeep syncing manually in the rare occasion and avoid the syncing code\noverhead.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f3ab65947e9bcb1a85a7b06c58e222855aec61a0","date":"2019-01-18 18:53:45 -0500","message":"drivers: regen proto","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"f22dba9f64057e0d048d8b779193f0eb07761998","date":"2019-01-18 15:57:18 -0800","message":"test: fix flaky garbage collect test","refs":[],"body":"This seems to fix TestClientAllocations_GarbageCollectAll_Remote being\nflaky.\n\nThis test confuses me. It joins 2 servers, but then goes out of its way\nto make sure the test client only interacts with one. There are not\nenough comments for me to figure out the precise assertions this test is\ntrying to make.\n\nA good old fashioned wait-for-the-client-to-register seems to fix the\nflakiness though. The error was that the node could not be found, so\nthis makes some sense. However, lots of other tests seem to use the same\n\"wait for node\" logic and don't appear to be flaky, so who knows why\nwaiting fixes this one.\n\nPasses with -race.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"dbb2e2655b6e2f71997d57940d6bf6834db5463b","date":"2019-01-18 18:13:19 -0600","message":"Merge pull request #5205 from hashicorp/b-queuedallocs-bugfix","refs":[],"body":"Reconcile child summaries correctly","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"06e953ce94133faaa4f972064e212942e862417d","date":"2019-01-18 18:15:11 -0600","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"f7e7b99819b85f1c7c3f0c0745938471e203194a","date":"2019-01-18 20:52:53 -0500","message":"Merge pull request #5213 from hashicorp/b-api-separate","refs":[],"body":"Slimmer /api package","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"f2f383b07543a09ca989b82738926f7248e1ab28","date":"2019-01-18 21:10:01 -0500","message":"Merge pull request #5215 from hashicorp/test-fix-garbagecollect","refs":[],"body":"test: fix flaky garbage collect test","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"92033f1a811a1ce76584237f3afdb59a73d10bea","date":"2019-01-18 21:26:48 -0500","message":"tests: deflake client TestFS_Logs_TaskPending test","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"23f3c6f023cfc5adc81c6fa82142d681413b2eea","date":"2019-01-19 00:06:21 -0500","message":"Merge pull request #5198 from hashicorp/f-driver-upgradepath","refs":[],"body":"0.9 Upgrade path for drivers and executors","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"54c86450f0ac85678694b60e4a3029d237481689","date":"2019-01-19 09:07:27 -0500","message":"tests: deflake TestClientAllocations_GarbageCollect_Remote","refs":[],"body":"Use the same strategy as one in f2f383b07543a09ca989b82738926f7248e1ab28\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"49aedf904f28177f59c721df6dd52a2cae44ace8","date":"2019-01-19 11:15:04 -0600","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"06ca7860e299541bc24ac6764d831eb7f20182cd","date":"2019-01-21 09:54:15 -0500","message":"Merge pull request #5216 from hashicorp/b-fix-tests-20180118","refs":[],"body":"tests: deflake client TestFS_Logs_TaskPending test","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"bf9a2168e74b0db587043c007e92a30c099bee26","date":"2019-01-17 15:27:15 -0600","message":"Rename TaskKillHook to TaskPreKillHook to more closely match usage","refs":[],"body":"Also added/fixed comments\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"77c01c628331468b124fd9648f1db6ea91e567a2","date":"2019-01-22 08:53:26 -0600","message":"Fix comment","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"c3f044291d48236bfe96db27c9021f36a9cd782b","date":"2019-01-17 15:27:15 -0600","message":"Rename TaskKillHook to TaskPreKillHook to more closely match usage","refs":[],"body":"Also added/fixed comments\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"6f3e4e72b95bc0f279d250aa66a6630517f3803a","date":"2019-01-22 09:45:58 -0600","message":"Fix log comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a1cc48f78d10e1789af3664856bc0c658437a114","date":"2019-01-22 09:54:02 -0600","message":"Rename TaskKillRequest/Response to TaskPreKillRequest/Response","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"418d360d190032be903cf1a96af68716625bfb82","date":"2019-01-17 15:01:49 -0800","message":"test: port SignalFailure test from 0.8","refs":[],"body":"Also fix signal error handling in mock_driver.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"81334cd3a164b31d0085575bdd2d2886fa5ef455","date":"2019-01-18 07:18:00 -0800","message":"test: port RestartTask from 0.8","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"23c25f4b6d04144e7e7079353b282cd3c997e9db","date":"2019-01-22 10:29:53 -0600","message":"Merge pull request #5207 from hashicorp/b-rename-hooks","refs":[],"body":"Rename TaskKillHook to TaskPreKillHook to more closely match usage","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"06119e250547a46dd9c3d25863e9940bde681581","date":"2019-01-18 08:30:44 -0800","message":"test: port TestTaskRunner_CheckWatcher_Restart","refs":[],"body":"Added ability to adjust the number of events the TaskRunner keeps as\nthere's no way to observe all events otherwise.\n\nTask events differ slightly from 0.8 because 0.9 emits Terminated every\ntime a task exits instead of only when it exits on its own (not due to\nrestart or kill).\n\n0.9 does not emit Killing/Killed for restarts like 0.8 which seems fine\nas `Restart Signaled/Terminated/Restarting` is more descriptive.\n\nOriginal v0.8 events emitted:\n```\n\texpected := []string{\n\t\t\"Received\",\n\t\t\"Task Setup\",\n\t\t\"Started\",\n\t\t\"Restart Signaled\",\n\t\t\"Killing\",\n\t\t\"Killed\",\n\t\t\"Restarting\",\n\t\t\"Started\",\n\t\t\"Restart Signaled\",\n\t\t\"Killing\",\n\t\t\"Killed\",\n\t\t\"Restarting\",\n\t\t\"Started\",\n\t\t\"Restart Signaled\",\n\t\t\"Killing\",\n\t\t\"Killed\",\n\t\t\"Not Restarting\",\n\t}\n```\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"316a4f25419b39113c65226a9548628bd197f5d9","date":"2019-01-22 09:59:46 -0800","message":"CHANGELOG: added 0.9 ui changes","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"885d309b8fc85ef7d6363688c435586838aef1af","date":"2019-01-22 10:59:13 -0800","message":"Add Datacenters to the JobsListStub struct","refs":["f-jobs-list-datacenters"],"body":"So it can be used for filtering the full list of jobs\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7c45733ba413a75e8153cc36fa8192d452a72ae2","date":"2019-01-22 14:05:53 -0800","message":"Merge pull request #5211 from hashicorp/test-porting-08","refs":[],"body":"Port some 0.8 TaskRunner tests","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"7e81a9e3c47095a44ff956c4d1af849e8e18414d","date":"2019-01-22 14:20:54 -0800","message":"increase log level","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"678c6e834b9b530579d8a22c82f918aca1c32bb3","date":"2019-01-12 11:07:40 -0600","message":"dont emit events for terminal allocs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"26cb3cd12da9dfe5252020dd114d964e5f2cf1bf","date":"2019-01-22 16:43:32 -0600","message":"Use DesiredState to determine whether to stop sending task events","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"b9f36134dc0427dc8aae2e5cdf295d5bfd7727d1","date":"2019-01-14 16:45:57 -0800","message":"move catalog + grpcutils","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"c19cd2e5cfc1e08e25876b61fd140f1ed909effb","date":"2019-01-14 16:50:05 -0800","message":"loader and singleton","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"2d23f4a038df7f26e1b9887d5a83d3f44e5540d0","date":"2019-01-14 17:02:44 -0800","message":"move reattach config","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"e46d67a88990ed2e380e46168513bda4af335d2a","date":"2019-01-15 10:54:37 -0800","message":"Driver tests do not use hcl2/hcl, hclspec, or hclutils","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"8be705717725035cb9f2072de5dd48e0a4fee3b0","date":"2019-01-15 10:57:12 -0800","message":"move hclutils","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"72f8851254c28a7e1787072285bebaa8c9618e79","date":"2019-01-15 11:12:26 -0800","message":"Split hclspec","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"fe2fa21a7df655e4714930da62e66459e8260b07","date":"2019-01-15 11:22:56 -0800","message":"gofmt","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"95297c608c59fc66bb965c9231a0685eb3ddeac1","date":"2019-01-15 11:46:12 -0800","message":"goimports","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"dde175ab6a830d4b12cfd9eaeeac18c59082479d","date":"2019-01-15 12:04:56 -0800","message":"vet","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"0d61ff0fb9147d81534ca16ce3189e5bc317bea3","date":"2019-01-22 14:42:49 -0800","message":"move pluginutils -> helper/pluginutils","refs":[],"body":"I wanted a different color bikeshed, so I get to paint it\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f51b7f9942578bf1c3619b71f98bc29884b3a4a2","date":"2019-01-22 20:11:39 -0500","message":"tr: use context in as select statement","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"77225d1d1a75070b2c81366ccddcea41f11682fa","date":"2019-01-22 19:34:02 -0600","message":"nil check node resources to prevent panic","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"47a1d73e46e4ffc1c6985c555ad47805bc000d69","date":"2019-01-22 23:25:27 -0500","message":"e2e/nomad09upgrade: add comments","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"14e5dc4e9ec26dc6f59892ef68464552434843cd","date":"2019-01-22 23:28:09 -0500","message":"Merge branch 'master' into f-driver-upgradepath-test","refs":[],"body":"* master: (91 commits)\n  increase log level\n  CHANGELOG: added 0.9 ui changes\n  test: port TestTaskRunner_CheckWatcher_Restart\n  test: port RestartTask from 0.8\n  test: port SignalFailure test from 0.8\n  Rename TaskKillRequest/Response to TaskPreKillRequest/Response\n  Fix log comments\n  Rename TaskKillHook to TaskPreKillHook to more closely match usage\n  Fix comment\n  Rename TaskKillHook to TaskPreKillHook to more closely match usage\n  Update CHANGELOG.md\n  tests: deflake TestClientAllocations_GarbageCollect_Remote\n  tests: deflake client TestFS_Logs_TaskPending test\n  Update CHANGELOG.md\n  test: fix flaky garbage collect test\n  drivers: regen proto\n  api: avoid codegen for syncing\n  code review comments\n  revert unintended change\n  ar: return error from hooks if occured\n  ...\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"66ac7050e1419fe54e6be4be701075377f8e3e6d","date":"2019-01-22 23:29:15 -0500","message":"e2e: remove unused script","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"158c74887eb53db89156c7f4722d1f55b8a90284","date":"2019-01-23 06:27:14 -0800","message":"goimports until make check is happy","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"4a421bb8c4a3055ed525bfa7f5d7653554c933e9","date":"2019-01-23 08:30:14 -0600","message":"Merge pull request #5226 from hashicorp/b-node-status-panic","refs":[],"body":"nil check node resources to prevent panic","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"0723d2c3069c1e94737d229c6e4d9b301217be45","date":"2019-01-23 08:54:10 -0600","message":"Merge pull request #5225 from hashicorp/b-notaskevent-terminalallocs","refs":[],"body":"Don't emit task events after alloc is in a terminal DesiredState ","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"87f8dff1ef1f253f8f71614b48ffbcafd2195848","date":"2019-01-23 06:59:32 -0800","message":"Merge pull request #5196 from hashicorp/f-plugin-utils","refs":[],"body":"Make plugins/shared external and make pluginutls/","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"a348c01d96951069230a2c7ed1c5d03c80035f98","date":"2019-01-19 11:19:58 -0500","message":"api: test api and structs are in sync","refs":[],"body":"Add some tests to ensure that api/structs values are in sync.\n\nGiven that vendoring libraries prune tests by default, test dependencies\naren't leaked to clients of the package - so it should be safe to add\nsuch dependency without affecting api clients.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ccf0202ba746760bfcf6273468e7ad599ca5d985","date":"2019-01-23 16:27:05 +0100","message":"cli: Hide `nomad docker_logger` from help output","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"f8788307f126b9ca603ceda5cea83325b192455c","date":"2019-01-23 16:46:11 +0100","message":"Merge pull request #5230 from hashicorp/dani/b-hide-docker_logger-command","refs":[],"body":"cli: Hide `nomad docker_logger` from help output","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"597fb32dde3cb628fe2dc9a22ab55b4f634f85ea","date":"2019-01-19 15:00:31 -0500","message":"drivers/rkt: allow development on non-linux","refs":[],"body":"Avoid depending on OS-specific library for some simple structs.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9d12fed3654713a70f3b7116cd6bd0ae5d3a8117","date":"2019-01-19 15:04:37 -0500","message":"drivers/rkt: Remove unused github.com/rkt/rkt","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9c94953c08b6d1465001f46adc3a8bd226da97f9","date":"2019-01-21 21:36:02 -0500","message":"tests: deflake TestRktDriver_StartWaitRecoverWaitStop","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"281d7bc17065e4a59a6e5e0446035b8557472ab0","date":"2019-01-23 07:40:56 -0500","message":"ci: run checkscripts","refs":[],"body":"`travis.sh` contained some bash-ism despite it being invoked with `sh`.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"cabe5e90f289511fc7d84d321b98d32f8556020f","date":"2019-01-23 10:53:07 -0500","message":"spell check","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4817a89bd3f7deda1bef1f2b9dc5ff74c2016677","date":"2019-01-23 12:34:16 -0500","message":"tests: avoid assertion in goroutine","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4781f1dd7b681381a35daa0c036231fcd7d7c3f4","date":"2019-01-23 13:06:51 -0500","message":"Merge pull request #5229 from hashicorp/r-grabbag-201901019","refs":[],"body":"Grab bag of small changes","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"a0a52f61981cfa33883b2523972c751eedd39398","date":"2019-01-22 16:30:57 -0800","message":"Device job stanza","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"81a415a054527cb62d7927385cf54f0c54b4f52e","date":"2019-01-22 16:42:38 -0800","message":"link to resources page","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"8264f50c5283d3aec739ae6657d0c40fe1bfbb42","date":"2019-01-22 16:48:09 -0800","message":"convert driver to device for device constraint/attributes","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"81916181ac005168b2ca50bdeae095e1c790de9f","date":"2019-01-23 10:43:13 -0800","message":"nvidia device plugin docs","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"2e65c951383c58b2813624fc3342607ed1785b04","date":"2019-01-23 10:51:33 -0800","message":"Json job","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"f3a2d26d40a9070a664156657137a55bb7926996","date":"2019-01-23 10:52:23 -0800","message":"fix docker runtime attribute","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"8f514618ee97277c62aa191a0979c8ba1a53e352","date":"2019-01-23 10:56:22 -0800","message":"change example job a bit","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"35eff08386933383d27a00ebb9ee98b55fe6a050","date":"2019-01-23 14:09:49 -0500","message":"Apply suggestions from code review","refs":[],"body":"Co-Authored-By: nickethier <ncethier@gmail.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"410bb28420ca091cc2a1e7149412e4e3398fd0f8","date":"2019-01-23 14:27:51 -0500","message":"Merge pull request #5227 from hashicorp/b-client-highcpu-usage","refs":[],"body":"Fix bug related to high cpu usage","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"a9060f44eb21ae4c2884c2129e5e7e851ab8b447","date":"2019-01-23 14:44:42 -0500","message":"drivers: add docker upgrade path and e2e test","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"f4ee18a6080d04ac9ab29872ed3fb0e8f2583cc7","date":"2019-01-23 15:39:34 -0500","message":"ci: run seperate build jobs for slower packages","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"c3bac9d94b32d3a2a0b0257c5612ff417ff22dcf","date":"2019-01-23 12:53:33 -0800","message":"fix package import","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"f059e9a9e55563580e9cfd72e52d042bc3c2bc07","date":"2019-01-23 16:31:55 -0500","message":"Merge pull request #5233 from hashicorp/f-split-slowtests","refs":[],"body":"ci: run seperate build jobs for slower packages","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"5c6d8f515341df0b2c4d96774d372cbfc6a247d8","date":"2019-01-23 18:10:36 -0600","message":"Add preemption section to scheduling internals","refs":[],"body":"Also reorganize the docs so that scheduling has subpages in it\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"5b53bb9f5a8a20fb011a10db7a51cc9991676ac5","date":"2019-01-23 18:57:45 -0600","message":"Add scheduler config docs and link from preemption docs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"b45f8b085be321fa6256df696e2fd9a4df08e7fa","date":"2019-01-23 20:26:32 -0500","message":"Merge branch 'f-driver-upgradepath-test' of https://github.com/hashicorp/nomad into f-driver-upgradepath-test","refs":[],"body":"* 'f-driver-upgradepath-test' of https://github.com/hashicorp/nomad:\n  Apply suggestions from code review\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"b958b8844326e68602e151201ae434f72c8477ce","date":"2019-01-23 20:28:51 -0500","message":"Merge pull request #5232 from hashicorp/f-driver-upgradepath-docker","refs":[],"body":"drivers: add docker upgrade path and e2e test","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"266252aef3b868c04ca98ea43c37c4f5f27c5918","date":"2019-01-23 20:29:08 -0500","message":"Merge branch 'f-driver-upgradepath-test' of https://github.com/hashicorp/nomad into f-driver-upgradepath-test","refs":[],"body":"* 'f-driver-upgradepath-test' of https://github.com/hashicorp/nomad:\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"d1b6b45c7707f485f9fa8f0898891b139cff7991","date":"2019-01-23 17:44:24 -0800","message":"Update devices/gpu/nvidia/README.md","refs":[],"body":"Co-Authored-By: dadgar <alex@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"6f22fc0203e85e04f69a59ba5526fefe6c67bf60","date":"2019-01-23 17:47:07 -0800","message":"spelling mistakes","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"d56ad039a719afa5af6431aaa1572369253049f4","date":"2019-01-23 17:47:24 -0800","message":"Merge pull request #5231 from hashicorp/d-devices","refs":[],"body":"Document devices","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"790fec8666532131983d8c304339c6f0cb703ec4","date":"2019-01-23 20:54:23 -0500","message":"e2e: removed unused code in nomade09upgrade suite","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"bed9efae4438ee0af9ad4b0d29973174689093c7","date":"2019-01-23 21:01:24 -0500","message":"Merge branch 'master' into f-driver-upgradepath-test","refs":[],"body":"* master: (23 commits)\n  tests: avoid assertion in goroutine\n  spell check\n  ci: run checkscripts\n  tests: deflake TestRktDriver_StartWaitRecoverWaitStop\n  drivers/rkt: Remove unused github.com/rkt/rkt\n  drivers/rkt: allow development on non-linux\n  cli: Hide `nomad docker_logger` from help output\n  api: test api and structs are in sync\n  goimports until make check is happy\n  nil check node resources to prevent panic\n  tr: use context in as select statement\n  move pluginutils -> helper/pluginutils\n  vet\n  goimports\n  gofmt\n  Split hclspec\n  move hclutils\n  Driver tests do not use hcl2/hcl, hclspec, or hclutils\n  move reattach config\n  loader and singleton\n  ...\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4d29d5dd66a0b415dea411949016d3c4382a4512","date":"2019-01-23 21:03:29 -0500","message":"Merge pull request #5209 from hashicorp/f-driver-upgradepath-test","refs":[],"body":"e2e tests for upgrade path to driver plugins","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"e2bc4f3f02dc4052b9a62a29e82b01cbad44804f","date":"2019-01-23 21:23:13 -0500","message":"e2e/nomad09upgrade: remove test file that is not needed","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4518e4d8fb0e178a0da7f7bfa82a96229efbc074","date":"2019-01-24 08:13:30 -0600","message":"Merge pull request #5223 from hashicorp/f-jobs-list-datacenters","refs":[],"body":"Add Datacenters to the JobListStub struct","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"de84a2e4637360270cf96dbcb734e9135403c54b","date":"2019-01-24 09:52:15 -0600","message":"update to Consul 1.4.0 for e2e tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a8a7802a51212b63938f18e54bcfa46fcd2b6694","date":"2019-01-24 12:12:40 -0600","message":"Fix spacing and add links to affinity stanza from various pages","refs":["origin/b-affinity-docs-fixes"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"5304c6125aa27c31c2d3bf63d4605570c336c287","date":"2019-01-24 14:21:59 -0500","message":"drivers/docker: handle shutdown of upgraded tasks correctly","refs":["origin/b-docker-09upgrade-shutdown"],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"afbe065a304d794a0c0709c890800721bc8e056a","date":"2019-01-24 14:58:26 -0600","message":"improve spread docs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"61f4fa7e71ae1372b19caf45d80cc73f0da8b227","date":"2019-01-24 15:42:11 -0600","message":"Apply suggestions from code review","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"16a2fab164413ee665530d4893d8750e0952cd18","date":"2019-01-24 16:40:00 -0600","message":"more code review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"8cffdb135706d7e2dc522bd53d8064c04a5bbadd","date":"2019-01-24 16:50:23 -0600","message":"review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e818feccbe64f8c99a07a1db047c25f734df4b77","date":"2019-01-24 16:57:06 -0600","message":"Merge pull request #5238 from hashicorp/b-spread-docs-fixes","refs":[],"body":"Documentation fixes for affinity and spread","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"7e216508498c9d67e090b239d9d56f31a8fd5f4d","date":"2019-01-24 17:20:22 -0600","message":"Delete intro section which is now in index page","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c4899fb0738873813b5297a1ef78c1a126b7e10e","date":"2019-01-24 17:24:20 -0600","message":"fixed formatting","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1343911558540cc8a698b3612699bd915c80aea1","date":"2019-01-24 18:32:14 -0600","message":"Merge pull request #5234 from hashicorp/b-preemption-docs","refs":[],"body":"Documentation for preemption","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"f38612c3b362692f0d5afa541b888307c979ed7f","date":"2019-01-24 22:19:18 -0500","message":"plugins/drivers: change stats interval to duration type in proto","refs":["origin/b-driver-stats-interval"],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"ff767d64a6a662b589edd377ec533e53f810ede3","date":"2019-01-24 22:34:57 -0500","message":"docker: only log missing bridge_ip on initial fingerprint","refs":["origin/b-docker-bridgeip-logging"],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4e5b60d0edb54c29e17367e43f5fe8c5d36078fb","date":"2019-01-24 22:54:30 -0500","message":"Merge pull request #5239 from hashicorp/b-driver-stats-interval","refs":[],"body":"plugins/drivers: change stats interval to duration type in proto","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"3113046dc3cd15047fe3ec6315998947c5b7f0a1","date":"2019-01-24 22:54:54 -0500","message":"Merge pull request #5240 from hashicorp/b-docker-bridgeip-logging","refs":[],"body":"docker: only log missing bridge_ip on initial fingerprint","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"b70442a325006fbb18a3901277ec3933ef02dc06","date":"2019-01-25 09:38:41 -0500","message":"drivers: pass logger through driver plugin client","refs":[],"body":"This fixes a panic whenever driver plugin attempts to log a message.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b82cab2fe4162a3cacb7f93f9d8f50e95a5b69f6","date":"2019-01-25 10:24:33 -0500","message":"website: redirect to new scheduling doc","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"cc6b4dae70ac66f5b05c1912a95b2e13667f573c","date":"2019-01-23 08:03:11 -0500","message":"server/vault: tweak error messages","refs":[],"body":"Closes #5139\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7f5b449f0a75121adadeb19c9ed5675fca663240","date":"2019-01-25 10:43:39 -0500","message":"Advanced scheduling guides (affinity + spread) (#5001)","refs":[],"body":"* initial structure\r\n\r\n* add to affinity guide\r\n\r\n* add to affinity guide\r\n\r\n* update affinity guide\r\n\r\n* spread guide\r\n\r\n* update content\r\n\r\n* update step 3 to spread stanza\r\n\r\n* update\r\n\r\n* add wording to motivate the use of spread and affinity\r\n\r\n* improve guide description and use clearer wording to distinguish constrain from affinity\r\n\r\n* clarify challenge to user with specific example\r\n\r\n* improve wording in the solution section\r\n\r\n* incorporate rest of suggestions into affinity guide\r\n\r\n* modify spread guide description\r\n\r\n* improve wording of spread docs\r\n\r\n* change instance count from 5 to 10 to more easily show spread\r\n\r\n* improving spread guide and changing demo architecture\r\n\r\n* motivate spread a bit more\r\n\r\n* clarification about spread\r\n\r\n* fix wording\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"27dd82fe7dd86135f3f8d066888c97f9db93588b","date":"2019-01-25 11:17:31 -0500","message":"Merge pull request #5228 from hashicorp/f-vault-err-tweaks","refs":[],"body":"server/vault: tweak error messages","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"47b5dca9a16d5d3b3e788e4fa8eea00efe47068f","date":"2019-01-25 11:17:47 -0500","message":"Merge pull request #5243 from hashicorp/b-fix-scheduling-links","refs":[],"body":"website: redirect to new scheduling doc","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"c023617436bbc4a05b5bdb350ebbdeec8699a1f4","date":"2019-01-25 12:13:03 -0500","message":"Merge pull request #5237 from hashicorp/b-docker-09upgrade-shutdown","refs":[],"body":"drivers/docker: handle shutdown of upgraded tasks correctly","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"f01cef0eafeef528e76d06b3a30e504922e9d5fb","date":"2019-01-25 13:22:54 -0500","message":"Merge pull request #5242 from hashicorp/b-fix-drivers-panic","refs":[],"body":"drivers: pass logger through driver plugin client","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ce95d5e3dc59fb6cc37df07848be098324cef22c","date":"2019-01-25 14:18:56 -0500","message":"changelog","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d28bf3231ecf59dba16bdc74da91611fef1c7c68","date":"2019-01-25 15:38:13 -0800","message":"Fix double restart counting for templates","refs":[],"body":"This PR fixes an issue where template restarts would count twice since\nit was emitting a restarting event.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"65aa214687300004011e079587f60ec2ffc23c17","date":"2019-01-25 16:20:55 -0800","message":"Fix killing non-existant container with a kill timeout","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"73d5f45dd358aebf72c78c2a219c150480e2452d","date":"2019-01-25 23:06:31 -0500","message":"raw_exec: ensure executor is killed after task is stopped","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"1400012cbcf526ac0c3b9c80b24f507f2909f84e","date":"2019-01-25 23:07:04 -0500","message":"drivermanager: don't store nil reattach configs","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"d9b1fc1a5416a5551982d3ca8c85e916de7c99da","date":"2019-01-25 23:08:01 -0500","message":"executor: prevent logger from blocking when stderr pipe is detached","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"7488a1495f7331f2b883d0d39cc5fdccf3d48277","date":"2019-01-26 10:57:49 -0600","message":"Fix broken scheduling links in advanced scheduling guide","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"787e37860b8e2e74dab99598b3b17572116049cc","date":"2019-01-25 23:06:50 -0600","message":"Basic consul registration e2e","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"9c58bc56a9047654e52bb1f733b87e22df94ce5e","date":"2019-01-26 17:47:35 -0600","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"d3f7da24d1e7a409a6d19e5ca62d1f7b148f9e50","date":"2019-01-26 17:48:02 -0600","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"22d6e0de390bf73fc75526c0184dcae575f56510","date":"2019-01-26 17:48:34 -0600","message":"fix typo","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"b2cd593713b7ba48df8f312d729e02449badbd18","date":"2019-01-27 20:15:35 -0600","message":"Moved in place upgrade canary test over to new e2e framework","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"ee7d8bb831fe23c0ae1c297cdc643c55c853df7f","date":"2019-01-28 09:04:52 -0500","message":"Update outage.html.markdown","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"6837a7370859e647b579d3a89098f28e607d9ba2","date":"2019-01-28 11:35:21 -0500","message":"add circbufwriter package","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"0c502baa1530df69df13e820842f0f5a6296683e","date":"2019-01-28 10:38:19 -0600","message":"Merge pull request #5244 from hashicorp/b-template-restart-count","refs":[],"body":"Fix double restart counting for templates","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"7b4b3b5f98f8824cc2a2320874d7ff4d536a0f38","date":"2019-01-28 10:46:49 -0600","message":"Merge pull request #5249 from hashicorp/consul_e2e","refs":[],"body":"Consul e2e tests","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"c6cc1e62e7d2cfd48c97697b6babdbade3c91f4b","date":"2019-01-28 12:04:41 -0500","message":"circbufwriter: Add tests","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"160cdf805953c40ca9bba528310928fef58ee2ed","date":"2019-01-28 12:15:12 -0500","message":"circbufwriter: defer unlock in Write since it will not block","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"6fe212d768d2a94f6ff939467ccc1930703d1c76","date":"2019-01-28 11:16:23 -0600","message":"Add 0.9 beta superscript to sidebar for all 0.9 features","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"23ba5c498aea36a95f7fbfacb2f22d2f14083438","date":"2019-01-28 11:24:01 -0600","message":"quota replication bug fix to changelog","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"fdbde6d2ec25ac9aae01ca62ba8f765be1cda86a","date":"2019-01-28 11:38:07 -0600","message":"Merge pull request #5251 from hashicorp/doc-fix-recovery-raft-port","refs":[],"body":"Update port in Raft V3 example.","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"ec5712345f798cbe2a78f581c1b20e77e94441e1","date":"2019-01-28 09:47:53 -0800","message":"comment","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"4acaf27ef53c286a21343c92babe84adb63e7a25","date":"2019-01-28 09:53:19 -0800","message":"Don't fall through","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"22a13de2798e6b2745c72e3b9e2e933be10582ca","date":"2019-01-28 10:28:53 -0800","message":"Fix env templates having interpolated destinations","refs":[],"body":"Fixes an issue where env templates that had interpolated destinations\nwould not work.\n\nFixes https://github.com/hashicorp/nomad/issues/5250\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"a5224f796d0d032324f62050b6bad0d3c46d1ac0","date":"2019-01-28 10:32:14 -0800","message":"changelog","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"6320e7a7ae33e90a579f59a3748e1d1c48050e5c","date":"2019-01-28 10:33:47 -0800","message":"Merge pull request #5245 from hashicorp/b-docker-shutdown","refs":[],"body":"Fix killing non-existant container with a kill timeout","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"6828d9f652af7283fa5fd473e2c77f066189b9af","date":"2019-01-28 19:03:54 +0000","message":"fixed broken link in docs","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"35f15a9b0d6af80ddf11447272d8fd27b53cc92a","date":"2019-01-28 14:04:46 -0500","message":"fix link typo","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d5772838a369acf1df2c7c0a987a0df745f3256c","date":"2019-01-28 11:17:16 -0800","message":"Merge pull request #5253 from hashicorp/b-template-env","refs":[],"body":"Fix env templates having interpolated destinations","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"e8ac62c3212dee78543fa74c8406e1c253c528d6","date":"2019-01-28 13:18:23 -0600","message":"Merge pull request #5254 from hashicorp/b-website-link-fix","refs":[],"body":"fixed broken link in docs","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"1b8187c8ec36320359d69b7a9f347e238b8d6fb5","date":"2019-01-28 11:18:59 -0800","message":"make nomad upgrade e2e build on non linux","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"d69ccf16cb5daa0cf7162bf278c9371f59633ef2","date":"2019-01-28 11:19:17 -0800","message":"Merge branch 'master' of github.com:hashicorp/nomad","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"d6ada19db1d42fc77183385358415e732542c54a","date":"2019-01-28 14:33:20 -0500","message":"circbufwritter: add defer to stop ticker in flush loop","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"6b12ce0e91cebc5f8baad3535c208cbe1c5ef37b","date":"2019-01-28 15:05:47 -0500","message":"dev: use golang 1.11.5","refs":[],"body":"Use latest Golang point release at this time for development.","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"75104f8f282bed911e933f11c72dd5cb867698f1","date":"2019-01-28 14:56:45 -0800","message":"changelog","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"85f0a8bf6f20711f27b4d0c7195a6cdde43c3c1c","date":"2019-01-28 14:59:55 -0800","message":"rework spread doc intro","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"b159476dfda97801dff6fde253ddf56553256567","date":"2019-01-28 18:01:17 -0500","message":"remove mac logs caveat","refs":["origin/remove-mac-log-caveats"],"body":"","author_name":"Omar Khawaja","author_email":"khawaja910@gmail.com"},{"hash":"c7fe892bbee24d56bc42a8597cef3799d181c944","date":"2019-01-28 15:16:42 -0800","message":"add more detail to backwards incompatabilities","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"228d248b6dcd40121ed27d7d64692fbb2db9d8ad","date":"2019-01-28 17:19:36 -0600","message":"Merge pull request #5258 from hashicorp/remove-mac-log-caveats","refs":[],"body":"remove mac logs caveat","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"528c3041818135cf618de6fca79631daa569673f","date":"2019-01-28 15:48:33 -0800","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"1d94e8a8518672c2f2cbe3b3a0f551fd852fed3e","date":"2019-01-28 15:48:45 -0800","message":"Merge pull request #5257 from hashicorp/f-changelog","refs":[],"body":"Nomad 0.9.0 changelog","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"14c5a1c1f1e08f57a05ddc3e384911c1b9f8873c","date":"2019-01-28 21:18:31 -0500","message":"Merge pull request #5248 from hashicorp/b-rawexec-leak","refs":[],"body":"Fix leaked executor in raw_exec","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"80a04052b6c4f10bae00a147b460b519de7d9a9e","date":"2019-01-24 23:57:07 -0500","message":"scheduler: fix NPE when deployment is nil, but placement is a canary","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4c11386388abe53f9454b11fbda24cd81f80cb17","date":"2019-01-28 20:23:47 -0600","message":"Merge pull request #5259 from hashicorp/b-npe-scheduler","refs":[],"body":"scheduler: fix NPE when deployment is nil, but placement is a canary","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"8aa451806b4f3e0b37b638148e3741c99092f57e","date":"2019-01-28 21:57:45 -0500","message":"executor: fix bug and add tests for incorrect stats timestamp reporting","refs":["origin/b-driver-stats-timestamp"],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"a1c826e0fa088fcd4b2ca87667882d8e9f7f5a05","date":"2019-01-28 23:14:17 -0500","message":"Merge pull request #5260 from hashicorp/b-driver-stats-timestamp","refs":[],"body":"executor: fix bug and add tests for incorrect stats timestamp reporting","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"3477ea009f81f42d2ba506e50f352d9ccacf7435","date":"2019-01-28 22:17:35 -0600","message":"Merge pull request #5252 from hashicorp/beta_tag_docs","refs":[],"body":"Add 0.9 beta superscript to sidebar for all 0.9 features","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"f3834347e9e8b71df2db632ce5b5146487e12a01","date":"2019-01-25 16:52:50 -0800","message":"nomad: fix panic when no node conn found","refs":[],"body":"A missing return would cause a panic when a server could find no route\nto a client.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"66decf95bbee82cae664dfc2921e45d973089db4","date":"2019-01-29 08:39:58 -0500","message":"Merge pull request #5256 from hashicorp/r-golang-1.11.5","refs":[],"body":"dev: use golang 1.11.5","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"530993af242c8a0a7726d78d0505f668a3130b69","date":"2019-01-29 06:45:57 -0800","message":"Merge pull request #5261 from hashicorp/b-server-api-panic","refs":[],"body":"nomad: fix panic when no node conn found","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"c998b67b8e9ec0ef2dfe9d20c5e06339fd93c82a","date":"2019-01-29 12:47:42 -0600","message":"Make sure that all servers are 0.9 before applying scheduler config entry","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"7ae9e0f6a743aa7cdbb4ae0c1d228a927254108b","date":"2019-01-29 13:48:45 -0600","message":"variable name fix","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"cca1c9ccb6d04be1928e402e1bb8fbb439ae665e","date":"2019-01-29 15:53:05 -0500","message":"add plugin content (docs) (#5186)","refs":[],"body":"* call out pluggable drivers in task drivers section and link/add info to plugin stanza\r\n\r\n* fix hyphenation\r\n\r\n* removing page and nav that tells users drivers are not pluggable\r\n\r\n* show new syntax for configuring raw_exec plugin on client\r\n\r\n* enabled option value for raw_exec is boolean\r\n\r\n* add plugin options section and mark client options as soon to be deprecated\r\n\r\n* fix typos\r\n\r\n* add plugin options for rkt task drivers and place deprecation warning in client options\r\n\r\n* add some plugin options with plugin configuration example + mark client options as soon to be deprecated\r\n\r\n* modify deprecation warning\r\n\r\n* replace colon with - for options\r\n\r\n* add docker plugin options\r\n\r\n* update links within docker task driver to point to plugin options\r\n\r\n* fix typo and clarify config options for lxc task driver\r\n\r\n* replace raw_exec plugin syntax example with docker example\r\n\r\n* create external section\r\n\r\n* restructure lxc docs and add backward incompatibility warning\r\n\r\n* update lxc driver doc\r\n\r\n* add redirect for lxc driver doc\r\n\r\n* call out plugin options and mark client config options for drivers as deprecated\r\n\r\n* add placeholder for lxc driver binary download\r\n\r\n* update data_dir/plugins reference with plugin_dir reference\r\n\r\n* Update website/source/docs/external/lxc.html.md\r\n\r\nCo-Authored-By: Omar-Khawaja <Omar-Khawaja@users.noreply.github.com>\r\n\r\n* corrections\r\n\r\n* remove lxc from built-in drivers navigation\r\n\r\n* reorganize doc structure and fix redirect\r\n\r\n* add detail about 0.9 changes\r\n\r\n* implement suggestions/fixes\r\n\r\n* removed extraneous punctuation\r\n\r\n* add official lxc driver link\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"de589d29e1c1fa5a1b9f8455722562cbf41e4bbf","date":"2019-01-29 16:02:58 -0500","message":"LXC driver guide (#5255)","refs":[],"body":"* skeleton for external plugins guide section\r\n\r\n* initial content\r\n\r\n* add installation and configuration steps\r\n\r\n* complete steps to deployg lxc workload\r\n\r\n* update link\r\n\r\n* correct typo in link\r\n\r\n* change link name\r\n\r\n* fix alignment and word wrap at 80\r\n\r\n* updates\r\n\r\n* update lxc driver download link and commands in step 3\r\n\r\n* fix link typo\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"97e3603043ae7a49302bf962bd61969bf611e708","date":"2019-01-29 13:17:10 -0800","message":"Always populate task dir environment variables","refs":[],"body":"Fixes an issue where if a task was restarted after restating the client,\nthe task dir environment variables would not be populated. This PR fixes\nthis for both upgrades from 0.8.X and for normal 0.9 restarts.\n","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"0f334fcac0065b43d1300514a23acea25fa13154","date":"2019-01-29 15:25:21 -0600","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"94f9a6c009c8b5d37162b19dde9aadd7469b337d","date":"2019-01-29 15:29:58 -0600","message":"Merge pull request #5265 from hashicorp/b_schedconfig_panicfix","refs":[],"body":"Make sure that all servers are 0.9 to apply scheduler config ","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"569c26f07323a44553d2efa11a684b8cd9bb91a4","date":"2019-01-29 13:38:47 -0800","message":"mention #5261 in changelog","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"2964d5a2ead9039f9ce3d3239ded6d5cd87a33bb","date":"2019-01-29 16:49:28 -0500","message":"fix typo from plugin_dir to data_dir (#5267)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"8a5769148a871e462d59180f981bfe3db590e83e","date":"2019-01-29 15:50:36 -0600","message":"Guard operator endpoints for minimum server version","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"fe6d7df6c43d8faff98effc37774a81f90d5077c","date":"2019-01-29 14:07:55 -0800","message":"Fix usage of fsi variable","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"dcb1821d3c402b5e161cfe09cdcbd431db1b9015","date":"2019-01-29 14:09:08 -0800","message":"Merge pull request #5268 from hashicorp/b-task-dir-envs","refs":[],"body":"Always populate task dir environment variables","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"25914d41625905b8280566c30273f60a9547cb7f","date":"2019-01-29 16:19:45 -0600","message":"ensure tests run a 0.9 server","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"7465ee314ea5caed871f32c717518c58ed56fb5a","date":"2019-01-29 16:22:16 -0600","message":"Merge pull request #5269 from hashicorp/b_schedconfig_panicfix","refs":[],"body":"Guard operator endpoints for minimum server version","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"66cf368e21d038d7e38d0d40bd403b574b97572a","date":"2019-01-29 16:58:52 -0600","message":"fix broken link","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"bb514cfa39694420f53215ffd7fbf0a6f2e54af8","date":"2019-01-29 15:03:02 -0800","message":"fix lxc sidebar","refs":["f-ui-evaluation-timestamps"],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"68fd76bfc2d175bf8dea8980c6b8d9b37c015eb4","date":"2019-01-29 08:44:52 -0800","message":"docs: add 0.9 specific upgrade notes","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"d72b7044be3f0c646eea1be9546f873eec54f1c5","date":"2019-01-29 15:19:35 -0500","message":"ci: ignore background ping errors","refs":[],"body":"We attempt to kill background ping process twice, and sometimes the\nsecond kill fails, e.g.\nhttps://travis-ci.org/hashicorp/nomad/jobs/486050357, let's not fail the job.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"32fa3257eacf9d01bbed5294b5440f18889efd64","date":"2019-01-30 07:44:36 -0500","message":"Merge pull request #5266 from hashicorp/b-background-dont-fail","refs":[],"body":"ci: ignore background ping errors","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"94aff6ad7697ca280467dd82909baf7039efccbc","date":"2019-01-30 14:23:03 +0100","message":"docs: Update affinity stanza in device","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"11d1af89138776bbc1039487ed154716e70b8cfb","date":"2019-01-30 09:24:18 -0600","message":"Add link to preemption from schedulers page","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a06b032984cff721f4b70cf94253ad9b61f234a9","date":"2019-01-30 09:30:50 -0600","message":"Merge pull request #5276 from hashicorp/docs_system_Sched","refs":[],"body":"Add link to preemption from schedulers page","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"541cddd3e2db7fe91ff4291e6740301deb1e0636","date":"2019-01-30 10:33:10 -0500","message":"docs: fix job json example (#5274)","refs":[],"body":"The internal needs to be long enough to accomodate the attempts.\r\n\r\nAlso, clarify that the input should be a json file rather than an hcl\r\n`.nomad` one.","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"837e550dd317ebb650c2832c02f3b8cc576172cd","date":"2019-01-29 15:37:01 -0800","message":"install specific version of protoc-gen-go","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"7e47c45f1354038687f84694238e099ce6efa2c4","date":"2019-01-30 07:57:57 -0800","message":"fix perms in protoc installer","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"d627d4ea95e80d3074bb4fd858024c2ac238446d","date":"2019-01-30 08:00:17 -0800","message":"Install versioned release of codecgen","refs":[],"body":"Gets us one step closer to a reproducible build. Also removes the unused\nvendored version.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b283ca729ca97a93eb400fd57522a28a326814eb","date":"2019-01-30 08:07:29 -0800","message":"Merge pull request #5263 from hashicorp/d-upgrade-09","refs":[],"body":"docs: add 0.9 specific upgrade notes","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"c0c51ae002deadfdb28b7e4a242542de5726fd0a","date":"2019-01-30 08:37:42 -0800","message":"minor wording fixes","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"23b892a8cd941fe2107b385a568c36fdc5883437","date":"2019-01-30 10:51:21 -0600","message":"Merge pull request #5273 from hashicorp/dani/nvidia-affinity","refs":[],"body":"docs: Update affinity stanza in device","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"77e4e64b5fb0b901d695ed2be1f47c2de4335487","date":"2019-01-30 09:57:55 -0800","message":"Always show an absolute timestamp tooltip when showing relative dates","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"18c6716449f70ac7b3c155e489e19708b2a274c7","date":"2019-01-30 10:05:46 -0800","message":"Merge pull request #5270 from hashicorp/f-install-protoc-gen-go","refs":[],"body":"install specific version of protoc-gen-go","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"dc5e35b7b8da6dc06396b0473d927de618cf76a0","date":"2019-01-30 10:06:04 -0800","message":"Merge pull request #5277 from hashicorp/d-changelog","refs":[],"body":"changelog: minor wording fixes","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"ecec3d38de6ca72eea68d9737d7199cf67bbfe3e","date":"2019-01-30 10:49:44 -0800","message":"Nomad 0.9.0-beta1 generated code","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"34c4b232f5b151e4384a7e0d574b31af365bd436","date":"2019-01-30 10:55:03 -0800","message":"remove deleting generated code in clean step","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"ff9597b513b7c7f25f17ccf1e70d33c9cd17ea10","date":"2019-01-30 11:00:09 -0800","message":"version bump","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"7b98db133b9480c90bda84dcb13237c2f2eb87c2","date":"2019-01-30 11:08:30 -0800","message":"Release v0.9.0-beta1","refs":["tag: v0.9.0-beta1"],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com","tag":"v0.9.0-beta1"},{"hash":"aa713a4d9fb3ebfc80b0d743daca2bbb0c11d7c3","date":"2019-01-30 14:22:29 -0500","message":"client: fix bug during 0.8 state up grade that causes external drivers to fail","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"bc42873e07091f8944718eedb07d08fbdc47c685","date":"2019-01-30 12:20:38 -0800","message":"Change types of weights on spread/affinity","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"4f89ce03fc84caf328183329bd95140938872f83","date":"2019-01-30 12:23:14 -0800","message":"Update comment on int8ToPtr","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"d7407a03b451e11c3282d6208c22c5a19646787c","date":"2019-01-30 12:23:43 -0800","message":"Update comment on int8ToPtr","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"9523e5f2ead937e6adf79bb6a324914f7bc76d44","date":"2019-01-30 15:26:40 -0500","message":"Merge pull request #5279 from hashicorp/b-fix-external-driver-id-reference","refs":[],"body":"client: fix bug during 0.8 state up grade for external drivers","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"7d7b922cf090e9acf53d7457ae96c045146883e5","date":"2019-01-30 12:38:34 -0800","message":"remove generated structs","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"190c9ae35249ba4bc2883eeccbe84605605f87df","date":"2019-01-30 15:44:39 -0500","message":"website/resources: add recent videos/blogs to resources","refs":["origin/website-resources"],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"3cd2ba28e48751f19809970b289c5bf96a5ec98c","date":"2019-01-30 14:46:24 -0600","message":"fix tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"93a0394354ca3d6ca00a1507b96acf811ad11396","date":"2019-01-30 16:01:43 -0500","message":"Merge pull request #5282 from hashicorp/website-resources","refs":[],"body":"website/resources: add recent videos/blogs to resources","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"0de7939fb1d6b33c9b1d5dbeb9ed715e0922b574","date":"2019-01-30 13:25:56 -0800","message":"Merge pull request #5281 from hashicorp/f-affinity-weight-int","refs":[],"body":"Change types of weights on spread/affinity","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"29a5d242e69d2db5a36cf58d975f15c279f49a7e","date":"2019-01-30 13:31:50 -0800","message":"Generate files for 0.9.0-beta2","refs":[],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com"},{"hash":"a0f4b11c1cfc4ff8564a801eb9d0a811a16db208","date":"2019-01-30 13:38:23 -0800","message":"Release v0.9.0-beta2","refs":["tag: v0.9.0-beta2"],"body":"","author_name":"Alex Dadgar","author_email":"alex.dadgar@gmail.com","tag":"v0.9.0-beta2"},{"hash":"101e41b4dec721941dd7f1b22136092270dba9e6","date":"2019-01-30 13:50:44 -0800","message":"Bump to Nomad 0.8.7 and mention 0.9 beta","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"300a0795e6a1cd4bd5e2b8bd848ca83ac255e02e","date":"2019-01-30 13:53:00 -0800","message":"Merge pull request #5284 from hashicorp/website-0.9","refs":[],"body":"Bump to Nomad 0.8.7 and mention 0.9 beta","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"32009fb57757a879c0e32f030beec064c6a1f2c7","date":"2019-01-30 17:05:44 -0500","message":"website: update lxc references to 0.1.0-rc2 (#5283)","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"b8d96a4db70dd1e95dba68f67674f5aa9aeb75de","date":"2019-01-30 17:48:08 -0500","message":"fix typo","refs":["origin/external-plugins-typo"],"body":"","author_name":"Omar Khawaja","author_email":"khawaja910@gmail.com"},{"hash":"bc0dae124775f444b6b315a06f568eb012346cd0","date":"2019-01-30 14:50:01 -0800","message":"Merge pull request #5285 from hashicorp/external-plugins-typo","refs":[],"body":"fix typo","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"fc994b2268ac134b470110ab54cd2c92d9e65d4e","date":"2019-01-31 15:15:00 +0000","message":"fixed some affinity examples","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"edcee2d3bb0806ba8f85fa4f9ebce84e0edfec1e","date":"2019-01-31 16:00:54 +0000","message":"fixed typo in vault integration documentation","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"bb64d74f3aa714f43ca22d8557c292fe50544cac","date":"2019-02-01 14:24:02 +0100","message":"Fix typo in \"discovery\"","refs":[],"body":"","author_name":"Matthias Endler","author_email":"matthias-endler@gmx.net"},{"hash":"ee9a31f005e384f741a47ad7f39d585537263993","date":"2019-02-01 14:36:15 +0100","message":"Merge pull request #5290 from mre/patch-1","refs":[],"body":"Fix typo in \"discovery\"","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"ff63b1aefe956106185538952e820532725374d1","date":"2019-02-01 08:28:44 -0800","message":"Remove 0.9.0-beta2 generated files","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"076dddbe7f5574ba799722995d2e88dab7133a39","date":"2019-01-30 22:44:23 -0800","message":"New helpers to standardize date and timestamp formats","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"586e98bbeadbbff4508ad2b1fb2b0ba7401a2da5","date":"2019-01-30 22:44:43 -0800","message":"Apply new date and timestamp helpers e'rywhere","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"cc1b83c980626814fee4f45669e68e9ac5b6136e","date":"2019-02-01 09:19:14 -0800","message":"Update tests that check time and date formatting","refs":["f-ui-absolute-timestamps"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c40cb97dbc0aba8c7ea9eba8d709f4e73467d435","date":"2019-02-01 09:28:36 -0800","message":"cli: do not duplicate reschedule headers per group","refs":[],"body":"Fixes #5291\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f7be6e64fbd14b841b3db7cb36bc5cbddb949a80","date":"2019-02-01 09:45:44 -0800","message":"Merge pull request #5293 from hashicorp/b-dupe-resched","refs":[],"body":"cli: do not duplicate reschedule headers per group","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"bfde3caaacc016ee6a1dc6ffdfd46f019bd72778","date":"2019-02-01 09:51:01 -0800","message":"Merge pull request #5278 from hashicorp/f-ui-absolute-timestamps","refs":[],"body":"UI: Always show an absolute timestamp tooltip when showing relative dates","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"dd22f8aabf4fa6fdb8999eb75a162b2a67669dd2","date":"2019-02-01 13:12:18 -0500","message":"add some cross-linking for easier reference (#5292)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"8c75be1ec46eeff438c34357f10408b58e766c70","date":"2019-02-02 09:43:24 +0300","message":"nomad/command: fix strings.Contains args order","refs":[],"body":"Swapped call args order to meet the expected behavior.\r\n\r\nSigned-off-by: Iskander Sharipov <quasilyte@gmail.com>","author_name":"Iskander (Alex) Sharipov","author_email":"quasilyte@gmail.com"},{"hash":"a8e9c4aec2d2f272f3a56e682787a9b6e3b27988","date":"2019-02-02 16:08:32 +0100","message":"Merge pull request #5295 from Quasilyte/patch-1","refs":[],"body":"nomad/command: fix strings.Contains args order","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"645c8c41eabceb7a9bb9c8e4e58346e88b07d49b","date":"2019-02-02 12:17:03 -0800","message":"client: log when allocs have been processed","refs":[],"body":"Will hopefully help us catch deadlocks/livelocks/slowdowns in the\nadd/remove allocs pipeline which should be fast.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"3e52a6aacf16eadd7389cde8c83be3abdeb62a65","date":"2019-02-02 12:18:30 -0800","message":"consul: squelch noisy useless logs","refs":[],"body":"Only log when syncing actually did something.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"1d17fbc68147c6c785fedb95fac8dc709a32b584","date":"2019-02-02 12:19:16 -0800","message":"simplify hcl2 parsing helper","refs":[],"body":"No need to pass in the entire eval context\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"08864d5ea50ce0a65a00507634e664c5f2d72a47","date":"2019-02-02 12:20:26 -0800","message":"plugins: update hclutils test","refs":[],"body":"The test used old local copies of Docker structs and appeared to be\ntesting an outdated approach to task config decoding.\n\nUpdated to use real Docker structs so we can do end-to-end unit testing\nof real Docker task configs.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"5a8d95523666506a631c1cc21895e6c76c7b5d43","date":"2019-02-04 10:56:05 -0800","message":"docker: fix logging config parsing","refs":[],"body":"Fixes\nhttps://groups.google.com/d/topic/nomad-tool/B3Uo6Kns2BI/discussion\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"075635bafc29677388274fd9e78f7ff404fad276","date":"2019-02-06 19:13:40 +0000","message":"restored previous example (it was correct)","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"d1941aa1e64504798faf8b5124c8f26c8fd34f18","date":"2019-02-06 13:54:59 -0800","message":"remove apostrophe in \"job's\"","refs":[],"body":"","author_name":"Cathy Chang","author_email":"chang.cathy@gmail.com"},{"hash":"a5badac8275befb53ff41896615554d97a577508","date":"2019-02-08 16:22:52 +0100","message":"Remove the systemd process and threads limit","refs":[],"body":"systemd limits the number of process and threads you can create within the cgroup it creates for a given service. This is especially limiting if you have a high number of keys Nomad watches from Consul.\r\n\r\nFixes #4649","author_name":"Arno B","author_email":"arno@iadvize.com"},{"hash":"ee5360f20916aac5e77676a6374dd2fce44103d3","date":"2019-02-08 10:43:49 -0500","message":"Merge pull request #5306 from nanoz/patch-1","refs":[],"body":"Issue #4649: Remove the systemd process and threads limit","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"a8c97343cf5cc4b4ab4e98cdf415569df427352b","date":"2019-02-08 15:50:10 -0500","message":"Fix executable check on windows","refs":[],"body":"","author_name":"mnachury","author_email":"mathieu.nachury@outlook.com"},{"hash":"7a729cbdea62a5127affc77500e2511061ef552f","date":"2019-02-08 17:46:55 -0500","message":"Merge pull request #5307 from mnachury/fix/exe_detection_windows","refs":[],"body":"Fix executable check on windows","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"f6ce196bcc8ad5720306ada6886aa502bda205ad","date":"2019-02-11 15:18:44 +0100","message":"docker: Fix volume driver_config options spec (#5309)","refs":[],"body":"Fixes #5308","author_name":"Gertjan Roggemans","author_email":"g.roggemans@grog.be"},{"hash":"f47b9df6f078e16df789087cd82eb2a6e93e2c96","date":"2019-02-11 14:33:36 +0000","message":"Confirm RA against Nomad 0.9.0-beta2","refs":[],"body":"Change product_version frontmatter to ea_version and increase to 0.9","author_name":"Dan Brown","author_email":"roooms@gmail.com"},{"hash":"cef83f5dd020bf1185d972ca0a3cc2739f22869c","date":"2019-02-11 14:35:21 +0000","message":"Confirm DG against Nomad 0.9.0-beta2","refs":["origin/docs-ea-update-0.9"],"body":"Change product_version frontmatter to ea_version and increase to 0.9","author_name":"Dan Brown","author_email":"roooms@gmail.com"},{"hash":"c12bdcdf0bde2d07d13dbd6e9865a3b46b8dba02","date":"2019-02-11 06:57:52 -0800","message":"Merge pull request #5297 from hashicorp/b-docker-logging","refs":[],"body":"Docker: Fix logging config parsing","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"09659b87ce47b2d58889bd51f9f064cd38b02e0a","date":"2019-02-12 09:13:27 -0600","message":"Merge pull request #5287 from hashicorp/docs-fix-affinity-examples","refs":[],"body":"docs: fixed some affinity examples","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"0fd2b457400fc7a67dd5737393bfcfd10c68fab7","date":"2019-02-12 13:41:26 -0500","message":"drivers/java: restore 0.8.7 java version detection (#5317)","refs":[],"body":"Restore 0.8.x behavior where java driver is marked as detected when\r\n`java -version` exits with 0 but returns unexpected output.\r\n\r\nFurthermore, we restore behavior when `java -version` where we parse the\r\nfirst three lines of `java -version` but ignore rest.\r\n\r\nIf `java -version` returns less than 3 lines, Nomad 0.8.7 would panic.\r\nIn this implementation, we'd still mark java as detected but returns\r\nempty version.\r\n\r\nThe 0.8.7 logic for detecting java version is found in\r\nhttps://github.com/hashicorp/nomad/blob/v0.8.7/client/driver/java.go#L132-L172\r\n.\r\n\r\nI punt on revamping how we can be more resilient to java -version\r\nsyntax, and aimed for preserving existing behavior instead.\r\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"941f89e0fe3340098e075f54564c8cdfac48bdcb","date":"2019-02-12 14:46:37 -0500","message":"tests: add hcl task driver config parsing tests (#5314)","refs":[],"body":"* drivers: add config parsing tests\r\n\r\nAdd basic tests for parsing and encoding task config.\r\n\r\n* drivers/docker: fix some config declarations\r\n\r\n* refactor and document config parse helpers\r\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"b41308f16a36110928e3b768c261b4fe5c23e6ac","date":"2019-02-12 13:46:09 -0800","message":"tests: port TestTaskRunner_BlockForVault from 0.8","refs":[],"body":"Also fix race conditions in the mock vault client.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f2506e4d29e9af8cc3e256aa742a6b1b516296f7","date":"2019-02-12 15:12:56 -0800","message":"tests: port TaskRunner_DeriveToken tests from 0.8","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"cfbe7520e85b74a02bcc0af70397912f3f427a89","date":"2019-02-12 15:28:13 -0800","message":"consul: fix task deregistration hook","refs":[],"body":"Broke ShutdownDelay but the test was timing dependent so it just\nappeared flaky. Made the test slower so that it should never incorrectly\npass.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"fa9537f6e9b8c2516b37dd4d060068c3f86d083d","date":"2019-02-12 15:48:04 -0800","message":"tests: port TestTaskRunner_Download_List from 0.8","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"a8ddf64e94457a72c847008a7c1cd1b670d804db","date":"2019-02-10 09:38:48 -0500","message":"vendor: Update to latest hcl2","refs":[],"body":"* Includes fixes for handling null blocks https://github.com/hashicorp/hcl2/pull/87\n* Updates go-cty as a newer version is required by hcl2\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"e2244cd0d480a5a6feac781f63953428ce3ee7f8","date":"2019-02-14 15:16:13 +0000","message":"drivers/docker: SIGTERM to stop containers","refs":[],"body":"Windows Docker daemon does not support SIGINT, SIGTERM is the semantic\nequivalent that allows for graceful shutdown before being followed up by\na SIGKILL.\n","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"a96cc97389fb6b78e54f41d212f23ea653e79949","date":"2019-02-14 08:11:37 -0800","message":"test: improve failure message","refs":[],"body":"Co-Authored-By: schmichael <michael.schurter@gmail.com>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"eb8b19ec8277fe0f7cac1d7458cee1156f8aae82","date":"2019-02-14 08:12:06 -0800","message":"test: improve readability of duration","refs":["origin/test-port-08"],"body":"Co-Authored-By: schmichael <michael.schurter@gmail.com>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"79d5a246f86382167dba635ddd2f1ca54f6b3bcf","date":"2019-02-14 13:34:07 +0100","message":"Add regression test for parsing null mounts","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"756e733dbcc3b901ad9648ca9991539273ddbf4b","date":"2019-02-14 18:05:28 +0100","message":"Merge pull request #5327 from hashicorp/dani/windows-term","refs":[],"body":"drivers/docker: SIGTERM to stop containers","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"7f56423c66bd13bc7d55ea5c4a53c5dc2b245b77","date":"2019-02-14 18:55:10 +0100","message":"Update drivers/docker/config_test.go","refs":[],"body":"Co-Authored-By: dantoml <dani@tomlinson.io>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"0df5cb6b40916a0d4b262ecf9031e78ee05e738b","date":"2019-02-14 18:56:13 +0100","message":"Merge pull request #5326 from hashicorp/dani/json-submission","refs":[],"body":"api: Fix compatibility with pre 0.9 API jobs","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"3d41a54ac33c8d0a86db2748abe8e7d7a49ea4d0","date":"2019-02-14 10:18:41 -0800","message":"Merge pull request #5319 from hashicorp/test-port-08","refs":[],"body":"Fix Consul Service PreKill Hook","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"7beb4ccd9c8153fd9824a07d062765bf144d419f","date":"2019-02-13 16:01:58 -0600","message":"expand job init example with spread and affinity","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"236101f1934632a8b07c4d83910d67da1abf7959","date":"2019-02-13 17:25:17 -0500","message":"Update job_init.go","refs":[],"body":"minor","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"7d92831217a2ae060a7fa2cbf20fc5e10dc65e54","date":"2019-02-13 16:28:04 -0600","message":"Fix whitespace","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"9fc94b33a1e36c710c802fb472d2ace5e9eea473","date":"2019-02-14 12:48:37 -0600","message":"fix indentation","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"de52d87dc94d12347e0377ae64b48beb3969c2af","date":"2019-02-14 14:58:10 -0600","message":"Merge pull request #5324 from hashicorp/f-nomad-init","refs":[],"body":"expand job init example with spread and affinity","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"afb0c5ac452ba3bcf5c12907351dccb4edbc368b","date":"2019-02-13 12:55:48 -0500","message":"drivers: restore port_map old json support","refs":[],"body":"This ensures that `port_map` along with other block like attribute\ndeclarations (e.g. ulimit, labels, etc) can handle various hcl and json\nsyntax that was supported in 0.8.\n\nIn 0.8.7, the following declarations are effectively equivalent:\n\n```\n// hcl block\nport_map {\n  http = 80\n  https = 443\n}\n\n// hcl assignment\nport_map = {\n  http  = 80\n  https = 443\n}\n\n// json single element array of map (default in API response)\n{\"port_map\": [{\"http\": 80, \"https\": 443}]}\n\n// json array of individual maps (supported accidentally iiuc)\n{\"port_map: [{\"http\": 80}, {\"https\": 443}]}\n```\n\nWe achieve compatbility by using `NewAttr(\"...\", \"list(map(string))\",\nfalse)` to be serialized to a `map[string]string` wrapper, instead of using\n`BlockAttrs` declaration.  The wrapper merges the list of maps\nautomatically, to ease driver development.\n\nThis approach is closer to how v0.8.7 implemented the fields [1][2], and\ndespite its verbosity, seems to perserve 0.8.7 behavior in hcl2.\n\nThis is only required for built-in types that have backward\ncompatibility constraints.  External drivers should use `BlockAttrs`\ninstead, as they see fit.\n\n[1] https://github.com/hashicorp/nomad/blob/v0.8.7/client/driver/docker.go#L216\n[2] https://github.com/hashicorp/nomad/blob/v0.8.7/client/driver/docker.go#L698-L700\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"196d0374b7b1ddea270036672fe1060816e94406","date":"2019-02-16 13:07:02 -0500","message":"Fix device.attr typo (#5331)","refs":[],"body":"Fix https://github.com/hashicorp/nomad/issues/5315","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"427ab71b478a51e0b5e0158d662f3def333fba3c","date":"2019-02-18 20:40:45 -0500","message":"Warn that `data_dir` can't be in the jail (#4618)","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"2db90bfccccee93d9320ab97575c96ddbd6335a1","date":"2019-02-19 14:38:39 +0100","message":"dlogger: Increase resilience to docker api failure","refs":[],"body":"This commit adds some extra resiliency to the docker logger in the case\nof API failure from the docker daemon, by restarting the stream from the\ncurrent point in time if the stream returns and the container is still\nrunning.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"7b8ec414a3dfd1af8d0e33d6e6a3eda2a6b7209e","date":"2019-02-15 15:42:46 -0800","message":"client: fix setting alloc unhealthy at deadline","refs":[],"body":"During the 0.9 client refactor the code to fail a deployment when the\ndeadline was reached was broken. This restores and tests that behavior.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"aaa6db6090ef7d46665ae730cedfa8b2863373f2","date":"2019-02-19 08:40:53 -0800","message":"Merge pull request #5329 from hashicorp/b-health-deadline","refs":[],"body":"client: fix setting alloc unhealthy at deadline","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"e128f5b4dab8d8e4a24c04aac19af3b107361fa4","date":"2019-02-19 17:00:03 -0500","message":"adding dropdown nav to external plugins section (#5338)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"b3b4d7b9a3a71d3e5db0026fb4eb975512104b7c","date":"2019-02-19 17:53:14 -0600","message":"cli Ui implementation that logs to a hclogger","refs":[],"body":"This makes it so any messages output to the UI *after* the agent has started\nwill be logged in json format correctly\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"bd90b8db7767ed9bde665376d81127fd90dc6f10","date":"2019-02-19 20:21:18 -0500","message":"CVE-2019-5736: Update libcontainer depedencies (#5334)","refs":[],"body":"* CVE-2019-5736: Update libcontainer depedencies\r\n\r\nLibcontainer is vulnerable to a runc container breakout, that was\r\nreported as CVE-2019-5736[1].  Upgrading vendored libcontainer with the fix.\r\n\r\nThe runc changes are captured in https://github.com/hashicorp/runc/commits/369b920277d27630441336775cd728bc0f19e496 .\r\n\r\n[1] https://seclists.org/oss-sec/2019/q1/119","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"eb5355e0935e04924e385a90264e23b74f47d0c6","date":"2019-02-19 20:22:59 -0500","message":"driver/docker: use BlockAttrs for storage_opts","refs":[],"body":"storage_opts is a new field in 0.9 cycle and doesn't have backward\ncompatibility constraints.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"153337347c61cb590f441cc834a6a464194fd6a1","date":"2019-02-19 20:58:37 -0500","message":"Merge pull request #5321 from hashicorp/b-portmap-regression","refs":[],"body":"drivers: restore port_map old json support","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"2af30fb441ff7e64789eeaec984334749daeeddc","date":"2019-02-20 07:41:47 -0500","message":"tests: expect Docker on AppVeyor","refs":[],"body":"Prepare to run docker on AppVeyor Windows environment\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8104e2c14181f456bea97c677896e7e22220b7d0","date":"2019-02-20 07:48:02 -0500","message":"driver/docker: Skip failing Windows tests","refs":[],"body":"Skip currently Docker tests that fail on Windows for further\ninvestigation.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"638be7b7b0c086c691f4d0defb6d3a07584ce7aa","date":"2019-02-20 13:56:15 +0100","message":"vendor: Update to latest go-colorable","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"ed9818a5705d3d773f441cbb88f0e1f7c522e38f","date":"2019-02-20 14:01:35 +0100","message":"ui: Support colored output on Windows","refs":[],"body":"This commit uses the go-colorable library to enable support for coloured\nUI output on Windows. This acts as a compatibility layer that takes\nstandard unix-y terminal codes and translates them into the requisite\nwindows calls as required.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"e7fbdf40325580b6d3708903b8b80ddfc601bb76","date":"2019-02-20 07:49:46 -0500","message":"ci: Run Docker tests on AppVeyor Windows","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d6250ec0d642931d43470cbbe7c33bb777894fca","date":"2019-02-20 07:52:27 -0500","message":"tests: IsTravis() -> IsCI()","refs":[],"body":"Replace IsTravis() references that is intended for more CI environments\nrather than for Travis environment specifically.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a1d28c978ab3e0044c0bf95ce1cde4afe18ee2df","date":"2019-02-20 15:13:58 +0100","message":"Merge pull request #5342 from hashicorp/dani/powercolors","refs":[],"body":"Fix colored terminal output on Windows","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"83979252cdef94fa8bd19bf0a63dc4f9c8287483","date":"2019-02-13 08:25:25 -0800","message":"tests: add new task runner test helper","refs":[],"body":"Adds a new helper and removes a duplicated test.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"c51a54cfeeb059e9dca9fae7038cbe482ccc80b3","date":"2019-02-13 08:26:23 -0800","message":"client: artifact errors are retry-able","refs":[],"body":"0.9.0beta2 contains a regression where artifact download errors would\nnot cause a task restart and instead immediately fail the task.\n\nThis restores the pre-0.9 behavior of retrying all artifact errors and\nadds missing tests.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"274a3485b2538ac70b066d1d6dba3ced51d86ebd","date":"2019-02-19 15:12:28 +0100","message":"docker: Respawn docker logger during recovery","refs":[],"body":"Sometimes the nomad docker_logger may be killed by a service manager\nwhen restarting the client for upgrades or reliability reasons.\n\nCurrently if this happens, we leak the users container and try to\nreschedule over it.\n\nThis commit adds a new step to the recovery process that will spawn a\nnew docker logger process that will fetch logs from _the current\ntimestamp_. This is to avoid restarting users tasks because our logging\nsidecar has failed.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"bc96455b1381580070bd5114ad74b98834086d28","date":"2019-02-19 17:23:23 +0100","message":"Update drivers/docker/docklog/docker_logger.go","refs":[],"body":"Co-Authored-By: dantoml <dani@tomlinson.io>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"2b54e2e0a9e3570270e116bb1fbbf502b527bd42","date":"2019-02-20 17:16:05 +0100","message":"Merge pull request #5335 from hashicorp/dani/docker-logger-spawn","refs":[],"body":"Increase resiliency of docker driver logging","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"1acd4ca744895627f05511abe7edbdc4a8e2c03b","date":"2019-02-20 08:41:51 -0800","message":"client: don't redownload completed artifacts on retries","refs":[],"body":"Track the download status of each artifact independently so that if only\none of many artifacts fails to download, completed artifacts aren't\ndownloaded again.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"df57099e6f819cb959b955f23561ecea165f3652","date":"2019-02-18 12:22:30 +0100","message":"docker: Avoid leaking containers during Reattach","refs":[],"body":"Currently if a docker_logger cannot be reattached to, we will leak the\ncontainer that was being used. This is problematic if e.g using static\nports as it means you can never recover your task, or if a service is\nexpensive to run and will then be running without supervision.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"159266ccec29663db448d18c836baabc70e76c3b","date":"2019-02-19 09:26:19 -0800","message":"tests: port TestAllocRunner_Destroy from 0.8","refs":[],"body":"Also add destroy(ar) helper to fix a bunch of shutdown races in AR\ntests.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6257f0d50740301a09d440fb56e172c5f62ba21e","date":"2019-02-20 13:07:51 -0800","message":"Merge pull request #5336 from hashicorp/test-ar-destroy","refs":[],"body":"tests: port TestAllocRunner_Destroy from 0.8","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"92a3cecd04bac17414812c4a80a4eaa35bd1972c","date":"2019-02-20 22:53:06 +0100","message":"Merge pull request #5332 from hashicorp/dani/docker_logger_container_leak","refs":[],"body":"docker: Avoid leaking containers during Reattach","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"edff2b48f739fd6b597b0a9bb3531f9a4dbafd33","date":"2019-02-20 16:07:11 -0800","message":"Set NextEval when making `failed-follow-up` evals","refs":[],"body":"This allows users to locate failed-follow-up evals more easily\n","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"26cb9b371310d3681650768d80b633c7f7e44e41","date":"2019-02-21 09:47:18 -0800","message":"docs: clarify use of toJSON for passwords","refs":[],"body":"Fixes #5347\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"55ee03a2adadef0668f103f2855134ccf49e0138","date":"2019-02-21 13:17:33 -0500","message":"Merge pull request #5341 from hashicorp/ci-windows-docker","refs":[],"body":"Run Docker tests in Windows AppVeyor CI","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"fb85d1155dd617cb8659884274e698f49753e57b","date":"2019-02-21 12:41:54 -0600","message":"Move logger initialization to earlier step","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"2bc31722e834627373958a055733ee1d9a8ea933","date":"2019-02-21 14:36:28 -0800","message":"Merge pull request #5348 from hashicorp/docs-env-json","refs":[],"body":"docs: clarify use of toJSON for passwords","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"cc328c73bfc2288fb57eb4cc682f7ee40e037c53","date":"2019-02-21 17:40:22 -0500","message":"reformat lxc guide (#5339)","refs":[],"body":"* reformat lxc guide\r\n\r\n* reformat lxc guide\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"234f644b35e4cda773aa978132944233addb1348","date":"2019-02-21 15:28:51 -0800","message":"Merge pull request #5322 from hashicorp/b-artifact-retries","refs":[],"body":"Fix regression by restarting on artifact download errors","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"d4a17ae71fdd284d02ac9a665314e195a93762b9","date":"2019-02-13 14:51:05 -0800","message":"test: port TestTaskRunner_DriverNetwork from 0.8","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"414532adab23aa84a20f3fee8c46c256ac767d27","date":"2019-02-13 15:19:33 -0800","message":"test: port TestTaskRunner_RestartSignalTask_NotRunning from 0.8","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"cf66e25e57e41260305ab9876fd17df56117759f","date":"2019-02-13 15:34:17 -0800","message":"client: restart on recoverable StartTask errors","refs":[],"body":"Fixes restarting on recoverable errors from StartTask.\n\nPorts TestTaskRunner_Run_RecoverableStartError from 0.8 which discovered\nthe bug.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"c9fe5d26b3ac26ca448fb6c491a1da46667dc0ce","date":"2019-02-21 11:55:01 -0800","message":"plugins: squelch context Canceled error logs","refs":[],"body":"As far as I can tell this is the most straightforward and resilient way\nto skip error logging on context cancellation with grpc streams. You\ncannot compare the error against context.Canceled directly as it is of\ntype `*status.statusError`. The next best solution I found was:\n\n```go\nresp, err := stream.Recv()\nif code, ok := err.(interface{ Code() code.Code }); ok {\n\tif code.Code == code.Canceled {\n\t\treturn\n\t}\n}\n```\n\nHowever I think checking ctx.Err() directly makes the code much easier\nto read and is resilient against grpc API changes.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"4119767be84cc1a2ec52cf33b2a57b01bb0a3f60","date":"2019-02-21 11:57:58 -0800","message":"fingerprint: improve initial fingerpint message","refs":[],"body":"The initial fingerprint message is actually fairly useful, so I bumped\nit to Debug and fixed the output formatting.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"55cbbded6cab2bddeecbd9be65551b72e60e50d2","date":"2019-02-21 12:02:41 -0800","message":"logmon: fix reattach configuration","refs":[],"body":"There were multiple bugs here:\n\n1. Reattach unmarshalling always returned an error because you can't\n   unmarshal into a nil pointer.\n2. The hook data wasn't being saved because it was put on the request\n   struct, not the response struct.\n3. The plugin configuration should only have reattach *or* a command\n   set. Not both.\n4. Setting Done=true meant the hook was never re-run on agent restart so\n   reattaching was never attempted.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6624d3667b02186831b7f64a0689bf2f0f9e00f0","date":"2019-02-22 13:22:02 +0100","message":"docker: Support stats on Windows","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"fb06c8ebae4f638dbd5aca1bbd132535a0891f79","date":"2019-02-22 07:06:01 -0800","message":"Merge pull request #5325 from hashicorp/test-port-08-2","refs":[],"body":"Do not wrap errors from StartTask as that loses Recoverable","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"3d442f94ae2ec18b7481405337eb8f88a22f8d5f","date":"2019-02-22 10:22:52 -0800","message":"Added comments","refs":[],"body":"* caller should created eval id\n* prev/next eval used in failed-follow-up\n","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"0fec6e73f1efb76117c1a49d84b302c26ed688e7","date":"2019-02-22 10:49:05 -0800","message":"Created .github; Added CoC","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"b1daa69fae79fc1f83610a90e1adca469029f98d","date":"2019-02-22 13:40:13 -0600","message":"fix import order","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"43aa7b138b4900a8726369520e22a9ddcefc5988","date":"2019-02-22 13:40:56 -0600","message":"Merge pull request #5350 from hashicorp/b-json-logging-meta","refs":[],"body":"Support json logging for CLI output for agent ","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"69906bade4b00ab6d66536223c917fee79182e8a","date":"2019-02-21 13:16:04 -0500","message":"tests: port TestAllocRunner_MoveAllocDir test","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4c30b03879f512b4258fc8e618991736dc36f101","date":"2019-02-21 13:37:59 -0500","message":"tests: port TestAllocRunner_RetryArtifact","refs":[],"body":"Port TestAllocRunner_RetryArtifact from https://github.com/hashicorp/nomad/blob/v0.8.7/client/alloc_runner_test.go#L610-L672\n\nI changed the test name because it doesn't actually test that artifact\nhooks is retried\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"90ca1ab5a36cd7c00d8890fb8a4a77e52780ec49","date":"2019-02-21 22:02:50 -0500","message":"tests: port TestTaskRunner_Template_Artifact","refs":[],"body":"From https://github.com/hashicorp/nomad/blob/v0.8.7/client/task_runner_test.go#L1195\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d6a5a1c5a55892c089dfc76ed2a6c7f02787ad93","date":"2019-02-21 22:23:50 -0500","message":"tests: port TestTaskRunner_Template_NewVaultToken","refs":[],"body":"From https://github.com/hashicorp/nomad/blob/v0.8.7/client/task_runner_test.go#L1275\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ce04bb744029710c9609c8b1929af306dba60518","date":"2019-02-21 22:41:41 -0500","message":"tests: port TestTaskRunner_UnregisterConsul_Retries","refs":[],"body":"From https://github.com/hashicorp/nomad/blob/v0.8.7/client/task_runner_test.go#L620\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b8c74ff6ca1709929efdf5e2fb44f54ea8048aff","date":"2019-02-22 09:20:57 -0500","message":"tests: port TestTaskRunner_VaultManager_Restart","refs":[],"body":"From https://github.com/hashicorp/nomad/blob/v0.8.7/client/task_runner_test.go#L1352\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d80774fde0d2c77f1a922a766b085f0df914f942","date":"2019-02-22 09:31:02 -0500","message":"tests: port TestTaskRunner_VaultManager_Signal","refs":[],"body":"From https://github.com/hashicorp/nomad/blob/v0.8.7/client/task_runner_test.go#L1427\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8b7f66499fced5522345b3df90b9bdad01115d9b","date":"2019-02-22 14:35:21 -0500","message":"address review comments","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e1e505393640363e4ca98459fb0ac6d11c5f0d67","date":"2019-02-22 14:45:17 -0500","message":"emit TaskRestartSignal event on vault restart","refs":[],"body":"When Vault token expires and task is restarted, emit `TaskRestartSignal`\nsimilar to v0.8.7\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e90d4ebaa3ed04100ad10dd790868871c7d20140","date":"2019-02-22 14:14:41 -0800","message":"Merge pull request #5344 from hashicorp/b-nexteval-for-failed-follow-up","refs":[],"body":"Set NextEval when making `failed-follow-up` evals","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"74c270d89a193ac6695e1116d4e25c681322cc98","date":"2019-02-22 14:15:26 -0800","message":"Merge pull request #5357 from hashicorp/doc-add-coc","refs":[],"body":"Created .github; Added CoC","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"eecae582c20d0fb206a25910c5bffe9004ad6de0","date":"2019-02-22 18:23:50 -0500","message":"Merge pull request #5349 from hashicorp/port-tests-20190221","refs":["origin/t-test-20190223"],"body":"Port some 0.8.7 alloc runner tests","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ad58ba3e18f6ce0f77b3c5c888ed8b6c2f99dfe7","date":"2019-02-22 17:58:06 -0600","message":"More alloc runner tests ported from 0.8.7","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"cf98f8f70ad586686c54b4c904800bd7ac788396","date":"2019-02-23 15:36:48 -0800","message":"client: test logmon_hook","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6c774e7b46e48179cbe0c84929a956751cadc66a","date":"2019-02-25 11:02:42 +0100","message":"docker: Return undetected before first detection","refs":[],"body":"This commit causes the docker driver to return undetected before it\nfirst establishes a connection to the docker daemon.\n\nThis fixes a bug where hosts without docker installed would return as\nunhealthy, rather than undetected.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"d3c7e4d0787255d19ecc1aba6bab29a52582cc31","date":"2019-02-25 15:17:15 +0100","message":"Merge pull request #5362 from hashicorp/dani/f-fingerprint-undetected","refs":[],"body":"docker: Return undetected before first detection","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"92cd321e49023d6f222229ada24dbe7c63de2955","date":"2019-02-25 13:32:12 -0600","message":"Merge pull request #5358 from hashicorp/ar-tests","refs":[],"body":"More alloc runner tests ported from 0.8.7","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"05bae8d1492b96523a6ee4da49df03d7f5e41cb2","date":"2019-02-25 15:42:45 -0800","message":"client: restart task on logmon failures","refs":[],"body":"This code chooses to be conservative as opposed to optimal: when failing\nto reattach to logmon simply return a recoverable error instead of\nimmediately trying to restart logmon.\n\nThe recoverable error will cause the task's restart policy to be\napplied and a new logmon will be launched upon restart.\n\nTrying to do the optimal approach of simply starting a new logmon\nrequires error string comparison and should be tested against a task\nactively logging to assert the behavior (are writes blocked? dropped?).\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"2657bf02c0941e4af0d72d27d4141e5b094c15ff","date":"2019-02-26 16:39:48 +0100","message":"Merge pull request #5355 from hashicorp/dani/windows-dockerstats","refs":[],"body":"docker: Support Stats on Windows","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"8eb1c6fa292353a4b54231a21a43f9f1ec7abdaf","date":"2019-02-26 10:54:16 -0500","message":"tests: port some fingerprint tests from 0.8 (#5359)","refs":[],"body":"Port some integration tests of driver fingerprinting.\r\n\r\nSome tests (e.g. `TestFingerprintManager_Run_DriversInBlacklist`) have\r\nbeen subsituted by more isolated tests in\r\n`client/pluginmanager/drivermanager/manager_test.go`","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"432be05682866f3da654dd9259ce712f3378fda2","date":"2019-02-26 07:56:45 -0800","message":"tests: move unix-specific test to its own file","refs":[],"body":"Other logmon tests should be portable.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"2f1def03751044e71bf9d81437785a65a69ebd81","date":"2019-02-26 17:23:32 +0100","message":"Update changelog for new beta 3 enhancements","refs":[],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"d5a14d56064a349002c049a54327d8da722797cd","date":"2019-02-26 08:35:46 -0800","message":"Merge pull request #5352 from hashicorp/b-leaked-logmon","refs":[],"body":"logmon fixes","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"b849d84f2fc8b47c5f5b0e387bff4fa09c3bca6e","date":"2019-02-26 09:44:49 -0800","message":"Generate files for 0.9.0-beta3 release","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"2f55f78b21a5e55ab122f2c1e1ed1ec21fde9566","date":"2019-02-26 10:11:30 -0800","message":"Fix version.go for 0.9.0-beta3 release","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"4d34c838bb9c0a66d577560300cb899ac1b432ba","date":"2019-02-26 10:22:46 -0800","message":"Release v0.9.0-beta3","refs":["tag: v0.9.0-beta3"],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com","tag":"v0.9.0-beta3"},{"hash":"8ea6718ceb6982bf2b6eefa8b0400df8a9ed597f","date":"2019-02-26 10:34:08 -0800","message":"Remove generated files for 0.9.0-beta3","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f95749f1cacad532f97875ea2e68e3315e5872ae","date":"2019-02-27 08:10:23 -0500","message":"docker: report unhealthy in unsupported Windows (#5356)","refs":[],"body":"On Windows, Nomad only supports Windows containers, so report as\r\nunhealthy otherwise.\r\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"863c34aba7f6381f98b3518cbed5b10404dfbc53","date":"2019-02-27 08:21:21 -0500","message":"tests: disable upgrade e2e tests","refs":[],"body":"Upgrade e2e tests are failing and we haven't had bandwith to fix yet.\nHaving them fail makes it easy for us to miss other failures and\nregressions.\n\nAs such, skip the upgrade e2e tests until we fix them.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"1d22a0b3093dd6289c2f61d983f35676dccbda4d","date":"2019-02-27 09:49:36 -0500","message":"docs: Update beta release link to 0.9.0-beta3 (#5365)","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"1d9c7b53f80ee0ead98825771f534b445131f4e9","date":"2019-02-28 11:35:57 -0500","message":"make root block device size configurable (#5368)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"982e73f54554a453a1ed4c570c1e5f41b787236c","date":"2019-02-28 13:00:25 -0500","message":"update formatting and add toJSON function with explanation (#5366)","refs":[],"body":"* update formatting and add toJSON function with explanation\r\n\r\n* edit typo\r\n\r\n* Update website/source/guides/operations/vault-integration/index.html.md\r\n\r\nCo-Authored-By: Omar-Khawaja <Omar-Khawaja@users.noreply.github.com>\r\n\r\n* fixing clarification bullet explaining the use of toJSON\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"9467604d2344aa10d96821f194ab660261d89037","date":"2019-02-28 10:58:07 -0800","message":"Backward compat note about task config validation","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"737ea19b90f89a7d7bbaadb2bb3bb394f6b2bb46","date":"2019-02-28 14:02:27 -0500","message":"Merge pull request #5364 from hashicorp/disable-failing-e2e-tests","refs":[],"body":"tests: disable upgrade e2e tests","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"314d7a0f41bb223dbcd9b45bbc2de26344b62f6e","date":"2019-02-28 15:25:17 -0500","message":"drivers/docker: rename logging `type` to `driver`","refs":[],"body":"Docker uses the term logging `driver` in its public documentations: in\n`docker` daemon config[1], `docker run` arguments [2] and in docker compose file[3].\nInterestingly, docker used `type` in its API [4] instead of everywhere\nelse.\n\nIt's unfortunate that Nomad used `type` modeling after the Docker API\nrather than the user facing documents.  Nomad using `type` feels very\nnon-user friendly as it's disconnected from how Docker markets the flag\nand shows internal representation instead.\n\nHere, we rectify the situation by introducing `driver` field and\nprefering it over `type` in logging.\n\n[1] https://docs.docker.com/config/containers/logging/configure/\n[2] https://docs.docker.com/engine/reference/run/#logging-drivers---log-driver\n[3] https://docs.docker.com/compose/compose-file/#logging\n[4] https://docs.docker.com/engine/api/v1.39/#operation/ContainerCreate\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"011315ba4c228451a2089a82dd240d7389b36f92","date":"2019-02-28 16:40:18 -0500","message":"logging.Type over logging.Driver","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2d25f24d996de3a6b7abf2a86faa9507a6076c58","date":"2019-02-28 21:48:01 +0000","message":"artifact docs: modified the leading example and removed a treacherous (but potentially correct) example","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"82d37b99dff98ce65449c1893e0fb35e1310d6a1","date":"2019-02-28 14:10:24 -0800","message":"Merge pull request #5372 from hashicorp/f-docker-logging-driver","refs":[],"body":"drivers/docker: rename logging `type` to `driver`","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"ed793b4e443b84f6f95b223a3bfcb49c353d811f","date":"2019-03-01 13:30:19 +0100","message":"chore: Setup probot/stale","refs":["origin/dani/stale-issues"],"body":"","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"7cf58d08c1b2a78708737b8274895ce077c8a2a1","date":"2019-03-02 00:33:17 +0300","message":"drivers/shared/executor: fix strings.Replace call","refs":[],"body":"strings.Replace call with n=0 argument makes no sense\r\nas it will do nothing. Probably -1 is intended.\r\n\r\nSigned-off-by: Iskander Sharipov <quasilyte@gmail.com>","author_name":"Iskander (Alex) Sharipov","author_email":"quasilyte@gmail.com"},{"hash":"db9daf663198e439c0bda328cb34159a38de59e9","date":"2019-02-21 15:37:22 -0800","message":"client: ensure task is cleaned up when terminal","refs":[],"body":"This commit is a significant change. TR.Run is now always executed, even\nfor terminal allocations. This was changed to allow TR.Run to cleanup\n(run stop hooks) if a handle was recovered.\n\nThis is intended to handle the case of Nomad receiving a\nDesiredStatus=Stop allocation update, persisting it, but crashing before\nstopping AR/TR.\n\nThe commit also renames task runner hook data as it was very easy to\naccidently set state on Requests instead of Responses using the old\nfield names.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"3fc57654018a2999e1b4afab0a2729449ec82c82","date":"2019-03-01 15:23:39 -0800","message":"nomad: compare current eval when setting WaitIndex","refs":[],"body":"Consider currently dequeued Evaluation's ModifyIndex when determining\nits WaitIndex. Normally the Evaluation itself would already be in the\nstate store snapshot used to determine the WaitIndex. However, since the FSM\napplies Raft messages to the state store concurrently with Dequeueing,\nit's possible the currently dequeued Evaluation won't yet exist in the\nstate store snapshot used by JobsForEval.\n\nThis can be solved by always considering the current eval's modify index\nand using it if it is greater than all of the evals returned by the\nstate store.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"42edf2d2133dd58ecb8c1f2a85cddee26e8a1b96","date":"2019-03-04 09:04:53 -0500","message":"website: add plugin docs","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"8a24660941e9d10ac273580392ce9ae2429a59d5","date":"2019-03-04 12:25:54 -0600","message":"s/mananger/manager","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"d8323724ef865ea0c26c3907a2da084478faae2f","date":"2019-03-04 13:29:18 -0600","message":"Merge pull request #5384 from hashicorp/b-fix-typo","refs":[],"body":"s/mananger/manager/g","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"8d409a6e39ea276640513f8ebf37ec50e842c260","date":"2019-03-01 15:02:53 -0800","message":"client: test logmon cleanup","refs":[],"body":"The test is sadly quite complicated and peeks into things (logmon's\nreattach config) AR doesn't normally have access to.\n\nHowever, I couldn't find another way of asserting logmon got cleaned up\nwithout resorting to smaller unit tests. Smaller unit tests risk\nre-implementing dependencies in an unrealistic way, so I opted for an\nugly integration test.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"54177ad672472079e60e732ce9c99d9debf700a8","date":"2019-03-04 13:26:01 -0800","message":"logmon: drop reattach log level as its expected","refs":[],"body":"Logged once per terminal task on agent restart.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b5b2718e143bb7dfc3dee8b0887dcf77a1fa86c4","date":"2019-03-04 13:37:20 -0800","message":"test: fix NewMemDB API change","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b47b1f1cda12892bcf655e61d6e96e9522bf0552","date":"2019-03-04 13:44:14 -0800","message":"nomad: simplify code and improve parameter name","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"8499bbdfa98ec827cf92f96ca2a2630531900dff","date":"2019-03-04 14:00:59 -0800","message":"Update CHANGELOG.md","refs":[],"body":"Co-Authored-By: schmichael <michael.schurter@gmail.com>","author_name":"Danielle Tomlinson","author_email":"dani@tomlinson.io"},{"hash":"e2b3d86e8a762648c66c23d4701a467fb69e2479","date":"2019-03-05 12:38:36 -0800","message":"Add missing period to sentence.","refs":["origin/yishan-fix-typo-1"],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"7970b224b07f222e14bd4d88bfd4dbd4fd4821ca","date":"2019-03-05 15:12:02 -0800","message":"client: emit event and call exited hooks during cleanup","refs":[],"body":"Builds upon earlier commit that cleans up restored handles of terminal\nallocs by also emitting terminated events and calling exited hooks when\nappropriate.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"3d8683b0db338a3fcd25d12325acf8c16fdabf01","date":"2019-03-05 15:19:07 -0800","message":"Update nomad/eval_endpoint.go","refs":[],"body":"Co-Authored-By: schmichael <michael.schurter@gmail.com>","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"6c8839a859036904b32c5b9886ac24c743d63199","date":"2019-03-05 15:19:15 -0800","message":"Update nomad/eval_endpoint_test.go","refs":[],"body":"Co-Authored-By: schmichael <michael.schurter@gmail.com>","author_name":"Alex Dadgar","author_email":"alex@hashicorp.com"},{"hash":"32623ce3eed1783017fd4852ec9ba02736ace1cd","date":"2019-03-05 21:47:06 -0500","message":"Support driver config fields being set to nil (#5391)","refs":[],"body":"To pick up https://github.com/hashicorp/hcl2/pull/90\r\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"8cf8f7d3c7850b7da0ec42243bf8a5b09628bb8a","date":"2019-03-06 09:13:40 -0600","message":"Merge pull request #5392 from hashicorp/yishan-fix-typo-1","refs":[],"body":"Add missing period to sentence.","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"d75cf587ef57818f41c472da57a8a9183fe2f905","date":"2019-03-06 11:07:54 -0500","message":"Tweaked deprecation wording for legacy config (#5394)","refs":[],"body":"Made small adjustment to make it clear that 0.8.7 would require the legacy syntax and that the deprecation notice was more about the legacy syntax becoming unsupported at some point after v0.9.0\r\n\r\n","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"76d2eeea4e681e042ae7ee45b46c68a6614158d9","date":"2019-03-06 09:22:46 -0800","message":"Merge pull request #5381 from hashicorp/b-max-eval-wait-index","refs":[],"body":"nomad: compare current eval when setting WaitIndex","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"76ac2b3bb9e69057536db6cd317ba7d2741feb4f","date":"2019-03-06 11:47:01 -0600","message":"Merge pull request #5380 from quasilyte/patch-1","refs":[],"body":"drivers/shared/executor: fix strings.Replace call","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"27d5d3ea64e73ea2e13f12355638d69d7b53fcf4","date":"2019-03-06 23:29:24 +0100","message":"5303 make logs view full width to better support large screens","refs":[],"body":"","author_name":"Jacek Jagiello","author_email":"jacekjagiello47@gmail.com"},{"hash":"1edb20fd5ce71f0e0cab5d915aa60078de76e497","date":"2019-03-06 19:53:51 -0500","message":"Note rkt driver needs Nomad client run as root","refs":[],"body":"The rkt driver requires that the Nomad agent to be running as the root user","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"9410768aa7e3dcad9f06b4ded378e99bbb94504f","date":"2019-03-06 20:24:01 -0500","message":"fix typo","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3fedff63c6d3b9d4cca43e712a5fa4e59901ffd3","date":"2019-03-07 10:58:58 -0800","message":"Merge pull request #5400 from jacekjagiello/5303/logs-view-wdiescreen-support","refs":[],"body":"Logs view - support widescreen format","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4bbfc991027bcecef0b3592a34852b5e47f8cb83","date":"2019-03-08 07:56:35 -0500","message":"use -dev tag until next release","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"086677b0dfba52028e861fce79aa498000615bda","date":"2019-03-08 07:57:37 -0500","message":"run TestAllocations_Stats in CI","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5c32cd4dca0946ff04106050786f59a570b80fb0","date":"2019-03-08 11:56:02 -0600","message":"prometheus and fabio for metrics","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"3d02d94b8e73d3f50bdaa75e130062084819ee48","date":"2019-03-10 23:50:21 -0500","message":"Removed use of e2e framework","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e7bd312580f15b3864dfa9e0040f8677456ae87a","date":"2019-03-11 10:29:45 -0400","message":"Merge pull request #5401 from hashicorp/doc-rkt-needs-root","refs":[],"body":"Note rkt driver needs Nomad client run as root","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"783c49b34b5cd7aabae31ea3c1fd0372972c742f","date":"2019-03-11 14:09:28 -0400","message":"Merge pull request #5373 from hashicorp/docs-artifact-stanza","refs":[],"body":"artifact stanza documentation","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"caf87fdf593c2119e76e46a2e24792cc27d26925","date":"2019-03-11 21:57:21 -0400","message":"fix possible panic in libcontainer shim init","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"bfff8d8e253d916ed8bc72b5d7ac3a4dedac738a","date":"2019-03-12 14:33:05 -0700","message":"Merge pull request #5371 from hashicorp/docs-backincompat","refs":[],"body":"Backward compat note about task config validation","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"e9e1d788b58b464bbd25437c742f2b1b0e2b1d4f","date":"2019-03-12 15:03:54 -0700","message":"client: cleanup and document context uses","refs":[],"body":"Some of the context uses in TR hooks are useless (Killed during Stop\nnever seems meaningful).\n\nNone of the hooks are interruptable for graceful shutdown which is\nunfortunate and probably needs fixing.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"4bacdcd403043d42d554051deed5aa82871912ef","date":"2019-03-12 15:23:02 -0700","message":"Merge pull request #5386 from hashicorp/b-logmon-stop","refs":[],"body":"Fix task/logmon leak after crash","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"1323b4d5cccbe2ea5031559e158c08fb329e2b2c","date":"2019-03-12 23:36:46 -0500","message":"Fix bug where scoring metadata would be overridden during an inplace upgrade.","refs":["origin/b-alloc-metrics"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1893f10bb6b19514724c96f83d156082ef97cc75","date":"2019-03-13 11:08:56 -0500","message":"Dont require email address for docker auth","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"d1ca05c80bec61a3f1f453f4b70615746b164a24","date":"2019-03-13 11:47:37 -0500","message":"Validate all auth fields being empty rather than just email","refs":[],"body":"This fixes a regression in 0.9 beta3 compared to 0.8.7 in validating\ndocker auth config\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e8284caae830908044aa16e63efff50fa48453b2","date":"2019-03-13 13:27:28 -0500","message":"minor review feedback","refs":["origin/b-docker-email"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"5ccec41e31b8f9f27813294c1a85363457cf8cd1","date":"2019-03-13 13:28:34 -0500","message":"Merge pull request #5416 from hashicorp/b-docker-email","refs":[],"body":"Fix regression with requiring docker auth email","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"2ca62296256e4025304310a3c20864c6750da0b4","date":"2019-03-13 13:29:04 -0500","message":"Merge pull request #5413 from hashicorp/b-alloc-metrics","refs":[],"body":"Fix bug with score metadata overridden during inplace upgrades","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"31bad0ffb754afb8f8dd1c99f03f4322d6ae04b4","date":"2019-03-13 19:21:59 -0700","message":"Fix freebsd vagrant priv config for vim-tiny","refs":[],"body":"","author_name":"Robert James Hernandez","author_email":"rob@sarcasticadmin.com"},{"hash":"c22facf3a5ee74f4afa71132d37a8dbcb51c91fc","date":"2019-03-13 20:58:25 -0700","message":"Set shell to sh and networking to host dhcp","refs":[],"body":"Set shell to sh which is present by default on freebsd. Also set\nnetworking to host dhcp due to limitations with NFS sharing:\nhttps://github.com/hashicorp/vagrant/issues/9063\n","author_name":"Robert James Hernandez","author_email":"rob@sarcasticadmin.com"},{"hash":"eb5ab38ae576d765579a9cd5ee5f6ab55d14b5f9","date":"2019-03-14 10:56:27 -0400","message":"Regenerate Proto files (#5421)","refs":[],"body":"Noticed that the protobuf files are out of sync with ones generated by 1.2.0 protoc go plugin.\r\n\r\nThe cause for these files seem to be related to release processes, e.g. [0.9.0-beta1 preperation](https://github.com/hashicorp/nomad/commit/ecec3d38de6ca72eea68d9737d7199cf67bbfe3e#diff-da4da188ee496377d456025c2eab4e87), and [0.9.0-beta3 preperation](https://github.com/hashicorp/nomad/commit/b849d84f2fc8b47c5f5b0e387bff4fa09c3bca6e).\r\n\r\nThis restores the changes to that of the pinned protoc version and fails build if protobuf files are out of sync.  Sample failing Travis job is that of the first commit change: https://travis-ci.org/hashicorp/nomad/jobs/506285085","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"2b3d324a7f475a093ab8a9f14855db74bd033d8d","date":"2019-03-14 16:23:11 -0400","message":"Handle when cannot fetch docker logs (#5420)","refs":[],"body":"Fix #5418\r\n\r\nWhen using a docker logger that doesn't support log streaming through\r\nAPI, currently docker logger runs a tight loop of Docker API calls\r\nunexpectedly. This change ensures we stop fetching logs early.\r\n\r\nAlso, this adds some basic backoff strategy when Docker API logging\r\nfails unexpectedly, to avoid accidentally DoSing the docker daemon.","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"20a16348fe1e98c0dbb09486de6190a510c947e4","date":"2019-03-14 18:36:30 -0700","message":"Update vagrant box to freebsd 11.2 STABLE","refs":[],"body":"Freebsd 11.1 went EOL 9/30/18:\nhttps://lists.freebsd.org/pipermail/freebsd-announce/2018-September/001842.html\n\nWas seeing a failure with shared object \"libdl.so.1\" not found which\nis required for bash\n","author_name":"Robert James Hernandez","author_email":"rob@sarcasticadmin.com"},{"hash":"a1b9b322108b76f6d8e15d65bd3d7740bbf6f8a4","date":"2019-03-15 11:33:46 -0400","message":"Portworx guide (#5399)","refs":[],"body":"* skeleton\r\n\r\n* configure portworx\r\n\r\n* destroy and redeploy mysql with data intact\r\n\r\n* rename all directories and references from persistent storage to stateful workloads\r\n\r\n* add considerations and remove references to StorageOS\r\n\r\n* update wording and headings\r\n\r\n* create portworx volume externally and modify jobfile to reflect that\r\n\r\n* fix typo\r\n\r\n* Update website/source/guides/stateful-workloads/portworx.html.md\r\n\r\nCo-Authored-By: Omar-Khawaja <Omar-Khawaja@users.noreply.github.com>\r\n\r\n* Update website/source/guides/stateful-workloads/portworx.html.md\r\n\r\nCo-Authored-By: Omar-Khawaja <Omar-Khawaja@users.noreply.github.com>\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"5aba4f1a723bd5ef3d1bc8cd49af9478ef39c981","date":"2019-03-15 15:29:57 -0400","message":"Merge pull request #5415 from hashicorp/b-fix-libcontainer-panic","refs":[],"body":"fix possible panic in libcontainer shim init","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"24eaa4b9f95f967276066c39528cfd173b92b37f","date":"2019-03-15 15:55:34 -0400","message":"AWS env update (#5423)","refs":[],"body":"* update versions of all products and add consul-template\r\n\r\n* update client and server user_data scripts\r\n\r\n* modify README.md and terraform.tfvars\r\n\r\n* fix typo in consul-template system unit file\r\n\r\n* update AMI id\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"c2c984ea508acd12c5e910c80ef2a16a14f8201c","date":"2019-03-15 23:50:17 -0400","message":"executor: block shutdown on process exiting","refs":["origin/b-blocking-executor-shutdown"],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"2b1e977639a26312a3ed3852bae9ad940a268309","date":"2019-03-15 23:59:18 -0400","message":"client/logmon: restart log collection correctly when a task is restarted","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"2678407ea1113cddafeb362517f8d19f5ca05bee","date":"2019-03-16 17:53:53 -0500","message":"server: inconsistent receiver notation corrected","refs":[],"body":"Signed-off-by: HashedDan <georgedanielmangum@gmail.com>\n","author_name":"HashedDan","author_email":"georgedanielmangum@gmail.com"},{"hash":"27924bccc4398746df12ca1652a46e91b7920473","date":"2019-03-16 21:00:03 -0400","message":"Merge pull request #5425 from sarcasticadmin/sa/freebsd-vagrant-fix","refs":[],"body":"Freebsd vagrant fixes","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"d5d6477c87f570543015d2b3981c469662b7a403","date":"2019-03-14 07:45:49 -0400","message":"Add a Docker release scripts","refs":[],"body":"Also tease out some dev and docker bits from Vagrant scripts to ease\nsharing with Docker script\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"989175fc59371aebc2c63bcc2daf0adb69c105cb","date":"2019-03-17 11:56:58 -0400","message":"executor: synchronize exitState accesses","refs":[],"body":"exitState is set in `wait()` goroutine but accessed in a different\n`Wait()` goroutine, so accesses must be synchronized by a lock.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f2760b55c4152daf559ce2355b9869cda937c175","date":"2019-03-15 11:02:52 -0400","message":"remove chown","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bf48fe2403ecbdf512c4196700af8a63b548c9e7","date":"2019-03-15 09:55:13 -0400","message":"initial attempt at building mac","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"60b045b13f94514acaba34209abe12949892f48f","date":"2019-03-16 10:39:24 -0400","message":"handle when no files are generated","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"38aa059e4377d09eb29942e4e469f83fc26952e3","date":"2019-03-18 08:45:25 -0400","message":"scripts: only shellcheck shell scripts","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b3bedeb3300e9dad455b942b18858b87e734df35","date":"2019-03-18 13:50:16 -0400","message":"Merge pull request #5433 from hashicorp/b-exit-state-lock","refs":[],"body":"executor: synchronize exitState accesses","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"31e89623dfdd8a00414741e47b80b7c19ad66d77","date":"2019-03-18 14:31:31 -0400","message":"ensure node is present in PATH","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"55dea4faaa415f34a5c4372c633619db0051c789","date":"2019-03-18 14:34:09 -0400","message":"use bash set long form","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f3a186cef5436079d96217dd415eb583ae763c6a","date":"2019-03-18 15:05:32 -0400","message":"accept macos host as a env-var with a default","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a28a67d26309eeeefa4f3162aa499b24c1f57d41","date":"2019-03-18 15:59:43 -0400","message":"logmon:add static check for logmon exited hook","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"855761a5dff9b447152e8ea75a410aafa46e66dc","date":"2019-03-18 13:38:00 -0700","message":"vagrant: upgrade to Go 1.11.6","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"d37ed5c193ac8237666b92bd3f3b0b7e0a8ebfd5","date":"2019-03-19 08:20:13 -0700","message":"Merge pull request #5436 from hashicorp/f-vagrant-go1.11.6","refs":[],"body":"vagrant: upgrade to Go 1.11.6","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"c62f9a0f583060ed932f3c06b4930dce45fc91b4","date":"2019-03-19 14:02:36 -0400","message":"logmon: make Start rpc idempotent and simplify hook","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"76c9decfe67dafcbb7d694f0a170160cf1641fa6","date":"2019-03-19 14:41:23 -0400","message":"logmon: add tests for rotation and open/closing of fifos","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"d9d90fa5f0bad110238ff140749041d857345faf","date":"2019-03-19 15:18:01 -0400","message":"Merge pull request #5429 from hashicorp/b-blocking-executor-shutdown","refs":[],"body":"executor: block shutdown on process exiting","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"475bcaafd6a50c6164338f00391d915349ec11f9","date":"2019-03-19 15:18:12 -0700","message":"docs: sync systemd unit files; update deploy guide","refs":[],"body":"The systemd configs spread across our repo were fairly out of sync. This\nshould get them on our best practices.\n\nThe deployment guide also had some strange things like running Nomad as\na non-root user. It would be fine for servers but completely breaks\nclients. For simplicity I simply removed the non-root user references.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"5ad4c10a58eeb42b358bcd5544a561d29aba4e66","date":"2019-03-19 21:18:27 -0400","message":"Add some release script comments","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a8c255665dc45ed02ae7d58b2fd0187eb5edf541","date":"2019-03-19 21:18:44 -0400","message":"release: Upgrade to use 1.11.6 golang on macOS","refs":[],"body":"To correspond to the Linux scripts in 855761a5dff9b447152e8ea75a410aafa46e66dc\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c28b59267cccfd937ee16e833ab80ed7d555134c","date":"2019-03-20 07:26:10 -0400","message":"Merge pull request #5435 from hashicorp/release-scripts-20190318","refs":[],"body":"Scripts for automating binary building","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"a0d025e90de125b9b230374c2553c07790d427f9","date":"2019-03-20 07:33:05 -0400","message":"Revert \"executor: synchronize exitState accesses\" (#5449)","refs":[],"body":"Reverts hashicorp/nomad#5433\r\n\r\nApparently, channel communications can constitute Happens-Before even for proximate variables, so this syncing isn't necessary.\r\n\r\n> _The closing of a channel happens before a receive that returns a zero value because the channel is closed._\r\nhttps://golang.org/ref/mem#tmp_7\r\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ba5078f7ca5b3efeeef84fb01e7e44f0e7a51c6e","date":"2019-03-20 08:48:17 -0400","message":"Merge pull request #5430 from HashedDan/server-typo","refs":[],"body":"server: inconsistent receiver notation corrected","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"c8272325810e896503b97297cac47f38bb0568f1","date":"2019-03-20 07:05:05 -0700","message":"docs: add #5381 to changelog","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b4faaa89bb83a0411cf157db7836e63a020dac89","date":"2019-03-20 10:45:09 -0400","message":"logmon: remove sleeps from tests","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"f6d670a0968130726fc745dc1bd02c42d3881758","date":"2019-03-20 07:53:49 -0700","message":"Merge pull request #5450 from hashicorp/docs-changelog","refs":[],"body":"docs: add #5381 to changelog","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"608f17e7c999a4a32a7443d45820de58f7a0de68","date":"2019-03-20 08:08:37 -0700","message":"Don't use \"datacenter\" in a confusing way","refs":[],"body":"Co-Authored-By: schmichael <michael.schurter@gmail.com>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ce959931c532bc6775f39e44a07cdc359cd01929","date":"2019-03-20 11:20:25 -0400","message":"update some changelog items","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b1ce0d8204c49032f288856862c1cca1bfcdd448","date":"2019-03-20 12:17:38 -0400","message":"doc: fix tls_cipher_suites type (#5441)","refs":[],"body":"tls_cipher_suites only accept a comma-separated string, as evident in:\r\n\r\nhttps://github.com/hashicorp/nomad/blob/0535dfd414214efd14183bf23d1447f679b57af8/nomad/structs/config/tls.go#L61\r\nhttps://github.com/hashicorp/nomad/blob/d37ed5c193ac8237666b92bd3f3b0b7e0a8ebfd5/helper/tlsutil/config.go#L405\r\n","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"673a168b7258b4ced3442b6128998e5b9391bc0b","date":"2019-03-20 09:36:29 -0700","message":"docs: remove partial sig/checksum verification","refs":[],"body":"Point users to security doc instead. Right now it takes a lot of\nexplaining to describe to users exactly how to validate the binary and\nwhat the output of the tools used means.\n\nFor example, this is the output when validating according to the\ninstructions in this guide and the linked doc:\n\n```\nvagrant@linux:/tmp$ gpg --verify nomad_0.8.7_SHA256SUMS.sig\nnomad_0.8.7_SHA256SUMS\ngpg: Signature made Fri 11 Jan 2019 09:47:56 PM UTC using RSA key ID\n348FFC4C\ngpg: Good signature from \"HashiCorp Security <security@hashicorp.com>\"\ngpg: WARNING: This key is not certified with a trusted signature!\ngpg:          There is no indication that the signature belongs to the\nowner.\nPrimary key fingerprint: 91A6 E7F8 5D05 C656 30BE  F189 5185 2D87 348F\nFC4C\nvagrant@linux:/tmp$ shasum -a 256 -c nomad_0.8.7_SHA256SUMS\nshasum: ./nomad_0.8.7_darwin_amd64.zip:\n./nomad_0.8.7_darwin_amd64.zip: FAILED open or read\nshasum: ./nomad_0.8.7_linux_386.zip: No such file or directory\n./nomad_0.8.7_linux_386.zip: FAILED open or read\nshasum: ./nomad_0.8.7_linux_amd64-lxc.zip: No such file or directory\n./nomad_0.8.7_linux_amd64-lxc.zip: FAILED open or read\n./nomad_0.8.7_linux_amd64.zip: OK\nshasum: ./nomad_0.8.7_linux_arm64.zip: No such file or directory\n./nomad_0.8.7_linux_arm64.zip: FAILED open or read\nshasum: ./nomad_0.8.7_linux_arm.zip: No such file or directory\n./nomad_0.8.7_linux_arm.zip: FAILED open or read\nshasum: ./nomad_0.8.7_windows_386.zip: No such file or directory\n./nomad_0.8.7_windows_386.zip: FAILED open or read\nshasum: ./nomad_0.8.7_windows_amd64.zip: No such file or directory\n./nomad_0.8.7_windows_amd64.zip: FAILED open or read\nshasum: WARNING: 7 listed files could not be read\n```\n\nThere are only two lines that matter in all of that output:\n\n```\n...\ngpg: Good signature from \"HashiCorp Security <security@hashicorp.com>\"\n...\n./nomad_0.8.7_linux_amd64.zip: OK\n...\n```\n\nI feel like trying to teach users how to use and interpret these tools\nin our deployment guide may be as likely to reduce confidence as\nincrease it.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"74aca9a465d2d1f44d8fa478ca0ca76552eb5c43","date":"2019-03-20 10:40:53 -0700","message":"Merge pull request #5443 from hashicorp/f-systemd-fixes","refs":[],"body":"docs: sync systemd unit files; update deploy guide","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"cc12c8443f0e9952bf38734890d8246fa30be673","date":"2019-03-20 21:14:08 -0400","message":"logmon: fix logmon handling in driver test harness","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"31cdf5421460fdfed56c4f910ec34308bef505a2","date":"2019-03-20 21:37:17 -0400","message":"logmon: fix test assertion","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"91d36f9f6ae85fbf96538910300cd4b0477a2df8","date":"2019-01-25 16:51:20 -0800","message":"e2e: add NomadAgent and basic client state test","refs":[],"body":"The e2e test code is absolutely hideous and leaks processes and files\non disk. NomadAgent seems useful, but the clientstate e2e tests are very\nmessy and slow. The last test \"Corrupt\" is probably the most useful as\nit explicitly corrupts the state file whereas the other tests attempt to\nreproduce steps thought to cause corruption in earlier releases of\nNomad.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"c43515cd14c55d04bb3631944ec1b8cf940caab0","date":"2019-03-21 07:17:02 -0700","message":"test: skip slow state test without flag","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"5021b01b40338da2169e2f9ffc87d03c15bcf30f","date":"2019-03-21 07:18:29 -0700","message":"Merge pull request #5247 from hashicorp/test-state-corruption","refs":[],"body":"Test state corruption","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"a30fbb55ad380b6e54b252433abffcd91319905c","date":"2019-03-21 09:23:37 -0500","message":"remove stray println","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"8ac39a17a9ba7106cd646c808063afe58f08d8f6","date":"2019-03-21 09:30:12 -0500","message":"Merge pull request #5405 from hashicorp/e2e_metrics","refs":[],"body":"Prometheus metrics for the e2e environment","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"df9b877ef493db86479a9726bc12a10687159d16","date":"2019-03-21 13:36:46 -0400","message":"fix TestLogmon_Start_restart","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7299e0015aff98b1b35adb210a9eea8e8a38085e","date":"2019-03-21 14:02:08 -0400","message":"Merge pull request #5428 from hashicorp/b-dropped-logs-on-task-restart","refs":[],"body":"client/logmon: restart log collection correctly when a task is restarted","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"3829fc0ee0d293c43fa27dfbffaacd7cd39d234c","date":"2019-03-21 14:46:35 -0400","message":"allow configurable release target in mac","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8feb07ad9e6261a0d3f0e3987caec0c40d442086","date":"2019-03-21 14:57:03 -0400","message":"release: skip check step when cutting release","refs":[],"body":"`make check` runs very intensive linters that slow and seem to behave\ndifferently on different machines.\n\nLinting is still a part of our CI and we shouldn't be cutting a release\nwhen CI isn't green anyway.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4611b9998ca55af109b2ba6b9e9420b9438461e8","date":"2019-03-21 15:02:09 -0400","message":"release: only install deps when installing","refs":[],"body":"Now `prerelease` no longer requires linters\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7c00ab4f3f37cfd1e258b38fd2ad99e7bc23e4c3","date":"2019-03-21 19:06:13 +0000","message":"Generate files for 0.9.0-rc1 release","refs":[],"body":"","author_name":"Nomad Release bot","author_email":"nomad@hashicorp.com"},{"hash":"8cd191dd39fc695dea172f592d1669ec90f5b0af","date":"2019-03-22 06:42:04 -0700","message":"test: properly skip client state in beforeall","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"8f8a18b4faff4be25780197307046de3f20821fe","date":"2019-03-22 08:14:55 -0700","message":"Release v0.9.0-rc1","refs":["tag: v0.9.0-rc1"],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com","tag":"v0.9.0-rc1"},{"hash":"a77f769f1e56e3582f0814dc7dc95d2f8795eaae","date":"2019-03-22 08:26:30 -0700","message":"Bump to dev post-0.9.0-rc1 release","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"613707b32ceae75fffbb6403bca7afa7fee13830","date":"2019-03-22 10:45:43 -0500","message":"Update release candidate download link on website","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"14151c93b68f495f362ecfc656dc534d5a7e9001","date":"2019-03-22 12:29:13 -0400","message":"Merge pull request #5457 from hashicorp/r-skip-prerelease-check","refs":[],"body":"release: skip check step when cutting release","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"68dc573fafc30dab96262df0c0683721ff3f2170","date":"2019-03-22 17:37:45 -0400","message":"Merge pull request #5460 from hashicorp/test-skip-clientstate","refs":[],"body":"test: properly skip client state in beforeall","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"2dbc06de61d9a143c71936847e77a3ec3c4ceedf","date":"2019-03-21 10:57:23 -0700","message":"tests: port pre-0.9 task env tests","refs":[],"body":"I chose to make them more of integration tests since there's a lot more\nplumbing involved. The internal implementation details of how we craft\ntask envs can now change and these tests will still properly assert the\ntask runtime environment is setup properly.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6674b270fff834b3f8e535d14089b93763a73548","date":"2019-03-25 10:41:38 -0700","message":"Merge pull request #5456 from hashicorp/test-taskenv","refs":[],"body":"tests: port pre-0.9 task env tests","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"4ca6cda6c1077474a3cde93c9b7ed5ac374eec35","date":"2019-03-25 17:19:43 -0400","message":"clarify unknown signal log line (#5466)","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"f57cf5a3659642e24ce903a823cf3d0fac617bf9","date":"2019-03-18 13:00:07 -0400","message":"test kill wait","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d5eea3424aca8451c089be9df02f6f6793980a53","date":"2019-03-26 09:06:36 -0400","message":"fix test setup","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ba8c5c67e11e46417ed43b13049d4e687164e108","date":"2019-03-26 15:01:56 -0500","message":"minor fixes to spread stanza documentation","refs":["origin/f-spread-docs-fix"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1ea9a1cd7ea040961b373836cf74afc39a6bbd30","date":"2019-03-26 17:13:43 -0500","message":"Merge pull request #5473 from hashicorp/f-spread-docs-fix","refs":[],"body":"minor fixes to spread stanza documentation","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"29d577d4d8bf15a8a0aa99e1818e44ac6513179b","date":"2019-03-26 15:23:38 -0700","message":"Fixup mixed tabs in script for Vagrantfile demo","refs":[],"body":"This commit replaces a hard tab with two spaces to match the intendation\nof the rest of the defined script\n","author_name":"Brian Cain","author_email":"bcain@hashicorp.com"},{"hash":"27efdc41163f18b0f49e1bc6265e6b24b844d63c","date":"2019-03-27 07:18:31 -0700","message":"Merge pull request #5474 from briancain/fix-mixed-intend","refs":[],"body":"Fixup mixed tabs in script for Vagrantfile demo","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"6c1d69bab4d6161a7ea5b3c3ea24f52dfdf06cf6","date":"2019-03-27 11:02:44 -0500","message":"Use specific url prefix for metrics test","refs":[],"body":"Also changed the output to show client node IP addresses\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"2e92eecbe0ff7664680876910f04a9d2f8952c5c","date":"2019-03-27 11:10:53 -0700","message":"docs: mention support for centos6 is dropped","refs":["origin/docs-centos6"],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"7feee07d8f353f4bc83a19d25bb6906ed98edb0c","date":"2019-03-27 22:17:15 -0500","message":"Merge pull request #5478 from hashicorp/b-e2e_metrics","refs":[],"body":"Use specific url prefix for metrics test","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"1f88ccec55b885a5d0b1370f16edf37fd86c1336","date":"2019-03-28 16:30:38 -0500","message":"Fix json parsing bug with plugins that don't provide args","refs":[],"body":"This fixes a bug with JSON agent configuration parsing where the AST\nfor the plugin stanza had unnecessary flattening originating from hcl parsing\nlibrary. The workaround fixes the AST by popping off the flattened element and wrapping\nit in a list. The workaround comes from similar code in terraform.\n\nThere were no existing test cases for json parsing so I added a few.\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"7490af219439452bbcbeee0f95a0961db4c15d17","date":"2019-03-28 18:01:40 -0500","message":"fix linting","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"ff1bac9f48e50a192749f0e6d1aba7ec40a5e26f","date":"2019-03-29 08:56:25 -0500","message":"Address review comments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"2bbd05d18fea914868ab645a7a9c0df0c0ed8562","date":"2019-03-29 09:13:26 -0500","message":"Merge pull request #5489 from hashicorp/b-plugin-config-bugfix","refs":[],"body":"Fix json parsing bug with plugins that don't provide args","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"654c96bf10795f75564dd077a0b3ad95a636b4a6","date":"2019-03-29 09:21:08 -0500","message":"Merge pull request #5480 from hashicorp/docs-centos6","refs":[],"body":"docs: mention support for centos6 is dropped","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"567698619625d1c022e947bf553bf50e52bd406b","date":"2019-03-29 14:47:40 -0400","message":"Divest api/ package of deps elsewhere in the nomad repo. (#5488)","refs":[],"body":"* Divest api/ package of deps elsewhere in the nomad repo.\r\n\r\nThis will allow making api/ a module without then pulling in the\r\nexternal repo, leading to a package name conflict.\r\n\r\nThis required some migration of tests to an apitests/ folder (can be\r\nmoved anywhere as it has no deps on it). It also required some\r\nduplication of code, notably some test helpers from api/ -> apitests/\r\nand part (but not all) of testutil/ -> api/testutil/.\r\n\r\nOnce there's more separation and an e.g. sdk/ folder those can be\r\nremoved in favor of a dep on the sdk/ folder, provided the sdk/ folder\r\ndoesn't depend on api/ or /.\r\n\r\n* Also remove consul dep from api/ package\r\n\r\n* Fix stupid linters\r\n\r\n* Some restructuring\r\n","author_name":"Jeff Mitchell","author_email":"jeffrey.mitchell@gmail.com"},{"hash":"b5d8053635aeb2eec2b8c0873d432223fabb4715","date":"2019-03-29 15:02:32 -0400","message":"Add go.mod/go.sum (#5493)","refs":[],"body":"","author_name":"Jeff Mitchell","author_email":"jeffrey.mitchell@gmail.com"},{"hash":"010a1973a95097d030fa18b373f5e8f29bcfa108","date":"2019-03-28 15:16:52 -0700","message":"docker: restore pre-0.9 container names","refs":[],"body":"As far as I can tell Nomad itself does not use the container name after\ncontainer creation, so this should be safe.\n\nOP: https://groups.google.com/d/topic/nomad-tool/kYkyERfVRXE/discussion\nv0.8.7 code: https://github.com/hashicorp/nomad/blob/v0.8.7/client/driver/docker.go#L1530-L1531\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f75f5c9b3b30c82085bafd068a5bb4c48236b167","date":"2019-03-29 15:41:04 -0700","message":"Merge pull request #5491 from hashicorp/b-docker-container-name","refs":[],"body":"docker: restore pre-0.9 container names","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"a0e893ed84018a87b4e0d07ec5f7295fd794bb52","date":"2019-03-29 16:09:14 -0700","message":"Reattach resources to stats trackers in the event they were destroyed","refs":["b-ui/reattach-resources-to-stats-trackers"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a880f93a61ff85e64ee5e3c6b98423798ab07011","date":"2019-03-29 22:29:56 -0400","message":"Always report TotalTicks when percent is measured","refs":[],"body":"Fix a case where TotalTicks doesn't get serialized across executor grpc\ncalls.\n\nHere, I opted to implicit add field, rather than explicitly mark it as a\nmeasured field, because it's a derived field and to preserve 0.8\nbehavior where total ticks aren't explicitly marked as a measured field.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"484ccfafab9cdbf5cc766a87797ab6ca1c7b8f0a","date":"2019-03-30 07:14:57 -0400","message":"deserialize total ticks","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b8f80e5124389990518a72c0bdad66d90de1c878","date":"2019-03-30 15:18:28 -0400","message":"Simplify proto conversion and handle swap","refs":[],"body":"Convert all cpu and memory usage fields regardless of stated measured\nfields, and handle swap fields\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"46b012fd3bf892d91238fd98bc7c562d9756102e","date":"2019-03-31 09:46:23 -0500","message":"Add e2e test with raw exec job for verifying allocation resource stats","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"e162e3b6316727f231e5d7ba100c73eb7219d76d","date":"2019-03-31 20:34:24 -0400","message":"Update drivers/shared/executor/executor_test.go","refs":[],"body":"Co-Authored-By: notnoop <mahmood@notnoop.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"af25b6b1462775d885ad6b9458a31148f8d9fdc7","date":"2019-03-31 20:37:15 -0400","message":"Merge pull request #5468 from hashicorp/b-test-exec-kill-wait","refs":[],"body":"Adding tests for killing task without grace","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"e613da54422b971b012c3492f079de8c3f89a68f","date":"2019-03-05 10:39:06 +0100","message":"acl: Add alloc-lifecycle namespace capability","refs":["origin/f-acl-alloc-lifecycle"],"body":"This capability will gate access to features that allow interacting with\na running allocation, for example, signalling, stopping, and rescheduling\nspecific allocations.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"05637ae076d8153869c5134dcfc1b9a68705cbe2","date":"2019-04-01 10:45:41 -0500","message":"Remove unnecessary step in getting node client","refs":[],"body":"All allocation stats are routable from the server\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"da430f86c54177be9ce8981c3e9dcfb6631370a3","date":"2019-04-01 12:37:01 -0400","message":"Merge pull request #5497 from hashicorp/b-exec-cpu-stats","refs":[],"body":"exec: report cpu usage summary stat","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"5ca9b6eb372e0ff20428b0595376f7ea04a3b227","date":"2019-03-31 12:50:06 -0400","message":"fifo: Use plain fifo file in Unix","refs":[],"body":"This PR switches to using plain fifo files instead of golang structs\nmanaged by containerd/fifo library.\n\nThe library main benefit is management of opening fifo files.  In Linux,\na reader `open()` request would block until a writer opens the file (and\nvice-versa).  The library uses goroutines so that it's the first IO\noperation that blocks.\n\nThis benefit isn't really useful for us: Given that logmon simply\nstreams output in a separate process, blocking of opening or first read\nis effectively the same.\n\nThe library additionally makes further complications for managing state\nand tracking read/write permission that seems overhead for our use,\ncompared to using a file directly.\n\nLooking here, I made the following incidental changes:\n* document that we do handle if fifo files are already created, as we\nrely on that behavior for logmon restarts\n* use type system to lock read vs write: currently, fifo library returns\n`io.ReadWriteCloser` even if fifo is opened for writing only!\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0517bcb4030b246c97346d5bee1c3c1e9a5596e8","date":"2019-04-01 11:27:00 -0400","message":"run fifo tests on Windows","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9f1ee37687215b10b17e3dc289c482a9c67ba409","date":"2019-04-01 11:29:02 -0400","message":"log when fifo fails to open","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3fb377ae6e9dd60f277a75b6fc043aef137ebde3","date":"2019-04-01 11:59:56 -0400","message":"Add test cases for waiting on children","refs":[],"body":"Also, make the test use files just like in the non-test case.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"48259078df97f8efe7d1d0da464d6dbe5479336d","date":"2019-04-01 12:53:37 -0400","message":"avoid opening files just to close them","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"816b348593ecbc828d3b01413270c2f0a9c54ca3","date":"2019-04-01 11:31:28 -0700","message":"Merge pull request #5496 from hashicorp/b-ui/reattach-resources-to-stats-trackers","refs":[],"body":"UI: Reattach resources to stats trackers in the event they were destroyed","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3c68c946c4e4975f5321a899e2b7e5d266986bc7","date":"2019-04-01 15:38:39 -0400","message":"no requires in a test goroutine","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9d4c84e6639326c18371cf713a20731d7d00bfae","date":"2019-04-01 14:52:58 -0500","message":"Added nginx to e2e test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"7661857c6e3ce762d99c1d81db16bbfc0a0c3395","date":"2019-04-01 15:52:02 -0400","message":"clarify closeDone blocking and field name","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"714c41185c83cd6727b816ad6bcbf0e5d9897242","date":"2019-04-01 15:56:43 -0400","message":"rename fifo methods for clarity","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"1450197936ab6e8fe23ca1112c74393329bcabf3","date":"2019-04-01 16:02:00 -0400","message":"comment configureTLogging","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"12242b69f7e5df928ee902273dfdc0fbfcab5c6f","date":"2019-04-01 17:23:11 -0400","message":"Merge pull request #5499 from hashicorp/r-fifo-plain-file","refs":[],"body":"fifo: Use plain fifo file in Unix","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"254901a51ee82fd3a647001e0691d766da3af31d","date":"2019-04-01 14:17:42 -0700","message":"executor/linux: make chroot binary paths absolute","refs":[],"body":"Avoid libcontainer.Process trying to lookup the binary via $PATH as the\nexecutor has already found where the binary is located.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"fd8c4a9362d096d92d7f6e5ec7f85495965ead12","date":"2019-03-29 15:56:19 -0700","message":"website: Update hashicorp-middleman container to v0.3.39","refs":[],"body":"This updates some dependencies with known issues. It does not appear to change\nany website behavior.\n\nThe Gemfile.lock update is based on what's currently installed in the container.\n\nhttps://github.com/hashicorp/middleman-hashicorp/compare/v0.3.35..v0.3.39\n","author_name":"Nick Fagerlund","author_email":"nick.fagerlund@gmail.com"},{"hash":"aae61695f520334724f44fa8844f3492608f8e7b","date":"2019-04-01 22:28:18 -0500","message":"added cpu/disk/memory stress jobs for e2e tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"92af1caa28b7a84f09fcbcd4270c2ea5f42f7589","date":"2019-04-02 08:48:34 -0400","message":"document force_pull and :latest tag interaction","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6ffb3e265a7fb7371263db0d6ee764faa6714e48","date":"2019-04-02 09:37:55 -0400","message":"Merge pull request #5508 from hashicorp/d-docker-force-pull-latest","refs":[],"body":"document force_pull and :latest tag interaction","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"a69664e5ee3168701f936784b58d66389c69510c","date":"2019-04-02 07:16:57 -0700","message":"docker: fix send after close panic in stats","refs":[],"body":"destCh was being written to by one goroutine and closed by another\ngoroutine. This panic occurred in Travis:\n\n```\n=== FAIL: drivers/docker TestDockerCoordinator_ConcurrentPulls (117.66s)\n=== PAUSE TestDockerCoordinator_ConcurrentPulls\n=== CONT  TestDockerCoordinator_ConcurrentPulls\n\npanic: send on closed channel\n\ngoroutine 5358 [running]:\ngithub.com/hashicorp/nomad/drivers/docker.dockerStatsCollector(0xc0003a4a20, 0xc0003a49c0, 0x3b9aca00)\n\t/home/travis/gopath/src/github.com/hashicorp/nomad/drivers/docker/stats.go:108 +0x167\n\ncreated by\ngithub.com/hashicorp/nomad/drivers/docker.TestDriver_DockerStatsCollector\n\t/home/travis/gopath/src/github.com/hashicorp/nomad/drivers/docker/stats_test.go:33 +0x1ab\n```\n\nThe 2 ways to fix this kind of error are to either (1) add extra\ncoordination around multiple goroutines writing to a chan or (2) make it\nso only one goroutines writes to a chan.\n\nI implemented (2) first as it's simpler, but @notnoop pointed out since\nthe same destCh in reused in the stats loop there's now a double close\npanic possible!\n\nSo this implements (1) by adding a *usageSender struct for handling\nconcurrent senders and closing.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"82d3c43e315c4a4d2b9c7596fa30660fb7e05ee3","date":"2019-04-02 09:09:17 -0700","message":"Update drivers/docker/stats.go comment","refs":[],"body":"Co-Authored-By: schmichael <michael.schurter@gmail.com>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"855a08810c0ff56c305898938f3e5ab3ec528fbd","date":"2019-04-02 09:18:38 -0700","message":"docker: improve stats names and comments","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"cb36f4537e63d53b198c2a87d1e03880895631bd","date":"2019-04-02 09:40:53 -0700","message":"executor/linux: add defensive checks to binary path","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"0007443db758128ae56fef1f32abed56e8a8dd5a","date":"2019-04-02 10:01:28 -0700","message":"Merge pull request #5510 from hashicorp/b-docker-stats","refs":[],"body":"docker: fix send after close panic in stats","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"c37cff61b8c82d6df629b2cc7caa5ec71b565fc0","date":"2019-04-01 15:26:47 -0700","message":"Mention nomad-oss-debug in issue template","refs":[],"body":"Also reordered the sections to put the logs at the end.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"8920d56212835e09cad3def7b4f77d4ebb813bd1","date":"2019-04-02 10:08:07 -0700","message":"Merge pull request #5503 from hashicorp/docs-nomad-oss-debug","refs":[],"body":"Mention nomad-oss-debug in issue template","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"21e895e2e7e274dd9319acbd5c11fcd38d0fea8b","date":"2019-04-02 11:17:12 -0700","message":"Revert \"executor/linux: add defensive checks to binary path\"","refs":[],"body":"This reverts commit cb36f4537e63d53b198c2a87d1e03880895631bd.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"56048bda0a15abec37b680d15e945b95ef504e4b","date":"2019-04-02 11:25:45 -0700","message":"executor/linux: comment this bizarre code","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"800bd848c1667e83f929accac44af803ad237f10","date":"2019-04-02 14:09:50 -0700","message":"Merge pull request #5504 from hashicorp/b-exec-path","refs":[],"body":"executor/linux: make chroot binary paths absolute","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"9adab75ac84b5c2a7b84702fae02c2484abb50ad","date":"2019-04-02 19:37:30 -0400","message":"basic test for #4809","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d441cdd52f68912e96dc7ee5baf2dcddb0ac8caa","date":"2019-04-02 19:55:44 -0400","message":"try not without checking stat first","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"244544b735a8dbac0e14e7ee85e12a39780cbbb9","date":"2019-04-02 20:00:54 -0400","message":"an alternative order","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"39555db45f1db1d7c08593cd5dd2279be6fcee6b","date":"2019-04-02 20:53:31 -0400","message":"Merge pull request #5511 from hashicorp/b-executor-path-executable","refs":[],"body":"This is a follow up work to https://github.com/hashicorp/nomad/pull/4813 to fix #4809 and fix a regression introduced in 0.9 in marking files in libcontainer executable.\r\n\r\n#4809 bug is that `lookupBin` uses `exec.LookPath` when not inspecting task dir files.  `exec.LookPath` only returns a file if it's already marked as an executable path in https://github.com/golang/go/blob/go1.12.1/src/os/exec/lp_unix.go#L24-L27 .  This affects raw exec as if passed an absolute path to file, `lookupBin` returns an error if file isn't already an executable.  This explains why the error manifests when an absolute interpolated path is used (e.g. `${NOMAD_TASK_DIR}/hellov1`) but not when using a task rel dir (e.g. `local/hellov1`) in the above examples used in ticket.\r\n\r\nPR #4813 remedied this problem for raw exec but inadvertably broke libcontainer executor, as it made `lookupBin` returns the paths to host files rather than ones found inside chroot.\r\n\r\nThis PR reorders the evaluation, so we go back to 0.8 behavior of looking up task directories first, but then check for host paths before using `exec.LookPath`.\r\n\r\nThis PR is broken into three commits to illustrate evolution and confirming hypothesis:\r\n1. 9adab75ac84b5c2a7b84702fae02c2484abb50ad : Adding a test illustrating how libcontainer executor fails at marking processes as executable in https://travis-ci.org/hashicorp/nomad/jobs/514942694 - note that the test doesn't depend on artifacts or interpolated paths\r\n2. d441cdd52f68912e96dc7ee5baf2dcddb0ac8caa: reverting PR #4809 and showing the test fail now with raw_exec case (as expected) in https://travis-ci.org/hashicorp/nomad/jobs/514944065\r\n2. 244544b735a8dbac0e14e7ee85e12a39780cbbb9: in where we add the check in appropriate place next to `exec.LookPath(...)` for absolute paths and have a green job in https://travis-ci.org/hashicorp/nomad/jobs/514945024\r\n\r\n## Future work\r\n\r\nInspecting `lookupBin` in 0.8 and 0.9 case, we have a bug in using `exec.LookPath` for the libcontainer executor case.  We should be looking up paths based on the container chroot and container PATH rather than the host's.  However, this is not a 0.9.0 regression and was present in 0.8; so punting to fix it post 0.9.","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"a09fb7d7bf939186e7055a988d27a683e474235c","date":"2019-04-02 20:38:56 -0500","message":"small tweaks to load test jobs to make them work in Nomad 0.8.7","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"6a838b8c3bc515074a6dd8b3af48bdf7fa2811c9","date":"2019-04-03 01:54:29 +0000","message":"Generate files for 0.9.0-rc2 release","refs":[],"body":"","author_name":"Nomad Release bot","author_email":"nomad@hashicorp.com"},{"hash":"865e433673f25849c40c6f67493208e6190d43ba","date":"2019-04-03 07:27:45 -0700","message":"Release v0.9.0-rc2","refs":["tag: v0.9.0-rc2"],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com","tag":"v0.9.0-rc2"},{"hash":"b51e9e09fc1dd4935cfb71c760276e1d1e802731","date":"2019-04-03 07:41:09 -0700","message":"Remove 0.9.0-rc2 generated files","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"010b9575dbdb2d72b73f2be6fed5947360894959","date":"2019-04-03 07:46:28 -0700","message":"Bump download page to 0.9.0-rc2","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"3bad050bf1d275c58d2af42860d3ebf2ab7bd69c","date":"2019-04-04 15:18:33 -0700","message":"client: simplify kill logic","refs":["origin/f-simplify-kill"],"body":"Remove runLaunched tracking as Run is *always* called for killable\nTaskRunners. TaskRunners which fail before Run can be called (during\nNewTaskRunner or Restore) are not killable as they're never added to the\nclient's alloc map.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"a936f2575aac8adfd8093a520f18ef9574b0580c","date":"2019-04-04 22:10:18 -0400","message":"drivers/docker: fix image name handleing when prefixed with https://","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"c5dcdd3068c291dcbbe562b570bd1fa44527508d","date":"2019-01-29 11:25:47 -0600","message":"scripts for upgrade testing","refs":["origin/upgrade_e2e"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c65b1498b082db82344eb287612f0801eb571ddf","date":"2019-04-05 13:43:24 -0400","message":"Merge pull request #5521 from hashicorp/b-docker-image-https","refs":[],"body":"drivers/docker: fix image name handleing when prefixed with https://","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"19e1368b03acc405ca8338f0559407b1aebf574e","date":"2019-04-05 14:11:56 -0500","message":"Remove beta tags from 0.9 docs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f812e25ac1a75599c3f9eccf16a43053a4f8ad7d","date":"2019-04-05 14:24:11 -0500","message":"Merge pull request #5523 from hashicorp/upgrade_e2e","refs":[],"body":"scripts for upgrade testing","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"bc98cf09e9548ce5f6ea597aed52564332151b74","date":"2019-04-08 11:24:03 -0500","message":"Merge pull request #5524 from hashicorp/docs-remove-beta-tag","refs":[],"body":"Remove beta tags from 0.9 docs","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"ca9b27e9db8ffe875090badcdf6b6047dc758014","date":"2019-04-08 21:42:10 -0400","message":"scripts: better prerelease extractor","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"18dd59056ee1d7b2df51256fe900a98460d3d6b9","date":"2019-04-09 01:56:00 +0000","message":"Generate files for 0.9.0 release","refs":[],"body":"","author_name":"Nomad Release bot","author_email":"nomad@hashicorp.com"},{"hash":"28e768721992df5097203eea6e2b247abd56ca6f","date":"2019-04-09 08:51:37 -0700","message":"Release v0.9.0","refs":["tag: v0.9.0"],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com","tag":"v0.9.0"},{"hash":"8caa1c5b0d3c5651caaf34ad92a33f21446acec2","date":"2019-04-09 09:01:48 -0700","message":"Bump to 0.9.1-dev","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"850632d8736dee98927bbfa3d73a4f5561c69023","date":"2019-04-09 09:04:41 -0700","message":"Bump website to 0.9.0","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"2382b48f8c36f989236618c14c2900e299cbee56","date":"2019-04-09 09:12:07 -0700","message":"website: remove RC note from download page","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"79132127b92787e3a7513ba9382388eaba7a82e7","date":"2019-04-09 12:13:37 -0400","message":"Nomad TLS with Vault (#5454)","refs":[],"body":"* navigation and initial steps of guide\r\n\r\n* generate certs with appropriate token\r\n\r\n* configure Nomad to use TLS\r\n\r\n* add cli keys and certs\r\n\r\n* add server gossip encryption section\r\n\r\n* fix mislabeled steps\r\n\r\n* vault paths formatting\r\n\r\n* remove bit about cert revocation\r\n\r\n* add clarification in challenge that we will be securing an existing Nomad cluster\r\n\r\n* add some comments to consul-template.hcl to help user walk through it\r\n\r\n* clarifying comments for CLI certs templates\r\n\r\n* reorganize steps, change permissions on certs, and sub pkill command with systemctl reload nomad\r\n\r\n* correct step reference\r\n\r\n* add rpc upgrade mode instructions\r\n\r\n* correct typo\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"43faf1176cb70e2a94aafdf313bdabd1c0a0da84","date":"2019-04-09 19:59:58 -0400","message":"ci: move docker unix-y test","refs":[],"body":"Fix AppVeyor failing builds, by moving docker image url test to run on unix\nsystems only.  The used paused image is a linux image only, not\navailable on Windows.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a09e3bf1a130cdc70dd07b0d5adc5ab17d0f9131","date":"2019-04-10 09:07:08 -0400","message":"Allow compiling without nvidia integration","refs":[],"body":"nvidia library use of dynamic library seems to conflict with alpine and\nmusl based OSes.  This adds a `nonvidia` tag to allow compiling nomad\nfor alpine images.\n\nThe nomad releases currently only support glibc based OS environments,\nso we default to compiling with nvidia.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"384ad495040f4de089101dab344fe00b618a84f9","date":"2019-01-09 17:53:39 -0800","message":"Freestyle entry for the new multi-select-dropdown component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"1affa098c005e3204c1217eb2b482ee3917ba681","date":"2019-01-09 17:54:01 -0800","message":"Simple includes helper that works like Array#includes","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3cef4286ad859724612070542cf58d79aa6b7f2f","date":"2019-01-09 17:54:28 -0800","message":"Templating and styling the multi-select-dropdown component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"eae97d992c877e15190173418a414446a09e745c","date":"2019-01-11 15:41:56 -0800","message":"Persistence and onSelect handler for the multi-select-dropdown","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a85a11dc42d1c391af64300fe1e56234921968cb","date":"2019-01-11 15:42:32 -0800","message":"Color alias for tags","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"6909d3a8c9905b908ac226c5c95ba9849c580ab0","date":"2019-01-11 16:40:28 -0800","message":"Multi-select button-bar support","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"32f815dc513246a658e6263e1988f5329f0cc798","date":"2019-01-11 16:40:46 -0800","message":"Round out the freestyle entry","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b4a921f511d4a7efd1be6bb6fee6c9b19d4dfce7","date":"2019-01-14 17:59:41 -0800","message":"Tab and keyboard navigation for multi-select","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"70426ad2cd81b6d2b0d9216c9c3b9ea0e31c982f","date":"2019-01-15 17:16:18 -0800","message":"Test coverage for the multi-select-dropdown component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"bff6039dca6b14e94655edba6e3402f89f36abd9","date":"2019-01-16 16:28:13 -0800","message":"Always left-align the dropdown position to the trigger","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"083d7aed5c96c1272e4fc0a54d5c2a816ffbf617","date":"2019-01-16 16:40:26 -0800","message":"Add the right-alignment case to freestyle","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ca6a6a29101241e18fda09b40bb88186ce0d45c8","date":"2019-01-18 17:23:03 -0800","message":"Harden dropdown styles to avoid accidental cascading","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"e1b0eb58e916f68de8cb264b7c12718069cba345","date":"2019-01-22 09:17:49 -0800","message":"Remove the includes helper in favor of the contains helper","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"49bd7acc5ed20b5f02b8d78f7e95cc21ce9a1ef9","date":"2019-01-16 16:29:31 -0800","message":"Scaffold the facets and facet options for the jobs list page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7b07d1b3da7d4976a808f200f7c06e1ca3cc8a18","date":"2019-01-17 11:10:42 -0800","message":"Implement the dynamic facet lists (datacenters and prefixes)","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"9a6f1c9b85c9b72b3eb003af8dda416925a12b84","date":"2019-01-17 11:11:17 -0800","message":"Implement the job list filtering based on facet selection","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"2808671c781b7279433955eafa4ee79771d205ab","date":"2019-01-22 16:29:09 -0800","message":"Support for the no options case","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"92a6809b2a18b66640d41d53fd540f96b7bb6aaa","date":"2019-01-23 13:56:32 -0800","message":"Introduce encode/decode for array query params","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"49088a3d2924de93555325ae1c6a1b88705c6860","date":"2019-01-23 20:33:47 -0800","message":"Model facets in the page object","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"e1abb9f7fe428d73cd56a94e87b7d0cff6049fc6","date":"2019-01-23 20:35:51 -0800","message":"Test coverage for job list facets","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"fc794efce86ff62322fd4eaa3fc393ae5b6506e2","date":"2019-02-01 14:08:55 -0800","message":"Simplify options and selection names","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"70ab07ee6e4234b6b473204ad69643b111c8ff2e","date":"2019-02-01 14:11:50 -0800","message":"Make the facet filter function clearer with more brackets","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ef9f228f933257ed9f3b7cdf420bdcb055778bb0","date":"2019-02-11 14:37:36 -0800","message":"Changes from code review","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"401b5997a3b007420baa706b58e932399f4caa8b","date":"2019-02-11 20:00:45 -0800","message":"Refactor qp helpers from the jobs faceted search","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"498f513dc00b37658a354214b21f2bdf17099ce1","date":"2019-02-11 20:01:14 -0800","message":"Add nodeClass to the node model","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"21f83519299b71c33b59eec021301b7adfa74eea","date":"2019-02-11 20:01:46 -0800","message":"Implement faceted search on the clients page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"80580797ef79874c86522eca8f6304bc1a32e51f","date":"2019-02-12 11:26:36 -0800","message":"Test coverage for clients faceted search","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ee92bf86d8c9eb9bbbf7015061f78bc69d292db9","date":"2018-07-17 11:03:13 +0100","message":"Add NodeName to the alloc/job status outputs.","refs":[],"body":"Currently when operators need to log onto a machine where an alloc\nis running they will need to perform both an alloc/job status\ncall and then a call to discover the node name from the node list.\n\nThis updates both the job status and alloc status output to include\nthe node name within the information to make operator use easier.\n\nCloses #2359\nCloess #1180\n","author_name":"James Rasell","author_email":"jamesrasell@gmail.com"},{"hash":"ec49fff549f5b6ff378df26c47c69ec5941d51a4","date":"2019-01-18 03:55:17 -0800","message":"Don't display node name if output isn't verbose. Add tests.","refs":[],"body":"","author_name":"Arshneet Singh","author_email":"arsh.johar@gmail.com"},{"hash":"e6ef8b0e88131e274af1390e1869efc343a3e07e","date":"2019-01-23 09:33:22 -0800","message":"Remove redundant assertion and replace regex matches with require","refs":[],"body":"","author_name":"Arshneet Singh","author_email":"arsh.johar@gmail.com"},{"hash":"738ceda8f2bfa060e5b6d671895ce22bc76771e9","date":"2019-02-13 08:44:29 -0800","message":"Improve the search box component to make it fluid and iconed","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"0ff766ed8cd022089a5efbe89f7ca7a149c73070","date":"2019-02-13 08:49:28 -0800","message":"Add the ember-responsive addon","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4e499003c6186b81850c4ea80945cc3e065a3ab0","date":"2019-02-13 08:58:25 -0800","message":"Change breakpoints to match Nomad/Bulma widths","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b650b4f84e2c2ca6f82c4dcac4c2b7e581025f7d","date":"2019-03-06 20:56:13 -0800","message":"Fixes a few minor issues with the multiselect dropdown","refs":[],"body":"1. Label no longer bleeds into the downward arrow icon\n2. The selection number no longer breaks onto its own line\n3. Options have a min-width so short labels can't result in small click\n   targets\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"e28fe37a1c9f7868604c2b99006c06fcc7ad0643","date":"2019-03-06 20:57:57 -0800","message":"Make the search box more elastic","refs":[],"body":"1. Set a higher max-width\n2. Set a min-width\n3. Remove the min-width on mobile, including the invisible size=\"20\" in\n   the markup\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"9d4756f73228ced3d11a230e2d87f38cb51feffb","date":"2019-03-06 20:59:59 -0800","message":"New toolbar CSS component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"bee09ca75944853b31c93d829acc861e5846e6b0","date":"2019-03-06 21:00:30 -0800","message":"Replace the columns pattern with the new toolbar pattern on the jobs page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4bc41d3f290ec435093006f71c61121ca8c766dd","date":"2019-03-06 21:05:59 -0800","message":"Replaces .columns with .toolbar on the clients page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"267b1172a9c825c5d53905fa77574cf50e11fe17","date":"2019-03-25 23:12:39 +0000","message":"server/job_endpoint: accept vault token and pass as part of Job.RegisterRequest [#4555]","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"af0d0f919fd55a8cee2bd3a7459760683daa99f5","date":"2019-03-27 20:24:32 +0000","message":"cli: plumbed vault token from job revert command through API call","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"548d029ca5bc4cff1c3f399ae8f5d943cf43bf8c","date":"2019-03-27 15:47:57 +0000","message":"docs: added vault token documentation to `job revert` command, documented VaultToken field of api.JobRevertRequest","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"3b19c22f27d5fe942e3a253411441db3657ce6a1","date":"2019-03-28 14:55:01 -0400","message":"Update api/jobs.go","refs":[],"body":"Co-Authored-By: cgbaker <cgbaker@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"024fd69c162871e64fa456e91b5a90554384a820","date":"2019-03-28 14:56:12 -0400","message":"Update nomad/job_endpoint.go","refs":[],"body":"Co-Authored-By: cgbaker <cgbaker@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"c479034f07b06469809a45eec33eb49c8cb92c14","date":"2019-03-28 14:57:29 -0400","message":"Update website/source/docs/commands/job/revert.html.md.erb","refs":[],"body":"Co-Authored-By: cgbaker <cgbaker@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"9193cbaf30d7e63af00f7b931dda3a3323b1defb","date":"2019-03-28 14:57:59 -0400","message":"Update nomad/job_endpoint_test.go","refs":[],"body":"Co-Authored-By: cgbaker <cgbaker@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"9d50d82ead632dac7aa50603e58a2c31b22b8998","date":"2019-03-28 19:00:32 +0000","message":"\"job revert\" command: alphabetized flags","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"1349497152843001ab806a83c1f717ed075aa3b4","date":"2019-04-02 19:49:20 +0000","message":"config/docs: added `namespace` to vault config server/client: process `namespace` config, setting on the instantiated vault client","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"5db81957ff00fcc44aedc0b8e7e63ee78955192f","date":"2019-04-03 11:58:34 +0000","message":"wip: added config parsing support, CLI flag, still need more testing, VAULT_ var, documentation","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"3eac7010f57982bb82b365b312b2c269ab540323","date":"2019-04-04 17:51:40 +0000","message":"vendor: updated consul-template and downstream","refs":[],"body":"consul-template -> v0.20.0\nconsul/api -> v1.2.1\nvault/api -> v1.0.3\ngo-retryablehttp -> v0.5.2\ncirconus-gometrics: modified local source for compat with go-retryablehttp\n","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"3a287634559bfc4f90be981c340ce64bc63ae29a","date":"2019-04-04 15:27:55 +0000","message":"taskrunner: pass configured Vault namespace into TaskTemplateConfig","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"e09badbe8b253357a288ae738f9eedecec4ecd8d","date":"2019-04-04 21:02:28 +0000","message":"client: gofmt","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"20a388455993563c463368375f7405b3f83c501a","date":"2019-04-05 01:16:51 +0000","message":"docs: -vault-namespace, VAULT_NAMESPACE, and config","refs":[],"body":"agent: added VAULT_NAMESPACE env-based configuration\n","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"f7f979ad0fe5bd57f92a8ffef91a7014fa61cf48","date":"2019-04-05 04:21:13 +0000","message":"e2e/vault: updated e2e vault tests to use version-specific policy creation endpoint (old servers are not compatible with new client)","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"401c9fdd16ae2ace9f70d17dc7265d334fc56dcb","date":"2019-04-05 13:05:54 +0000","message":"taskrunner: removed some unecessary config from a test","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"312721427d191c519eafdbc41e43dbf25783c5e5","date":"2019-04-05 13:21:54 +0000","message":"vault e2e: pass vault version into setup instead of having to infer it from test name","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"040ddeaa8357cd69b4f649dbf894c6364aa425e3","date":"2019-04-05 11:01:14 -0400","message":"Update nomad/structs/config/vault.go","refs":[],"body":"Co-Authored-By: cgbaker <cgbaker@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"2022db72b6282de9603fd03ef9317ac6ddb60b63","date":"2019-04-05 17:07:40 +0000","message":"vault client test: minor formatting vendor: using upstream circonus-gometrics","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"fcc6a2ca13c4a712677ecf8a675548e83c99e6c4","date":"2019-04-05 17:11:41 +0000","message":"agent config: cleaner VAULT_ env lookup","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"becbd85ac8cae532e976bc6ca605dde9d83309c6","date":"2019-04-05 18:44:19 +0000","message":"server vault client: use two vault clients, one with namespace, one without for /sys calls","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"929055ad80ed8bd568af4c0310e1d02a7002b352","date":"2019-04-10 13:25:53 +0000","message":"add .idea (GoLand) directory to .gitignore","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"82a05147f19f1fc9c7c9c389d2073ffa3a0ed4f4","date":"2019-04-10 11:56:38 -0400","message":"Merge pull request #5534 from hashicorp/r-fix-appveyor-20190409","refs":[],"body":"ci: move docker unix-y test","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"676a6d08f2fa427c9883a00757854e6ded197ef3","date":"2019-04-10 10:57:46 -0500","message":"Merge pull request #5538 from hashicorp/0.9.1-dev","refs":[],"body":"Merge 0.9.1 dev branch to master","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"2915925756e12eab0138ae2848a111caf9bf2bf3","date":"2019-04-10 16:04:07 +0000","message":"include vault namespace work in changelog","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"2bddf0a5d943cc7650fae490614d3ee1b72c648e","date":"2019-04-10 12:04:59 -0400","message":"Merge pull request #5539 from hashicorp/cgbaker/vault-namespaces-changelog","refs":[],"body":"include vault namespace work in changelog","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"c998db1153e92455a6ccfa9ad9e9dee609d4bca7","date":"2019-04-10 11:23:00 -0500","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"60cfa194e495e7c0bae622763cce30989b67863a","date":"2019-04-10 13:40:55 -0400","message":"Merge pull request #5537 from hashicorp/b-nonvidia-flag","refs":[],"body":"Allow compiling without nvidia integration","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"afd1030ffdd9da774710f09d7d1b12d67ee848d5","date":"2019-04-10 16:56:38 -0400","message":"add community section under task drivers and sync name with device plugins (#5542)","refs":[],"body":"* add community section under task drivers and sync name with device plugins\r\n\r\n* reword heading\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"afa35298f4484cfc02d85f0a9626e39ac9ec0329","date":"2019-03-12 16:15:07 -0700","message":"Fix deprecations","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"71bcfaa0aafc21b64590e4b82633e2986604c32d","date":"2019-03-12 16:42:47 -0700","message":"Upgrade to Ember 3.0","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b70b04241cb5ecc8bb5fea409369538a141b32bb","date":"2019-03-12 16:50:57 -0700","message":"Fix eslint error and add lint script to package.json","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a0e8eef7b5503054e9652558eb467cb7a086f6c0","date":"2019-03-12 17:01:31 -0700","message":"Modules codemod + prettier","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"90278bff0402866d9fdba235bf913a3222cd9fe6","date":"2019-03-12 17:04:16 -0700","message":"Ember QUnit Codemod","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"0a6e84ebf41fcc09969ed1f59e8d9fcef237a992","date":"2019-03-12 17:08:16 -0700","message":"Ember test-helpers codemod","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"9cc9fa84f2fef5b89c9c32ac09e13786719c09d4","date":"2019-03-12 17:40:39 -0700","message":"Fix a bunch of snowflake situations the codemod missed","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"06e7338269ad586a5c2f5b75cc717e54ec57f732","date":"2019-03-12 18:09:19 -0700","message":"Use mirage test hooks","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"57e84b1d10b3e19dfdde7c228a5c8c3dc789c670","date":"2019-03-13 19:14:58 -0700","message":"Critical peer dependency upgrades","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"43a9b6d86509baa516943e49ca0195ba65421cad","date":"2019-03-13 19:15:25 -0700","message":"Update environment to 3.0 conventions","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"2d6aaaa837639b2e226a3bb2d551580177e8280a","date":"2019-03-13 19:16:01 -0700","message":"Update test-helper to new testing style","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"31dc1399458554b669b8c27d6b83bd7c16f063a0","date":"2019-03-13 19:16:39 -0700","message":"Update adapter tests to use module instead of custom code","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a35fd98a04791b69759221eaa5a07287e16efc5d","date":"2019-03-13 19:17:12 -0700","message":"Update serializer unit tests to use module instead of custom code","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"205797dcc0650d58b71db96e32844b152dd9e232","date":"2019-03-13 23:42:57 -0700","message":"Upgrade ember-power-select","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"acddf2b8ade3343e7c368612e2c072bcdd0949c8","date":"2019-03-13 23:43:20 -0700","message":"Update the test index.html file","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"f3acad360ea5711a097b451f0d773ce5c95449b5","date":"2019-03-13 23:43:46 -0700","message":"Fix scoping issue with the jobs list page object","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"f959aa8eee6f46a981ea8e90b624e3c1aa7b3e08","date":"2019-03-13 23:44:17 -0700","message":"Adapt the codemirror helper for the hooks model","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a4ef45379e5bc8c2a7f9cae57184758567c7e9bd","date":"2019-03-13 23:44:53 -0700","message":"Fix page object issues with acceptance tests that couldn't be codemodded","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"bebc9b8f1144525ddc060133187c66e973868259","date":"2019-03-13 23:45:15 -0700","message":"Fix integration tests that had test failures","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"1e669bb56b5a8bc58da55f434e5e3d2fc5d50ea0","date":"2019-03-14 00:03:30 -0700","message":"Fix bug in the stats-tracker-frame-mising behavior","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"2474ecae4dc306874638a8c1e0d75c4ff7332e1c","date":"2019-03-14 11:35:46 -0700","message":"Remove all andThen and .then usages (except for integration tests)","refs":[],"body":"Since a future ember version does way with the need to manually\nmaking runloop runs, I'm holding off on those tests\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"2fce7c74958e0c2bb9e66d6e8150dcdc5fe016a7","date":"2019-03-15 13:26:18 -0700","message":"Upgrade to Ember 3.4","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c408a212d7804dbfe32ba59de00a548888f00baf","date":"2019-03-15 13:35:36 -0700","message":"Update ember-data-model-fragments","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"467a7b3c9052a14cb80e3f389cce22e24c47a466","date":"2019-03-15 17:18:26 -0700","message":"Upgrade miscellaneous packages","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"67372fc12c4c9521fdb373feb45940c738d84ed1","date":"2019-03-15 17:18:44 -0700","message":"Override default template lintrc (borrowed this one from vault)","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"30bcacfb9271c446e2899aaf86b9caea0eb1f78c","date":"2019-03-25 15:49:53 -0700","message":"Address template linting issues","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"cf44c5449c52039ff437f549b812edc7adc1afb5","date":"2019-03-25 15:54:48 -0700","message":"Address test failures","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7e6a4f74fc90ec5400c3150447dff7af2f1e7723","date":"2019-03-25 21:24:11 -0700","message":"Address inflector deprecations","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"6d63a420bfd442e6b9152b7c616e6cea3250d0b6","date":"2019-03-25 21:24:32 -0700","message":"Commit the deprecation workflow to prevent fixed deprecations from creeping back in","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"23729ad5a7d0cb1c1383d8329303433bed5ddfe4","date":"2019-03-25 21:55:06 -0700","message":"Address the copy/copyable deprecation","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"e74873f9c171f15ea9f8d49c211ce14b074288b8","date":"2019-03-25 22:27:47 -0700","message":"Address the Ember.Logger deprecations","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"d5896208a18092ff216a4facb743869bab3a2279","date":"2019-03-26 00:10:51 -0700","message":"Kind of address the sendAction deprecation","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"f6232f181729915a08b8e57325080792462dc266","date":"2019-03-26 00:46:44 -0700","message":"ES5 getters codemod","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4c9a026e55b4a9b2cf78dede916a03814f45b7dc","date":"2019-03-26 16:29:14 -0700","message":"Rethink the adapter job unit tests to avoid notifyPropertyChange","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"542f124071c67be8a230600ea9f1f19cd994cd92","date":"2019-04-01 18:30:11 -0700","message":"Auto-upgrade packages","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b0a65bdb629b43be4c3c3e0071a318e68dae5e27","date":"2019-04-01 18:30:44 -0700","message":"Update everything to work with the mirage backwards incompat","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"baf5077a3204a9e65c2f115fa5950661373383fe","date":"2019-04-02 15:01:20 -0700","message":"Manually upgrade fringe dependencies","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a4c5410323eef9dfade1fe0633a0bdb12d1d7d7e","date":"2019-04-02 15:55:20 -0700","message":"Upgrade ember addons","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"56500bd04b3117bcc74c32bbb0243feabdfd22ab","date":"2019-04-02 15:59:16 -0700","message":"Upgrade eslint to v5","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"513f882f1a20cb5e54b5469a02aa9c1ee702de95","date":"2019-04-02 16:11:22 -0700","message":"Upgrade third party packages","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"514e8aae91c5fa7f0f7f09e73e3c2a6c824fa8b9","date":"2019-04-02 16:39:20 -0700","message":"Major upgrade, ember-cli-sass; swiches to sass-dart","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3b5f7f637d514ecb3308164a34b840bdb4081df1","date":"2019-04-02 16:53:03 -0700","message":"Upgrade ember-concurrency","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"6cba965ff35ce8d955cec1eaba4e7a6cf6a3563c","date":"2019-04-02 17:37:09 -0700","message":"Don't remove viewBox from svgs as part of svgo","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"54e89a50044557e12794024d92159d7ebd8fcb49","date":"2019-04-08 16:50:37 -0700","message":"Upgrade to Node 10, latest LTS","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"bd2b2d705951f43c94773ac81925a940733eb142","date":"2019-04-08 16:54:45 -0700","message":"Upgrade Yarn","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"27ee73ae9c1df3b5defd229bc4be3328fb0d74eb","date":"2019-04-09 14:35:59 -0700","message":"Force Travis to use node 10","refs":["origin/f-ui-ember-v3","f-ui-ember-v3-bck","f-ui-ember-v3"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"74190ff809afe4ed07f2a0aa71dd58e6161e6453","date":"2019-04-10 16:04:41 -0700","message":"Merge pull request #5544 from hashicorp/f-ui-ember-v3","refs":[],"body":"UI: Ember 2.18 → 3.4 Take two","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"47435613965259a365172ab27bc07086e4b3521a","date":"2019-04-10 20:20:22 -0500","message":"Refactor scheduler package to enable preemption for batch/service jobs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1c06fd5b955a8df5adb05b481731f33046528136","date":"2019-04-11 10:41:32 +0200","message":"Merge pull request #5500 from hashicorp/f-acl-alloc-lifecycle","refs":[],"body":"acl: Add alloc-lifecycle namespace capability","author_name":"Danielle","author_email":"dani@builds.terrible.systems"},{"hash":"38e73b51e9e468f20dc35082acebd109bf07ec05","date":"2019-04-04 19:35:20 +0200","message":"status: Allow passing -verbose to meta status","refs":[],"body":"A common issue when using nomad is needing to add in the object verb to\na command to include the `-verbose` flag.\n\nThis commit allows users to pass `-verbose` via the `nomad status` alias by\nadding a placeholder boolean in the metacommand which allows subcommands\nto parse the flag.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"776477824e78f93176be86bdde1bad320b8960c1","date":"2019-04-11 13:31:48 +0200","message":"Merge pull request #5516 from hashicorp/dani/f-verbose-status","refs":[],"body":"Allow passing -verbose to meta status","author_name":"Danielle","author_email":"dani@builds.terrible.systems"},{"hash":"419d70c5f9e1d618d19b641cd31610eb1b6263d0","date":"2019-04-01 14:56:02 +0200","message":"allocs: Add nomad alloc restart","refs":[],"body":"This adds a `nomad alloc restart` command and api that allows a job operator\nwith the alloc-lifecycle acl to perform an in-place restart of a Nomad\nallocation, or a given subtask.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"6b600688be67bff24ee655ec6e11b7942defcf14","date":"2019-04-11 14:26:15 +0200","message":"Merge pull request #5502 from hashicorp/dani/f-alloc-restart","refs":[],"body":"alloc-lifecycle: nomad alloc restart","author_name":"Danielle","author_email":"dani@builds.terrible.systems"},{"hash":"2308a5839d254330a38513c32bf8be04185d397e","date":"2019-03-11 19:08:10 +0000","message":"terraform: work on terraform setup * support for 0.9.0 * ELB for servers * better output * customizable security groups * nvidia-docker support * different server/client instance types","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"f4664f908b5b5d12abd52ae5e290d647f8c5abfa","date":"2019-04-10 16:00:55 +0000","message":"example: nvidia tensorrt example using GPU device plugin","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"26158acffce00d6315d61431f5a50678101c2e27","date":"2019-04-11 09:31:47 -0400","message":"Update setup.sh","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"25a1f7356ca21994f0d54e7acff33ab45a20aab2","date":"2019-04-11 09:32:55 -0400","message":"Merge pull request #5548 from hashicorp/cgbaker/update-terraform","refs":[],"body":"Update terraform, add nvidia example","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"8ee02ddd23bafc87b9fce52b60c6026335bb722d","date":"2019-03-26 18:25:46 -0400","message":"test that fingerprint resources are updated, net not clobbered","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"8528a2a2a6450e4462a1d02741571b5efcb45f0b","date":"2019-03-27 11:01:42 -0400","message":"add structs.Resources Equals","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"49fbaace5298d5ccf031eb7ebec93906e1d468b5","date":"2019-03-27 11:03:13 -0400","message":"add COMPAT(0.10): Remove in 0.10 notes to impl for structs.Resources","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"4ede9226bb971ae42cc203560ed0029897aec2c9","date":"2019-03-27 12:01:47 -0400","message":"refactor structs.Resource.Devices to have its own Equals","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"49e2e6c77bb3eaa4577772b36c62205061c92fa1","date":"2019-03-27 12:02:49 -0400","message":"refactor structs.Resource.Networks to have its own Equals","refs":[],"body":"NodeResource.Networks uses the same function\n","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"689782524090e51183474516715aa2f34908b8e6","date":"2019-03-27 12:43:18 -0400","message":"refactor struts.RequestedDevice to have its own Equals","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"84bd433c7e1d030193e054ec23474380ff3b9032","date":"2019-03-27 12:05:39 -0400","message":"add client updateNodeResources to merge but preserve manual config","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"a7fed726c6e0264d42a58410d840adde780a30f5","date":"2019-03-28 08:53:44 -0400","message":"refactor error in client fingerprint to include the offending data","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"e89dbb2ab182b6368507dbcd33c3342223eb0ae7","date":"2019-03-28 08:57:57 -0400","message":"fix client-test, avoid hardwired platform dependecy on lo0","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"0767a4665ed30ab8d9586a59a74db75d51fd9226","date":"2019-03-28 15:57:29 -0400","message":"struct Equals checks for identity before value checking","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"f4746411cab328215def6508955b160a53452da3","date":"2019-03-28 16:22:48 -0400","message":"struct cleanup indentation in RequestedDevice Equals","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"f8d432345b54b1953a4a4c719b9269f845e3e573","date":"2019-03-28 16:24:29 -0400","message":"client Networks Equals is set equality","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"bc0bf4efb9114e699bc662f50c8f12319b6b3445","date":"2019-03-28 16:31:00 -0400","message":"client_test cleanup comments from review","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"fc309cb430e62d8e66267a724f006ae9abe1c63c","date":"2019-03-29 10:25:36 -0400","message":"client fingerprint updateNetworks preserves the network configuration","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"be2838d6baa9d382a5013fa80ea016856f28ade2","date":"2019-03-29 10:44:52 -0400","message":"client, structs comments","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"658916e3274efa438beadc2535f47109d0c2f0f2","date":"2019-03-29 10:55:34 -0400","message":"structs missed applying a style change from the review","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"7857ac5993a578474d0570819f99b7b6e027de40","date":"2019-03-29 11:08:23 -0400","message":"client tests assert the independent handling of interface and speed","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"596f16fb5f1a4a6766a57b3311af806d22382609","date":"2019-03-29 13:43:39 -0400","message":"fingerprint Constraints and Affinities have Equals, as set","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"f1d7464818a70a23058b3ba198faef0d21e4e0d8","date":"2019-04-11 14:11:32 +0000","message":"terraform/packer: revert name of AMI to generic \"hashistack\" instead of my name","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"6328294c74cc4828c42180b49505361eaaa2cf66","date":"2019-04-11 14:13:30 +0000","message":"terraform: modified default client instance type to a more reasonable t2.medium, left commented GPU instance type","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"3171529c73fe899262ab070d8de66885e3c3c03d","date":"2019-04-11 10:18:28 -0400","message":"Merge pull request #5550 from hashicorp/cgbaker/update-terraform","refs":[],"body":"More terraform updates","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"c45652ab8c113487b9d4fbfb107782cbcf8a85b0","date":"2019-04-11 10:25:19 -0400","message":"Revert accidental merge of pr #5482","refs":["origin/b-revert-fingerprinter-manual-config"],"body":"Revert \"fingerprint Constraints and Affinities have Equals, as set\"\nThis reverts commit 596f16fb5f1a4a6766a57b3311af806d22382609.\n\nRevert \"client tests assert the independent handling of interface and speed\"\nThis reverts commit 7857ac5993a578474d0570819f99b7b6e027de40.\n\nRevert \"structs missed applying a style change from the review\"\nThis reverts commit 658916e3274efa438beadc2535f47109d0c2f0f2.\n\nRevert \"client, structs comments\"\nThis reverts commit be2838d6baa9d382a5013fa80ea016856f28ade2.\n\nRevert \"client fingerprint updateNetworks preserves the network configuration\"\nThis reverts commit fc309cb430e62d8e66267a724f006ae9abe1c63c.\n\nRevert \"client_test cleanup comments from review\"\nThis reverts commit bc0bf4efb9114e699bc662f50c8f12319b6b3445.\n\nRevert \"client Networks Equals is set equality\"\nThis reverts commit f8d432345b54b1953a4a4c719b9269f845e3e573.\n\nRevert \"struct cleanup indentation in RequestedDevice Equals\"\nThis reverts commit f4746411cab328215def6508955b160a53452da3.\n\nRevert \"struct Equals checks for identity before value checking\"\nThis reverts commit 0767a4665ed30ab8d9586a59a74db75d51fd9226.\n\nRevert \"fix client-test, avoid hardwired platform dependecy on lo0\"\nThis reverts commit e89dbb2ab182b6368507dbcd33c3342223eb0ae7.\n\nRevert \"refactor error in client fingerprint to include the offending data\"\nThis reverts commit a7fed726c6e0264d42a58410d840adde780a30f5.\n\nRevert \"add client updateNodeResources to merge but preserve manual config\"\nThis reverts commit 84bd433c7e1d030193e054ec23474380ff3b9032.\n\nRevert \"refactor struts.RequestedDevice to have its own Equals\"\nThis reverts commit 689782524090e51183474516715aa2f34908b8e6.\n\nRevert \"refactor structs.Resource.Networks to have its own Equals\"\nThis reverts commit 49e2e6c77bb3eaa4577772b36c62205061c92fa1.\n\nRevert \"refactor structs.Resource.Devices to have its own Equals\"\nThis reverts commit 4ede9226bb971ae42cc203560ed0029897aec2c9.\n\nRevert \"add COMPAT(0.10): Remove in 0.10 notes to impl for structs.Resources\"\nThis reverts commit 49fbaace5298d5ccf031eb7ebec93906e1d468b5.\n\nRevert \"add structs.Resources Equals\"\nThis reverts commit 8528a2a2a6450e4462a1d02741571b5efcb45f0b.\n\nRevert \"test that fingerprint resources are updated, net not clobbered\"\nThis reverts commit 8ee02ddd23bafc87b9fce52b60c6026335bb722d.\n","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"cfb1aa2010e14e73e96180cc409a1af7a77a2b60","date":"2019-04-11 11:55:21 -0400","message":"Merge pull request #5551 from hashicorp/b-revert-fingerprinter-manual-config","refs":[],"body":"Revert accidental merge of pr #5482","author_name":"Lang Martin","author_email":"lang.martin@gmail.com"},{"hash":"5ea4382af7c836ccbc8bbcd763691aad0cccd2e2","date":"2019-03-28 08:59:27 -0700","message":"api: fix migrate stanza initialization","refs":["origin/b-validate-migrate"],"body":"Fixes Migrate to be initialized like RescheduleStrategy.\n\nFixes #5477\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"ec3b8cd9ec95fcae09142d02b3fba7fe01e6c462","date":"2019-04-11 16:36:49 -0700","message":"Merge pull request #5505 from nfagerlund/mar19_middleman_update","refs":[],"body":"website: Update hashicorp-middleman container to v0.3.39","author_name":"Nick Fagerlund","author_email":"nick@hashicorp.com"},{"hash":"768bfdf87d45ceb64b76cd18e49b235b5de4ca05","date":"2019-04-11 18:15:35 -0700","message":"Reduce the number of task groups and task events that are made","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"aba4882dcb1641f32b7de517125635a0c7fab215","date":"2019-04-11 20:08:09 -0700","message":"Introduce the concept of 'shallow' job models in Mirage","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"daa9f7d5200f2f962d52e38086543591e992e3d4","date":"2019-04-11 20:08:43 -0700","message":"Speed up slow acceptance tests with shallow jobs and generally less models","refs":["origin/b-ui-make-tests-faster","b-ui-make-tests-faster"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"377c1d694bc3a47415c5ecb3afaed52d858c4879","date":"2019-04-12 15:05:49 +0000","message":"vault namespaces: inject VAULT_NAMESPACE alongside VAULT_TOKEN + documentation","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"a134c16c22218aea4d666d31f8e5ea8b2002f6ce","date":"2019-04-12 10:32:48 -0500","message":"remove stray new line","refs":["origin/f-preemption-scheduler-refactor"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c38a98e5bbde988f5d5bcfbcc3b6b4995f6b7b19","date":"2019-04-12 15:48:36 +0000","message":"cli: add `acl token list` command, documentation docs: fix some incorrect acl policy docs (typos, copy-paste errors)","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"68470e9fefda15d4b5d6ee5b4edb6c367bec1a2c","date":"2019-04-12 12:56:55 -0400","message":"Merge pull request #5557 from hashicorp/nmd-1409-cli-acl-token-list","refs":[],"body":"cli: add `acl token list` command, documentation","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"176b48c2728e65e518b87d107c20452c655a4b5b","date":"2019-04-12 12:37:59 -0500","message":"Merge pull request #5545 from hashicorp/f-preemption-scheduler-refactor","refs":[],"body":"Refactor scheduler package to enable preemption for batch/service jobs","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"42f867aa548b38b9a5af12a524a457eb3e9131b6","date":"2019-04-12 12:59:31 -0500","message":"list singularity as a community driver","refs":[],"body":"Signed-off-by: Eduardo Arango <eduardo@sylabs.io>\n","author_name":"Eduardo Arango","author_email":"eduardo@sylabs.io"},{"hash":"7a6a2d3274cfaa71f161f0f2fab3b0574714cfc4","date":"2019-04-12 14:21:47 -0400","message":"Merge pull request #5556 from hashicorp/nmd-1403-vault-namespace-task-env","refs":[],"body":"vault namespaces: inject VAULT_NAMESPACE alongside VAULT_TOKEN","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"1c38ced33adf905f40e56b873c986f548938acdf","date":"2019-04-12 11:41:03 -0700","message":"Merge pull request #5558 from hashicorp/b-ui-make-tests-faster","refs":[],"body":"UI: Make tests faster","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"f011f616456dc60f1078796118b2778387232fae","date":"2019-04-12 18:56:02 +0000","message":"cli: add support for periodic force evaluation","refs":[],"body":"resolves #3251\n","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"e6da05276cecc87654d55bc3194700ad27c2758d","date":"2019-04-12 15:05:56 -0400","message":"minor typographical changes","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"165244a9b7ce0ffd191ceec2d5ef09c84b2e772c","date":"2019-04-12 19:12:42 +0000","message":"changes to appease gofmt","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"570efaa05b52adacf747b6080fb1f43e43f46644","date":"2019-04-12 20:55:55 +0000","message":"gofmt/goimport and test formatting","refs":["origin/f-3251-cli-force-periodic"],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"62094263beedaa8053bf2b08410ff15c2173f7ee","date":"2019-04-12 16:26:52 -0500","message":"address requestec changes, iteration 1","refs":[],"body":"Signed-off-by: Eduardo Arango <eduardo@sylabs.io>\n","author_name":"Eduardo Arango","author_email":"eduardo@sylabs.io"},{"hash":"e7ee1f65fc869e1fda3991633bdab1387b02399b","date":"2019-04-12 16:27:33 -0500","message":"Merge branch 'website_docs_singularity' of github.com:ArangoGutierrez/nomad into website_docs_singularity","refs":[],"body":"","author_name":"Eduardo Arango","author_email":"eduardo@sylabs.io"},{"hash":"66b6583ae502f9392a6242b8a8474aa32c4e0de7","date":"2019-04-15 11:14:51 +0200","message":"Update CHANGELOG","refs":[],"body":"Add `nomad alloc restart` and `nomad status -verbose`\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"dbdc057cce57f80591984047757bc7c014b28380","date":"2019-04-15 09:40:35 -0400","message":"Merge pull request #5560 from hashicorp/f-3251-cli-force-periodic","refs":[],"body":"cli: add support for periodic force evaluation","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"8b980f98d2fdd75d40b0f409134b6968af1f9c05","date":"2019-04-15 09:49:30 -0400","message":"Update singularity.html.md","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"4dab9ed3484a1d312f0a77ef0d6a5d80a36b0060","date":"2019-04-15 11:12:06 +0200","message":"docs: Add docs for nomad-alloc-restart","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"8982fb3c431d0c62cec69a86f689e51f1f396b5d","date":"2019-04-15 17:26:28 +0200","message":"Merge pull request #5565 from hashicorp/dani/alloc-restart-docs","refs":[],"body":"docs: Add docs for nomad-alloc-restart","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"6943943a92f7faaa059519d182bb66799bf41e50","date":"2019-04-15 09:44:59 -0700","message":"Merge pull request #5486 from hashicorp/b-validate-migrate","refs":[],"body":"api: fix migrate stanza initialization","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"eeb282ca2fce2225d6f9959ed021f744f4bbdda1","date":"2019-04-15 14:11:58 -0700","message":"Merge pull request #5518 from hashicorp/f-simplify-kill","refs":[],"body":"client: simplify kill logic","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"316a161ce8a786b01e8aca5f00f346e856c78ff6","date":"2019-04-15 21:20:09 -0400","message":"open fifo on background goroutine","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"96a54cbbd34c5c41c028466908738299b045f7e3","date":"2019-04-16 10:48:25 -0400","message":"locking and opening streams in goroutine comment","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0e6da17a8f86d70d5d4c0a3cd7429b0134a16e96","date":"2019-03-27 09:35:37 -0700","message":"vault: fix renewal time","refs":[],"body":"Renewal time was being calculated as 10s+Intn(lease-10s), so the renewal\ntime could be very rapid or within 1s of the deadline: [10s, lease)\n\nThis commit fixes the renewal time by calculating it as:\n\n\t(lease/2) +/- 10s\n\nFor a lease of 60s this means the renewal will occur in [20s, 40s).\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b135d28450865ab9541f44100b109206d18024bf","date":"2019-03-27 11:02:45 -0700","message":"vault: fix data races","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"888304b0746193f12f555351502059699073be34","date":"2019-04-11 08:00:28 -0700","message":"changelog: add #5479","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"009b750e219ab674bca9ce34ccd77a193a061207","date":"2019-04-16 12:20:26 -0700","message":"Merge pull request #5479 from hashicorp/b-vault-renewal","refs":[],"body":"vault: fix renewal time","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"bd0d641a5ed7a6b4e7941bd810e7fd8d8a400192","date":"2019-04-16 16:59:59 -0500","message":"address @cgbaker comments","refs":[],"body":"Signed-off-by: Eduardo Arango <eduardo@sylabs.io>\n","author_name":"Eduardo Arango","author_email":"eduardo@sylabs.io"},{"hash":"9f97da0956aaaa90c68c81ef4140f817988a5bd5","date":"2019-04-16 17:01:22 -0500","message":"resolve merge conflicts","refs":[],"body":"Signed-off-by: Eduardo Arango <eduardo@sylabs.io>\n","author_name":"Eduardo Arango","author_email":"eduardo@sylabs.io"},{"hash":"c07b72959d112cb73a327e7999339b3bca811762","date":"2019-04-16 19:34:37 -0400","message":"Merge pull request #5568 from hashicorp/b-nomad-logger-restart","refs":[],"body":"Fixes #5566 .\r\n\r\nFix a case where docker logging process may lock up nomad agent restart.\r\n\r\nLooks like we have a case where docker logger is started even through logmon isn't. In such case, the fifo writer blocks indefinitely and because the open operation happens in the main goroutine, nomad agent blocks indefinitely.\r\n\r\nThis fixes the issue where the fifo open operation happens in goroutine instead of main goroutine.\r\n\r\nWe should follow up independently to ensure logmon <-> dockerlogger ordering and consider having task recovery happen in non-main goroutine with some sensible timeouts.","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"acf8ab8665b44c9b57e41a105f21bc735e10bf28","date":"2019-04-17 11:31:55 +0200","message":"docs: Clairfy docker volume behaviour","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"4a0da839a901b986e9248a833461d9d34a8c66ae","date":"2019-04-17 10:12:43 -0400","message":"fixed header level","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"15c64875d12d9020f4d98426361647d42fed9890","date":"2019-04-17 12:42:29 -0400","message":"Merge pull request #5559 from ArangoGutierrez/website_docs_singularity","refs":[],"body":"list singularity as a community driver","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"269e2c00fb66e5645ba9582108d25624d03ffa8b","date":"2019-04-18 12:50:49 +0200","message":"loggging: Attempt to recover logmon failures","refs":[],"body":"Currently, when logmon fails to reattach, we will retry reattachment to\nthe same pid until the task restart specification is exhausted.\n\nBecause we cannot clear hook state during error conditions, it is not\npossible for us to signal to a future restart that it _shouldn't_\nattempt to reattach to the plugin.\n\nHere we revert to explicitly detecting reattachment seperately from a\nlaunch of a new logmon, so we can recover from scenarios where a logmon\nplugin has failed.\n\nThis is a net improvement over the current hard failure situation, as it\nmeans in the most common case (the pid has gone away), we can recover.\n\nOther reattachment failure modes where the plugin may still be running\ncould potentially cause a duplicate process, or a subsequent failure to launch\na new plugin.\n\nIf there was a duplicate process, it could potentially cause duplicate\nlogging. This is better than a production workload outage.\n\nIf there was a subsequent failure to launch a new plugin, it would fail\nin the same (retry until restarts are exhausted) as the current failure\nmode.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"ccce364cbdf7560725a25b54ff5a420d11a44b5a","date":"2019-04-17 11:13:34 +0200","message":"Switch to pre-0.9 behaviour for handling volumes","refs":[],"body":"In Nomad 0.9, we made volume driver handling the same for `\"\"`, and\n`\"local\"` volumes. Prior to Nomad 0.9 however these had slightly different\nbehaviour for relative paths and named volumes.\n\nPrior to 0.9 the empty string would expand relative paths within the task\ndir, and `\"local\"` volumes that are not absolute paths would be treated\nas docker named volumes.\n\nThis commit reverts to the previous behaviour as follows:\n\n| Nomad Version | Driver  |   Volume Spec    | Behaviour                 |\n|-------------------------------------------------------------------------\n| all           | \"\"      | testing:/testing | allocdir/testing          |\n| 0.8.7         | \"local\" | testing:/testing | \"testing\" as named volume |\n| 0.9.0         | \"local\" | testing:/testing | allocdir/testing          |\n| 0.9.1         | \"local\" | testing:/testing | \"testing\" as named volume |\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"4789948ba8c98c2a9e357d3738cf0986a73ac369","date":"2019-04-18 14:30:16 +0200","message":"Merge pull request #5573 from hashicorp/dani/update-vol-docs","refs":[],"body":"docs: Clarify docker volume behaviour","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"11388ab99254143ae8f4bf08748ef606521204ca","date":"2019-04-18 15:48:23 +0200","message":"Merge pull request #5572 from hashicorp/dani/b-docker-volumes","refs":[],"body":"Switch to pre-0.9 behaviour for handling volumes","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"ad77c18c8739fc30c550c6cb825a5f96fc4c69d9","date":"2019-04-18 10:24:31 -0500","message":"Add preemption related fields to AllocationListStub","refs":["origin/f-api-preemption-info"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"83a2e693b7b06f8500017e4d8220e281a3b11df2","date":"2019-04-18 18:38:25 -0700","message":"Merge pull request #5580 from hashicorp/f-api-preemption-info","refs":[],"body":"Add preemption related fields to AllocationListStub","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"77a8fda87cd1d3a6282f83c79c693c36ffe374e9","date":"2019-04-19 11:07:13 +0200","message":"fix nil pointer in fingerprinting AWS env leading to crash","refs":[],"body":"  HTTP Client returns a nil response if an error has occured. We first\n  need to check for an error before being able to check the HTTP response\n  code.\n","author_name":"Yorick Gersie","author_email":"ygersie@ebay.com"},{"hash":"7a68d7616064d873eee0dbedf33763de43ab3bd9","date":"2019-04-19 09:00:24 -0400","message":"client: wait for batched driver updated","refs":[],"body":"Here we retain 0.8.7 behavior of waiting for driver fingerprints before\nregistering a node, with some timeout.  This is needed for system jobs,\nas system job scheduling for node occur at node registration, and the\nrace might mean that a system job may not get placed on the node because\nof missing drivers.\n\nThe timeout isn't strictly necessary, but raising it to 1 minute as it's\ncloser to indefinitely blocked than 1 second.  We need to keep the value\nhigh enough to capture as much drivers/devices, but low enough that\ndoesn't risk blocking too long due to misbehaving plugin.\n\nFixes https://github.com/hashicorp/nomad/issues/5579\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"92a4033a1a66d7cc35b3940b0051fa7fc5db73dd","date":"2019-04-19 08:02:48 -0500","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"9dcebcd8a3103f43636a4e13d4e6a02feebbc30b","date":"2019-04-19 09:12:50 -0400","message":"client: avoid registering node twice right away","refs":[],"body":"I noticed that `watchNodeUpdates()` almost immediately after\n`registerAndHeartbeat()` calls `retryRegisterNode()`, well after 5\nseconds.\n\nThis call is unnecessary and made debugging a bit harder.  So here, we\nensure that we only re-register node for new node events, not for\ninitial registration.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9a2f46f3324c66ea5a8b4f7d4fbb086ff2b96e30","date":"2019-04-19 09:15:25 -0400","message":"client: log detected driver health state","refs":[],"body":"Noticed that `detected drivers` log line was misleading - when a driver\ndoesn't fingerprint before timeout, their health status is empty string\n`\"\"` which we would mark as detected.\n\nNow, we log all drivers along with their state to ease driver\nfingerprint debugging.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8041b0cbe2e17f82fe27fb4f471db0e894c75fcb","date":"2019-04-19 09:31:43 -0400","message":"clarify cryptic log line","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9050f5f611c0c4d849ab575f9c196ac3bda67f4b","date":"2019-04-19 09:47:21 -0400","message":"Merge pull request #5585 from hashicorp/b-drivers-node-registration","refs":[],"body":"client: wait for batched driver updates before registering nodes","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"0088f40fd4ae8a505afa59096d4b64828c49cb6d","date":"2019-03-18 15:29:50 -0400","message":"vendor upstream opencontainers/runc","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b6af5c9dca9d479fe9d2406699335ea74ebe4d2a","date":"2019-03-18 17:36:31 -0400","message":"Move libcontainer helper to executor package","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9bf54eae9798c29537428eda197781d057c49240","date":"2019-04-19 09:40:30 -0400","message":"comment what  refer to","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6747195682d84dcc5abc181e651b2a76267b7c5f","date":"2019-04-19 09:45:50 -0400","message":"comment on using init() for libcontainer handling","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"54e1e0760b672c50b60515b3035be25b672def95","date":"2019-04-19 10:15:13 -0400","message":"Merge pull request #5437 from hashicorp/r-upstream-libcontainer-plain","refs":[],"body":"Use upstream libcontainer package ","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"8a0df4034dc4dee6a243f349e90f3dafe0941fc4","date":"2019-04-19 08:08:59 -0700","message":"Merge pull request #5583 from ygersie/fingerprint_nilpointer","refs":[],"body":"fix nil pointer in fingerprinting AWS env leading to crash","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"583ae3722cb75796cfcf60281a430a487e00fd0f","date":"2019-04-11 13:17:26 -0400","message":"client fingerprinter doesn't overwrite manual configuration","refs":[],"body":"Revert \"Revert accidental merge of pr #5482\"\nThis reverts commit c45652ab8c113487b9d4fbfb107782cbcf8a85b0.\n","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"3e1c6ac89025b8144aa849508a749c9429ec11a6","date":"2019-04-18 12:28:34 -0400","message":"struct equals use a working pattern for setwise comparison","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"228a7d612473786c5123b6901213043e7cb5010c","date":"2019-04-18 13:36:45 -0400","message":"structs equals use labeled continue for clarity","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5c7e10e0b9fca0b6e06b892f5596b6787ea48e74","date":"2019-04-19 10:12:44 -0400","message":"structs need to keep assert Equal interface implementation for tests","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"a3e8f516430d21167d1795430aa5c42b7299b495","date":"2019-04-19 12:39:38 -0700","message":"docs: bump deployment guide to 0.9.0","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f5c621979e1578434b894438fe39ebb17ab08feb","date":"2019-04-19 15:49:24 -0400","message":"tests over setwise equality of fingerprinted parts","refs":["origin/b-fingerprinter-manual-config"],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"7d8fa4c04543e4ade966829378797448cea9008b","date":"2019-04-10 19:02:35 +0000","message":"client/metrics: modified metrics to use (updated) client copy of allocation instead of (unupdated) server copy","refs":["origin/b/5540-bad-client-alloc-metrics"],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"0f91277d852cd1f5ef2f37d240b6beac394f23c5","date":"2019-04-22 14:40:17 -0400","message":"tweak logging level for failed log line","refs":[],"body":"Co-Authored-By: notnoop <mahmood@notnoop.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"151e0ae772184c53e0b0dfd9b6dc9677230924bf","date":"2019-04-22 14:40:24 -0400","message":"Merge pull request #5577 from hashicorp/dani/b-logmon-unrecoverable","refs":[],"body":"logging: Attempt to recover logmon failures","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"7b4ac71d2fd07619b5200ee5ee42a373d7d69847","date":"2019-04-22 15:07:30 -0400","message":"Merge pull request #5541 from hashicorp/b/5540-bad-client-alloc-metrics","refs":[],"body":"client/metrics: fixed stale metrics ","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"184e171e114ac87a44b0a6b617f20ba718dcd0c7","date":"2019-04-22 19:27:40 +0000","message":"changelog: added entry for #5540 fix","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"95bc6fe301ea495920636fb15450b82bc2259bdc","date":"2019-04-22 12:29:22 -0700","message":"Merge pull request #5586 from hashicorp/docs-deploy-ver","refs":[],"body":"docs: bump deployment guide to 0.9.0","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"09c998a4a160b87a3d7dbc116d707da8c5bffe21","date":"2019-04-22 15:31:22 -0400","message":"Merge pull request #5591 from hashicorp/cgbaker/changelog","refs":[],"body":"changelog: added entry for #5540 fix","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"cf1d4a3a1e4c8b643c23cb492aaabbb053810bf1","date":"2019-04-16 12:11:43 -0700","message":"Data modeling for preemptions","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c456c5eed085b279dbb4f8290399c4d844d158f7","date":"2019-04-16 12:13:33 -0700","message":"Show preemptions on the job plan phase of job submission","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"384a0e5a54a0f5dcc34edfb00145add140133518","date":"2019-04-16 13:23:16 -0700","message":"Add wasPreempted bool to allocs","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"dca386ca704ce6ffedbc98fbfa27083017e6e462","date":"2019-04-17 10:46:55 -0700","message":"Make sure tooltips show up over the top of the side bar","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a33b105181e6f8c11c51d134058856f1daa44562","date":"2019-04-17 10:47:32 -0700","message":"Add preempted icon to alloc row","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7ae2081282ecbd7e07df3335dd3eece26702bc81","date":"2019-04-17 11:19:54 -0700","message":"Preemptions count and filtering on client detail page","refs":[],"body":"Show the count in the allocations table next to the existing total alloc\ncount badge. Clicking either will filter by all or by preemptions.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"400deae4ce0fdc3111ecc0d1a2af1423321a8e54","date":"2019-04-17 16:17:48 -0700","message":"Show which alloc, if any, preempted an alloc on the alloc detail page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4752950cae4af44d5b44b527854477ab705d0977","date":"2019-04-17 16:34:25 -0700","message":"Show which allocations an allocation preempted on the alloc page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4c773a1f3c80d921c63a5402f4d9ee48b243425a","date":"2019-04-19 17:51:32 -0700","message":"Add preemption properties to Mirage allocation factory","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"d4ae0a2819aaff6d56fe76a832fc43ce7bb5774d","date":"2019-04-19 17:51:45 -0700","message":"Integration test for the alloc row icon","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c7e1598ed384cddb5712285bc32435c59f50f6b3","date":"2019-04-22 16:09:56 -0700","message":"Preemption modeling as page objects","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"5aa938e121d32aca262908ae9f2e965d91dcef96","date":"2019-04-22 16:10:21 -0700","message":"Test coverage for preemption on the allocation detail page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"d092723f8962334e71e3c421e6be8ac9919e76cb","date":"2019-04-22 16:39:07 -0700","message":"Test coverage for preemption on the client detail page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4166a715fbb32f0690c11a99ff764c9f3d5f7594","date":"2019-04-22 17:20:52 -0700","message":"Updated serializer unit tests","refs":["origin/f-ui-preemptions","f-ui-preemptions"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"bb142af5d633359c0decb4404485847876541793","date":"2019-04-01 16:21:03 +0200","message":"allocs: Add nomad alloc stop","refs":[],"body":"This adds a `nomad alloc stop` command that can be used to stop and\nforce migrate an allocation to a different node.\n\nThis is built on top of the AllocUpdateDesiredTransitionRequest and\nexplicitly limits the scope of access to that transition to expose it\nunder the alloc-lifecycle ACL.\n\nThe API returns the follow up eval that can be used as part of\nmonitoring in the CLI or parsed and used in an external tool.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"9a4fe5e98f52da78ca14a7406c63b2c4a69cce64","date":"2019-04-23 13:05:08 +0200","message":"Merge pull request #5512 from hashicorp/dani/f-alloc-stop","refs":[],"body":"alloc-lifecycle: nomad alloc stop","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"04d4d86e16f39bbf541eb3c0d8a039842b319a9e","date":"2019-04-23 13:12:08 +0200","message":"changelog: Update for GH-5512 and GH-5577","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"bc6b422d08c61e7bd23228e656656712d34d6813","date":"2019-04-23 13:22:27 +0200","message":"docs: Add documentation for","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"e4f57902f7614af8573cda35286da989ddefb4f4","date":"2019-04-23 13:28:21 +0200","message":"api docs: Add allocation stop","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"c07c0c810f0304a18670f7b87821285124ba5bce","date":"2019-04-23 09:22:48 -0400","message":"fix crash when executor parent nomad process dies","refs":[],"body":"Fixes https://github.com/hashicorp/nomad/issues/5593\n\nExecutor seems to die unexpectedly after nomad agent dies or is\nrestarted.  The crash seems to occur at the first log message after\nthe nomad agent dies.\n\nTo ease debugging we forward executor log messages to executor.log as\nwell as to Stderr.  `go-plugin` sets up plugins with Stderr pointing to\na pipe being read by plugin client, the nomad agent in our case[1].\nWhen the nomad agent dies, the pipe is closed, and any subsequent\nexecutor logs fail with ErrClosedPipe and SIGPIPE signal.  SIGPIPE\nresults into executor process dying.\n\nI considered adding a handler to ignore SIGPIPE, but hc-log library\ncurrently panics when logging write operation fails[2]\n\nThis we opt to revert to v0.8 behavior of exclusively writing logs to\nexecutor.log, while we investigate alternative options.\n\n[1] https://github.com/hashicorp/nomad/blob/v0.9.0/vendor/github.com/hashicorp/go-plugin/client.go#L528-L535\n[2] https://github.com/hashicorp/nomad/blob/v0.9.0/vendor/github.com/hashicorp/go-hclog/int.go#L320-L323\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c76130c05258dde0c00ff7213ddc2c4f38281fc7","date":"2019-04-23 10:15:30 -0400","message":"Merge pull request #5598 from hashicorp/b-dont-forward-logs","refs":[],"body":"fix crash when executor parent nomad process dies","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"ff9b3e370aa4d5731b7014490c15068660bf487f","date":"2019-04-23 11:15:26 -0400","message":"website: fixs a few errors in new plugin docs","refs":["origin/website/plugin-docs"],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"cfad24c9760e7b434cd1bedfd04d820a90debe4c","date":"2019-04-23 11:22:08 -0400","message":"website: add plugin docs (#5501)","refs":[],"body":"website: add plugin docs","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"c2ffc69a41a9eacf28ab3790b30a6670e74ffdc6","date":"2019-04-23 08:47:21 -0700","message":"docs: add download link to 0.9.1-rc1","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"987ed01b110d59defc2c8135fe9b303b244d8477","date":"2019-04-23 08:54:41 -0700","message":"Merge pull request #5599 from hashicorp/docs-091rc1","refs":[],"body":"docs: add download link to 0.9.1-rc1","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"35aa0701893508e1f3ef687ed2e0b98392867a2d","date":"2019-04-19 17:37:31 -0400","message":"update vendor/github.com/hashicorp/hcl","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"4eedab18a75a4545a853c7668a8ef13d3fe507be","date":"2019-03-04 01:49:32 -0800","message":"Add code for plan normalization","refs":[],"body":"","author_name":"Arshneet Singh","author_email":"arsh.johar@gmail.com"},{"hash":"f75c6b4bdb0dbc4e3c1f37cd06f5e70a0d450b81","date":"2019-03-05 13:41:41 -0800","message":"Add tests for plan normalization","refs":[],"body":"","author_name":"Arshneet Singh","author_email":"arsh.johar@gmail.com"},{"hash":"02b832c3ffe713bc9a8c30e675891dae2d25b0f0","date":"2019-03-08 03:18:56 -0800","message":"Compat tags","refs":[],"body":"","author_name":"Arshneet Singh","author_email":"arsh.johar@gmail.com"},{"hash":"97686e371f61538d578e1a53038b348d8e81c994","date":"2019-03-08 04:48:12 -0800","message":"Remove allowPlanOptimization from schedulers","refs":[],"body":"","author_name":"Arshneet Singh","author_email":"arsh.johar@gmail.com"},{"hash":"ee268a58db2aca9ddb737a5aba702446a8740e32","date":"2019-04-10 17:15:04 -0700","message":"Add comments to functions, and use require instead of assert","refs":[],"body":"","author_name":"Arshneet Singh","author_email":"arsh.johar@gmail.com"},{"hash":"9b97436080e898d6ea8061336a18a22134834b3f","date":"2019-04-23 17:00:11 -0400","message":"structs_test use testify require.True instead of t.Fatal","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"93e115e14e7cf60bb0a8ad9dd3431336972edab3","date":"2019-04-24 10:48:57 -0500","message":"Merge pull request #5606 from hashicorp/docs-ea-update-0.9","refs":[],"body":"Docs ea update 0.9","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"a54f32281457d4119117e26564d17e9846c4da81","date":"2019-04-24 12:43:16 -0500","message":"singularity_path -> singularity_cache","refs":[],"body":"Signed-off-by: Eduardo Arango <eduardo@sylabs.io>\n","author_name":"Eduardo Arango","author_email":"eduardo@sylabs.io"},{"hash":"712e774ccfedb5cf8607ab826fd0c2623e5204c9","date":"2019-04-24 10:53:53 -0700","message":"Merge pull request #5594 from hashicorp/f-ui-preemptions","refs":[],"body":"UI: Preemptions","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ab2718c8505a26913e1b0d8e7ac90ce604bb18b2","date":"2019-04-24 11:01:13 -0700","message":"Return error when preempted/stopped alloc doesn't exist during denormalization","refs":[],"body":"","author_name":"Arshneet Singh","author_email":"arsh.johar@gmail.com"},{"hash":"23bc1f26800d25e0dc37b50e9923cd8bbe8a42b7","date":"2019-04-24 11:01:59 -0700","message":"Change min version required for plan optimization","refs":[],"body":"","author_name":"Arshneet Singh","author_email":"arsh.johar@gmail.com"},{"hash":"3116f799677c0df1e36947e54435d533dbd36285","date":"2019-04-24 15:51:26 -0400","message":"Minor typo fix","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"653b89e8fd369865b683a50c8fae80a3d0750276","date":"2019-04-24 14:02:49 -0700","message":"Merge pull request #5607 from ArangoGutierrez/website_singularity","refs":[],"body":"singularity_path -> singularity_cache","author_name":"Michael Schurter","author_email":"schmichael@hashicorp.com"},{"hash":"8d48b77bca93a4908c83cd15519b74718d797157","date":"2019-04-24 14:07:26 -0700","message":"Merge pull request #5602 from hashicorp/normalized-plan","refs":[],"body":"Normalize plan to increase the plan apply throughput","author_name":"Arshneet Singh","author_email":"arshjohar@users.noreply.github.com"},{"hash":"ce8a8a53267cc7faced01b0f8c4916087df4b988","date":"2019-04-24 22:00:00 -0400","message":"driver/docker: collect tty container logs","refs":[],"body":"Fixes https://github.com/hashicorp/nomad/issues/5475\n\nWhen container is a tty container, we need to get raw terminal output\nwithout any additional processing.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a4ed10902bf5c59a65c0ab368f40d50f06eff5be","date":"2019-04-25 12:23:09 +0200","message":"Merge pull request #5597 from hashicorp/dani/doc-alloc-stop","refs":[],"body":"Documentation for `nomad alloc stop`","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"023d0dff3159c175e95831cb906583becf14c778","date":"2019-04-03 12:46:15 +0200","message":"allocs: Add nomad alloc signal command","refs":[],"body":"This command will be used to send a signal to either a single task within an\nallocation, or all of the tasks if <task-name> is omitted. If the sent signal\nterminates the allocation, it will be treated as if the allocation has crashed,\nrather than as if it was operator-terminated.\n\nSignal validation is currently handled by the driver itself and nomad\ndoes not attempt to restrict or validate them.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"2764fc8c3ce2d7ca706aac41dc84129b534a9652","date":"2019-04-25 08:28:32 -0400","message":"Merge pull request #5609 from hashicorp/b-docker-tty-logs","refs":[],"body":"driver/docker: collect tty container logs","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e97dfce7e19e548648c47fc28090f65c80e5fd77","date":"2019-04-25 14:39:49 +0200","message":"docs: Add nomad alloc signal docs","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"05ef73c3763912d02b0c32257e9c54beaca866cc","date":"2019-04-25 14:40:09 +0200","message":"docs: Fix copy/paste error in alloc-restart docs","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"e8a46100176fadfc43420943c730261d81792166","date":"2019-02-24 21:00:59 -0500","message":"vendor docker/docker volume utils","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"fce6564ce47f66b558209dc080019dd8f14a6b32","date":"2019-02-24 21:35:51 -0500","message":"driver/docker: Support `volumes` field in Windows","refs":[],"body":"Support Docker `volumes` field in Windows.  Previously, volumes parser\nassumed some Unix-ism (e.g. didn't expect `:` in mount paths).\nHere, we use the Docker parser to identify host and container paths.\n\nDocker parsers use different validation logic from our previous unix\nimplementation: Docker parser accepts single path as a volume entry\n(parsing it as a container path with auto-created volume) and enforces\nadditional checks (e.g. validity of mode).  Thereforce, I opted to use\nDocker parser only for Windows, and keep Nomad's linux parser to\npreserve current behavior.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"81c7c467a7885d8556cc688aceee0e8fcde3ca80","date":"2019-04-25 12:51:07 -0500","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"c23d673b7e2c551c137827b4bc33e48341fa1f2e","date":"2019-04-25 14:32:24 -0400","message":"logmon client to handle grpc closing errors","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b21849cb028707037a07b788f946d452991151b1","date":"2019-04-25 15:07:08 -0400","message":"logmon: retry starting logmon if it exits","refs":[],"body":"Retry if we detect shutting down during Start() api call is started,\nlocally.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"978fc65a2b07f8ab49856368225a4111f71c8ebd","date":"2019-04-25 16:26:01 -0400","message":"add a test that simulates logmon dying during Start() call","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0afd2c1d903f34d6159c6e83b1199ce1a2aa8781","date":"2019-04-17 15:27:50 -0700","message":"dev/hooks/pre-push refuses to push to master, still checks oss","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"62067ff3cc631305ef12fe9c268164c567de30f4","date":"2019-04-17 15:28:17 -0700","message":"make bootstrap installs git hooks pre-push by default","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"ba373fee2aa4be5b09aa3bc3c1440aad9ab1346b","date":"2019-04-25 17:16:29 -0400","message":"try sleeping for stop signal to take effect","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"1f1551a4aecd1de2cda377dba864bb5cd3a8dc9c","date":"2019-04-25 18:09:36 -0400","message":"add logging about attempts","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"658a734912e4355675729becb86dd149ac80b067","date":"2019-04-25 18:16:13 -0400","message":"try checking process status","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a321901ad89281b6edbbbc069b79231e0790fcbe","date":"2019-04-25 18:39:17 -0400","message":"retry grpc unavailable errors even if not shutting down","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"1497b8ee00e959c7b67c0245ef59dae28e52aff7","date":"2019-04-25 21:42:09 -0400","message":"Merge pull request #5616 from hashicorp/b-retry-logmon-start-errs-2","refs":[],"body":"logmon: recover from shutting down call locally","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7f102bcea88c4e63319189dc7587bdbe156ae0e9","date":"2019-04-25 13:37:26 +0200","message":"alloc_signal: Add autcompletion and cmd tests","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"91fa55f4cccdd905453d210d59a1656dafb2e353","date":"2019-04-26 14:21:05 +0200","message":"Merge pull request #5515 from hashicorp/dani/f-alloc-signal","refs":[],"body":"allocs: Add nomad alloc signal command","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"d38789cfc2225488884a1b63bf6f12a65fe44c32","date":"2019-04-26 14:21:23 +0200","message":"Merge pull request #5612 from hashicorp/dani/alloc-signal-docs","refs":[],"body":"Docs for `nomad alloc signal`","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"4200d7116e42c744887ed627b2864c4727b97d91","date":"2019-04-26 10:12:42 -0400","message":"Merge pull request #5370 from hashicorp/f-windows-volume-binds","refs":[],"body":"drivers/docker: Support volumes field in Windows","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"33f550fb52411c67dd1e683e7cdae70a56e18979","date":"2019-04-26 12:55:34 -0400","message":"Merge pull request #5553 from hashicorp/b-fingerprinter-manual-config","refs":[],"body":"client fingerprinter doesn't overwrite manual configuration","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"1ff9798daa91c02eb42a6099448c827e1444fd46","date":"2019-04-26 11:28:09 -0700","message":"Update README.md","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"c7b53642df0751c0a38f1bff8b558b17bdb4c9b0","date":"2019-04-26 11:43:16 -0700","message":"updated hyperlinks.","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"9e0b3295c7127eabdee9e122d9b4ed627094d4ca","date":"2019-04-26 11:45:43 -0700","message":"Reordered guide lists + formatting with users/content.","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"80e3cf73cc6b6781b3c53c60fd8245973d084fda","date":"2019-04-26 11:46:30 -0700","message":"Update README.md","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"0c51383d54b98326716cc7cb4406a1be636f481f","date":"2019-04-26 11:48:13 -0700","message":"Update README.md","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"317cb174e312e8763d13c14d9ec6d632a8c62350","date":"2019-04-26 11:48:45 -0700","message":"Update README.md","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"5ae04a4e763771d9d551e0f6c37571c8aa7128be","date":"2019-04-26 14:27:10 -0400","message":"CHANGELOG.md add fix line for #2619","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5aaae70a991c0ba1c1df2841c2539a4e46a33d5d","date":"2019-04-28 13:31:43 -0400","message":"check that /api doesn't import internal nomad pkgs","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"1a54a0b8391a68ff2579023493dad15ce45605d4","date":"2019-04-27 08:33:47 -0400","message":"divest /api from nomad/structs","refs":[],"body":"The API package needs to be independent from rest of nomad packages, to\navoid leaking internal packages and dependencies (e.g. raft, ugorji,\netc)\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"634592eb15601c8508a6d71d9a0dd44d1b63c21e","date":"2019-04-28 16:24:08 -0400","message":"Merge pull request #5622 from hashicorp/b-divest-api-20190427","refs":[],"body":"divest /api from rest of nomad internal packages","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"60519861446033122aaeed6e65b7bd784c8e481c","date":"2019-04-28 12:05:45 -0400","message":"Update release/dist script with preflight","refs":[],"body":"Add a preflight check to ensure that AWS credentials is configured\nbefore creating tag.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"46f33761341e73f2d8dbbe04118ae6c6e50e013b","date":"2019-04-29 00:41:53 -0700","message":"Fixed Typo","refs":[],"body":"Fixed typo: scheduilng/scheduling.","author_name":"Justin Weissig","author_email":"jweissig@gmail.com"},{"hash":"7e2f78a7e914ccdf9b337451ff92a93d3cbb3472","date":"2019-04-29 10:25:45 +0200","message":"Merge pull request #5623 from jweissig/patch-4","refs":[],"body":"Fixed Typo","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"6ca6b85ba8ecc569f2d566d78baad202c538dc9c","date":"2019-04-29 11:46:50 -0500","message":"Update 0.9.1 links in website","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"b78b0f98fc4dec696c64917f3cc7336f521c4644","date":"2019-04-29 10:22:27 -0700","message":"Addressed Dani's comments.","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"51a4fee2f7db1a07e1173fada813baa42b98546c","date":"2019-04-29 15:46:20 -0700","message":"Merge pull request #5618 from hashicorp/yishan/revised-readme","refs":[],"body":"yishan/revised readme","author_name":"Yishan Lin","author_email":"yishan@hashicorp.com"},{"hash":"c9edc456617697803160e18c20d6d96a08baf7a6","date":"2019-04-29 18:48:07 -0500","message":"Add config to disable preemption for batch/service jobs","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"9f7703c56e5b8187ee07f97a2098202d329ab7f0","date":"2019-04-30 00:04:17 -0700","message":"Fixed typo","refs":[],"body":"Fixed typo: \"dots wil be\"/\"dots will be\".","author_name":"Justin Weissig","author_email":"jweissig@gmail.com"},{"hash":"8179d4aa212866f30e4196a3f879577f28d1717d","date":"2019-04-25 15:06:49 +0200","message":"Update master to reflect 0.9.1/0.9.2 split","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"90036dea15cd18006f3df343769214054731debb","date":"2019-04-30 10:35:22 +0200","message":"Merge pull request #5614 from hashicorp/dani/we-released-a-hotfix","refs":[],"body":"Update CHANGELOG and version.go to reflect 0.9.1/0.9.2 split","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"f94fd532edc07da4bd0e29d175731ed104f4709e","date":"2019-04-30 07:48:00 -0400","message":"update 0.9.1 changelog","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"15d40ac22f02cab6bcff6a30f29439ee839a43e6","date":"2019-04-30 08:59:16 -0400","message":"Merge pull request #5630 from jweissig/patch-5","refs":[],"body":"Fixed typo","author_name":"Charlie Voiselle","author_email":"charlie@hashicorp.com"},{"hash":"43cd7a71a6073160f19b0fa4beb88c4fef499262","date":"2019-04-28 17:06:56 -0400","message":"aux: helper method that returns token as well as ACL policy","refs":[],"body":"This helper returns the token as well as the ACL policy, to be used in a later\ncommit for logging the token info associated with nomad exec invocation.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"75349d647e3dcf9299b880acaa3595756340c7e1","date":"2019-04-28 17:32:07 -0400","message":"test helper for registering jobs with acl","refs":[],"body":"Test helper that allows registration of jobs when ACL is activated.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bac0d5f0edef79ffb97c8af3ddc982bde7edff6c","date":"2019-04-04 15:06:05 -0400","message":"config_parse add new ParseConfigFileDirectHCL","refs":[],"body":"- parse by using hcl.Decode directly\n- handle time.Duration strings in a second pass\n- report unexpected keys in a third pass\n","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"ae7a8da18c88f080ddfb62ef604c8410cc553dc6","date":"2019-04-04 14:16:08 -0400","message":"agent/config, config/* mapstructure tags -> hcl tags","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"0490a91f9dae3db6de67ddec4fb02018720e8076","date":"2019-04-04 15:12:07 -0400","message":"config_parse_test test direct hcl parsing","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"41bfd27df1a6e36c8ccfa7e61e5b6b6a9c970aa1","date":"2019-04-23 11:46:54 -0400","message":"config_parse remove unused multi-stage parsing via mapstructure","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"e6d6c0afed04195cd3e6645a58aa856104217c89","date":"2019-04-23 11:47:24 -0400","message":"config_parse_test remove redundant parse direct test","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"6abbf6a1c3151fc207291bc96e7f0da08068d520","date":"2019-04-25 14:54:20 -0400","message":"tag HCL bookkeeping keys with json:\"-\" to keep them out of the api","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c8fd0be03c80daa982240642ca7d23287aa78119","date":"2019-04-25 16:35:31 -0400","message":"govendor fetch github.com/hashicorp/hcl@99e2f22","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"6aa98c37ae945cfdb3a29acabd51ee2cde35c240","date":"2019-04-25 16:47:03 -0400","message":"config comment for future changes","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"4d3e86648e8f5e384034a7f84f0332f7e997a648","date":"2019-04-30 09:22:12 -0400","message":"config_parse_test additional config confirmation w/ sample json","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"d1dbbe868eec6a6ea3abb014e07f038118db9b1e","date":"2019-04-30 09:47:07 -0400","message":"config_parse leave the *HCL strings in place after converting times","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"cb7aa2bf91a78c062503714f44a638577769f7bc","date":"2019-04-30 10:31:35 -0400","message":"test case for 5540 (#5590)","refs":[],"body":"* client/metrics: modified metrics to use (updated) client copy of allocation instead of (unupdated) server copy\r\n\r\n* updated armon/go-metrics to address race condition in DisplayMetrics\r\n","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"e79ce1f9d00d806045ab0338d70cd9042a4e3ee5","date":"2019-04-28 17:18:52 -0400","message":"drivers/mock: extract command related operations","refs":[],"body":"Extract command parsing and execution mocking into a separate struct.  Also,\nallow mocking of different fs_isolation for testing.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4f7bd68f5ca9f330a894bfb4375b87f786e1e7a3","date":"2019-04-28 16:45:15 -0400","message":"Add ACL capabilities for nomad exec","refs":[],"body":"This adds `alloc-exec` capability to allow operator to execute command into a\nrunning task.  Furthermore, it adds `alloc-node-exec` capability, required when\nthe alloc task is raw_exec or a driver with no FSIsolation.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6d711d054ba9949eb879b61981e17d9925973204","date":"2019-04-28 16:58:56 -0400","message":"add nomad streaming exec core data structures and interfaces","refs":[],"body":"In this commit, we add two driver interfaces for supporting `nomad exec`\ninvocation:\n\n* A high level `ExecTaskStreamingDriver`, that operates on io reader/writers.\n  Drivers should prefer using this interface\n* A low level `ExecTaskStreamingRawDriver` that operates on the raw stream of\n  input structs; useful when a driver delegates handling to driver backend (e.g.\n  across RPC/grpc).\n\nThe interfaces are optional for a driver, as `nomad exec` support is opt-in.\nExisting drivers continue to compile without exec support, until their\nmaintainer add such support.\n\nFurthermore, we create protobuf structures to represent exec stream entities:\n`ExecTaskStreamingRequest` and `ExecTaskStreamingResponse`.  We aim to reuse the\nprotobuf generated code as much as possible, without translation to avoid\nconversion overhead.\n\n`ExecTaskStream` abstract fetching and sending stream entities.  It's influenced\nby the grpc bi-directional stream interface, to avoid needing any adapter.  I\nconsidered using channels, but the asynchronisity and concurrency makes buffer\nreuse too complicated, which would put more pressure on GC and slows exec operation.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2306928036f892ccf76f7e4ff0d12f5a1217cd47","date":"2019-04-30 14:52:03 -0400","message":"Merge pull request #5621 from hashicorp/r-release-preflight","refs":[],"body":"Update release/dist script with preflight","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"559c7cf9f59308ece09caacc0712658b98c77f1f","date":"2019-04-30 12:01:53 -0700","message":"Added Gitter to Resources + revised Overview for consistency.","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"0a1a29414fba76413ba66e94343492ef346b4cc1","date":"2019-04-30 16:36:10 -0400","message":"Merge pull request #5581 from hashicorp/dev-make-boostrap-git-hooks","refs":[],"body":"Dev make boostrap git hooks","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"d78480324b6861dd8f6326ce0d668ea96e795174","date":"2019-04-30 13:39:32 -0700","message":"Fixed link for Installing Nomad for Production","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"a1abf056772891472b8c3d5e3cbe381a26c9a24a","date":"2019-04-30 13:56:13 -0700","message":"Corrected installation link via Omar's input + corrected typo","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"ffc232b9edf7529a8aff3c5890b68645e662d643","date":"2019-04-30 18:42:51 -0700","message":"Added CircleCI post, Nic's two guides, and imgix Medium post into README","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"c06daf2d8a94b299f43f009c48351c251061dc1a","date":"2019-04-30 20:26:19 -0700","message":"Merge pull request #5635 from hashicorp/yishan/revised-readme","refs":[],"body":"Added Gitter to Resources + revised Overview in for ReadME.","author_name":"Yishan Lin","author_email":"yishan@hashicorp.com"},{"hash":"6e5ce84fac9d769785f318128176ba3b4cd23f30","date":"2019-04-30 20:51:18 -0700","message":"Update main tagline & boilerplate for Nomad","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"7c78f1c2a81f6218b16d63e852e2b09eb48a8f3a","date":"2019-04-30 20:55:22 -0700","message":"Updated Resources Page","refs":[],"body":"- Rewrote overview description\n- Reformatted \"Community\" scetion for consistency with GitHub\n- Removed IRC (redundant with Gitter)\n- Added \"Community Calls\" section with links to prior sessions\n- Added \"Webinar\" section with links to prior sessions\n- Revised Bug Tracker copy\n- Renamed \"Tools for Provisioning & Experimentation\" to \"How to Install Nomad\" section\n- Bumped up the \"How to Install Nomad\" section right below to second on the list \"Community\"\n- Removed \"Videos\" & \"Blog Posts\" section in favor of accurate segmentation between user talks, webinars, blog posts\n- Added \"Who Uses Nomad\" section in consistency with new GitHub ReadME\n- Removed the \"Trusted By\" section and disclaimer at bottom\n","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"315a6b02775f3557a4237b2f153c9fb5c080435e","date":"2019-04-12 10:21:25 -0400","message":"dev/cluster meta tagged clients, raw_exec","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"178092591b793393bd286b2488c3bd13c4355da6","date":"2019-04-19 11:43:53 -0400","message":"system_sched_test create partially constrained job","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"8cc8fc62008d181dbcedda64b7f8fc597004df87","date":"2019-04-29 16:58:59 -0400","message":"system_sched when a node is filtered, don't mark failure","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"d1308420b20214d73d34b6d333dce1a8d03bc617","date":"2019-04-30 12:45:21 -0400","message":"system_sched_test extend the test to check ineligible nodes","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"b1228536e83cc6e57ef272dfc8d2bc4512ed3e16","date":"2019-04-30 15:32:39 -0400","message":"system_sched & test cleanup comments","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"693de41ff2600871a6597e3bb4d44cb37532f2f6","date":"2019-05-01 12:42:55 -0400","message":"codegen codecs for nomad structs","refs":[],"body":"`ls *[!_test].go` was ignoring any file that ends with `s.go` (or any of\nthe letter inside `[]`), including `structs.go`!\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a02b742a093b247a49b69224c3e057a6d15d29d9","date":"2019-05-01 12:47:14 -0400","message":"use ugorji/go/codec version that's in vendor.json","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"63e069e712d50cb18dfd68ef66057b9b12151d8a","date":"2019-05-01 11:29:22 -0700","message":"Moved \"Webinars\" section below \"Who Uses Nomad\"","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"eb69732283dd37a15eae37f8f833a99c00cfd3d5","date":"2019-05-01 11:46:03 -0700","message":"Fixed broken link to Nomad website in README","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"3c6373d5c35b9c8cf433ec12f6ea0bea26b9ea27","date":"2019-05-01 18:37:34 -0700","message":"Cleaned spacing for syntax consistency.","refs":["origin/yishan/website-revised-resources-page"],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"da8f67639f8a784e24bb9f3c410e6ab573d22f60","date":"2019-05-01 18:45:47 -0700","message":"Merge pull request #5636 from hashicorp/yishan/website-revised-resources-page","refs":[],"body":"Yishan/website revised resources page","author_name":"Yishan Lin","author_email":"yishan@hashicorp.com"},{"hash":"195529efd482ab2c66dc1c1ab9f0e0736b4e88b8","date":"2019-04-10 10:39:24 +0200","message":"consul: Use a stable identifier for services","refs":[],"body":"The current implementation of Service Registration uses a hash of the\nnomad-internal state of a service to register it with Consul, this means that\nany update to the service invalidates this name and we then deregister, and\nrecreate the service in Consul.\n\nWhile this behaviour slightly simplifies reasoning about service registration,\nthis becomes problematic when we add consul health checks to a service. When\nthe service is re-registered, so are the checks, which default to failing for\nat least one check period.\n\nThis commit migrates us to using a stable identifier based on the\nallocation, task, and service identifiers, and uses the difference\nbetween the remote and local state to decide when to push updates.\n\nIt uses the existing hashing mechanic to decide when UpdateTask should\nregenerate service registrations for providing to Sync, but this should\nbe removable as part of a future refactor.\n\nIt additionally introduces the _nomad-check- prefix for check\ndefinitions, to allow for future allowing of consul features like\nmaintenance mode.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"14c231aeb98cb91686c72d5686da354f32aacbf9","date":"2019-04-25 13:48:19 +0200","message":"consul: Do not deregister external checks","refs":["origin/dani/consul"],"body":"This commit causes sync to skip deregistering checks that are not\nmanaged by nomad, such as service maintenance mode checks.  This is\nhandled in the same way as service registrations - by doing a Nomad\nspecific prefix match.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"229960796a8d3430df083561d5213b0bbd052137","date":"2019-05-02 10:59:09 -0400","message":"Update hashicorp/go-msgpack/codec","refs":[],"body":"To pick up the fix in https://github.com/hashicorp/go-msgpack/pull/8 .\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"24e9040b18a4f893e2f353288948a0f7cd9d82e4","date":"2019-05-02 11:19:44 -0400","message":"fix HashiStack eBay resource link","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4a16a317ee5f33d823c518d807279bb2a932540c","date":"2019-05-02 11:58:04 -0400","message":"client: handle 0.8 server network resources","refs":[],"body":"Fixes https://github.com/hashicorp/nomad/issues/5587\n\nWhen a nomad 0.9 client is handling an alloc generated by a nomad 0.8\nserver, we should check the alloc.TaskResources for networking details\nrather than task.Resources.\n\nWe check alloc.TaskResources for networking for other tasks in the task\ngroup [1], so it's a bit odd that we used the task.Resources struct\nhere.  TaskRunner also uses `alloc.TaskResources`[2].\n\nThe task.Resources struct in 0.8 was sparsly populated, resulting to\nstoring of 0 in port mapping env vars:\n\n```\nvagrant@nomad-server-01:~$ nomad version\nNomad v0.8.7 (21a2d93eecf018ad2209a5eab6aae6c359267933+CHANGES)\nvagrant@nomad-server-01:~$ nomad server members\nName                    Address      Port  Status  Leader  Protocol  Build  Datacenter  Region\nnomad-server-01.global  10.199.0.11  4648  alive   true    2         0.8.7  dc1         global\nvagrant@nomad-server-01:~$ nomad alloc status -json 5b34649b | jq '.Job.TaskGroups[0].Tasks[0].Resources.Networks'\n[\n  {\n    \"CIDR\": \"\",\n    \"Device\": \"\",\n    \"DynamicPorts\": [\n      {\n        \"Label\": \"db\",\n        \"Value\": 0\n      }\n    ],\n    \"IP\": \"\",\n    \"MBits\": 10,\n    \"ReservedPorts\": null\n  }\n]\nvagrant@nomad-server-01:~$ nomad alloc status -json 5b34649b | jq '.TaskResources'\n{\n  \"redis\": {\n    \"CPU\": 500,\n    \"DiskMB\": 0,\n    \"IOPS\": 0,\n    \"MemoryMB\": 256,\n    \"Networks\": [\n      {\n        \"CIDR\": \"\",\n        \"Device\": \"eth1\",\n        \"DynamicPorts\": [\n          {\n            \"Label\": \"db\",\n            \"Value\": 21722\n          }\n        ],\n        \"IP\": \"10.199.0.21\",\n        \"MBits\": 10,\n        \"ReservedPorts\": null\n      }\n    ]\n  }\n}\n```\n\nAlso, updated the test values to mimic how Nomad 0.8 structs are\nrepresented, and made its result match the non compact values in\n`TestEnvironment_AsList`.\n\n[1] https://github.com/hashicorp/nomad/blob/24e9040b18a4f893e2f353288948a0f7cd9d82e4/client/taskenv/env.go#L624-L639\n[2] https://github.com/hashicorp/nomad/blob/master/client/allocrunner/taskrunner/task_runner.go#L287-L303\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8d87ae3fdf7d5c9d573e0578cb0b9b5ea089f360","date":"2019-04-29 16:38:27 -0700","message":"Add support in nomad for supporting raft 3 protocol peers.json","refs":[],"body":"","author_name":"Hemanth Basappa","author_email":"hbasappa@cisco.com"},{"hash":"a988ae85760d31756b24ef4f16015e18991a8f53","date":"2019-05-02 12:12:56 -0400","message":"Merge pull request #5640 from hashicorp/b-fix-omitempty","refs":[],"body":"Update hashicorp/go-msgpack/codec","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"01c267b92b476a61fbdef49ba3c6b62a84509043","date":"2019-05-02 13:45:07 -0400","message":"Merge pull request #5641 from hashicorp/b-task-networks-ports","refs":[],"body":"client: handle 0.8 server network resources","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d2323e0cb8443780bd22556dd44ae206f433fd6a","date":"2019-04-27 15:52:24 +0100","message":"Converts ANSI terminal codes to HTML in logs","refs":[],"body":"","author_name":"Conor Mongey","author_email":"conor@mongey.net"},{"hash":"aa4c1288f394b9bfb786007464a52ab52fbb7e66","date":"2019-04-27 16:21:26 +0100","message":"Return a htmlSafe string rather than use triple curlies","refs":["cm-color-ui"],"body":"","author_name":"Conor Mongey","author_email":"conor@mongey.net"},{"hash":"5f2c6630a2fb0cc4b903000f2b3cd891b79c92af","date":"2019-05-02 17:13:56 -0400","message":"client_test new test fingerprinting can keep multi ips on a device","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"22568599e879503c3f554d34c38cb6ecf48411e9","date":"2019-05-02 17:14:35 -0400","message":"client fingerprinting can keep multi ips on a device","refs":["origin/b-network-fingerprinting-ipv4"],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"b4ecb448b3cd3a835f84344483a54b628e265e55","date":"2019-05-02 22:59:56 -0500","message":"Update deployment health on failed allocations only if health is unset","refs":[],"body":"This fixes a confusing UX where a previously successful deployment's\nhealthy/unhealthy count would get updated if any allocations failed after\nthe deployment was already marked as successful.\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"de25a7b5619e2c590e2b542670e382424cfb95cf","date":"2019-05-03 06:48:02 -0700","message":"add non-empty string validation for datacenters","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"782016fc7884c29988b02338becbf3cc25de7a2c","date":"2019-05-03 07:52:03 -0700","message":"e2e: enable systemd units so they start on boot","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"10dfbb391e146998a93752595c06a2e508d9c10b","date":"2019-05-03 07:53:08 -0700","message":"e2e: update deps and install nomad in packer","refs":[],"body":"Nomad on the packer image will be overwritten by the sha specified in\nthe TF var, but including a base version on the packer image makes the\nimage valid for independent use.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"ac8d50f937a04e1d43a1c7e37f1363313e6192d7","date":"2019-05-03 07:54:34 -0700","message":"e2e: ssh instructions + remove redundant naming","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"d477ca50ff5d3db34713c0645e16affe0d5185b8","date":"2019-05-03 07:54:55 -0700","message":"e2e: let the unindex clients do anything...","refs":[],"body":"...and be debugable!\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"452d9ab26c0a1a48a73239839626f334a38b2609","date":"2019-05-03 07:55:28 -0700","message":"e2e: explain these scripts are for packer","refs":["origin/e2e-tf"],"body":"It took me way too long to figure out these weren't used by TF.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"96d69022dfc2c3d3a592138163f1e9986e130695","date":"2019-05-03 10:00:17 -0500","message":"Remove unnecessary boolean clause","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"5c43a16b037242c6cfb73d90a8ead4defe521988","date":"2019-05-03 10:01:30 -0500","message":"Fix comment","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"4538014cc3dec50e818f2551ea2efd417d513197","date":"2019-05-02 13:34:41 -0400","message":"executor split up lookupBin","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"83930dcb9c0f894b4497f98fbdb619bdf8c0410d","date":"2019-05-02 13:35:24 -0400","message":"executor_linux call new lookupTaskBin","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c16f82bb9a5d2c98e8d77472449c5bbcc232d994","date":"2019-05-02 13:35:42 -0400","message":"executor_test test for more edges of lookupBin behavior","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"103d37d4f96134ad02d9855b502e61b0891c540f","date":"2019-05-02 13:36:34 -0400","message":"executor_linux_test new TestExecutor_EscapeContainer","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"7a2fdf7a2dbbb93d851fe93cf55b98108094cf4f","date":"2019-05-03 14:42:57 -0400","message":"executor and executor_linux debug launch prep and process start","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"a9d45c5048675a710ba785fbaacb999589651219","date":"2019-05-03 14:06:12 -0500","message":"Rename to match system scheduler config.","refs":["origin/f-preemption-config"],"body":"Also added docs\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"0e21642b62902840f0620d143409bff63cae07fa","date":"2019-05-03 15:19:54 -0400","message":"Merge pull request #5629 from hbasappa/peersjon","refs":[],"body":"Add support in nomad for supporting raft 3 protocol peers.json","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"512bc52af5e229a5fce2b73b1510aed0b9799cbc","date":"2019-05-03 16:20:05 -0400","message":"executor_linux_test test PATH lookup inside the container","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"8a7b5c68309d38c59568abb7ddb26209e0799940","date":"2019-05-03 16:22:09 -0400","message":"executor lookupTaskBin also does PATH expansion, anchored in taskDIR","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"8c638ada5aa1d34b6a004ec62271b4f90b1ceee8","date":"2019-05-03 16:34:31 -0400","message":"driver_test StartWait task calls a program inside it's chroot","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"d13c988dc98dcda4a2d1301a3e29b8d38eaa9879","date":"2019-05-03 16:27:30 -0400","message":"Update peers info with new raft config details","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e85d31efc3e3b0579004a14acfab5ab215157214","date":"2019-05-03 17:04:18 -0500","message":"Merge pull request #5645 from hashicorp/b-deploy-health","refs":[],"body":"Update deployment health on failed allocations only if health is unset","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"1500cf0e1ffb97003c9aca06f786000fbd082914","date":"2019-05-03 17:07:27 -0500","message":"update changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"bc5eaf6cdbac8c63b7952318d4dbaa26bd4fb8dc","date":"2019-05-04 10:21:59 -0400","message":"executor_test cleanup old lookupBin tests","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"52989fb3dab1c57b2370f98d42a978d9f31eeb45","date":"2019-05-05 05:42:40 -0700","message":"Fix Typo","refs":[],"body":"Fixed Typo: Behing/Behind.","author_name":"Justin Weissig","author_email":"jweissig@gmail.com"},{"hash":"68cf7506ae0ab4736f73937905d9d2ae94d9f845","date":"2019-05-05 15:15:31 -0400","message":"Merge pull request #5652 from jweissig/patch-6","refs":[],"body":"Fix Typo","author_name":"Charlie Voiselle","author_email":"charlie@hashicorp.com"},{"hash":"5035db0c4949e765baffe85d7601eacc6bcd2009","date":"2019-05-06 10:39:51 -0400","message":"docs: update s3 urls to use virtual bucket style","refs":[],"body":"In response to https://forums.aws.amazon.com/ann.jspa?annID=6776\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8290f44a551a29919369ad3937f8d227b773d95f","date":"2019-05-06 11:40:35 -0400","message":"Merge pull request #5651 from hashicorp/f-peers-json-info","refs":[],"body":"Update peers info with new raft config details","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d686fddb75174da736a6f26bc74e41478a3fd214","date":"2019-05-06 11:40:48 -0400","message":"Merge pull request #5653 from hashicorp/b-s3-virtualbucket-style","refs":[],"body":"docs: update s3 urls to use virtual bucket style","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c75357c7c552e888f9ca2031dd463f10f5961edc","date":"2019-05-06 11:53:40 -0400","message":"Merge pull request #5631 from hashicorp/b-system-sched-constraint-errors","refs":[],"body":"fix system sched constraint errors","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"84306b0bfbed5c68733273f105b10231fefd74fa","date":"2019-05-06 12:05:19 -0400","message":"Merge pull request #5601 from hashicorp/b-config-parse-direct-hcl","refs":[],"body":"config parse direct hcl","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"9b3ff8fe0e9cfb5f747595f353786eb27a84062a","date":"2019-05-06 13:23:12 -0400","message":"Merge pull request #5646 from hashicorp/some-ugorji-fixes","refs":[],"body":"Codegen codec helpers for all nomad structs","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5f88d0f40876771405cb592db62db7e346260d36","date":"2019-05-06 14:44:55 -0500","message":"Remove unnecessary locking and serverlist syncing in heartbeats","refs":[],"body":"This removes an unnecessary shared lock between discovery and heartbeating\nwhich was causing heartbeats to be missed upon retries when a single server\nfails. Also made a drive by fix to call the periodic server shuffler goroutine.\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"63e5aea4d83aedca38d4bca50546bfdeba99bc1a","date":"2019-05-06 13:01:44 -0700","message":"Merge pull request #5620 from Mongey/cm-color-ui","refs":[],"body":"Converts ANSI terminal codes to HTML in logs","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"237d8ca2ecca15fe520f5f6218789ecc5e9d9e0e","date":"2019-05-06 15:40:35 -0500","message":"Merge pull request #5628 from hashicorp/f-preemption-config","refs":[],"body":"Add config to disable preemption for batch/service jobs","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"2462c3cf47e8ac7b5b654792d9486d30a84a3b62","date":"2019-05-06 15:44:04 -0500","message":"Update changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"06e36982bda6e1e6ae5253bbafe5639be548a41a","date":"2019-05-06 14:52:44 -0700","message":"docs: fix default restart values","refs":["origin/docs-restarts"],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"9ef81dbe7f27e579ea55fc239f197d0afed0532f","date":"2019-05-06 15:42:52 -0700","message":"Merge pull request #5647 from hashicorp/e2e-tf","refs":[],"body":"E2E Test Terraform/Packer Improvements","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"25848c4be7caa65a690ed8d3b31b449702614da0","date":"2019-05-07 05:11:36 -0700","message":"Fixed Typo","refs":[],"body":"Fixed typo: schedular/scheduler.","author_name":"Justin Weissig","author_email":"jweissig@gmail.com"},{"hash":"f4a3d73d6bfa52f79339fdbe3022679a3bf04f66","date":"2019-05-07 14:12:44 +0200","message":"Merge pull request #5656 from jweissig/patch-7","refs":[],"body":"Fixed Typo","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"27f735d22568d962a6e4f25a6cba412303f97e6b","date":"2019-05-07 09:23:52 -0400","message":"CHANGELOG","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"cdd5bc11e3d96d4e4ee433d012f713c02f5fd521","date":"2019-05-07 10:40:22 -0700","message":"docs: add lots of links to plugin guide","refs":["origin/docs-plugin-link"],"body":"Add links to plugin guide because its buried under Docs -> Internal. At\nleast one user couldn't find it:\n\nhttps://groups.google.com/d/msg/nomad-tool/5sR8MTGZFrM/8bOExpcJAgAJ\n\nLink from:\n - Devices index\n - Devices community page\n - Drivers index\n - Drivers community page\n\nI erred on the side of over-linking because it's just a single concise\nsentence and I'd hate for people to struggle finding the guide.\n\nAlso remove some very old (4 years!) and confusing docs from the driver\nindex page.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"7b9e80a99ffd5e122f9dfdad9de461b0e5560a81","date":"2019-05-07 10:43:53 -0700","message":"Merge pull request #5655 from hashicorp/docs-restarts","refs":[],"body":"docs: fix default restart values","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"059d061c3669faf11f70675519baf3b90f5df84f","date":"2019-05-07 14:24:18 -0500","message":"Fixed links in changelog","refs":[],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"4b54e27841736f9b185ea0de2c9177edbf0f1782","date":"2019-05-07 15:54:36 -0400","message":"stale allocation data leads to incorrect (and even negative) metrics (#5637)","refs":[],"body":"* client: was not using up-to-date client state in determining which alloc count towards allocated resources\r\n\r\n* Update client/client.go\r\n\r\nCo-Authored-By: cgbaker <cgbaker@hashicorp.com>\r\n","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"855caf72328e02ef7b20292872bd892f3eb5d5c5","date":"2019-05-07 19:58:41 +0000","message":"update changelog to reflect metrics fix","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"2ea860a0877896a5dbde485227f02d961f683c49","date":"2019-05-07 16:13:38 -0400","message":"driver_test leave cat in the test, but add cat to the chroot","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"538f387d8d4e0c21c483b39a982417e2cb8698c6","date":"2019-05-07 16:58:27 -0400","message":"move lookupTaskBin to executor_linux, for os dependency clarity","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"9688710c1052985d4752daf626dcfcf8107daf48","date":"2019-05-07 17:01:05 -0400","message":"executor/* Launch log at top of Launch is more explicit, trace","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"12e18047335aec2ec6ff52c51407f15fed6fb8aa","date":"2019-05-07 16:23:32 -0500","message":"code review feedback","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"ec07a6717e1853126ca4702240ebbc5296858b14","date":"2019-05-08 08:42:26 -0400","message":"remove Index field from EmitNodeEventsResponse","refs":["origin/b-remove-EmitNodeEventsResponse-index"],"body":"`Index` is already included as part of `WriteMeta` embedding.\n\nThis is a backward compatible change: Clients never read the field; and\nServer refernces to `EmitNodeEventsResponse.Index` would be using the\nvalue in `WriteMeta`, which is consistent with other response structs.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0848d022ed2d3529199bc57f76cda7ab0660a742","date":"2019-05-08 09:32:48 -0400","message":"reorder CHANGELOG","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"50b784c1d6675cdd5d9ce9294254409b1c5d522d","date":"2019-05-08 09:48:54 -0400","message":"update changelog For GH-5587 and GH-5629","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0c4a45fa16183a56336cc73720c444b30281ac91","date":"2019-05-08 10:01:20 -0400","message":"executor_linux pass the command to lookupTaskBin to get path","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"60735deb7b81f40ec85c526ede7554d203d76838","date":"2019-05-08 10:01:51 -0400","message":"executor_linux_test call lookupTaskBin with an ExecCommand","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5bfa35ab81e09820c191d20fd8cda44bc64068c7","date":"2019-05-08 10:54:22 -0500","message":"fix typo and add one more test scenario","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"0f8ed68b6b9f41e11811e488b6dca7b0c8becdff","date":"2019-05-08 12:54:44 -0400","message":"Typo fixes (#5661)","refs":[],"body":"* Typo fixes\r\n* it's -> its\r\n* plugable -> pluggable\r\n","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"eb7a3bc6169f19a968fc49fe75c102d27adb9cab","date":"2019-05-08 13:36:39 -0500","message":"Merge pull request #5654 from hashicorp/b-hearbeat-lockfix","refs":[],"body":"Remove unnecessary locking and serverlist syncing in heartbeats","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"8932ccd62f64f6780de974be1028464d241031ce","date":"2019-05-08 13:38:29 -0500","message":"update changelog for heartbeat fix","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"b40c69b7c07588cdaca65f20f6af9d83e47cd954","date":"2019-05-08 11:51:52 -0700","message":"add unit tests for datacenter non-empty string validation","refs":["origin/b-empty-datacenters"],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"a910f1ded95dfddd068fcd7396d03def3bf1a3a6","date":"2019-05-08 15:14:31 -0400","message":"querystring -> query string","refs":["origin/docs-querystring"],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"55abc0f40319b28003e50dd43d626622676136d7","date":"2019-05-08 14:40:38 -0700","message":"Revised NomadProject Structure","refs":[],"body":"- Revised \"What is Nomad\" copy\n- Added \"Key Features\" section with links to task drivers & device plugins with lift-and-shift from README\n- Added \"Who Uses Nomad\" section with users, talks, blog posts\n- Removed Hadoop YARN, Docker Swarm, HTCondor from comparisons\n- Revamped Guides section\n- Inserted \"Installing Nomad\", \"Upgrading\", \"Integrations\" as persistent in Guides navbar\n- Split Installing Nomad into two paths for users (one for Sandbox with \"Quickstart\", one for Production)\n- Surfaced \"Upgrading\" and \"Integrations\" section from documentation\n- Changed \"Job Lifecycle\" section into \"Deploying & Managing Applications\"\n- Reworked \"Operations\" into \"Operating Nomad\"\n- Reworked \"Security\" into \"Securing Nomad\"\n- Segmented Namespaces, Resource Quotas, Sentinel into \"Governance & Policy\" subsection\n- Reworked \"Spark integration\" into its own \"Analytical Workloads\" section\n","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"538b5c3eba39d4135c09dcc8cd3594689dda7fec","date":"2019-04-30 15:59:05 -0400","message":"fix flaky test by allowing for call invocation overhead","refs":["origin/flaky-test-20190430"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7ba2378a159e9767becbea4316801b7a37296040","date":"2019-05-08 19:49:36 -0400","message":"Merge pull request #5666 from hashicorp/docs-querystring","refs":[],"body":"docs: Change querystring -> query string","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3d3b2ca2390c70707ef4d31213ade7d270239b92","date":"2019-05-09 13:22:22 +0200","message":"consul: Document example check id","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"62274e945211aa50d4ba14f32937447f8512c439","date":"2019-05-09 13:22:54 +0200","message":"Merge pull request #5536 from hashicorp/dani/consul","refs":[],"body":"Consul Catalog Integration Fixes","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"4ddb4bbcae416a8465de02d308ff911d7f6f0747","date":"2019-05-09 13:29:11 +0200","message":"changelog: Add changelog entries for consul improvements","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"875597729afc4daaa88e58339199515c3f0c8d33","date":"2019-05-09 08:23:49 -0400","message":"copied consts used by jobspec parsing from structs into api package, to avoid referencing structs package in jobspec (#5663)","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"0bfe80e3b60e4bc3d7885558c58bb455b7f7ef35","date":"2019-05-09 15:46:32 +0200","message":"changelog: Add missing entry for `nomad alloc signal`","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"cbfc68ee1c0bedd822d2481a59d1609511683ada","date":"2019-05-09 10:14:01 -0700","message":"Changed from \"Container Management\" to \"Container Orchestration\"","refs":[],"body":"Removed Terraform mention in integrations without existing guide.\n","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"f88c4d76485eaf249da5530b89cc947c92dffcf2","date":"2019-05-09 10:26:55 -0700","message":"Fixed flaky client-detail test","refs":["origin/b-ui/flaky-client-detail-test","b-ui/flaky-client-detail-test"],"body":"Since one allocation is preempted, the alloc factory creates a new alloc\nthat wasn't guaranteed to be running. When it is the first alloc row in\nthe table, then the alloc row detail test fails because non-running\nallocs don't have metrics. The fix was to manually update all the alloc\nclientStatuses.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"2fd32a2f31d2f8d1be16476bab594b85c602d288","date":"2019-05-09 14:12:29 -0400","message":"Merge pull request #5660 from hashicorp/b-remove-EmitNodeEventsResponse-index","refs":[],"body":"remove Index field from EmitNodeEventsResponse","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"72d6bb9f8db27b47392978f49d1681b922d92627","date":"2019-05-09 14:53:45 -0400","message":"Added info about scheduler fail and success cases","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"16a58e65f99a34dc58a3ead407d4d39d0011b9d5","date":"2019-05-09 15:03:51 -0400","message":"fix \"and and\"; copypasta","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"16874f337a733fb6b817712485cf60d4ef79f065","date":"2019-05-09 15:38:43 -0400","message":"Moving links to bottom for consistency","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"eddf8a247eb3933a97e608873cd81611c5ee235e","date":"2019-05-09 12:59:53 -0700","message":"Merge branch 'master' into yishan/revised-nomadproject-structure","refs":["origin/yishan/revised-nomadproject-structure"],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"764b80eca0adce3aacefe1da84fcf9db9a2beee1","date":"2019-05-09 16:01:25 -0400","message":"Adopted @schmichael wording","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"ac76fc2fdfc087e6b004dc5d3857ce979403bc7d","date":"2019-05-09 13:03:50 -0700","message":"Merge pull request #5667 from hashicorp/yishan/revised-nomadproject-structure","refs":[],"body":"Revised NomadProject Structure","author_name":"Yishan Lin","author_email":"yishan@hashicorp.com"},{"hash":"94ed649489a48f7e8c94cb7a615947dd877a2ae6","date":"2019-04-28 17:09:12 -0400","message":"implemment streaming exec handling in driver grpc handlers","refs":[],"body":"Also add a helper that converts the adapts the high level interface to the\nlow-level interface of nomad exec interfaces.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"cb4ad3fb4567e865ee6e0c52381cb89f7772c09d","date":"2019-04-28 17:21:00 -0400","message":"drivers/mock: implement nomad exec interface","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"979a6a17784feaa00c0af34d6692470029f0bcab","date":"2019-04-28 17:22:53 -0400","message":"implement client endpoint of nomad exec","refs":[],"body":"Add a client streaming RPC endpoint for processing nomad exec tasks, by invoking\nthe relevant task handler for execution.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a77a3ba9b02f1035cafeee8403004312ae857afa","date":"2019-04-28 17:25:27 -0400","message":"server: server forwarding logic for nomad exec endpoint","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bfb4f0ca2dfe5524efd458e269fd1905d4eeec1d","date":"2019-04-28 17:33:25 -0400","message":"agent: add websocket handler for nomad exec","refs":[],"body":"This adds a websocket endpoint for handling `nomad exec`.\n\nThe endpoint is a websocket interface, as we require a bi-directional\nstreaming (to handle both input and output), which is not very appropriate for\nplain HTTP 1.0. Using websocket makes implementing the web ui a bit simpler. I\nconsidered using golang http hijack capability to treat http request as a plain\nconnection, but the web interface would be too complicated potentially.\n\nFurthermore, the API endpoint operates against the raw core nomad exec streaming\ndatastructures, defined in protobuf, with json serializer.  Our APIs use json\ninterfaces in general, and protobuf generates json friendly golang structs.\nReusing the structs here simplify interface and reduce conversion overhead.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f908d6bcf559c56083953e8b2e0a42829a0fdfad","date":"2019-04-29 11:14:18 -0400","message":"vendor github.com/gorilla/websocket","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3a77502cae7dbb982a6349d83a69d960fd97f06b","date":"2019-04-28 17:12:53 -0400","message":"Add basic drivers conformance tests","refs":[],"body":"Add consolidated testing package to serve as conformance tests for all drivers.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"67160a6302f6c48f0946b722000b6db58aa393b8","date":"2019-04-28 17:26:15 -0400","message":"drivers/docker: implement streaming exec","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6168cc59be65d1e0d6bc2fe0486902960c4894a6","date":"2019-04-28 17:34:01 -0400","message":"add api support for nomad exec","refs":[],"body":"Adds nomad exec support in our API, by hitting the websocket endpoint.\n\nWe introduce API structs that correspond to the drivers streaming exec structs.\n\nFor creating the websocket connection, we reuse the transport setting from api\nhttp client.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"980e4f586618a4895988fc18d481406af2ffc62d","date":"2019-04-28 17:35:42 -0400","message":"add e2e tests for nomad exec","refs":["origin/f-nomad-exec-parts-01-base"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5abbee5d396c0ce693cae570a6a8ac43aa640cdc","date":"2019-05-09 18:09:27 -0400","message":"Merge pull request #5632 from hashicorp/f-nomad-exec-parts-01-base","refs":[],"body":"nomad exec part 1: plumbing and docker driver","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a8a6515e9f73731e8dd1fcfb1422ef4f3b8975d3","date":"2019-05-08 09:04:16 -0400","message":"Update ugorji/go to latest","refs":["origin/f-b-upgrade-ugorji-dep-20190508"],"body":"Our testing so far indicates that ugorji/go/codec maintains backward\ncompatiblity with the version we are using now, for purposes of Nomad\nserialization.\n\nUsing latest ugorji/go allows us to get back to using upstream library,\nget get the optimizations benefits in RPC paths (including code\ngeneration optimizations).\n\nugorji/go introduced two significant changes:\n* time binary format in https://github.com/ugorji/go/commit/debb8e2d2e8bd8cf1e9b6d806cf5e58df86b970c.  Setting `h.BasicHandle.TimeNotBuiltin = true` restores old behavior\n* ugorji/go started honoring `json` tag as well:\n\nv1.1.4 is the latest but has a bug in handling RawString that's fixed in\nhttps://github.com/ugorji/go/commit/d09a80c1e0c3162e022a114ab0f037e2596969e6\n.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"915b78309a4f34cea66711934575ce1285158268","date":"2019-05-10 00:12:55 -0700","message":"doc: wording","refs":[],"body":"Fixed wording: \"as show below\" -> \"as shown below\".","author_name":"Justin Weissig","author_email":"jweissig@gmail.com"},{"hash":"2530103a47381b66476cb1efad42d0243083ffda","date":"2019-05-10 12:16:33 +0200","message":"Merge pull request #5677 from jweissig/patch-8","refs":[],"body":"doc: wording","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"11d25fdbcaaed502974c3cc1e56781b0518cc3b1","date":"2019-05-10 09:20:32 -0400","message":"Add redirects for restructing done in GH-5667","refs":[],"body":"https://github.com/hashicorp/nomad/pull/5667 restructured lots of\nguides; this adds redirects to ensure that old links work.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"13474bca4d79393da5f98073cd65faf3712f2c93","date":"2019-05-10 09:28:36 -0400","message":"update links to use new canonical location","refs":["origin/b-fix-website-links-20180510"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"197114c017cda885750b1ae9756847edc7cdec4a","date":"2019-05-10 10:08:27 -0400","message":"Merge pull request #5682 from hashicorp/b-fix-website-links-20180510","refs":[],"body":"Fix website links","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bab982484e17713d5867e49646a3937ab754ad56","date":"2019-05-10 10:26:43 -0400","message":"Added info about scheduler fail and success cases (#5675)","refs":[],"body":"* Added info about scheduler fail and success cases\r\n\r\n* fix \"and and\"; copypasta\r\n\r\n* Moving links to bottom for consistency\r\n\r\n* Adopted @schmichael wording\r\n","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"40742affaedd6e76f1bafb339948156b546036ca","date":"2019-05-10 10:35:21 -0400","message":"Added Sparrow link","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"291b306581096e1e0f83c1c623ad0ff46181e0a1","date":"2019-05-10 16:53:05 +0200","message":"Merge pull request #5375 from hashicorp/dani/stale-issues","refs":[],"body":"Setup probot/stale","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"1dd63883a5cc636f2165e706d4f91d56c9cf0fc6","date":"2019-05-10 17:00:35 +0200","message":"stalebot: Add 'thinking' as an exempt label (#5684)","refs":[],"body":"","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"c7071a12e30f67d1095da0c7f09f75d56d43b4cd","date":"2019-05-10 11:25:04 -0400","message":"client improve a comment in updateNetworks","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"85a60d284c8905a0c2df53c3f576bb4f2fe134cd","date":"2019-05-10 11:25:27 -0400","message":"Merge pull request #5683 from hashicorp/docs-describe-sched-restart","refs":[],"body":"Added Sparrow link","author_name":"Charlie Voiselle","author_email":"charlie@hashicorp.com"},{"hash":"a9da4bac111cf93c169979f5a5edfae588ddc4ec","date":"2019-05-10 11:33:35 -0400","message":"executor_linux only do path resolution in the taskDir, not local","refs":["origin/b-lookup-exe-chroot"],"body":"split out lookPathIn to show it's similarity to exec.LookPath\n","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"3c19af4bfdc61ba85505358a44cf7ed517ec56e5","date":"2019-03-29 11:10:11 -0700","message":"client: expose allocated memory per task","refs":[],"body":"Related to #4280\n\nThis PR adds\n`client.allocs.<job>.<group>.<alloc>.<task>.memory.allocated` as a gauge\nin bytes to metrics to ease calculating how close a task is to OOMing.\n\n```\n'nomad.client.allocs.memory.allocated.example.cache.6d98cbaf-d6bc-2a84-c63f-bfff8905a9d8.redis.rusty': 268435456.000\n'nomad.client.allocs.memory.cache.example.cache.6d98cbaf-d6bc-2a84-c63f-bfff8905a9d8.redis.rusty': 5677056.000\n'nomad.client.allocs.memory.kernel_max_usage.example.cache.6d98cbaf-d6bc-2a84-c63f-bfff8905a9d8.redis.rusty': 0.000\n'nomad.client.allocs.memory.kernel_usage.example.cache.6d98cbaf-d6bc-2a84-c63f-bfff8905a9d8.redis.rusty': 0.000\n'nomad.client.allocs.memory.max_usage.example.cache.6d98cbaf-d6bc-2a84-c63f-bfff8905a9d8.redis.rusty': 8908800.000\n'nomad.client.allocs.memory.rss.example.cache.6d98cbaf-d6bc-2a84-c63f-bfff8905a9d8.redis.rusty': 876544.000\n'nomad.client.allocs.memory.swap.example.cache.6d98cbaf-d6bc-2a84-c63f-bfff8905a9d8.redis.rusty': 0.000\n'nomad.client.allocs.memory.usage.example.cache.6d98cbaf-d6bc-2a84-c63f-bfff8905a9d8.redis.rusty': 8208384.000\n```\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"152d6426aa6e2b06f0b5be6fc990e6fd43a917f8","date":"2019-05-10 18:51:00 -0400","message":"Merge pull request #5674 from hashicorp/b-ui/flaky-client-detail-test","refs":[],"body":"UI: Fixed flaky client-detail test","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"efc4249f8527ec52dc50b1801e31609cde1479c0","date":"2019-04-28 17:27:23 -0400","message":"executor: scaffolding for executor grpc handling","refs":[],"body":"Prepare executor to handle streaming exec API calls that reuse drivers protobuf\nstructs.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"976bfbc41a0d6fd38f6f80e9fbb02164c1382048","date":"2019-04-28 17:30:10 -0400","message":"executors: implement streaming exec","refs":[],"body":"Implements streamign exec handling in both executors (i.e. universal and\nlibcontainer).\n\nFor creation of TTY, some incidental complexity leaked in.  The universal\nexecutor uses github.com/kr/pty for creation of TTYs.\n\nOn the other hand, libcontainer expects a console socket and for libcontainer to\ncreate the underlying console object on process start.  The caller can then use\n`libcontainer.utils.RecvFd()` to get tty master end.\n\nI chose github.com/kr/pty for managing TTYs here.  I tried\n`github.com/containerd/console` package (which is already imported), but the\npackage did not work as expected on macOS.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"74e5e20c0bc1c426f2a12be83e3fff37f4b02dd4","date":"2019-04-28 17:31:02 -0400","message":"drivers: implement streaming exec for executor based drivers","refs":[],"body":"These simply delegate call to backend executor.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f6a4b8810a7600a45a359fd36756f42604b3ae93","date":"2019-04-29 11:17:40 -0400","message":"vendor github.com/kr/pty","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7f76aedfaeb894b0d9641390b3086a0d70851750","date":"2019-05-10 18:44:19 -0400","message":"use pty/tty terminology similar to github.com/kr/pty","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c25b247fa461867767436cb2fd6cc53e16cc9188","date":"2019-05-10 21:24:23 -0400","message":"Merge pull request #5634 from hashicorp/f-nomad-exec-parts-03-executors","refs":[],"body":"nomad exec part 3: executor based drivers","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ffe06cb57f5e7d11d2183f6a45635d4ee7993a11","date":"2019-05-11 10:40:39 -0700","message":"docs: fixed typo","refs":[],"body":"Fixed typo: programatic/programmatic","author_name":"Justin Weissig","author_email":"jweissig@gmail.com"},{"hash":"9b6e5c1fd48a6d6f5f52f4803f8f2e0d6aa4e5a5","date":"2019-05-11 21:00:47 +0200","message":"Merge pull request #5685 from jweissig/patch-9","refs":[],"body":"docs: fixed typo","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"bfac34d9c52cb78f8afbe9136a188d3b6fab94d3","date":"2019-05-12 18:26:14 -0400","message":"implement nomad exec for rkt","refs":[],"body":"Implement the streaming exec handler for the rkt driver\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bad77f1ece5938b112f37acf5c5fce9b72e636e2","date":"2019-04-28 17:35:17 -0400","message":"add CLI commands for nomad exec","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"494642b11cdd750d55940fd13e20fd01e9e17253","date":"2019-05-13 10:01:19 -0400","message":"typo: \"atleast\" -> \"at least\"","refs":["origin/f-nomad-exec-part-04-rkt"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"166a5c7b29ee550a553f2b96e3603a0eeb6bda47","date":"2019-05-13 10:03:55 -0400","message":"Merge pull request #5690 from hashicorp/f-nomad-exec-part-04-rkt","refs":[],"body":"implement nomad exec for rkt","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a732cd1f06ad7b854f8c121da56a1aced9f68b1b","date":"2019-05-13 11:46:53 -0400","message":"Merge pull request #5642 from hashicorp/b-network-fingerprinting-ipv4","refs":[],"body":"network fingerprinting multiple IPs on the configured network device","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"12114354abdc21c33464aa1f0cb9b3c09a116fa8","date":"2019-05-13 12:33:44 -0400","message":"Merge pull request #5668 from hashicorp/flaky-test-20190430","refs":[],"body":"fix flaky test by allowing for call invocation overhead","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2d23f904cd71490d571ee45a221c7f45bd8d5edf","date":"2019-05-13 10:23:26 -0700","message":"Merge pull request #5665 from hashicorp/b-empty-datacenters","refs":[],"body":"add non-empty string validation for datacenters","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"772e8d6b94337b8557e4423cee711c3d24fea7bc","date":"2019-05-13 13:10:29 -0700","message":"update CHANGELOG with datacenter config validation https://github.com/hashicorp/nomad/pull/5665","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"fd5c3a8173a8c30c5df913a25f2894ef8b0aa05a","date":"2019-05-13 13:14:01 -0700","message":"fix update to changelog","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"4e3468babd7232bdffc53c593242f48eff2d8abb","date":"2019-05-13 13:31:22 -0700","message":"Merge pull request #5492 from hashicorp/f-allocated-mem","refs":[],"body":"client: expose allocated memory per task","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"14244af3a42782f1beb699aede796e53dc31e373","date":"2019-05-13 14:08:46 -0700","message":"docs: mention regression in task config validation","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"bb809ea2597c0e0a0995f264b6411884a1dbe01d","date":"2019-05-13 15:42:55 -0700","message":"client: log when server list changes","refs":[],"body":"Stop logging in the happy path when nothing has changed.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f6dfe5bf947e38d4ff12f843fbe54ac63c0785cf","date":"2019-05-13 16:16:14 -0700","message":"Added redirect for Spark guide link","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"af2ed66749e1984d31e3c3cc23ef38addc067f5a","date":"2019-05-10 17:15:27 -0500","message":"Add flag similar to --all for allocs to be able to filter deployments by latest","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"24327ad51601e7319dbdb728f6d21afc2fdbe767","date":"2019-05-13 10:16:36 -0500","message":"Lookup job only once, and fix tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"dee16743b464e18737cb5a2f7b25794d8f136081","date":"2019-05-13 18:53:47 -0500","message":"Fix test setup to have correct jobcreateindex for deployments","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c24e1a8e1281b89da8ad0d7c459dd63be5c20a9c","date":"2019-05-14 13:26:56 +0200","message":"evalbroker: Flush within update lock","refs":[],"body":"Primarily a cleanup commit, however, currently there is a potential race\ncondition (that I'm not sure we've ever actually hit) during a flapping\nSetEnabled/Disabled state where we may never correctly restart the eval\nbroker, if it was being called from multiple routines.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"c4eef7240458b160229688c39435031de1725575","date":"2019-05-14 13:59:10 +0200","message":"evalbroker: No new enqueues when disabled","refs":[],"body":"Currently when an evalbroker is disabled, it still recieves delayed\nenqueues via log application in the fsm. This causes an ever growing\nheap of evaluations that will never be drained, and can cause memory\nissues in larger clusters, or when left running for an extended period\nof time without a leader election.\n\nThis commit prevents the enqueuing of evaluations while we are\ndisabled, and relies on the leader restoreEvals routine to handle\nreconciling state during a leadership transition.\n\nExisting dequeues during an Enabled->Disabled broker state transition are\nhandled by the enqueueLocked function dropping evals.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"c67fb621e93bcf68a03dd4fcb0b6bd12b5749fd6","date":"2019-05-14 14:06:27 +0200","message":"evalbroker: Simplify nextDelayedEval locking","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"ae4495fb1203c4cec4df7a5adff29dbd8bf5b4fe","date":"2019-05-14 13:13:11 +0100","message":"Add jrasell/sherpa to resource page and remove Replicator.","refs":[],"body":"Adds jrasell/sherpa to the resources page under the Integrations\nsection.\n\nReplicator is no longer being maintained or has been under active\ndevelopment for well over a year. I have therefore removed this\nfrom the resources page.\n","author_name":"James Rasell","author_email":"jamesrasell@gmail.com"},{"hash":"883fe5b3585c2d23310bb81cee455f672c07379d","date":"2019-05-14 07:50:09 -0700","message":"Merge pull request #5657 from hashicorp/docs-plugin-link","refs":[],"body":"docs: add lots of links to plugin guide","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"640470cea4af9cec8d40b1d47792160862c939dc","date":"2019-05-14 07:50:39 -0700","message":"Merge pull request #5693 from hashicorp/docs-task-config","refs":[],"body":"docs: mention regression in task config validation","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"890f70a69726d7fe0ff30fca32970609fe0628f6","date":"2019-05-14 08:36:08 -0700","message":"Merge pull request #4590 from hashicorp/d-fix-stagger","refs":[],"body":"docs: fix description of update.stagger","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"8deb6a96d9476ffef23aa6fd74e62dfd38fff1d5","date":"2019-05-14 08:38:05 -0700","message":"Merge pull request #5695 from hashicorp/f-squelch-logline","refs":[],"body":"client: log when server list changes","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"330cf77c437f415f706a85ebd3a8c1e76ac2b60c","date":"2019-05-14 08:56:13 -0700","message":"Update redirects.txt","refs":[],"body":"Fixed Spark redirects post-website restructuring for the guides.\n","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"315beb6d9d92925296297af3faa9edeb5e07809c","date":"2019-05-14 10:36:31 -0700","message":"Merge pull request #5703 from hashicorp/yishan/corrected-website-redirects","refs":[],"body":"Fixed Spark links in redirects.txt.","author_name":"Yishan Lin","author_email":"yishan@hashicorp.com"},{"hash":"846b48281426beb38d04f6a14f9b6cc6b57a119e","date":"2019-05-07 20:26:04 -0700","message":"e2e: fix nomad service for systemd<230","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"e7042b674bd11d322e3f5406b5293de5ff166a9d","date":"2019-05-07 23:04:40 -0700","message":"client: do not restart dead tasks until server is contacted","refs":[],"body":"Fixes #1795\n\nRunning restored allocations and pulling what allocations to run from\nthe server happen concurrently. This means that if a client is rebooted,\nand has its allocations rescheduled, it may restart the dead allocations\nbefore it contacts the server and determines they should be dead.\n\nThis commit makes tasks that fail to reattach on restore wait until the\nserver is contacted before restarting.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"4b854cc55759f3c62e28b788175e4133c9985b41","date":"2019-05-08 13:58:16 -0700","message":"drivers/mock: implement InspectTask","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6a2792ad90aedbb6e7c826944312ebc1a0f21237","date":"2019-05-10 08:51:06 -0700","message":"client: do not restart dead tasks until server is contacted (try 2)","refs":[],"body":"Refactoring of 104067bc2b2002a4e45ae7b667a476b89addc162\n\nSwitch the MarkLive method for a chan that is closed by the client.\nThanks to @notnoop for the idea!\n\nThe old approach called a method on most existing ARs and TRs on every\nrunAllocs call. The new approach does a once.Do call in runAllocs to\naccomplish the same thing with less work. Able to remove the gate\nabstraction that did much more than was needed.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"796c05b9b8d87a5ee9623298172fdec8b87461e1","date":"2019-05-10 08:54:35 -0700","message":"client: register before restoring","refs":[],"body":"Registration and restoring allocs don't share state or depend on each\nother in any way (syncing allocs with servers is done outside of\nregistration).\n\nSince restoring is synchronous, start the registration goroutine first.\n\nFor nodes with lots of allocs to restore or close to their heartbeat\ndeadline, this could be the difference between becoming \"lost\" or not.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"abd809d60afd436459cad4f03ff88e8130aa065c","date":"2019-05-14 09:10:09 -0700","message":"docs: changelog entry for #5669 and fix comment","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"e30cc90a7e2960233a8bd856b1bef6f08e1dd044","date":"2019-05-14 14:10:33 -0400","message":"Merge branch 'master' into pr/5172","refs":[],"body":"* master: (912 commits)\n  Update redirects.txt\n  Added redirect for Spark guide link\n  client: log when server list changes\n  docs: mention regression in task config validation\n  fix update to changelog\n  update CHANGELOG with datacenter config validation https://github.com/hashicorp/nomad/pull/5665\n  typo: \"atleast\" -> \"at least\"\n  implement nomad exec for rkt\n  docs: fixed typo\n  use pty/tty terminology similar to github.com/kr/pty\n  vendor github.com/kr/pty\n  drivers: implement streaming exec for executor based drivers\n  executors: implement streaming exec\n  executor: scaffolding for executor grpc handling\n  client: expose allocated memory per task\n  client improve a comment in updateNetworks\n  stalebot: Add 'thinking' as an exempt label (#5684)\n  Added Sparrow link\n  update links to use new canonical location\n  Add redirects for restructing done in GH-5667\n  ...\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"40a16ddc270a09486e9e451d9e0fec4467c9b52d","date":"2019-05-14 14:37:34 -0400","message":"fixup #5172 and rebase against master","refs":["origin/pr/5172"],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"ea37019d7f90f218ea616681841407e84d0e5b02","date":"2019-05-14 16:13:41 -0500","message":"Fix one more test set up","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"fa7933645ebef1c498b08ced9055b399e8490de8","date":"2019-05-14 16:13:59 -0500","message":"docs","refs":["origin/f-filter-by-create-index"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"da6039bc84348f0d29f7190591c1a86df24e40c8","date":"2019-05-14 08:56:13 -0700","message":"Correct Spark links in redirects.txt","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"84193504bca19fb10073e89c86ed56df346d601e","date":"2019-05-14 16:52:48 -0400","message":"More redirects for website","refs":[],"body":"I expected redirects to handle directory rewrites without needing to\nspecify every file.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5b65afb29c1492e1832f0f110934241bdb567554","date":"2019-05-14 14:27:01 -0700","message":"Merge pull request #5669 from hashicorp/b-block-on-servers-4","refs":[],"body":"client: do not restart restored tasks until server is contacted","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"18c63d4c3f3aef9aef749d124d57dedb4c476804","date":"2019-05-14 16:56:59 -0400","message":"Make spark.html the index","refs":["origin/b-more-redirects-20190514"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8841da4f0bfb9783c2af64d06edbb137cc62b8fe","date":"2019-05-14 17:56:16 -0400","message":"Merge pull request #5707 from hashicorp/b-more-redirects-20190514","refs":[],"body":"More website redirects","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c49ec0a96423c5d7ac73627fe22442a0e6063da1","date":"2019-05-14 22:25:13 -0400","message":"Add jrasell/sherpa to resource page and remove Replicator. (#5700)","refs":[],"body":"Add jrasell/sherpa to resource page and remove Replicator.","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"54893445a9f8c0fb2a8abc73f7303b15de99aa7f","date":"2019-05-15 00:08:18 -0700","message":"docs: fixed wording","refs":[],"body":"Fixed wording: \"as show below\"/shown.","author_name":"Justin Weissig","author_email":"jweissig@gmail.com"},{"hash":"68c1454c9a0129cf1255c73ae553288d6f675ea8","date":"2019-05-15 11:02:21 +0200","message":"evalbroker: test for no enqueue on disabled","refs":["origin/dani/b-eval-broker-lifetime"],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"8bbc78a48a6c8ca99fecede6449ee8cf81623928","date":"2019-05-15 10:35:12 -0400","message":"Add clarifying comments for negating `-i` or `-t`","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d675d28ff3a5fa885db3f198e13f50d6a4f07dc9","date":"2019-05-15 10:37:37 -0400","message":"Handle Terminal Output state in Windows","refs":["origin/f-nomad-exec-parts-02-cli"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7beb9eec7c12e09e09a5b49f1f7b2d1fc9b8aaf1","date":"2019-05-12 20:03:31 -0400","message":"Document `nomad exec` command","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"72b2fb19462119829dd125b25d756ea765748a68","date":"2019-05-15 12:50:42 -0400","message":"Merge pull request #5633 from hashicorp/f-nomad-exec-parts-02-cli","refs":[],"body":"nomad exec part 2: CLI","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ea843a507a54b7eb3d8de8babf0f950e90624a40","date":"2019-05-15 13:00:24 -0400","message":"scheduler: add check to prohibit returning inf during spread boost calculation","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"c1c9d9b07df00a111b3ad51fbabafe91d5dfd76b","date":"2019-05-15 13:01:05 -0400","message":"fix typo","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5709bf7b546b8f13ea552ccda30eb073e0306e7a","date":"2019-05-15 13:02:04 -0400","message":"fix missing brace","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"566dd71486107caf3efb516664b28ecd6386d176","date":"2019-05-15 12:35:57 -0500","message":"Fix comment and assert score in test case","refs":["origin/b-5698-inf-allocation-spread"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"7a591ddb07bd680bd6ebdf5b7e24dfc988bd83a0","date":"2019-05-15 12:54:24 -0500","message":"Merge pull request #5713 from hashicorp/b-5698-inf-allocation-spread","refs":[],"body":"Fix edge case with spread scoring","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"7f807568037eebdb2e3dc73ec7000cb8f41aba3a","date":"2019-05-15 12:59:07 -0500","message":"update changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"3782919a488117eafca5715fb9fa34d3cc10d7f5","date":"2019-05-15 13:25:30 -0500","message":"Change clients/jobs facets to always right-align","refs":[],"body":"This changes the templates so the element that contains\nthe search box is always present, instead hiding only\nthe box itself when there’s nothing to search. Keeping\nthe empty element lets it take up its flexbox space so\nthe facets will no longer be in the centre.\n","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"aa9a80803c6190ea1852f60a20508e048121b72d","date":"2019-05-15 15:02:16 -0400","message":"change GRPC to gRPC (#5712)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"b1656d0e2d3316c7bfc21fd1b66328ca8b7b0e66","date":"2019-05-15 14:48:16 -0500","message":"Restore precommit linting","refs":["origin/b-precommit-linting"],"body":"The two pairs of quotes were causing no files to match.\n","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"955076d5d3b4afa27d648f1c37ef6fe7a1caef7d","date":"2019-05-15 15:25:05 -0500","message":"Merge pull request #5714 from hashicorp/b-empty-clients-jobs-facets-alignment","refs":[],"body":"Change clients/jobs facets to always right-align","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"caa410a64f955b71ca7da68630506ed3f2f38452","date":"2019-05-15 16:44:19 -0500","message":"Merge pull request #5715 from hashicorp/b-precommit-linting","refs":[],"body":"Restore precommit linting","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"781c94b0b7f114aab12e1d7ae5d598323f907fbb","date":"2019-05-15 23:30:52 +0100","message":"Merge pull request #5699 from hashicorp/dani/b-eval-broker-lifetime","refs":[],"body":"Eval Broker: Prevent redundant enqueue's when a node is not a leader","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"d3061f93e38e8f781b3c0222577a005d57bf6d49","date":"2019-05-15 20:34:06 -0500","message":"Fix bug in plan applier introduced in PR-5602","refs":["origin/b-plan-apply-preemptions"],"body":"This fixes a bug in the state store during plan apply. When\ndenormalizing preempted allocations it incorrectly set the preemptor's\njob during the update. This eventually causes a panic downstream in the\nclient. Added a test assertion that failed before and passes after this fix\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f56c9cdf3eb721aebd54e45216d4fa52a75cd8a6","date":"2019-05-15 21:11:52 -0500","message":"remove stray newline","refs":[],"body":"Co-Authored-By: Danielle <dani@builds.terrible.systems>","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"9abd35285fa8d175191a285a35ad384204831d29","date":"2019-05-15 21:16:57 -0500","message":"Add -all to help text and flags","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f12c332eeee13f31d972d9076140d860a8ea0935","date":"2019-05-15 21:17:34 -0500","message":"Merge branch 'f-filter-by-create-index' of github.com:hashicorp/nomad into f-filter-by-create-index","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"abaf5dcff16024126fb6a1957db1b1ea884cc9bf","date":"2019-05-15 21:50:41 -0500","message":"Merge pull request #5702 from hashicorp/f-filter-by-create-index","refs":[],"body":"Filter deployments by create index ","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"0367c7dc42f4e0eda55871a532bfb11a8325eb4e","date":"2019-05-15 22:00:48 -0500","message":"update changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"0458a14aa98e4c37a86c64cde1a301a4d4d401da","date":"2019-05-16 16:03:04 +0100","message":"changelog: Update for eval-broker fix","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"a2d6dc0489174a7447430e81f4173bdbf7627e79","date":"2019-05-16 11:01:05 -0500","message":"Merge pull request #5717 from hashicorp/b-plan-apply-preemptions","refs":[],"body":"Fix bug in plan applier introduced in PR-5602","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"a6105ad79f2019a1382ed667e205f91052d999f4","date":"2019-05-16 11:06:43 -0500","message":"Merge pull request #5709 from jweissig/patch-10","refs":[],"body":"docs: fixed wording","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"4e7736023a73709c66b99844c05fab8127338c19","date":"2019-05-16 14:12:40 -0400","message":"Add a escaping reader that mimics ssh behavior","refs":[],"body":"Adds an escaping reading that mimics ssh handling of input escape\nsequences.\n\nThe reader parses chunks to look for \\n~\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"eedd8e9e660eef0ddbf3402cb74f7758dd85e168","date":"2019-05-16 15:50:46 -0400","message":"Implement escaping chrarcter for alloc exec","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0b4bebd3aa05825ae289f346a59cf882a694cbbe","date":"2019-05-16 17:06:03 -0400","message":"Fix typos and comments","refs":[],"body":"Co-Authored-By: Michael Schurter <michael.schurter@gmail.com>","author_name":"Mahmood Ali","author_email":"mahmood@notnoop.com"},{"hash":"fb0d002eb1b61502ea034aff4e03226242af58c3","date":"2019-05-16 17:07:32 -0400","message":"avoid printing counts in tests","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3bcf7a02c4f1b97e33e4c594b0927255598bba8e","date":"2019-05-16 16:21:15 -0500","message":"Add preemption to changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"cbe88fa8682595b0eae7cd0562d8502b8e0d003f","date":"2019-05-16 17:34:54 -0400","message":"Merge pull request #5720 from hashicorp/f-nomad-exec-escape","refs":[],"body":"Support escaping sequence for terminating alloc exec","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e211a993fde09e22988b446d2d6d8a2743d9965b","date":"2019-05-17 10:19:50 -0400","message":"escapingio: thread-safe struct for escaped chars","refs":[],"body":"Use a helper struct for capturing escaped characters that's thread safe.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"10797ca61f72254358905f6aa83e95e96d5b58d6","date":"2019-05-17 10:23:40 -0400","message":"escapingio: handle stalled readers","refs":[],"body":"Handle stalled readers (e.g. network write got stalled), by having\nescaping io have a buffer so it looks for escaped characters in the\nstream.\n\nThis simplifies the implementation considerably, as we can look\nfor new lines followed by escaped characters directly.\n\nAlso, we add a test to ensure that any partial results are flushed to\nreaders.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"30b148c8d481f5d0b08aa15540b4f685776c58bc","date":"2019-05-17 11:52:36 -0400","message":"Restore tty start before emitting errors","refs":[],"body":"Otherwise, the error message appears indented unexpectedly.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0070c2b6cbffbae5e56054a817c64fddb972b0c0","date":"2019-05-17 13:39:09 -0400","message":"address review feedback","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a64a4dcf12e1dcc4f26061010daf9d2128ee4ee9","date":"2019-05-17 14:52:54 -0400","message":"Merge pull request #5722 from hashicorp/f-nomad-exec-escape-try2","refs":[],"body":"escapingio: handle stalled readers","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"568a120e7bac9d3717c2317f1439e4ec71f7a89b","date":"2019-05-17 15:07:41 -0400","message":"Merge pull request #5649 from hashicorp/b-lookup-exe-chroot","refs":[],"body":"lookup executables inside chroot","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"cbc155582a25afde121d8423dc42d53b597bb035","date":"2019-01-18 19:01:12 -0500","message":"api: allow configuring http client","refs":[],"body":"Allow clients to configure httpClient, e.g. set a pooled/keep-alive\nclient.\n\nWhen caller configures HttpClient explicitly, we aim to use as-is; e.g.\nwe assume it's configured with TLS already.  Expose `ConfigureTLS` to\naid api consumers with configuring their http client.\n\nAlso, removes `SetTimeout` call that I believe is internal only and has\nodd side-effects when called on already created config.  Also deprecates\n`config.ConfigureTLS` in preference to the new `ConfigureTLS`.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"cec076290fca63fc20dacfe2d1ab1800330dfa39","date":"2019-03-12 14:25:14 -0700","message":"nomad: refactor waitForIndex into SnapshotAfter","refs":[],"body":"Generalize wait for index logic in the state store for reuse elsewhere.\nAlso begin plumbing in a context to combine handling of timeouts and\nshutdown.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6ca9f0cd92d55822c76dababbc76263bd4ad05e6","date":"2019-03-12 14:28:05 -0700","message":"nomad: remove unused NotifyGroup struct","refs":[],"body":"I don't think it's been used for a long time.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"e8a2fdba95a2b030db6592e7478e7125947156e6","date":"2019-05-17 16:50:16 -0400","message":"Vagrant optional (#5724)","refs":[],"body":"* specify Vagrant as optional in getting started and installation\r\n\r\n* edit next steps\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"b5fec1c77653ab7508b7505ab15472bc3c47374c","date":"2019-03-12 14:41:46 -0700","message":"nomad: wait for state store to sync in plan apply","refs":[],"body":"Wait for state store to catch up with raft when applying plans.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"a2e4f124bc81510e2dc1a0bd634726d333173ef0","date":"2019-05-17 14:37:42 -0700","message":"nomad: emit more detailed error","refs":["origin/b-snapshotafter"],"body":"Avoid returning context.DeadlineExceeded as it lacks helpful information\nand is often ignored or handled specially by callers.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"44f0654e9b7eea7d5178592eafe0dfb22bc9cc0a","date":"2019-05-17 17:34:05 -0400","message":"Run TestClientAllocations_Restart_ACL test","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"73e6e2ac4026d3ea748fbfdeaf61358fd55a8a79","date":"2019-05-20 10:06:15 -0400","message":"elaborate on shell interpolation and examples","refs":["origin/f-nomad-exec-part-05-cli-docs"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"10ab705a2c2afa9dcc2f69dbb2ba2dee949435a4","date":"2019-05-20 11:52:51 -0400","message":"remove \"incidentally\" exported internal function","refs":["origin/f-api-config-httpclient"],"body":"`*Config.ConfigureTLS()` is invoked internally by `NewClient` and API\nconsumers should not invoke directly.\n\nNow that http client is created in `api.NewClient`,\n`*Config.ConfigureTLS` makes no sense.  API consumers that call it\nexplicitly can remove the invocation and preserve the behavior.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"72f46f0a779cf55c8a4c6ed3ecd541fc62fc77ee","date":"2019-05-20 12:36:00 -0400","message":"Merge pull request #5275 from hashicorp/f-api-config-httpclient","refs":[],"body":"api: allow configuring http client","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"82611af92503e5255a3382b2ef44a9a69832c6b5","date":"2019-05-20 13:00:33 -0400","message":"drivers/exec: Restore 0.8 capabilities","refs":[],"body":"Nomad 0.9 incidentally set effective capabilities that is higher than\nwhat's expected of a `nobody` process, and what's set in 0.8.\n\nThis change restores the capabilities to ones used in Nomad 0.9.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c68962078af93a81080aa1fa1c6a01b949ff5323","date":"2019-05-16 20:19:49 -0700","message":"Replace the adapter cancellation methods with a cancellation token system","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3c1de2df913970b10c36be867d3c1cfd4a54e174","date":"2019-05-20 11:08:16 -0700","message":"Standardize on Abort over Cancel","refs":["origin/f-ui/watchable-cancellation-tokens","f-ui/watchable-cancellation-tokens"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b24aba2af3789c8659fd2b9feaecef4e6a594be4","date":"2019-05-20 11:27:16 -0700","message":"Fix typo.","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"60adaf71fa7dbb674dce81fd507603635254e42a","date":"2019-05-20 11:33:23 -0700","message":"Add PR link to changelog for #5702","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"85e1e0ba681f590608bc4bbcce0c9704ee1a3ba1","date":"2019-05-20 11:44:47 -0700","message":"Fix links.","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"0ecbfe6a8207268ec981553551fb65067a4dc307","date":"2019-05-20 11:49:14 -0700","message":"Merge pull request #5721 from hashicorp/f-ui/watchable-cancellation-tokens","refs":[],"body":"UI: Replace the adapter cancellation methods with a cancellation token system","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"203b54b2464420b800431b21a4c10c90f6696eaf","date":"2019-05-15 15:33:58 -0700","message":"Move addToPath to its own util","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"67188714a376885b77e518ff942b869f33f77277","date":"2019-05-20 15:30:07 -0400","message":"fix","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"59946ff70f1a37abca3215054b2b05d591cd1001","date":"2019-05-20 14:03:10 -0700","message":"Merge pull request #5411 from hashicorp/b-snapshotafter","refs":[],"body":"Block plan application until state store has caught up to raft","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"edd972519fe298caa303ac6c39c884773587dbd7","date":"2019-05-20 14:19:15 -0700","message":"client: drop unused DC field from servers list","refs":["origin/b-ignore-dc"],"body":"See #5730 for details.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"01a4ed1481b31a00dce21812e641874238598e58","date":"2019-05-20 15:26:20 -0700","message":"nomad: fix race in BlockedEvals","refs":[],"body":"I assume the mutex was being released before sending on capacityChangeCh\nto avoid blocking in the critical section, but:\n\n1. This is race.\n2. capacityChangeCh has a *huge* buffer (8096). If it's full things\n   already seem Very Bad, and a little backpressure seems appropriate.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b58282284d3faa0eec7aef37221393d465465f44","date":"2019-05-20 15:41:52 -0700","message":"nomad: fix deadlock in UnblockClassAndQuota","refs":[],"body":"Previous commit could introduce a deadlock if the capacityChangeCh was\nfull and the receiving side exited before freeing a slot for the sending\nside could send. Flush would then block forever waiting to acquire the\nlock just to throw the pending update away.\n\nThe race is around getting/setting the chan field, not chan operations,\nso only lock around getting the chan field.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"e2d793cfd94275cce00ea32197e36c3ecc7f0491","date":"2019-05-21 13:27:19 +0200","message":"Fix restart attempts of `restart` stanza.","refs":[],"body":"Number of restarts during 2nd interval is off by one.\n","author_name":"fwkz","author_email":"f4wkes@gmail.com"},{"hash":"42f0099bc2f02499967dcaf682dfca340e9e2255","date":"2019-05-21 09:36:43 -0400","message":"logmon: remove syslog server deadcode","refs":[],"body":"Remove unused syslog server related code that got replaced by the docker\nlogger in Nomad 0.9\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"1492d0c49ae353e8d83ed366e1983c78250bee77","date":"2019-05-21 08:50:25 -0400","message":"exec: allow drivers to handle stream termination","refs":[],"body":"Without this change, alloc_endpoint cancel the context passed to handler\nwhen we detect EOF.  This races driver in setting exit code; and we run\ninto a case where the exec process terminates cleanly yet we attempt to\nmark it as failed with context error.\n\nHere, we rely on the driver to handle errors returned from Stream and\nwithout racing to set an error.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"db3241c0df5b029ec7206783ddaa9160d5b4fb6a","date":"2019-05-20 20:03:54 -0400","message":"tests: handle unicode matches","refs":[],"body":"naive implementation should focus on ascii characters only\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5e17907a0c36b50c6a0ddd9c40255abdc11d1bc1","date":"2019-05-21 09:12:16 -0400","message":"tests: fix client TestFS_Stream data race","refs":[],"body":"Close is invoked in a different goroutine from test\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"56f564fa75c7c3b19ac690b11d0f8521a0a09420","date":"2019-05-21 09:18:22 -0400","message":"tests: fix data race in client TestDriverManager_Fingerprint_Periodic","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ea2f96e585ec910173d0c3f11f953f838f0af6af","date":"2019-05-21 09:32:58 -0400","message":"tests: fix fifo lib race","refs":[],"body":"Accidentally accessed outer `err` variable inside a goroutine\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"af48f7d3dc028873a3b29caccbced65f8eb9499f","date":"2019-05-21 09:55:05 -0400","message":"client: synchronize access to ar.alloc","refs":[],"body":"`allocRunner.alloc` is protected by `allocRunner.allocLock`, so let's\nuse `allocRunner.Alloc()` helper function to access it.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a7747106c8b4c2d3168cdd775eab2411f8b8f162","date":"2019-05-21 07:34:53 -0700","message":"Merge pull request #5732 from hashicorp/b-eval-race","refs":[],"body":"nomad: fix race in BlockedEvals","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"61006b5b51d7bdad6b1cbfd98298f02421dfe4de","date":"2019-05-21 10:56:08 -0400","message":"remove github.com/RackSec/srslog dependency","refs":[],"body":"No longer used\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"13caa42dffdd4ac57af85dda7c871df7287be894","date":"2019-05-21 11:04:58 -0400","message":"Merge pull request #5741 from hashicorp/b-alloc-race-20190521","refs":[],"body":"client: synchronize access to `ar.alloc`","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ae1b1108647753ce3eafd8658e8df364549fd6ce","date":"2019-05-21 11:24:12 -0400","message":"Merge pull request #5740 from hashicorp/b-nomad-exec-term-race","refs":[],"body":"exec: allow drivers to handle stream termination","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"fcceaee9b474bf2ff8bcc8f920639c60bd974e12","date":"2019-05-21 11:46:36 -0400","message":"Merge pull request #5742 from hashicorp/b-test-fixes-20190520","refs":[],"body":"Grab bag of (primarily race) test fixes","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bedf483d37c0e0ecd988147e8066f28aaceb0e6f","date":"2019-05-21 11:46:48 -0400","message":"Merge pull request #5739 from hashicorp/r-rm-logmon-syslog-deadcode","refs":[],"body":"logmon: remove syslog server deadcode","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b41af1c67a307340c2ca20393aee1837d551d5b8","date":"2019-05-16 17:41:40 -0700","message":"Add cancel on click outside and disabled behaviors to two-step-button","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b33ff625dbc4a4d1d8bedd9a0c4eab50a78a15dd","date":"2019-05-16 17:42:36 -0700","message":"New with-headroom modifier for titles","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4038434603eaa5c242938e7fcc0642b286de2018","date":"2019-05-16 17:43:00 -0700","message":"Allocation methods for stopping and restarting","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"64b4bf654645ed410c33231fb46f2192f13be92a","date":"2019-05-16 17:43:12 -0700","message":"Add stop and restart buttons to the allocation index page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"69c6c34afac83fc5cd6ce0808ff965dc560e691b","date":"2019-05-20 15:27:20 -0700","message":"Support task restarting in the allocation adapter","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3a8334e720fc788050a86306c2455128c8536656","date":"2019-05-20 15:35:21 -0700","message":"Watch the next allocation on the allocation index page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"01a3450c0851e0b20ce958853e893de0946af237","date":"2019-05-20 15:35:59 -0700","message":"Don't cancel watchers when transitioning to a sub-route","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a301e0f079116ee092bd7e584163c711bf1e19b5","date":"2019-05-20 15:36:15 -0700","message":"Restart a single task from the task detail page","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"d33f4bfd49b8494d007205916231c842de6db831","date":"2019-05-20 17:19:24 -0700","message":"Acceptance testing for allocation lifecycle","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"20028361c13adf5afb532263d8f69ba18a271f0c","date":"2019-05-21 09:23:47 -0700","message":"Use the TwoStepButton page object for integration testing too","refs":["origin/f-ui/allocation-lifecycle","f-ui/allocation-lifecycle"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"d06aeab087efede952626c22182ee7bbc633aeb0","date":"2019-05-21 13:56:58 -0400","message":"tests: fix data race in client/allocrunner/taskrunner/template TestTaskTemplateManager_Rerender_Signal","refs":[],"body":"Given that Signal may be called multiple times, blocking for `SignalCh`\nisn't sufficient to synchornizing access to Signals field.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"121927f08eae7b741bcca1650d73aff2218bd167","date":"2019-05-21 11:04:19 -0700","message":"Merge pull request #5734 from hashicorp/f-ui/allocation-lifecycle","refs":[],"body":"UI: Allocation lifecycle","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"621c649a0da4552c33aa11e1f24e5ec59d2081b8","date":"2019-05-21 14:29:45 -0400","message":"tests: fix deploymentwatcher tests data races","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b4262ce7374408287d6db6c296a1451c96bc6389","date":"2019-05-21 14:35:23 -0400","message":"tests: fix some nomad/drainer test data races","refs":["origin/b-test-fixes-20190521-1"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c702353863e23cd845a06da791602afc42e3e315","date":"2019-05-21 15:45:00 -0400","message":"set node.StatusUpdatedAt in raft","refs":[],"body":"Fix a case where `node.StatusUpdatedAt` was manipulated directly in\nmemory.\n\nThis ensures that StatusUpdatedAt is set in raft layer, and ensures that\nthe field is updated when node drain/eligibility is updated too.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"afa5f4dc0e996211a10a56853135a0275c8fd91b","date":"2019-05-21 14:20:40 -0700","message":"Include the _ prefix separator in both regexes","refs":["origin/b-ui/prefix-regex","b-ui/prefix-regex"],"body":"And include all prefix types in the test data\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ee419296ea54870804af8f2db8429cca5fba32ea","date":"2019-05-21 14:44:14 -0700","message":"Merge pull request #5748 from hashicorp/b-ui/prefix-regex","refs":[],"body":"Include the _ prefix separator in both regexes","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c00d6a47e68abc7925413d397d39af08b91a4cf3","date":"2019-05-21 15:10:48 -0700","message":"UI changelog entries","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"40b0c641636f922c8d73d00e0a0c7b3a43330da2","date":"2019-05-21 21:10:17 -0400","message":"update callers in tests","refs":["origin/b-no-updating-inmem-node"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2972ce15d1f68a591673e7e881d5469fed389080","date":"2019-05-21 21:29:15 -0400","message":"fix httpClient error handling","refs":[],"body":"If err is nil, we should use the newly cloned httpClient.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"92527c6b4ef8951d82a49367737eca6ef5e0b9ff","date":"2019-05-22 13:47:35 +0200","message":"client: Pass servers contacted ch to allocrunner","refs":[],"body":"This fixes an issue where batch and service workloads would never be\nrestarted due to indefinitely blocking on a nil channel.\n\nIt also raises the restoration logging message to `Info` to simplify log\nanalysis.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"fc45e171f639f2a7ac09c4974647604d18841e15","date":"2019-05-22 14:17:24 +0200","message":"Merge pull request #5749 from hashicorp/dani/restore-allocs","refs":[],"body":"client: Pass servers contacted ch to allocrunner","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"7e882f590806fe0c7906fa26a0c533a762301db6","date":"2019-05-22 14:21:09 +0200","message":"devcluster: Add standalone server","refs":[],"body":"This adds a single-node configuration of a dev cluster, for use when\ntesting things that require state restoration or multiple clients, but don't\nnecessarily require a 3+ node cluster.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"05e8f179ee2a30b67fc21044a10546b291b9d0b6","date":"2019-05-22 08:48:16 -0400","message":"sort changelog entries","refs":[],"body":"In each section, entries should be sorted by component name (except for\ncore that appears in top), and then by line length.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"aa72c01a81c4ea03881f2297d342544f3dd57281","date":"2019-05-22 08:57:11 -0400","message":"changelog alloc exec and /api http client changes","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3eb0389dc3e897312bdc87ef5736ca3e7bfee4b5","date":"2019-05-22 09:03:32 -0400","message":"Merge pull request #5751 from hashicorp/update-changelog-20190522","refs":[],"body":"sort and changelog entries","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3e353bdce23f59fad9213200b7d57da8f1c1c372","date":"2019-05-22 09:31:23 -0400","message":"Merge pull request #5711 from hashicorp/f-nomad-exec-part-05-cli-docs","refs":[],"body":"Document `nomad exec` command","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d1f12fd3cb0805b5b7d75d0f779cf5f5369712bc","date":"2019-05-22 09:37:49 -0400","message":"client: synchronize client.invalidAllocs access","refs":[],"body":"invalidAllocs may be accessed and manipulated from different goroutines,\nso must be locked.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"fb38029ba907206b4ff09d1f44a7475a6da963e5","date":"2019-05-22 10:47:17 -0400","message":"Merge pull request #5752 from hashicorp/b-client-lock-invalidallocs","refs":[],"body":"client: synchronize client.invalidAllocs access","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a52c7c2cbfaf81b1d22919650eea5891f4ae5472","date":"2019-05-22 08:42:15 -0700","message":"Merge pull request #5731 from hashicorp/b-ignore-dc","refs":[],"body":"client: drop unused DC field from servers list","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"df84e07c1a46e41b3fb9da8be3dc9c2ffce0075a","date":"2019-05-22 18:02:43 +0200","message":"Merge pull request #5750 from hashicorp/dani/devcluster-standalone","refs":[],"body":"devcluster: Add standalone server","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"55b91ad0861818f5881b9d64fe4b42acd3920c82","date":"2019-05-10 11:15:35 -0400","message":"new deploymentwatcher/doc.go for package level documentation","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"2f233576ecddab62436ca95b3b999041712260e4","date":"2019-05-16 08:47:45 -0400","message":"state_store typo in a comment","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"1ba04fc5eb2a0263e1e47df58fc21e0c07b07230","date":"2019-05-11 16:47:34 -0400","message":"deployments_watcher comments","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"2753b51b634653b1f2b084b84871ad3b52434cbc","date":"2019-05-10 11:20:12 -0400","message":"deployment_watcher when it's ok to autopromote, do so","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"2165f8be94a94ebfc4c1f087d7bca44a6d56dc53","date":"2019-05-13 16:58:52 -0400","message":"sched reconcile copy AutoPromote to DeploymentState","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"0643a0162fc58481dceed5d8f558f574137576de","date":"2019-05-10 11:20:42 -0400","message":"deployments_watcher_test new TestWatcher_AutoPromoteDeployment","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"9621c073fe14e89de4078520eda981da2fa9bab6","date":"2019-05-09 09:42:18 -0400","message":"add update AutoPromote bool","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5ac416a04a2531a62887771cd7501e5328d30813","date":"2019-05-17 14:11:37 -0400","message":"website update auto_promote doc","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"21dccdf8dd88a0111f686436edad6390db7c89fa","date":"2019-05-17 17:53:27 -0400","message":"describe a pending deployment with auto_promote accurately","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"84307d9d0b82d4da483f96b65e3af5bf3c60c80f","date":"2019-05-20 11:37:49 -0400","message":"describe a pending deployment without auto_promote more explicitly","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"8b64574721f3dbcd8a4ce4de1cb74104e8704e2a","date":"2019-05-20 10:54:28 -0400","message":"e2e util split new alloc and await placement, new WaitForDeployment","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"2422991220525bb726288f23994ff43bcf1f6581","date":"2019-05-20 11:37:36 -0400","message":"new e2e deployment test","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"1a99a0f771fddec1aef272e6bd93960224902dea","date":"2019-05-20 13:27:28 -0400","message":"e2e utils error format arg match","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"03c69c88dd0d41797478419e2747146f829e3d60","date":"2019-05-20 14:04:51 -0400","message":"api/jobs add AutoPromote to Canonicalize","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"2772cc26f4f3ade45d48f91cebbe01a69833ba38","date":"2019-05-20 14:31:30 -0400","message":"log error on autoPromoteDeployment failure","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"d867cbfa8511e92413dc0ceaa572cdfcbfbcc60e","date":"2019-05-20 14:36:58 -0400","message":"structs validate requires Canary for AutoPromote","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c009381242a97679b6fe2a11ce95a8b819cb4e24","date":"2019-05-20 14:50:25 -0400","message":"CHANGELOG add improvement entry","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"78b9aeffa2ebc57dd7dd03164ee201da4b83cea1","date":"2019-05-20 14:53:55 -0400","message":"e2e README typo","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"3a3c4426bbc35af5d3be820c68a4ea6b8a105b81","date":"2019-05-20 15:10:32 -0400","message":"e2e utils remove ineffectual assignment of allocs","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"7d40ffd4cf1ea99b8716ba539c1199fd15d28bee","date":"2019-05-20 15:44:49 -0400","message":"api/jobs diff tests expect AutoPromote","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"f4701e69b932075743ef462e9065a3b85f2c5eab","date":"2019-05-20 19:26:44 -0400","message":"Update website/source/docs/job-specification/update.html.md","refs":[],"body":"Co-Authored-By: Michael Schurter <michael.schurter@gmail.com>","author_name":"Lang Martin","author_email":"lang.martin@gmail.com"},{"hash":"0da3ee574f4f03986899a9aab81b05a4f8eaaca0","date":"2019-05-21 09:13:03 -0400","message":"website more explicit auto_promote instructions","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"1e9f3145d680561773f531f5d9e8a50024f841df","date":"2019-05-21 09:13:49 -0400","message":"e2e readme minor changes to command + env val templates and order","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"dd2f16a031b02e1f21f1bf0448b9eaacb0f5984e","date":"2019-05-21 09:21:44 -0400","message":"e2e add deployment to the list of e2e tests, minor fixes","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"28dbf73358cd90631094828cd3a43bbcb1a52711","date":"2019-05-21 13:02:59 -0400","message":"deployment_watcher auto promote iff every task group is auto promotable","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c086b5f483af064484f966042bfa1a2ff11f78b5","date":"2019-05-21 15:37:19 -0400","message":"api use job.update as the default for taskgroup.update","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"a5e3e8e8180e64cfbe17bdd729704e596f2c0b55","date":"2019-05-21 16:28:11 -0400","message":"e2e/deployment comment the job files for clarity","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"a234550d6f463897ea7a2e26ccf86f4bdb38c50e","date":"2019-05-21 16:46:11 -0400","message":"Update e2e/deployment/deployment.go","refs":[],"body":"Co-Authored-By: Mahmood Ali <mahmood@notnoop.com>","author_name":"Lang Martin","author_email":"lang.martin@gmail.com"},{"hash":"71338ab35649924ce06d51bfef4da37cfdbfa97d","date":"2019-05-21 16:52:43 -0400","message":"structs job warnings for taskgroup with mixed auto_promote settings","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"b09b0bebc5d9e685d23a282fd2749eec08859f72","date":"2019-05-21 17:16:12 -0400","message":"structs comment todo DeploymentStatus & DeploymentStatusDescription","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"9f74b2285f1fc3dcfe09f8e1c8cd14f66a1ee9a6","date":"2019-05-21 17:24:18 -0400","message":"comment replace COMPAT 0.7.0 for job.Update with more current info","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c9a837cbb52b8f75d7896d68de0167bf21013e54","date":"2019-05-21 18:43:38 -0400","message":"structs check TaskGroup.Update for nil","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"643d8400b1ed0da48ce4e009a302391989c1787a","date":"2019-05-22 13:24:22 -0400","message":"Merge pull request #5719 from hashicorp/f-auto-promote-canaries","refs":[],"body":"auto promote canaries","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"2aa1350c885b24bd75129724900bfe5923d8b0f5","date":"2019-05-22 13:25:36 -0400","message":"reorder changelog","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"83af31f527917cd253dd96495163d1c23b234fb4","date":"2019-05-22 13:40:25 -0400","message":"use Node 10 for releases","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"05a619c8aa893fe689a9168ff2bf560c78a18cb5","date":"2019-05-22 14:23:50 -0400","message":"Pin node version to v10.15.3","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"98e75251316173bd2e6f6392dceea5f2d2182e17","date":"2019-05-22 19:29:30 +0000","message":"Generate files for 0.9.2-rc1 release","refs":[],"body":"","author_name":"Nomad Release bot","author_email":"nomad@hashicorp.com"},{"hash":"6b82b5d2afa709c676e1a2fd8d805322b753009b","date":"2019-05-23 10:27:17 -0400","message":"docs: Link to 0.9.2-rc1","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ab5ec50c57f8fe697ad89a0c1c459f0597241aa9","date":"2019-05-23 10:51:03 -0400","message":"docs: Tag all 0.9.2 features","refs":["origin/d-tag-0.9.2-rc1-features"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6e915975e118183a1104e169d18278230f95e6eb","date":"2019-05-23 11:04:50 -0400","message":"Release v0.9.2-rc1","refs":["tag: v0.9.2-rc1"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com","tag":"v0.9.2-rc1"},{"hash":"cdc0e0451672dbe0a14db12550a30581aab6b6ba","date":"2019-05-23 11:14:24 -0400","message":"remove 0.9.2-rc1 generated code","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f9dbcd6e9e9a8ea3638b49e2e12f39a75d222c4c","date":"2019-05-23 11:22:28 -0400","message":"Merge pull request #5755 from hashicorp/d-tag-0.9.2-rc1-features","refs":[],"body":"Prepare for 0.9.2-rc1","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3e1b13692980ffab82b8b7a39848aaa5050287b5","date":"2019-05-24 11:30:16 -0400","message":"tests: Fix binary dir permissions","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ce50aac560d2ee0e61c5c5f3e504ce5297e3e35e","date":"2019-05-24 12:30:06 -0400","message":"Proposing new tfvars with additional inline docs","refs":["origin/f_improve_tfvars"],"body":"","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"1a6454d2425a54dd7d43e41d1d879a918bf4c3a6","date":"2019-05-24 14:03:26 -0400","message":"special case root capabilities","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e855738e0c5746f79587fdab17703a8c0e2072f0","date":"2019-05-24 14:50:23 -0400","message":"use /bin/bash","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a1414bd36081aad8d540d9c691e6def799c82788","date":"2019-05-24 15:06:50 -0500","message":"Test for expected capabilities specifically","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6217d50803fea52d0395d8442cf8ce80963ba7ba","date":"2019-05-24 21:30:45 -0500","message":"Fix test comparisons","refs":["origin/restore-08-caps"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d017b5fbc5bc564545806af2b4c19b91ab7fbdfe","date":"2019-05-28 09:18:24 -0400","message":"update changelog for #5557 (#5763)","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"86a6569933bd43a8349b5e8d72aa0518c0d2906e","date":"2019-05-29 11:49:39 -0500","message":"Merge pull request #5728 from hashicorp/restore-08-caps","refs":[],"body":"drivers/exec: Restore 0.8 capabilities","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9349f48e9cc12a28d754344edbbc5e56e4f5ed72","date":"2019-05-31 14:59:13 -0500","message":"changelog exec memory consumption fix","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3a96683131b3af1228a95d9ed5d7fd477e62cea0","date":"2019-05-29 22:38:43 +0000","message":"docker: DestroyTask was not cleaning up Docker images because it was erroring early due to an attempt to inspect an image that had already been removed","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"3b827703fb0a8b5ab537268e3967c90b71b9c329","date":"2019-05-30 19:35:22 +0000","message":"docker/tests: - modified tests to cleanup now that RemoveContainer isn't in StartTask - fix some broken tests by removing docker images/containers before test","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"60a3e95cd0dd64d3cd60034eff30504eb27308d6","date":"2019-06-03 19:07:13 +0000","message":"update changelog","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"5a597f4947133ab1d687c7c0d36b93450235ce39","date":"2019-06-03 15:31:39 -0400","message":"client config flag to disable remote exec","refs":[],"body":"This exposes a client flag to disable nomad remote exec support in\nenvironments where access to tasks ought to be restricted.\n\nI used `disable_remote_exec` client flag that defaults to allowing\nremote exec. Opted for a client config that can be used to disable\nremote exec globally, or to a subset of the cluster if necessary.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"262c863a8b12aba3b0068d914af768e02ea2073d","date":"2019-06-03 19:17:57 +0000","message":"drivers/docker: modify container/image cleanup to be robust to containers removed out of band","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"7b6d233617be574972ef1f3176156a4d0ecdccc4","date":"2019-06-03 21:15:54 +0000","message":"docker/driver: downgraded log level for error in DestroyTask","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"cd3cd0ad9d771bd282490cdc5836b375ca5a7c94","date":"2019-06-03 15:34:21 -0700","message":"nomad: revert use of SnapshotAfter in planApply","refs":[],"body":"Revert plan_apply.go changes from #5411\n\nSince non-Command Raft messages do not update the StateStore index,\nSnapshotAfter may unnecessarily block and needlessly fail in idle\nclusters where the last Raft message is a non-Command message.\n\nThis is trivially reproducible with the dev agent and a job that has 2\ntasks, 1 of which fails.\n\nThe correct logic would be to SnapshotAfter the previous plan's index to\nensure consistency. New clusters or newly elected leaders will not have\na previous plan, so the index the leader was elected should be used\ninstead.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"168e3e928b2c763d7266f1b7f2496b7fd561158c","date":"2019-06-03 20:16:23 -0400","message":"Merge pull request #5768 from hashicorp/b-nmd-1489-cleanup-docker-images","refs":[],"body":"Cleanup docker images","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"0a29d67bebadb535eedb7ff8b0755cecfb1ff1bb","date":"2019-06-04 08:25:21 -0700","message":"Merge pull request #5773 from hashicorp/b-revert-planapply-snapshotafter","refs":[],"body":"nomad: revert use of SnapshotAfter in planApply","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"22b6c2e6ade62f71c578d08e2ded310630173d5c","date":"2019-06-04 11:25:18 -0400","message":"e2e/deployment find the second deployment, use its status","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"293b3d4b9fac1f83566f53114e8ba7cb83e9eec8","date":"2019-06-04 13:40:46 -0400","message":"e2e bin/update and bin/run, README","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"9b0ae123587c52c2c63eb1a4df6830c07aa87f4a","date":"2019-06-04 13:45:44 -0400","message":"deployment update website examples to say 'requires manual promotion'","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"6ca33d0f206ab6eda96f9969a31b1b8ea9a945c7","date":"2019-06-04 14:08:30 -0400","message":"e2e/deployment fail if the second deployment times out","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"4b8c9428f47d36ef617b6b9f0d94e00e341fac0a","date":"2019-06-04 14:31:42 -0400","message":"e2e/deployment DeploymentsForJob fail instead of nil, error passing","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"b170ef9a0354c07c85832bffc063082f75a24e6b","date":"2019-06-04 14:37:56 -0400","message":"link to flag from alloc exec doc","refs":["origin/f-disable-nomad-exec"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"fc9f75371e4cb23867e26d809b322202b6116355","date":"2019-06-04 14:38:59 -0400","message":"Merge pull request #5772 from hashicorp/f-disable-nomad-exec","refs":[],"body":"client config flag to disable remote exec","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"50fc86ad26a3bf4caac829b1f9a1c8fbd8cb2a6c","date":"2019-06-04 15:11:00 -0400","message":"changelog GH-5728","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f7ab4f0f214b5a62b7f255e8cb997651cb1f0b8f","date":"2019-06-04 15:52:32 -0400","message":"e2e update shell scripts argument quoting","refs":["origin/b-flaky-e2e-test"],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"1186d77133ce132276160b53c43cbb6e0e15628d","date":"2019-06-04 15:41:40 -0700","message":"nomad: disable service+batch preemption by default","refs":["origin/b-preempt-off-by-default"],"body":"Enterprise only.\n\nDisable preemption for service and batch jobs by default.\n\nMaintain backward compatibility in a x.y.Z release. Consider switching\nthe default for new clusters in the future.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"3e067bf6b8c482e51aabdfe357541dd5513378cf","date":"2019-06-04 23:05:25 +0000","message":"Adds Enterprise docs for Preemption","refs":["origin/d-preemption-ent"],"body":"","author_name":"Rob Genova","author_email":"rcgenova@gmail.com"},{"hash":"de730a117ccd3b13503e6bed9d0b752ac1ffde43","date":"2019-06-04 19:58:45 -0400","message":"Merge pull request #5779 from hashicorp/d-preemption-ent","refs":[],"body":"Add Enterprise docs for Preemption","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f178a159386bd7b6f583cefdceb58059b1d62b17","date":"2019-06-04 20:00:09 -0400","message":"Merge pull request #5778 from hashicorp/b-preempt-off-by-default","refs":[],"body":"nomad: disable service+batch preemption by default","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f1dc5a6a98b2693fc7b85d3a5170754f8d140530","date":"2019-06-04 22:39:54 -0400","message":"update changelog for GH-5545","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"028326684b9da489e0371247a223ef3ae4755d87","date":"2019-06-05 11:59:27 +0000","message":"Generate files for 0.9.2 release","refs":[],"body":"","author_name":"Nomad Release bot","author_email":"nomad@hashicorp.com"},{"hash":"2b45c6d26caa99114dc3a1e8a272a91e873323b5","date":"2019-06-05 14:49:29 +0000","message":"Release v0.9.2","refs":["tag: v0.9.2"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com","tag":"v0.9.2"},{"hash":"613235d586df760bc96958582c250edb24f3d284","date":"2019-06-05 14:54:00 +0000","message":"Prepare for 0.9.3 dev cycle","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"54be46e7fc008924032f2d0fc75757887c43d644","date":"2019-06-05 20:39:22 +0530","message":"revert 0.9.2 super script tags","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a1fef61bbc4195cc7680a181ac3eb4f6e39222c8","date":"2019-06-05 20:41:11 +0530","message":"remove 0.9.2 rc1 download link","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"b84d0b705e4ef608066b1c6f70e72f4065424b19","date":"2019-06-05 20:45:17 +0530","message":"Update release version to 0.9.2","refs":["origin/b-revert-release-sup"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"8ba7e5246478eb0e9f8f1adb0ac26f072a4ad48d","date":"2019-06-05 20:46:50 +0530","message":"Merge pull request #5781 from hashicorp/b-revert-release-sup","refs":[],"body":"Revert 0.9.2 release super script tags","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"d9ac7c25d5c1d7b0543bf8151e39a5d7cb24cf58","date":"2019-06-05 19:05:07 -0400","message":"Merge pull request #5737 from fwkz/fix-restart-attempts","refs":[],"body":"Fix restart attempts of `restart` stanza in `delay` mode.","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3f21aba9cb04bd0aa67b0b38d5164f8fb814df88","date":"2019-06-05 19:05:21 -0400","message":"Merge pull request #5746 from hashicorp/b-no-updating-inmem-node","refs":[],"body":"set node.StatusUpdatedAt in raft","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6ccfd47cddbac78a1ef3de4a266eb20e89dd8650","date":"2019-06-05 19:09:18 -0400","message":"Merge pull request #5747 from hashicorp/b-test-fixes-20190521-1","refs":[],"body":"More test fixes","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4293c6d6b525514f76e6d32d23bf0a198219ba83","date":"2019-06-06 09:09:21 -0400","message":"Merge pull request #5760 from hashicorp/f_improve_tfvars","refs":[],"body":"Proposing new tfvars with additional inline docs","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9372fb74b9bc54b62eaf662b4c77180f519b5f58","date":"2019-06-06 14:28:30 +0100","message":"Fix a website link under `Runtime Environment`","refs":[],"body":"Under the `Network-related Variables` the `NOMAD_HOST_PORT_<label>` has\na incorrect link.\n","author_name":"john-lay","author_email":"john_lay@hotmail.co.uk"},{"hash":"0abbbc6163516c688e65f95b11f94a912947a121","date":"2019-06-06 17:44:01 +0100","message":"Update the link to point to `#mapped-ports`","refs":[],"body":"","author_name":"john-lay","author_email":"john_lay@hotmail.co.uk"},{"hash":"62ba65406203e306834109edf476045f37a92129","date":"2019-06-06 14:11:03 -0400","message":"Merge pull request #5785 from john-lay/website-link-for-port-host-label","refs":[],"body":"Fix a website link under `Runtime Environment`","author_name":"Charlie Voiselle","author_email":"charlie.voiselle@gmail.com"},{"hash":"158d8dfc82c50eaedb97bdb64d3a9b9aca15a067","date":"2019-06-06 12:18:45 -0700","message":"docs: initial attempt at developer docs","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"5574b2f3d09fd8998fb3c6befc302cd192d50316","date":"2019-06-06 15:50:23 -0400","message":"tests: Migrated allocs aren't lost","refs":[],"body":"Fix `TestServiceSched_NodeDown` for checking that the migrated allocs\nare actually marked to be stopped.\n\nThe boolean logic in test made it skip actually checking client status\nas long as desired status was stop.\n\nHere, we mark some jobs for migration while leaving others as running,\nand we check that lost flag is only set for non-migrated allocs.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c15c76337fd716ec33920eb0b3f1875d452b5179","date":"2019-06-06 16:58:35 -0400","message":"Merge pull request #5788 from hashicorp/b-fix-node-down-test","refs":[],"body":"tests: Migrated allocs aren't lost","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2a38b569a19d6fdbda14458089257a1bd801058f","date":"2019-06-06 14:05:13 -0700","message":"docs: CLI -> client","refs":[],"body":"The UI is a client too!\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"0628f12538bdee51644cda2f613e77f033f9bce5","date":"2019-06-06 14:05:32 -0700","message":"docs: remove subbullet points","refs":[],"body":"They render ambiguously\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"c62c246ad97c938d8e99ff0ffac7639c24251851","date":"2019-06-06 15:04:32 -0400","message":"Stop allocs to be rescheduled","refs":["origin/b-reschedule-desired-state"],"body":"Currently, when an alloc fails and is rescheduled, the alloc desired\nstate remains as \"run\" and the nomad client may not free the resources.\n\nHere, we ensure that an alloc is marked as stopped when it's\nrescheduled.\n\nNotice the Desired Status and Description before and after this change:\n\nBefore:\n```\nmars-2:nomad notnoop$ nomad alloc status 02aba49e\nID                   = 02aba49e\nEval ID              = bb9ed1d2\nName                 = example-reschedule.nodes[0]\nNode ID              = 5853d547\nNode Name            = mars-2.local\nJob ID               = example-reschedule\nJob Version          = 0\nClient Status        = failed\nClient Description   = Failed tasks\nDesired Status       = run\nDesired Description  = <none>\nCreated              = 10s ago\nModified             = 5s ago\nReplacement Alloc ID = d6bf872b\n\nTask \"payload\" is \"dead\"\nTask Resources\nCPU        Memory          Disk     Addresses\n0/100 MHz  24 MiB/300 MiB  300 MiB\n\nTask Events:\nStarted At     = 2019-06-06T21:12:45Z\nFinished At    = 2019-06-06T21:12:50Z\nTotal Restarts = 0\nLast Restart   = N/A\n\nRecent Events:\nTime                       Type            Description\n2019-06-06T17:12:50-04:00  Not Restarting  Policy allows no restarts\n2019-06-06T17:12:50-04:00  Terminated      Exit Code: 1\n2019-06-06T17:12:45-04:00  Started         Task started by client\n2019-06-06T17:12:45-04:00  Task Setup      Building Task Directory\n2019-06-06T17:12:45-04:00  Received        Task received by client\n\n```\n\nAfter:\n\n```\nID                   = 5001ccd1\nEval ID              = 53507a02\nName                 = example-reschedule.nodes[0]\nNode ID              = a3b04364\nNode Name            = mars-2.local\nJob ID               = example-reschedule\nJob Version          = 0\nClient Status        = failed\nClient Description   = Failed tasks\nDesired Status       = stop\nDesired Description  = alloc was rescheduled because it failed\nCreated              = 13s ago\nModified             = 3s ago\nReplacement Alloc ID = 7ba7ac20\n\nTask \"payload\" is \"dead\"\nTask Resources\nCPU         Memory          Disk     Addresses\n21/100 MHz  24 MiB/300 MiB  300 MiB\n\nTask Events:\nStarted At     = 2019-06-06T21:22:50Z\nFinished At    = 2019-06-06T21:22:55Z\nTotal Restarts = 0\nLast Restart   = N/A\n\nRecent Events:\nTime                       Type            Description\n2019-06-06T17:22:55-04:00  Not Restarting  Policy allows no restarts\n2019-06-06T17:22:55-04:00  Terminated      Exit Code: 1\n2019-06-06T17:22:50-04:00  Started         Task started by client\n2019-06-06T17:22:50-04:00  Task Setup      Building Task Directory\n2019-06-06T17:22:50-04:00  Received        Task received by client\n```\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"85c449b7667c0f4e73de56d9ab3997d3ed9ca511","date":"2019-06-06 20:26:17 -0400","message":"Merge pull request #5776 from hashicorp/b-flaky-e2e-test","refs":[],"body":"flaky e2e test","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a7dee4a23c1b293f9516b8216e996d156a5f167d","date":"2019-06-07 08:33:24 -0700","message":"docs: require Go 1.11+","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"2505d3c40a0c098c57562b14fddc6873db217c7f","date":"2019-06-07 08:33:35 -0700","message":"docs: mention ui & website as \"core components\"","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"47d9996fa48a376dff2e6d8cf1ae4f32008e03b1","date":"2019-06-07 15:41:13 -0700","message":"docs: move dev docs to contributing","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"2808674facd9423bae268199eb6752bf9af2fb04","date":"2019-06-07 18:55:02 -0400","message":"test: add tests for network devices and preemption","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d342a24ba0c977357a5c29f356bee3e9a8a1574a","date":"2019-06-07 18:55:55 -0400","message":"Only preempt for network when there is a network","refs":["origin/b-preemption-network-panic"],"body":"When examining preemption for networks, only consider allocs that have\nnetworks.\n\nFixes https://github.com/hashicorp/nomad/issues/5793\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"21a617a0e3a63b3f1474d22e9287a30f14a5f7d9","date":"2019-06-10 07:10:29 -0400","message":"Merge pull request #5794 from hashicorp/b-preemption-network-panic","refs":[],"body":"Only preempt for network when there is a network","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"038542481b09a4b017bf293de796051df15ebdaf","date":"2019-06-10 08:51:58 -0500","message":"Add PR previews with Netlify (#5787)","refs":[],"body":"It would be preferable to only generate these for UI PRs but Netlify appears to\r\nnot have that flexibility. I tried setting up manual deployments in a Travis\r\nenvironment but gave up the experiment; it could probably eventually work if\r\ndeployment failures become a nuisance.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"d7edf9b2e42348865908735996359c7869fb16b5","date":"2019-06-10 09:49:47 -0400","message":"changelog GH-5794","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"971a8cdc8a05078313a4e8dbc51171c6e59ccdf1","date":"2019-06-10 17:26:27 +0200","message":"Fix incorrect link to the sample Grafana dashboard","refs":[],"body":"closes #5799","author_name":"James Rasell","author_email":"jrasell@users.noreply.github.com"},{"hash":"0606f50f46f4e958fbc877d23c27f1a14fb86dc1","date":"2019-06-10 12:46:21 -0400","message":"config parse_test check for string coercion in client.meta","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"3ddcb74a4c136411063ac273677047c9691fbebc","date":"2019-06-10 12:48:38 -0400","message":"config parse update hcl with support for decoding bool to string","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"7cfc92e26f27e506b661b9be95fb0e448e6d906f","date":"2019-06-10 14:08:15 -0700","message":"Revised Nomad Enterprise page","refs":[],"body":"- Revised Enterprise content to reflect new pricing & packaging modules\n- Consolidated feature pages into single Enterprise pager\n- Made each feature into its own subsection on the Enterprise page\n- Added direct links to their respective guides below\n- Upleveled all Enterprise features onto the navbar\n- Updated redirects\n","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"8ccb6bf3d6b28807a9e242872f9a16e33a804059","date":"2019-06-10 17:09:20 -0400","message":"test that stopped alloc jobs aren't modified","refs":[],"body":"When an alloc is stopped, test that we don't update the job found in\nalloc with new job  that is no longer relevent for this alloc.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7825a3ca4d6c8a4f2f89381893d63e809c5b49db","date":"2019-06-10 17:19:54 -0400","message":"Stop updating allocs.Job on stopping or preemption","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"41a7fe8530954e9b5de76bc1f301d7e78aeb73a4","date":"2019-06-10 17:24:41 -0400","message":"client/allocrunner: depend on internal task state","refs":[],"body":"Alloc runner already tracks tasks associated with alloc.  Here, we\nbecome defensive by relying on the alloc runner tracked tasks, rather\nthan depend on server never updating the job unexpectedly.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c72bf13f8ae387f19f3ff8533f1585a71cbcf9e7","date":"2019-06-10 21:20:45 -0400","message":"exec: use an independent name=systemd cgroup path","refs":[],"body":"We aim for containers to be part of a new cgroups hierarchy independent\nfrom nomad agent.  However, we've been setting a relative path as\nlibcontainer `cfg.Cgroups.Path`, which makes libcontainer concatinate\nthe executor process cgroup with passed cgroup, as set in [1].\n\nBy setting an absolute path, we ensure that all cgroups subsystem\n(including `name=systemd` get a dedicated one).  This matches behavior\nin Nomad 0.8, and behavior of how Docker and OCI sets CgroupsPath[2]\n\nFixes #5736\n\n[1] https://github.com/hashicorp/nomad/blob/d7edf9b2e42348865908735996359c7869fb16b5/vendor/github.com/opencontainers/runc/libcontainer/cgroups/fs/apply_raw.go#L326-L340\n[2] https://github.com/moby/moby/blob/238f8eaa31aa74be843c81703fabf774863ec30c/vendor/github.com/containerd/containerd/oci/spec.go#L229\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7423b3092fb45060e335827e821f4dfac0b535df","date":"2019-06-11 08:53:55 -0400","message":"Merge pull request #5805 from hashicorp/b-tg-rename-panic","refs":[],"body":"Fix a panic related to updating alloc taskgroups","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2213cd5cfd13511e814da8f4c9fa87a81df4ace9","date":"2019-06-11 09:12:36 -0400","message":"Merge pull request #5802 from hashicorp/b-config-meta-parsing","refs":[],"body":"config meta parsing","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"7a01a96cc2d6c9c9ff39bc39d49184b5139af9f9","date":"2019-06-11 10:30:09 -0400","message":"Fallback to `alloc.TaskResources` for old allocs","refs":["origin/fix-allocresources-reference"],"body":"When a client is running against an old server (e.g. running 0.8),\n`alloc.AllocatedResources` may be nil, and we need to check the\ndeprecated `alloc.TaskResources` instead.\n\nFixes https://github.com/hashicorp/nomad/issues/5810\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f0c9b60b45afe55cee9a8c823ac71bee3bcbd006","date":"2019-06-11 11:33:25 -0400","message":"Merge pull request #5812 from hashicorp/fix-allocresources-reference","refs":[],"body":"Fallback to `alloc.TaskResources` for old allocs","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2cc2e60dedbe6728b18ec1ae68ef459af69c90e5","date":"2019-06-11 13:00:26 -0400","message":"update comment","refs":["origin/b-systemd-cgroups-path"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"abc9128ac3776cfbc35ef32e5a8d4bdf34b14c7f","date":"2019-06-11 13:00:44 -0400","message":"Merge pull request #5806 from hashicorp/b-systemd-cgroups-path","refs":[],"body":"drivers/exec: use an independent name=systemd cgroup path","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"95a48a190af9f7464499e8bc21e2f4d96077c986","date":"2019-06-11 13:25:14 -0400","message":"update changelog for 0.9.3","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bb67e1c2c4db75394367fd0f626c7fa0a8128393","date":"2019-06-11 13:30:54 -0400","message":"scripts: use /dev/null when verifying s3","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"db813c6252e7fe00d32c9448821126d7769fd85e","date":"2019-06-11 13:16:37 -0500","message":"Add warning docs around downgrades","refs":["origin/f-downgrade-docs"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"bd21545307603d550b2b88a83cebd6ee8374e47c","date":"2019-06-11 14:25:55 -0500","message":"Change Netlify site id (#5814)","refs":[],"body":"The Netlify site now belongs to the Hashicorp organisation\r\nrather than the hc-nomad user.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"5a3a47c7a4e4a48600082e820efd376116b6361c","date":"2019-06-11 15:14:24 -0400","message":"config_parse split out defaults from ParseConfig","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"006a9a1d454739eee21b7d8abb8b7aef1353b648","date":"2019-06-11 15:15:52 -0400","message":"config explicitly merge defaults once when using a config directory","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"e9fa8e56215b12f27b68e95738d7d70c943c75f6","date":"2019-06-11 15:17:31 -0400","message":"config_parse_test, handle defaults","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"4bfbeb649b827677f20e09fab4b850761ab5760c","date":"2019-06-11 15:25:56 -0400","message":"config merge maintains *HCL string fields used for duration conversion","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"d1ee78ab304bad4de45f30598ff35b040fd5f324","date":"2019-06-11 15:13:27 -0400","message":"agent/testdata add a configuration directory for testing","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c94834f575aaabcd517ab5779530cd374ea67940","date":"2019-06-11 19:17:32 -0400","message":"Merge pull request #5817 from hashicorp/b-consul-stanza","refs":[],"body":"fix consul stanza parsing when a configuration directory is used","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"65772b674165fa6ac02a88a9a3b22ed3d25a634b","date":"2019-06-11 19:44:18 -0400","message":"changelog GH-5817","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b4ff3d9d2029710952cc6cde6c123c32d40bdb95","date":"2019-06-11 19:46:50 -0400","message":"correct GH-5812 changelog","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a25b4d9d490437b4716cb6ef880818466606c4bc","date":"2019-06-11 21:59:44 -0400","message":"Revert \"config explicitly merge defaults once when using a config directory\"","refs":[],"body":"This reverts commit 006a9a1d454739eee21b7d8abb8b7aef1353b648.\n","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"cedd2ba17f5ec35e97dfe959725f7d6f238d31b0","date":"2019-06-11 21:58:19 -0400","message":"config_parse get rid of ParseConfigDefault","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"62eb6081fa38cb072641fae45ae06b410b5ecf23","date":"2019-06-11 22:30:20 -0400","message":"config_parse_test update comment for accuracy","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"8b49c5e64a9ef8a9bfce01a4f7d1e94739120f1f","date":"2019-06-11 22:35:43 -0400","message":"command add comments re: defaults to LoadConfig","refs":["origin/b-consul-stanza"],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"ee7803d36186c18f067993d7ba3e4ab735e36de6","date":"2019-06-12 06:29:24 -0400","message":"Merge pull request #5818 from hashicorp/b-consul-stanza","refs":[],"body":"fix consul stanza parsing when multiple -config arguments are used","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"093a760b3527d537d47b28c3372bdfb8eba870ce","date":"2019-06-12 08:16:32 -0400","message":"tests: avoid manipulating package variables","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"56bdf0c5f64223f4c1671601a5774075d5df5671","date":"2019-06-12 08:17:33 -0400","message":"tests: parsing dir should be equivalent to parsing individual files","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3c1e77274b30d3bc8d072202dfee624251451b45","date":"2019-06-12 08:23:00 -0400","message":"comment DenormalizeAllocationDiffSlice applies to terminal allocs only","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0f9e5fa34e7f7789e35b573fbea89f0d5a586288","date":"2019-06-12 15:09:52 +0200","message":"docs: Add missing docs for alloc restart api","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"0f3d45bab8f6f8bad21fa140c38787f441a4a941","date":"2019-06-12 15:19:37 +0200","message":"alloc-lifecycle: Fix restart with empty body","refs":[],"body":"Currently when you submit a manual request to the alloc lifecycle API\nwith a version of Curl that will submit empty bodies, the alloc restart\napi will fail with an EOF error.\n\nThis behaviour is undesired, as it is reasonable to not submit a body at\nall when restarting an entire allocation rather than an individual task.\n\nThis fixes it by ignoring EOF (not unexpected EOF) errors and treating\nthem as entire task restarts.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"59335284049f94f6db0c4a36d215660294e162b7","date":"2019-06-12 16:00:21 +0200","message":"trhooks: Add TaskStopHook interface to services","refs":[],"body":"We currently only run cleanup Service Hooks when a task is either\nKilled, or Exited. However, due to the implementation of a task runner,\ntasks are only Exited if they every correctly started running, which is\nnot true when you recieve an error early in the task start flow, such as\nnot being able to pull secrets from Vault.\n\nThis updates the service hook to also call consul deregistration\nroutines during a task Stop lifecycle event, to ensure that any\nregistered checks and services are cleared in such cases.\n\nfixes #5770\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"91c7cf956aa5aaca80b6d4ba959745b4ffe7fb90","date":"2019-06-12 15:34:20 +0200","message":"update changelog","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"fe7c2ecbc16a52f4e56505fb873fcf086f6fba52","date":"2019-06-12 16:58:59 +0200","message":"Merge pull request #5822 from hashicorp/dani/allocrestartapidocs","refs":[],"body":"docs: Add missing docs for alloc restart api","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"1aa6bc80d8cdfedec0a097cdb666f912a909c5f0","date":"2019-06-12 17:06:11 +0200","message":"trt: Fix test","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"2ce49f67bfa4ef62307430488eb2bf916bdb95f7","date":"2019-06-12 17:07:46 +0200","message":"Merge pull request #5823 from hashicorp/dani/fix-restart-api","refs":[],"body":"alloc-lifecycle: Fix restart with empty body","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"0c74bad0cce043578cb88b35c28984ebcb9ec8ec","date":"2019-06-12 15:14:34 +0000","message":"documentation: fixed incorrect URLs in allocation signal/restart documentation","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"0b953da2aa34b3d69d895fc89854c8c0515e6ae7","date":"2019-06-12 11:28:05 -0400","message":"Merge pull request #5825 from hashicorp/docs-updated-alloc-examples","refs":[],"body":"documentation: fixed incorrect URLs in allocation signal/restart documentation","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"f6757ff10643073a6e700b747c5a4380926f4ac9","date":"2019-06-12 17:30:49 +0200","message":"Merge pull request #5821 from hashicorp/dani/b-5770","refs":[],"body":"trhooks: Add TaskStopHook interface to services","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"34206f3015a7669de54a403da8f40749a5725011","date":"2019-06-12 10:33:16 -0500","message":"Merge pull request #5820 from hashicorp/r-assorted-changes-20190612_1","refs":[],"body":"Assorted minor changes","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"844c6d51a4f17a52d1057dbac606a8991a91ebd2","date":"2019-06-12 17:35:28 +0200","message":"update changelog","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"72ab8083c5d157baa0ac578823938219cee91055","date":"2019-06-12 10:39:43 -0500","message":"Merge pull request #5815 from hashicorp/f-downgrade-docs","refs":[],"body":"Add warning docs around downgrades","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"c5e8b66c3789e4e7f9a83b4e188e9a937eea43ce","date":"2019-06-12 16:11:16 +0000","message":"Generate files for 0.9.3 release","refs":[],"body":"","author_name":"Nomad Release bot","author_email":"nomad@hashicorp.com"},{"hash":"e0fce4603bdc0e42578e5ede3b1fbafe6499d9bb","date":"2019-06-12 18:44:47 +0000","message":"Release v0.9.3","refs":["tag: v0.9.3"],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com","tag":"v0.9.3"},{"hash":"b70cf3f664b2b619ca9f26c74c11558113b14bdf","date":"2019-06-12 18:47:50 +0000","message":"Prepare for 0.9.4 dev cycle","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ecf98f2675d58300d24e5b3f7e6396ec894e8764","date":"2019-06-12 14:56:18 -0400","message":"update website to link to Nomad 0.9.3","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4a194473d7de38d45ee62d84da7a9824f29f9b3b","date":"2019-06-12 15:35:48 -0700","message":"docs: checklists don't support numbered lists","refs":["origin/docs-docs"],"body":"The order didn't really make sense anyway.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"e19921b47cb4cbd3c81ae50b07dc1d9be124e489","date":"2019-06-13 09:00:35 -0400","message":"Optional Consul service tags for nomad server and agent services (#5706)","refs":[],"body":"Optional Consul service tags for nomad server and agent services","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"efdfef868f8d4ff5012e342195358a98446a87cc","date":"2019-06-13 14:57:27 +0200","message":"consul: Include port-label in service registration","refs":[],"body":"It is possible to provide multiple identically named services with\ndifferent port assignments in a Nomad configuration.\n\nWe introduced a regression when migrating to stable service identifiers where\nmultiple services with the same name would conflict, and the last definition\nwould take precedence.\n\nThis commit includes the port label in the stable service identifier to\nallow the previous behaviour where this was supported, for example\nproviding:\n\n```hcl\nservice {\n  name = \"redis-cache\"\n  tags = [\"global\", \"cache\"]\n  port = \"db\"\n  check {\n    name     = \"alive\"\n    type     = \"tcp\"\n    interval = \"10s\"\n    timeout  = \"2s\"\n  }\n}\n\nservice {\n  name = \"redis-cache\"\n  tags = [\"global\", \"foo\"]\n  port = \"foo\"\n\n  check {\n    name     = \"alive\"\n    type     = \"tcp\"\n    port     = \"db\"\n    interval = \"10s\"\n    timeout  = \"2s\"\n  }\n}\n\nservice {\n  name = \"redis-cache\"\n  tags = [\"global\", \"bar\"]\n  port = \"bar\"\n\n  check {\n    name     = \"alive\"\n    type     = \"tcp\"\n    port     = \"db\"\n    interval = \"10s\"\n    timeout  = \"2s\"\n  }\n}\n```\n\nin a nomad task definition is now completely valid. Each service\ndefinition with the same name must still have a unique port label however.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"cb3bc09318721b73991293b7b2ba3cb4c58b2f29","date":"2019-06-13 09:36:09 -0400","message":"Updated minimum development go version","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"charlie@hashicorp.com"},{"hash":"34a66835db20eea7d5558c340f3f7b7a0d2b6ca7","date":"2019-06-13 09:37:18 -0400","message":"Don't stop rescheduleLater allocations","refs":[],"body":"When an alloc is due to be rescheduleLater, it goes through the\nreconciler twice: once to be ignored with a follow up evals, and once\nagain when processing the follow up eval where they appear as\nrescheduleNow.\n\nHere, we ignore them in the first run and mark them as stopped in second\niteration; rather than stop them twice.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b5f45780c73def6d01ec986b5a3f8f4d185301e6","date":"2019-06-13 09:48:34 -0400","message":"Merge pull request #5830 from hashicorp/docs-go-version-update","refs":[],"body":"Updated minimum development go version","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5ade5f54c562cbba1338f4bb8e6593d6d6f6f5a4","date":"2019-06-13 09:49:21 -0400","message":"Update golang to 1.11.11","refs":[],"body":"It's the latest 1.11 point release as of now\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"17f96165df0876314f4dd992868b14553bb8362c","date":"2019-06-13 16:20:45 +0200","message":"Merge pull request #5829 from hashicorp/dani/b-5819","refs":[],"body":"consul: Include port-label in service registration","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"2a65ceeefcf9e6875d37180ccc0cb802c468c5f3","date":"2019-06-13 16:39:23 +0200","message":"Merge pull request #5801 from jrasell/patch-5","refs":[],"body":"Fix incorrect link to the sample Grafana dashboard","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"c467a94e2bbfac4d2467e9777328dc8edba09e4a","date":"2019-05-02 13:00:21 -0700","message":"backfill region from job hcl in jobUpdate and jobPlan endpoints","refs":[],"body":"- updated region in job metadata that gets persisted to nomad datastore\n- fixed many unrelated unit tests that used an invalid region value\n(they previously passed because hcl wasn't getting picked up and\nthe job would default to global region)\n","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"ce55bf5fba24c65f9e01dc1fbf387ad8f50841a0","date":"2019-06-13 12:25:01 -0700","message":"Merge pull request #5664 from hashicorp/f-http-hcl-region","refs":[],"body":"backfill region from hcl for jobUpdate and jobPlan","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"e7857b4ad55fb02b0520a7d404db8d9df111c7a9","date":"2019-06-13 12:28:54 -0700","message":"update changelog","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"25b44b18db53af1f95fa4f5ee02107a091a19356","date":"2019-06-13 16:41:19 -0400","message":"Test behavior no reschedule for service/batch jobs","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e2ee80481c34feac7c0510679ea22ef86776f2f6","date":"2019-06-13 16:44:32 -0400","message":"Merge pull request #5831 from hashicorp/golang-1.11.11","refs":[],"body":"Update golang to 1.11.11","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"eeaa95ddf991441fc7f3b88238e7380250b09070","date":"2019-05-13 11:59:52 -0400","message":"Use init to handle plugin invocation","refs":[],"body":"Currently, nomad \"plugin\" processes (e.g. executor, logmon, docker_logger) are started as CLI\ncommands to be handled by command CLI framework.  Plugin launchers use\n`discover.NomadBinary()` to identify the binary and start it.\n\nThis has few downsides: The trivial one is that when running tests, one\nmust re-compile the nomad binary as the tests need to invoke the nomad\nexecutable to start plugin.  This is frequently overlooked, resulting in\npuzzlement.\n\nThe more significant issue with `executor` in particular is in relation\nto external driver:\n\n* Plugin must identify the path of invoking nomad binary, which is not\ntrivial; `discvoer.NomadBinary()` now returns the path to the plugin\nrather than to nomad, preventing external drivers from launching\nexecutors.\n\n* The external driver may get a different version of executor than it\nexpects (specially if we make a binary incompatible change in future).\n\nThis commit addresses both downside by having the plugin invocation\nhandling through an `init()` call, similar to how libcontainer init\nhandler is done in [1] and recommened by libcontainer [2].  `init()`\nwill be invoked and handled properly in tests and external drivers.\n\nFor external drivers, this change will cause external drivers to launch\nthe executor that's compiled against.\n\nThere a are a couple of downsides to this approach:\n* These specific packages (i.e executor, logmon, and dockerlog) need to\nbe careful in use of `init()`, package initializers.  Must avoid having\ncommand execution rely on any other init in the package.  I prefixed\nfiles with `z_` (golang processes files in lexical order), but ensured\nwe don't depend on order.\n* The command handling is spread in multiple packages making it a bit\nless obvious how plugin starts are handled.\n\n[1] drivers/shared/executor/libcontainer_nsenter_linux.go\n[2] https://github.com/opencontainers/runc/tree/eb4aeed24ffbf8e2d740fafea39d91faa0ee84d0/libcontainer#using-libcontainer\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5cfae0a399b16f9cec9d667abf12e8af2b8e8390","date":"2019-06-13 14:13:41 -0700","message":"Merge branch 'master' into docs-docs","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6c0080a2527758a9dafa8cf0fe224f3d9852ac32","date":"2019-06-13 16:14:35 -0500","message":"Change sort arrow to pass through pointer events (#5833)","refs":[],"body":"Without this, clicking on the sort arrow didn’t change the\r\nsort direction.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"77f5f004c7819a783c737137a6e20409c823db1a","date":"2019-06-13 14:19:41 -0700","message":"Merge pull request #5786 from hashicorp/docs-docs","refs":[],"body":"docs: initial attempt at developer docs","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"2899991ccdb429c9f1d8dea93fbfc89c05136f19","date":"2019-06-13 17:28:59 -0400","message":"Merge pull request #5790 from hashicorp/b-reschedule-desired-state","refs":[],"body":"Mark rescheduled allocs as stopped.","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"fcd42f639221c537c126b6f7d556de421a612d58","date":"2019-06-13 14:41:56 -0700","message":"update changelog","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"84f11ccc8a45b38c41b8823356d59a4e76d0e973","date":"2019-06-13 16:55:00 -0700","message":"Update changelog","refs":[],"body":"","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"90d488bcb5dd2bc8f78e01d163071eb49fc23ff3","date":"2019-06-14 10:57:46 -0400","message":"Avoid de-registering slowly restored services","refs":["origin/b-consul-restore-sync-2"],"body":"When a nomad client restarts/upgraded, nomad restores state from running\ntask and starts the sync loop.  If sync loop runs early, it may\nderegister services from Consul prematurely even when Consul has the\nrunning service as healthy.\n\nThis is not ideal, as re-registering the service means potentially\nwaiting a whole service health check interval before declaring the\nservice healthy.\n\nWe attempt to mitigate this by introducing an initialization probation\nperiod.  During this time, we only deregister services and checks that\nwere explicitly deregistered, and leave unrecognized ones alone.  This\nserves as a grace period for restoring to complete, or for operators to\nrestore should they recognize they restored with the wrong nomad data\ndirectory.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"91ee6caba5070ff150d64cf45182e3143e2654e1","date":"2019-06-14 08:55:13 -0700","message":"Update changelog properly","refs":[],"body":"I failed to amend my commit! 😭\n","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"9de458457e6ad62576258a0b3af3ca34f033edaf","date":"2019-06-14 11:25:30 -0700","message":"Added revised copy from rcgenova to feature paragraphs.","refs":[],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"9ab2207003069471c732452149390df168f856ca","date":"2019-06-14 16:30:27 -0500","message":"Emit metrics with raft commit and apply index and statestore latest index","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"78da9b6ee8df1a9df46da55a4d7f59ac0a882ad0","date":"2019-06-14 15:41:34 -0700","message":"Remove non-UI jobs for branches starting with .-ui (#5839)","refs":[],"body":"Branches that follow the UI naming convention will no longer produce\r\nnon-UI jobs on Travis CI.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"95adf6127c7a018dea83110406a4e32fae6aa9c5","date":"2019-06-17 12:25:43 -0400","message":"Add a test for unknown variables","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9ebf0a76454793906eb98287a892f7b982432299","date":"2019-06-17 12:28:14 -0400","message":"Upgrade hcl2 to validate arrays for unknown values","refs":[],"body":"This upgrades hcl2 library dependency to pick up\nhttps://github.com/hashicorp/hcl2/pull/113 .\n\nPrior to this change, parsing and decoding array attributes containing\ninvalid errors (e.g. references to unknown variables) are silently\ndropped, with `cty.Unknown` being assigned to the bad element.  Rather\nthan showing a type/meaningful error from hcl2, we get a very decrypted\nerror message from msgpack layer trying to handle `cty.unknown`.\n\nThis ensures that we propagate diagnostics correctly and report\nmeaningful errors to users.\n\nFixes https://github.com/hashicorp/nomad/issues/5694\nFixes https://github.com/hashicorp/nomad/issues/5680\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"240d68765c53c5f146fedb2af85789382c741910","date":"2019-06-17 16:52:49 +0000","message":"metrics: add namespace label to allocation metrics","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"2282fe1ea88eaeb192094d619d7f32ad47c00f88","date":"2019-06-17 15:51:31 -0500","message":"Changed name of metric","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"425bd4f540d7ff96436979ebbc31c27fd0be2879","date":"2019-06-17 15:51:49 -0500","message":"docs for new metrics","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c7723c7000a8343bd1330d1d82d713ef031db7c3","date":"2019-06-17 16:31:11 -0700","message":"Add exclusion of UI branches for AppVeyor (#5842)","refs":[],"body":"As with #5839 on Travis CI, this skips AppVeyor for UI branches.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"4f04c03c27433371785cd791f077df4f2e4bcd97","date":"2019-06-11 13:26:04 +0100","message":"lift code from docker/volume/mounts for splitting windows volumes","refs":[],"body":"Using the API as provided from the `mounts` package imposes validation\non the `src:dest` which shouldn't be performed at this time. To workaround\nthat lift the internal code from that library required to only perform\nthe split.\n","author_name":"Damien Churchill","author_email":"damien.churchill@cloudbuy.com"},{"hash":"960f898dff30fb0c819a39bde78846ccd72d2be5","date":"2019-06-11 16:56:09 +0100","message":"drivers/docker: move lifted code out to separate file and link the source & license","refs":[],"body":"","author_name":"Damien Churchill","author_email":"damien.churchill@cloudbuy.com"},{"hash":"cb8a5e4caaf8ffb62052bf7d16507bdf58589101","date":"2019-06-11 17:15:40 +0100","message":"run gofmt over the new file","refs":[],"body":"","author_name":"Damien Churchill","author_email":"damien.churchill@cloudbuy.com"},{"hash":"0cce6977d7fd327c80198e290dd1900fb96a857d","date":"2019-06-11 17:30:13 +0100","message":"run new file through goimports","refs":[],"body":"","author_name":"Damien Churchill","author_email":"damien.churchill@cloudbuy.com"},{"hash":"7050e14eb5af2b12d09639ef47884805a9d14a52","date":"2019-06-18 14:00:57 +0000","message":"formatting and clarity","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"03500494b2c9b472d92da626d5a3cd26056b5fe1","date":"2019-06-18 14:15:25 +0000","message":"cleanup test","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"80fa207ced1dfbe9db1fa60ea25f4ac4be8939c4","date":"2019-06-18 14:16:49 +0000","message":"update changelog","refs":["origin/f-5554-metrics-namespace-label"],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"04d82e662833a17c0ac3b3be908efeb65d97614a","date":"2019-06-18 10:20:13 -0400","message":"roll back to previous ami","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"khawaja910@gmail.com"},{"hash":"25f78761343439b79c0ce4f86786829cd3392038","date":"2019-06-18 10:23:11 -0400","message":"Merge pull request #5849 from hashicorp/roll-back-ami","refs":[],"body":"roll back to previous ami","author_name":"Charlie Voiselle","author_email":"charlie@hashicorp.com"},{"hash":"2eacf1940e15300170c5ae2a18be2890d04b27ca","date":"2019-06-18 10:57:07 -0400","message":"Merge pull request #5847 from hashicorp/f-5554-metrics-namespace-label","refs":[],"body":"metrics: add namespace label to allocation metrics","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"226a261ba6dbb3b4257fac9a0bde3921d8ed9bea","date":"2019-06-18 18:21:21 +0000","message":"metrics: upgraded prometheus http client to 0.9.4 to address label conflict in Nomad 0.9.x reported in #5345","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"f1daa6af9f2e17ee5061cd33e2a6c78637761f90","date":"2019-06-18 18:38:41 +0000","message":"update changelog for GH-5850","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"2f540958462221244d28a1fe9ec7f7547fc90018","date":"2019-06-18 14:36:50 -0400","message":"Update libcontainer to 6cc5158","refs":[],"body":"To pick up the fix in https://github.com/opencontainers/runc/pull/2023\n\nFixes https://github.com/hashicorp/nomad/issues/5836\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"489b68e00e3881bbd9850f2277f36e4240b502af","date":"2019-06-18 14:49:11 -0400","message":"Update github.com/opencontainers/selinux","refs":[],"body":"Or github.com/opencontainers/selinux/go-selinux, a dependency of\nlibcontainer.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"711b0b9a6fa906a142622d1cb6ba9f1251c3d269","date":"2019-06-18 14:54:53 -0400","message":"update logrus and go-windows-terminal-sequences","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a4147af7f8642085414ff70ced7a61c8c61fc984","date":"2019-06-18 19:03:11 -0400","message":"Merge pull request #5851 from hashicorp/b-libcontainer-6cc5158","refs":[],"body":"Update libcontainer to 6cc5158","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8fb9d250419c1fa8689afe3f19a9061a46b56cdb","date":"2019-06-18 20:54:48 -0400","message":"comment on use of init() for plugin handlers","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6708a0ccc9032010eb6ac34c07463b8dedaffd58","date":"2019-06-18 21:09:03 -0400","message":"Merge pull request #5726 from hashicorp/b-plugins-via-init","refs":[],"body":"Use init() to handle plugin invocation","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"858e98cea0bd623279652c9886364f28d3b8c13f","date":"2019-06-18 21:19:15 -0400","message":"Merge pull request #5811 from cloudbuy/b-win32-volume-split","refs":[],"body":"lift code from docker/volume/mounts for splitting windows volumes","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"949ba0caff7a75e8ccc6f9fb6a6ed7be8da5014f","date":"2019-06-18 21:34:22 -0400","message":"update changelog for GH-5726, GH-5811, and GH-5851","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e8893772fa0f220b821a9e696de023b4b46714dc","date":"2019-06-19 10:35:47 -0400","message":"fixing typos in operator endpoint api docs (#5854)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"e93bbf8cf2a2ae8a00f47f9cae2d4904ac21355d","date":"2019-06-19 10:44:21 -0400","message":"Merge pull request #5844 from hashicorp/b-hcl-parse-unknown-vars","refs":[],"body":"Upgrade hcl2 to validate arrays for unknown values","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"ff2d9c5f5f68fcd540f19bf00de842b4a6e80ea1","date":"2019-06-19 12:49:12 -0400","message":"Update CHANGELOG.md","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"29bafaf9206b6546cd41c922075d1b050ca82bff","date":"2019-06-19 12:50:03 -0400","message":"Merge branch 'master' into b-5345-prometheus-metric-label-conflict","refs":["origin/b-5345-prometheus-metric-label-conflict"],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"e02947801eec0bb8cf82ba1e84b054cd48efd465","date":"2019-06-19 12:50:24 -0400","message":"Merge pull request #5850 from hashicorp/b-5345-prometheus-metric-label-conflict","refs":[],"body":"metrics: upgraded prometheus http client ","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"3adb7510b0938cb4d9554f6cf22ed4fa87507471","date":"2019-06-19 11:58:46 -0500","message":"Change interval of raft stats collection to 10s","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"aba8d4281154b7a1b18817c783865e667601ab7c","date":"2019-06-19 11:59:05 -0500","message":"Add links to godoc for raft related metrics","refs":["origin/f-raft-snapshot-metrics"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"c135f036e6de4c3f77e81efe0c5e75d3dcb5ad43","date":"2019-06-19 12:01:03 -0500","message":"Merge pull request #5841 from hashicorp/f-raft-snapshot-metrics","refs":[],"body":"Raft and state store indexes as metrics","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"a1e8c4d542985e92f25af918448eba45881a4de5","date":"2019-06-19 12:08:15 -0500","message":"Couple of changelog updates","refs":["origin/missing-changelogs"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"0317229f465c15c827754eb0c50a446e3c868be3","date":"2019-06-19 12:09:05 -0500","message":"Merge pull request #5857 from hashicorp/missing-changelogs","refs":[],"body":"Couple of changelog updates","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"237c40698b7987871351ee46a4db14ebd9ec40d8","date":"2019-06-19 10:11:17 -0700","message":"Update client list to combine statuses (#5789)","refs":[],"body":"The draining, eligibility, and status fields now all show under a combined\r\nstate column. Draining takes precedence, then (in)eligibility; if neither of\r\nthose is true, the status displays.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"1b6ca959e676c497176c6a4e6d539eb8ac5dd247","date":"2019-06-19 14:16:11 -0400","message":"Changelog GH-5844","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f3f59ab1223f84fb984b84cd01a122bd52a97d92","date":"2019-06-19 14:17:28 -0400","message":"Update 0.9.3 and 0.9.4 changelog formating","refs":[],"body":"to be consistent with other entries\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6d889fe8846cb6e77050498fce3d784594e1c0f5","date":"2019-06-19 15:25:14 -0400","message":"[WIP] Add telemetry overview section (#5529)","refs":[],"body":"* re-arrange telemetry docs and add overview with navigation\r\n\r\n* update job and task status section\r\n\r\n* fix navigation\r\n\r\n* Update website/source/docs/telemetry/overview.html.md\r\n\r\nCo-Authored-By: Chris Baker <cgbaker@hashicorp.com>\r\n\r\n* Update website/source/docs/telemetry/overview.html.md\r\n\r\nCo-Authored-By: Chris Baker <cgbaker@hashicorp.com>\r\n\r\n* Update website/source/docs/telemetry/overview.html.md\r\n\r\nCo-Authored-By: Chris Baker <cgbaker@hashicorp.com>\r\n\r\n* Update website/source/docs/telemetry/metrics.html.md\r\n\r\nCo-Authored-By: Chris Baker <cgbaker@hashicorp.com>\r\n\r\n* Update website/source/docs/telemetry/metrics.html.md\r\n\r\nCo-Authored-By: Chris Baker <cgbaker@hashicorp.com>\r\n\r\n* fix formatting for nomad.plan.evaluate metric\r\n\r\n* clarifications on collection interval and namespace labell\r\n\r\n* fix typo\r\n\r\n* Update website/source/docs/telemetry/overview.html.md\r\n\r\nCo-Authored-By: Chris Baker <cgbaker@hashicorp.com>\r\n\r\n* Update website/source/docs/telemetry/overview.html.md\r\n\r\nCo-Authored-By: Chris Baker <cgbaker@hashicorp.com>\r\n\r\n* Update website/source/docs/telemetry/overview.html.md\r\n\r\nCo-Authored-By: Chris Baker <cgbaker@hashicorp.com>\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"a78d74c35ae3445b71d7ce6f7cc6abccef3a78a4","date":"2019-06-12 17:36:45 -0700","message":"New script for automatically capturing UI screenshots to use for guides and docs","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"588b10fada69475b985b49ef43fcbb9f4d23602b","date":"2019-06-12 17:37:38 -0700","message":"A puppeteer based docker container for running the screenshots script without having to deal with headless chrome","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"cc5a411e51f71c4f28ebc971e049586e16216e29","date":"2019-06-12 17:38:20 -0700","message":"A make target for running the screenshots script in a docker container","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"77f02b95fbac33ab44def2a8ef09ff7b46e14fea","date":"2019-06-12 17:38:37 -0700","message":"A make target for running the screenshots script locally","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"8920650990987f7d7c388ae08c39e501ee08a613","date":"2019-06-12 17:40:37 -0700","message":"New Mirage scenario for puppeteer script to use","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3a53c3b32930a917b8f1f1b7667b95cd98dcb2e3","date":"2019-06-13 11:14:36 -0700","message":"Use local package.json instead of inherited one from buildkite/puppeteer container","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"04c96eaa6d3ed56bd174b77e3dfcf88b12c0bc5e","date":"2019-06-13 11:15:16 -0700","message":"Warn about the correct mirage scenario when starting the screenshots script","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ece0c9038d4af64d6bdb572c729fd406628eb851","date":"2019-06-13 11:15:42 -0700","message":"Give the allTheThings scenario a better name","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"f939de1fd00d6c4449f752c6a8bd0c8ad85bde65","date":"2019-06-19 17:05:02 -0700","message":"Moved the ui screenshots script from /website/scripts to /scripts","refs":[],"body":"Having a node package in the website dir is incompatible with the way\nmiddleman watches the filesystem.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"e9731f0572b052f23f335b57ec3ddc3650f62098","date":"2019-06-19 17:20:13 -0700","message":"Also move the make targets to the root","refs":["origin/f-ui/ui-screenshots-script","f-ui/ui-screenshots-script"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"069455c0e414e3824db121634d0074729e233e55","date":"2019-06-19 17:39:01 -0700","message":"Merge pull request #5828 from hashicorp/f-ui/ui-screenshots-script","refs":["origin/0.8.7"],"body":"UI Screenshots script","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"f25817cd87a05e0d9abb19ac2b7cedde5693a6e4","date":"2019-06-20 12:02:06 -0700","message":"Add new routes to the router","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"5e433665976a2beeab38c3edce324dcc6ef421ae","date":"2019-06-20 12:02:25 -0700","message":"Add new menu item to the task subnav","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7bc951237bbdb80566ed0e67bf85acbdff67ebdc","date":"2019-06-20 20:52:40 +0000","message":"alloc lifecycle: 404 when attempting to stop non-existent allocation","refs":["origin/b-alloc-stop-missing-panic"],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"ca7c4d3e4338ff39e42c142b62cf39d4a2110bbd","date":"2019-06-20 15:20:01 -0700","message":"Some placeholder templates and routes for new feature","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"d39d0f04c3b66c99261217682ee1ff28e51b26ce","date":"2019-06-20 15:20:15 -0700","message":"Test support and coverage for fs routing","refs":["origin/f-ui/alloc-fs-routing","f-ui/alloc-fs-routing"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"495e793490a920835a156f4edd6ce85a304fa540","date":"2019-06-21 06:09:51 -0400","message":"Merge pull request #5865 from hashicorp/b-alloc-stop-missing-panic","refs":[],"body":"alloc lifecycle: 404 when attempting to stop non-existent allocation","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"77619b6b63749e8df8a2974b8db441110d12a991","date":"2019-06-21 16:20:06 +0000","message":"api: return X-Nomad-Index header on allocation stop","refs":[],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"429e89f57017d95405a908998f144533fd1e11b8","date":"2019-06-21 11:41:30 -0700","message":"Merge pull request #5866 from hashicorp/f-ui/alloc-fs-routing","refs":[],"body":"UI: Allocation file system explorer: Routing","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"e6814c08afe92af1e3e09ae9653fd3130d5d893a","date":"2019-06-21 14:12:28 -0500","message":"Add ember-qunit-nice-errors (#5869)","refs":[],"body":"This shows the entire assertion that’s failing. This is\r\nespecially useful in combination with page objects.\r\n\r\nFor an assertion like this:\r\nassert.equal(PageLayout.flashMessages.length, 1)\r\n\r\nThe failure displayed normally is just “failed” with the\r\nexpected of 1 and the result of undefined. With this addon,\r\nthe expected and result remain the same, but “failed” is\r\nreplaced with the text of the assertion.\r\n\r\nThe typical way to address this is to supply the optional\r\nfinal argument to the assertion function that customises the\r\nfailure message. That still works with this addon, but most\r\nof the time it becomes unnecessary.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"06e30c458929d398bfef47cdc678bd85888548ff","date":"2019-06-21 21:44:38 +0000","message":"api: removed unused AllocID from AllocSignalRequest","refs":["origin/b-nmd-1529-alloc-stop-missing-header"],"body":"","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"96662bae97346efee71cd1d55cd707115562ab6c","date":"2019-06-23 10:31:40 -0700","message":"Update website example config","refs":[],"body":"","author_name":"Robert James Hernandez","author_email":"rob@sarcasticadmin.com"},{"hash":"72b9b879e521124e8ce097f00fb424358ac8007d","date":"2019-06-24 08:15:14 -0400","message":"Merge pull request #5875 from sarcasticadmin/update-example-config","refs":[],"body":"Update website example config","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"1d670f2d2466e8d3a278a8896ee9f10455fe4ea3","date":"2019-06-06 15:44:47 -0700","message":"nomad: include snapshot index when submitting plans","refs":[],"body":"Plan application should use a state snapshot at or after the Raft index\nat which the plan was created otherwise it risks being rejected based on\nstale data.\n\nThis commit adds a Plan.SnapshotIndex which is set by workers when\nsubmitting plan. SnapshotIndex is set to the Raft index of the snapshot\nthe worker used to generate the plan.\n\nPlan.SnapshotIndex plays a similar role to PlanResult.RefreshIndex.\nWhile RefreshIndex informs workers their StateStore is behind the\nleader's, SnapshotIndex is a way to prevent the leader from using a\nStateStore behind the worker's.\n\nPlan.SnapshotIndex should be considered the *lower bound* index for\nconsistently handling plan application.\n\nPlans must also be committed serially, so Plan N+1 should use a state\nsnapshot containing Plan N. This is guaranteed for plans *after* the\nfirst plan after a leader election.\n\nThe Raft barrier on leader election ensures the leader's statestore has\ncaught up to the log index at which it was elected. This guarantees its\nStateStore is at an index > lastPlanIndex.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"f82f2a63c2730a7418e0c5f3b6b00fb319e82781","date":"2019-06-24 11:48:02 -0700","message":"nomad: evaluate plans after previous plan index","refs":[],"body":"The previous commit prevented evaluating plans against a state snapshot\nwhich is older than the snapshot at which the plan was created.  This is\ncorrect and prevents failures trying to retrieve referenced objects that\nmay not exist until the plan's snapshot. However, this is insufficient\nto guarantee consistency if the following events occur:\n\n1. P1, P2, and P3 are enqueued with snapshot @ 100\n2. Leader evaluates and applies Plan P1 with snapshot @ 100\n3. Leader evaluates Plan P2 with snapshot+P1 @ 100\n4. P1 commits @ 101\n4. Leader evaluates applies Plan P3 with snapshot+P2 @ 100\n\nSince only the previous plan is optimistically applied to the state\nstore, the snapshot used to evaluate a plan may not contain the N-2\nplan!\n\nTo ensure plans are evaluated and applied serially we must consider all\nprevious plan's committed indexes when evaluating further plans.\n\nTherefore combined with the last PR, the minimum index at which to\nevaluate a plan is:\n\n    min(previousPlanResultIndex, plan.SnapshotIndex)\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"bcad6871cefbebba783bf16ab3953864b93dfe5f","date":"2019-06-24 11:59:44 -0700","message":"nomad: SnapshotAfter -> SnapshotMinIndex","refs":[],"body":"Rename SnapshotAfter to SnapshotMinIndex. The old name was not\ntechnically accurate. SnapshotAtOrAfter is more accurate, but wordy and\nstill lacks context about what precisely it is at or after (the index).\n\nSnapshotMinIndex was chosen as it describes the action (snapshot), a\nconstraint (minimum), and the object of the constraint (index).\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"913427428a43be42b4f23f7d7f1f27ab3f406665","date":"2019-06-25 15:26:35 -0500","message":"Remove compat code associated with many previous versions of nomad","refs":[],"body":"This removes compat code for namespaces (0.7), Drain(0.8) and other\nolder features from releases older than Nomad 0.7\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4df53b4026d81864fcf4aede1ebe9fd1380379a0","date":"2019-06-25 19:41:09 -0500","message":"newline","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"079cfb437ddf1a85fd3aa96420b6045f464b0cce","date":"2019-06-26 15:20:57 +0200","message":"tr: Fetch Wait channel before killTask in restart","refs":[],"body":"Currently, if killTask results in the termination of a process before\ncalling WaitTask, Restart() will incorrectly return a TaskNotFound\nerror when using the raw_exec driver on Windows.\n","author_name":"Danielle Lancashire","author_email":"dani@builds.terrible.systems"},{"hash":"520cd901d76865ad6c1d918397335bbedacbeced","date":"2019-06-26 16:18:08 +0200","message":"Merge pull request #5889 from hashicorp/dani/b-task-restart","refs":[],"body":"tr: Fetch Wait channel before killTask in restart","author_name":"Danielle","author_email":"dani@builds.terrible.systems"},{"hash":"887b49e81897bc9a46666cd518baa1aa838eb813","date":"2019-06-26 08:49:24 -0700","message":"nomad: expand comments on subtle plan apply behaviors","refs":["origin/b-plan-snapshotindex"],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"ea77c3af3945661df9948a52054097976e11baee","date":"2019-06-26 13:59:14 -0500","message":"Restore accidentally deleted block","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a5c3b6e8cbaf75de5e0fbacfae70be81ed0afc89","date":"2019-06-26 16:12:07 -0500","message":"Fix node drain test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"bead05f05f1e9ca1665b64fd6a16c83fd3693a52","date":"2019-06-26 16:30:53 -0500","message":"Fix more tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"27edf8f5fceab5ffa9667f39b8fa84334595485d","date":"2019-06-26 16:59:23 -0500","message":"remove now unneeded test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"154e09e8ca52899f95f280abc9a51d3ac57e7eb2","date":"2019-06-26 17:33:51 -0500","message":"one more drain test","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f3c944aaf585ca2abc630e4be00e170af9b6759c","date":"2019-06-26 23:39:10 +0800","message":"task runner to avoid running task if terminal","refs":["origin/b-dont-start-completed-allocs-2"],"body":"This change fixes a bug where nomad would avoid running alloc tasks if\nthe alloc is client terminal but the server copy on the client isn't\nmarked as running.\n\nHere, we fix the case by having task runner uses the\nallocRunner.shouldRun() instead of only checking the server updated\nalloc.\n\nHere, we preserve much of the invariants such that `tr.Run()` is always\nrun, and don't change the overall alloc runner and task runner\nlifecycles.\n\nFixes https://github.com/hashicorp/nomad/issues/5883\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"464aeae098a0565debae8cb093cac87287a16c8a","date":"2019-06-27 12:25:07 -0500","message":"Merge branch 'master' into f-ui/alloc-fs","refs":[],"body":"","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"65fe89f1c20f99252228024c953d71774c5edb5a","date":"2019-06-27 14:07:25 -0400","message":"make purge parameter lowercase (#5895)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"35c45e61cacbbdfb7b20b19f1f949f327acd341d","date":"2019-06-27 12:32:26 -0700","message":"Account for the search icon within the is-compact modifer","refs":["origin/b-ui/allocation-magnifying-glass","b-ui/allocation-magnifying-glass"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"83fba96bd5b5fe485514bbb1cfb507c3a99379ff","date":"2019-06-27 14:37:14 -0700","message":"Merge pull request #5902 from hashicorp/b-ui/allocation-magnifying-glass","refs":[],"body":"UI: Account for the search icon within the is-compact modifier","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"efda81cbbb2d3926bb6a2b9b219d0e49a9c4df82","date":"2019-06-18 14:56:24 +0200","message":"logmon: Refactor fifo access for windows safety","refs":[],"body":"On unix platforms, it is safe to re-open fifo's for reading after the\nfirst creation if the file is already a fifo, however this is not\npossible on windows where this triggers a permissions error on the\nsocket path, as you cannot recreate it.\n\nWe can't transparently handle this in the CreateAndRead handle, because\nthe Access Is Denied error is too generic to reliably be an IO error.\nInstead, we add an explict API for opening a reader to an existing FIFO,\nand check to see if the fifo already exists inside the calling package\n(e.g logmon)\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"76f72fe4bd40fd1bb0f153589da6c93df373fd43","date":"2019-06-20 19:13:05 +0200","message":"vendor: Use dani fork of go-winio","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@builds.terrible.systems"},{"hash":"e6daf3b5bd581ccdeaa848b0ff7a1a55672a55fe","date":"2019-06-28 13:35:41 +0200","message":"fifo: Require that fifos do not exist for create","refs":[],"body":"Although this operation is safe on linux, it is not safe on Windows when\nusing the named pipe interface. To provide a ~reasonable common api\nabstraction, here we switch to returning File exists errors on the unix\napi.\n","author_name":"Danielle Lancashire","author_email":"dani@builds.terrible.systems"},{"hash":"aff554deec35470ac33c6168960938932de6d329","date":"2019-06-28 13:49:07 +0200","message":"appveyor: Run logmon tests","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@builds.terrible.systems"},{"hash":"f7f41c42e6ae83bf60b07dad55bf5bc3d180c563","date":"2019-06-28 20:31:28 -0500","message":"Infer content type in alloc fs stat endpoint","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"2e1978eb1fa274a24432f4b07076fe58789c83fc","date":"2019-06-29 04:17:35 -0500","message":"client: defensive against getting stale alloc updates","refs":[],"body":"When fetching node alloc assignments, be defensive against a stale read before\nkilling local nodes allocs.\n\nThe bug is when both client and servers are restarting and the client requests\nthe node allocation for the node, it might get stale data as server hasn't\nfinished applying all the restored raft transaction to store.\n\nConsequently, client would kill and destroy the alloc locally, just to fetch it\nagain moments later when server store is up to date.\n\nThe bug can be reproduced quite reliably with single node setup (configured with\npersistence).  I suspect it's too edge-casey to occur in production cluster with\nmultiple servers, but we may need to examine leader failover scenarios more closely.\n\nIn this commit, we only remove and destroy allocs if the removal index is more\nrecent than the alloc index. This seems like a cheap resiliency fix we already\nuse for detecting alloc updates.\n\nA more proper fix would be to ensure that a nomad server only serves\nRPC calls when state store is fully restored or up to date in leadership\ntransition cases.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2e5aba918864b9fb50fbac885971d0388f246ab7","date":"2019-06-28 16:35:20 +0200","message":"logmon: Add windows compatibility test","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@builds.terrible.systems"},{"hash":"8148466da63e0724cf54174841ee3b6a2690a4a0","date":"2019-06-28 16:27:10 +0200","message":"fifo: Close connections and cleanup lock handling","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@builds.terrible.systems"},{"hash":"5262102a94340205f532c10849145b8963b5b68b","date":"2019-07-01 10:39:35 -0700","message":"Updated with suggestions.","refs":["origin/yishan/revised-enterprise-docs"],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"21f07c25c9b26bfd1fba48194accc1ff856c6a8f","date":"2019-07-01 10:41:32 -0700","message":"Merge pull request #5804 from hashicorp/yishan/revised-enterprise-docs","refs":[],"body":"Revised Nomad Enterprise page","author_name":"Yishan Lin","author_email":"yishan@hashicorp.com"},{"hash":"4fa6688f73143c0fcbc24890c59cdda981a7166b","date":"2019-07-01 15:12:01 -0500","message":"Undo removal of node drain compat changes","refs":[],"body":"Decided to remove that in 0.10\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"de8ae8bcd21784f4de8045d01b703e3318da550a","date":"2019-07-01 16:24:48 -0500","message":"Improve test cases for detecting content type","refs":["origin/f-infer-contenttype"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"02d0b9274c28b66d10790f75fa3355d10483b3b1","date":"2019-07-01 16:46:05 -0500","message":"Missed one revert of backwards compatibility for node drain","refs":["origin/f-remove-deprecated-code"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"15df89bb068452159e92f175793c61627df3b5b7","date":"2019-07-01 16:54:32 -0500","message":"Merge pull request #5907 from hashicorp/f-infer-contenttype","refs":[],"body":"Infer content type in alloc fs stat endpoint","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"7fd36580bd0c7a37b1a3ecf5e300423395fe54c0","date":"2019-07-01 16:59:37 -0500","message":"changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"22960f821e4c60efb4b4d875f94970ec5e8a880c","date":"2019-07-02 12:40:17 +0800","message":"Merge pull request #5906 from hashicorp/b-alloc-stale-updates","refs":[],"body":"client: defensive against getting stale alloc updates","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"009f186eb7fa4253fd31d50fbde2b75939c4d8e6","date":"2019-07-02 14:53:50 +0800","message":"address review comments","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bd7d60ef9380442059bd3508b7f87f4c5a875c16","date":"2019-07-02 15:31:17 +0800","message":"Merge pull request #5890 from hashicorp/b-dont-start-completed-allocs-2","refs":[],"body":"task runner to avoid running task if terminal","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3fb788b45b5496c1ccc4ce32dee3310097c94bd8","date":"2019-07-02 15:58:02 +0800","message":"Block rpc handling until state store is caught up","refs":["origin/b-rpc-consistent-reads"],"body":"Here, we ensure that when leader only responds to RPC calls when state\nstore is up to date.  At leadership transition or launch with restored\nstate, the server local store might not be caught up with latest raft\nlogs and may return a stale read.\n\nThe solution here is to have an RPC consistency read gate, enabled when\n`establishLeadership` completes before we respond to RPC calls.\n`establishLeadership` is gated by a `raft.Barrier` which ensures that\nall prior raft logs have been applied.\n\nConversely, the gate is disabled when leadership is lost.\n\nThis is very much inspired by https://github.com/hashicorp/consul/pull/3154/files\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"380262613d3a6c4722fbfffb54ade8d94b746029","date":"2019-06-29 03:56:40 -0500","message":"Fail alloc if alloc runner prestart hooks fail","refs":[],"body":"When an alloc runner prestart hook fails, the task runners aren't invoked\nand they remain in a pending state.\n\nThis leads to terrible results, some of which are:\n* Lockup in GC process as reported in https://github.com/hashicorp/nomad/pull/5861\n* Lockup in shutdown process as TR.Shutdown() waits for WaitCh to be closed\n* Alloc not being restarted/rescheduled to another node (as it's still in\n  pending state)\n* Unexpected restart of alloc on a client restart, potentially days/weeks after\n  alloc expected start time!\n\nHere, we treat all tasks to have failed if alloc runner prestart hook fails.\nThis fixes the lockups, and permits the alloc to be rescheduled on another node.\n\nWhile it's desirable to retry alloc runner in such failures, I opted to treat it\nout of scope.  I'm afraid of some subtles about alloc and task runners and their\nidempotency that's better handled in a follow up PR.\n\nThis might be one of the root causes for\nhttps://github.com/hashicorp/nomad/issues/5840 .\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"99802390c19d950f2ba194dda0d6bf2d9158c717","date":"2019-07-02 18:37:52 +0800","message":"run post-run/post-stop task runner hooks","refs":[],"body":"Handle when prestart failed while restoring a task, to prevent\naccidentally leaking consul/logmon processes.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c712fdcbd9a187c21cbc7c2291cb696d526a0df8","date":"2019-07-02 13:12:54 +0200","message":"fifo: Safer access to Conn","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"7968f799a549760cefc7f433541eef477e98928e","date":"2019-07-02 13:58:56 +0200","message":"Merge pull request #5864 from hashicorp/dani/win-pipe-cleaner","refs":[],"body":"windows: Fix restarts using the raw_exec driver","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"8fc7284b7db2100809258d0b9b95959ecc4f87ce","date":"2019-07-02 14:01:54 +0200","message":"changelog: Add entries for windows fixes","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"72f67c57cbb5a0532621408cdffa63eae3f0ec55","date":"2019-07-02 20:25:53 +0800","message":"Merge pull request #5905 from hashicorp/b-ar-failed-prestart","refs":[],"body":"Fail alloc if alloc runner prestart hooks fail","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e68709f9f1ca9d22aecbf783b972c3a838ee5a3d","date":"2019-07-02 08:58:43 -0500","message":"Add Mirage-toggling via environment variable (#5899)","refs":[],"body":"I’m finding myself having to revert my change to this\r\nvariable when I switch branches, so this would let me\r\naffect the variable without code changes.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"0819e4af183ac122fdb0041de4cab1743fc79dff","date":"2019-07-02 09:29:24 -0500","message":"Merge pull request #5894 from hashicorp/f-remove-deprecated-code","refs":[],"body":"Remove deprecated code","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"e580c98347fd07694c02e65d5691e105c22b3363","date":"2019-07-02 09:50:34 -0500","message":"update changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4652ccfec5e548df07209c299c49599e8783ee33","date":"2019-07-02 09:13:24 -0700","message":"systemd: set a high but non-infinite fd limit","refs":["origin/f-systemd-nofile"],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6c52f843e001ce663cb744264d9a0ba8f8c20cdf","date":"2019-07-02 13:25:29 -0500","message":"Added additional test cases and fixed go test case","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"b57ea220f938799eb3bc92bd7970690afaef9b74","date":"2019-07-02 14:41:22 -0500","message":"Merge pull request #5913 from hashicorp/f-fix-contenttype-tests","refs":[],"body":"Fixed test case for detecting content type","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"ee07bab099b3b553b6f419925b1fae65124b2650","date":"2019-07-02 16:42:38 -0500","message":"UI: Add allocation directory rendering (#5873)","refs":[],"body":"This lets users navigate the allocation filesystem. It doesn’t\r\nsupport viewing actual files yet.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"c2e782bcd40ba34cd7b6c028fe295e34dee5d65a","date":"2019-07-02 15:47:25 -0700","message":"Merge branch 'master' into f-ui/alloc-fs","refs":[],"body":"* master:\n  make purge parameter lowercase (#5895)\n  tr: Fetch Wait channel before killTask in restart\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"44fc18e54a194aa71e39011924b91b1cbf574a69","date":"2019-07-02 16:40:09 -0700","message":"Merge remote-tracking branch 'origin/master' into f-ui/alloc-fs","refs":[],"body":"* origin/master: (32 commits)\n  Added additional test cases and fixed go test case\n  update changelog\n  Add Mirage-toggling via environment variable (#5899)\n  changelog: Add entries for windows fixes\n  fifo: Safer access to Conn\n  run post-run/post-stop task runner hooks\n  Fail alloc if alloc runner prestart hooks fail\n  address review comments\n  changelog\n  Missed one revert of backwards compatibility for node drain\n  Improve test cases for detecting content type\n  Undo removal of node drain compat changes\n  Updated with suggestions.\n  fifo: Close connections and cleanup lock handling\n  logmon: Add windows compatibility test\n  client: defensive against getting stale alloc updates\n  Infer content type in alloc fs stat endpoint\n  appveyor: Run logmon tests\n  fifo: Require that fifos do not exist for create\n  vendor: Use dani fork of go-winio\n  ...\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"37f7ecafa2bc7c7221a64f569fb0a6095ab5283c","date":"2019-07-02 17:27:31 -0700","message":"Use consistent casing in the JSON representation of the AllocFileInfo struct","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"8e7a2d07654a8e57ece88a958863b9fc17da5bf8","date":"2019-06-17 09:50:23 -0700","message":"default to json-file log rotation for docker driver","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"1b3d76eee2b8fd1b1d3b9e1f7c84fc53d86d981b","date":"2019-07-03 09:48:43 -0700","message":"Merge pull request #5915 from hashicorp/b-fix-json-key-casing","refs":[],"body":"Use consistent casing in the JSON representation of the AllocFileInfo struct","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3fdb3cbe3397bcbe48d04af7c24c9025be7f967a","date":"2019-07-03 10:17:19 -0700","message":"Merge pull request #5846 from hashicorp/f-docker-log-constraints","refs":[],"body":"add log rotation to docker driver log defaults","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"ea1b64169dd2a3f5e32b373a12fa485509ad22fd","date":"2019-07-03 14:00:53 -0700","message":"update changelog","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"42a53ff58c63cdc9604a33af95cbea5671f66faf","date":"2019-07-04 10:09:19 -0500","message":"Merge branch 'master' into f-ui/alloc-fs","refs":[],"body":"","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"fdbe9a1018f8579797870c18b25d50ab01656fad","date":"2019-07-04 17:49:15 +0200","message":"Fix typo (#5922)","refs":[],"body":"","author_name":"Jabi","author_email":"kal3it@gmail.com"},{"hash":"47bdbf9f201030f6e813e0c91831c3a5ccfbbf43","date":"2019-07-05 09:18:38 -0500","message":"add module version constraint to e2e/terraform","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"6302d0b1c153c00af831812934924c6fae19782e","date":"2019-07-06 10:50:02 -0500","message":"First pass at a Consul Connect example docs","refs":["origin/f-connect-initial-docs"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"52641b9192548b684f82e19d34f5b6b08d6d6f82","date":"2019-07-07 06:07:26 -0400","message":"website: change consul and nomad start up to reflect changes","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"db8e28c1bf3c40d67ae1584fc1ced951806266b4","date":"2019-07-07 15:46:19 -0700","message":"Updated tensorrt demo to use the official nvidia image","refs":[],"body":"Signed-off-by: Renaud Gaubert <rgaubert@nvidia.com>\n","author_name":"Renaud Gaubert","author_email":"rgaubert@nvidia.com"},{"hash":"b1c5f604798ba9dc3b46537b8cbfae91b33a66e0","date":"2019-07-08 13:31:07 +0200","message":"website: minor connect improvements","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"fdca5cf84a7abed26604608cf5e4837ce9db2cdd","date":"2019-07-08 10:36:56 -0500","message":"Remove superfluous test attributes (#5927)","refs":[],"body":"I found while working on #5926 that x-icon already adds\r\nassertion-compatible selectors, so these wrappers are\r\nunnecessary.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"0eae387a96d6482cece2a8aa51f4aa8d8616549a","date":"2019-07-08 11:29:12 -0500","message":"fix linting failure in test case file","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f2895761b29213fbe16b72565f8f4ef7056d4e15","date":"2019-07-08 22:20:02 +0200","message":"website: link to consul 1.6 beta","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"1944ab547cfc6e815a0039d2c62428bd2d3987c7","date":"2019-07-09 14:44:35 +0200","message":"website: switch to prettier demo","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"26652d7a6b112c920656028533e5c7e25da923f2","date":"2019-07-09 09:37:09 -0500","message":"Populate task event struct with kill timeout","refs":[],"body":"This makes for a nicer task event message\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"88d35efc8fac87d126267d7cdd904b069cc1f557","date":"2019-07-09 17:01:35 +0200","message":"website: Add link to connect tp download","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"ed8e880f59860a427e19b9117f9d449c5f1d59a2","date":"2019-07-10 09:13:10 +0200","message":"website: mention cni plugin requirement","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"c467e42553db304316a935bfe2236ca01891d0bf","date":"2019-07-10 09:20:37 +0200","message":"website: link to nick's talk","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"5b84adb829551b7b1f558f91a4b1e982d951c3c1","date":"2019-07-10 14:37:35 +0200","message":"Merge pull request #5933 from hashicorp/f-connect-initial-docs","refs":[],"body":"First pass at a Consul Connect example docs","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"7de40186564c025733f7103f7f18defb91f6f1f0","date":"2019-07-10 10:41:06 -0500","message":"code review feedback","refs":["origin/b-allocrunner-killtimeout"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"abc747dfad89571db2801c1589d23f0205828af7","date":"2019-07-10 11:21:28 -0500","message":"Merge pull request #5943 from hashicorp/b-allocrunner-killtimeout","refs":[],"body":"Populate task event struct with kill timeout","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"16648b3e70f7e4ba4c5c31dc78aa6cb7ee56f62a","date":"2019-07-10 11:42:04 -0500","message":"Test file for detect content type that satisfies linter and encoding","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"acd762d8653f2f422b62c03605bb4c9d2c3fa495","date":"2019-07-10 11:45:28 -0500","message":"update changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4771de646f6f84d32d5abecf41c35f819251b337","date":"2019-06-03 13:18:10 -0400","message":"struct NodeDeregisterRequest has a batch of NodeIDs","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"47203067c35bf0e36b6275df8bf8e7ebb2905a20","date":"2019-06-03 13:20:09 -0400","message":"state_store DeleteNode operates on a batch of ids","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"851691181da54a03c02b6c527a263cb7de843005","date":"2019-06-03 14:30:27 -0400","message":"util partitionAll for paging","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"fbc7fb80a5dce29ff27d1eac8375e5278f0950e5","date":"2019-06-05 10:19:21 -0400","message":"core_sched batch node deregistration requests","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"f685b00367ee938b2cced86e54ea590e11d4abb5","date":"2019-06-05 10:47:29 -0400","message":"fsm NodeDeregisterRequest is now a batch","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"64fd8b3e9f9ed53eb8cde5b3ad8013e43f4f6d58","date":"2019-06-05 10:49:57 -0400","message":"node_endpoint deregister the batch of nodes","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"94cd86f37729cec8e8cb7da20a88bede5fbfa17e","date":"2019-06-05 11:33:30 -0400","message":"drainer watch_nodes_test batch of 1","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"0dd5335a70e619e5da8e65803d36384626f65c11","date":"2019-06-05 12:45:20 -0400","message":"state_store improve error messages","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"fbd4c25e05f42c7587303080b41ecc72a2239fd7","date":"2019-06-05 12:45:42 -0400","message":"node_endpoint improve error messages","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5810a097093bcc88d9761adb415d34a7361303db","date":"2019-06-05 15:29:52 -0400","message":"state_store just one index update, test deletion","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"3c97bdcb827a8cbf6150fc95a38644c98a942c1c","date":"2019-06-06 15:59:14 -0400","message":"core_sched check ServersMeetMinimumVersion, send old node deregister","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"7258fabfc8694617b2944249749b4f55a19945b7","date":"2019-06-06 16:00:25 -0400","message":"structs add back NodeDeregisterRequest.NodeID, compatibility","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"97a76afe21c2ad7355c9b8cb3eca8fed9e125728","date":"2019-06-06 16:01:29 -0400","message":"fsm honor new and old style NodeDeregisterRequests","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"aa5193baf952695ae5655fbf5353e07746e3c8b3","date":"2019-06-07 10:57:57 -0400","message":"core_sched check ServersMeetMinimumVersion","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"48c1859b55ad51f3b135adec60a52d0a3fb5834f","date":"2019-06-07 10:58:16 -0400","message":"util simplify partitionAll","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"d55e79efd15446367f04f8a57c3226d29ecffd6e","date":"2019-06-07 11:25:55 -0400","message":"node_endpoint raft store then shutdown, test deprecation","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5921e6ff8fc9ad2dc07c665c5f9309640a7aa42c","date":"2019-06-07 11:28:17 -0400","message":"fsm variable names for consistency","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"3e097c424558fb8cd42cad812f07af524512d8d9","date":"2019-06-07 11:55:04 -0400","message":"fsm return an error on both NodeDeregisterRequest fields set","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"bc5e5cfc65380e73b637a4a6e6f70ce6818b8fb4","date":"2019-06-07 14:26:29 -0400","message":"node_endpoint argument setup","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"f32dceb934028c5d41f5ce7f0e3327e83eff8430","date":"2019-06-12 16:41:26 -0400","message":"structs add NodeDeregisterBatchRequest","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"23fdadfd95e29026ae0cb7c7355a194a1b26fc8c","date":"2019-06-13 09:46:05 -0400","message":"node endpoint support new NodeDeregisterBatchRequest","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"9c42d03366883b67a7d8b643b193f6e5ea50bcea","date":"2019-06-13 09:47:07 -0400","message":"fsm support new NodeDeregisterBatchRequest","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"4d11c32e19b44068a569caf7f2cbefabb03b6903","date":"2019-06-13 15:04:38 -0400","message":"core_sched use the new rpc names","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c915bf08a08a32ef91cb959f9567d5e661cd3bf0","date":"2019-06-13 15:08:33 -0400","message":"new file: contributing/checklist-rpc-endpoint.md","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c20c232eab3902c4b7994c19164c9de4368a0e60","date":"2019-06-26 10:44:56 -0400","message":"fsm label batch_deregister_node metrics explicitly","refs":[],"body":"Co-Authored-By: Mahmood Ali <mahmood@notnoop.com>","author_name":"Lang Martin","author_email":"lang.martin@gmail.com"},{"hash":"f5632ba98a5d85acb02627ca21925775e40f9394","date":"2019-06-26 10:40:04 -0400","message":"structs NodeDeregisterBatchRequestType must go at the end","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"0deb209d99c1f6e1822d2b6152a62ec411267d54","date":"2019-06-26 10:45:29 -0400","message":"checklist NodeDeregisterBatchRequestType must go at the end","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"838460e70c5512fc972fbfc2b57059cf386582d5","date":"2019-06-26 10:46:37 -0400","message":"fsm new NodeDeregisterBatchRequestType sorted at the end of the case","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"3ad8a2498cf26d63dadf62b699cf1c09da2ec525","date":"2019-06-26 10:52:31 -0400","message":"state_store error if called without node_ids","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"9bdf35ad4d5a4ffb05748049df2b55e3c34c8191","date":"2019-06-26 10:57:58 -0400","message":"NodeDeregisterBatch -> NodeBatchDeregister match JobBatch pattern","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"675f750038d2ddee003bc6a2efdef2c50b5f4907","date":"2019-06-26 11:08:41 -0400","message":"structs drop deprecation warning, revert unnecessary comment change","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5eac71913388121a49bafd0b33cf40fd76c03844","date":"2019-06-27 15:16:27 -0400","message":"core_sched add compat comment for later removal","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"e0edc7d93e66f34028660eb277b86ee92bc71a62","date":"2019-06-26 16:14:36 -0400","message":"node_endpoint preserve both messages as rpcs and in raft","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"17f49512eea1f94211a8006e9efadcba567e3a23","date":"2019-06-27 15:44:28 -0400","message":"Changelog","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"8da0b91287023d8a410fc101f39b821e1910e28e","date":"2019-07-10 14:24:54 -0400","message":"Merge pull request #5784 from hashicorp/b-batch-node-dereg","refs":[],"body":"batch node deregistration","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"d8a43b2066197a6b135b308438cf0ddf7053f5e6","date":"2019-07-11 13:27:37 +0800","message":"Signal plugin shutdown for driver.TaskStats","refs":[],"body":"The driver plugin stub client must call `grpcutils.HandleGrpcErr` to handle plugin\nshutdown similar to other functions.  This ensures that TaskStats returns\n`ErrPluginShutdown` when plugin shutdown.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bbf8f90ecb273c7d75bcd5b6bc98d31948db240f","date":"2019-07-11 13:35:44 +0800","message":"client/taskrunner: fix stats stats retry logic","refs":[],"body":"Previously, if a channel is closed, we retry the Stats call.  But, if that call\nfails, we go in a backoff loop without calling Stats ever again.\n\nHere, we use a utility function for calling driverHandle.Stats call that retries\nas one expects.\n\nI aimed to preserve the logging formats but made small improvements as I saw fit.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c031f666c9cf7709d7f826255ac1b904673fe920","date":"2019-07-11 12:31:12 -0500","message":"Merge pull request #5912 from hashicorp/f-systemd-nofile","refs":[],"body":"systemd: set a high but non-infinite fd limit","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"38018d7a8cb2df49b2d1926bfddb9dbc950135df","date":"2019-07-11 13:43:16 -0400","message":"Added Community task driver for FreeBSD jails","refs":[],"body":"","author_name":"cneira","author_email":"cneirabustos@gmail.com"},{"hash":"88c03d088850a07a505fff91ac3909cbfe71b656","date":"2019-07-11 22:36:58 +0200","message":"TF config enable services (#5947)","refs":[],"body":"* enable vault, consul, and nomad services to make them persistent after reboot\r\n\r\n* update AMI\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"a6604f8926aa1608be116f17de8549b5595e6ba3","date":"2019-07-12 14:32:52 +0800","message":"rpc: add positive tests for server streaming RPC","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b0d98d17b5e5ac9ae15d186fd28b013300a8ae89","date":"2019-07-12 14:41:44 +0800","message":"rpc: use tls wrapped connection for streaming rpc","refs":[],"body":"This ensures that server-to-server streaming RPC calls use the tls\nwrapped connections.\n\nPrior to this, `streamingRpcImpl` function uses tls for setting header\nand invoking the rpc method, but returns unwrapped tls connection.\nThus, streaming writes fail with tls errors.\n\nThis tls streaming bug existed since 0.8.0[1], but PR #5654[2]\nexacerbated it in 0.9.2.  Prior to PR #5654, nomad client used to\nshuffle servers at every heartbeat -- `servers.Manager.setServers`[3]\nalways shuffled servers and was called by heartbeat code[4].  Shuffling\nservers meant that a nomad client would heartbeat and establish a\nconnection against all nomad servers eventually.  When handling\nstreaming RPC calls, nomad servers used these local connection to\ncommunicate directly to the client.  The server-to-server forwarding\nlogic was left mostly unexercised.\n\nPR #5654 means that a nomad client may connect to a single server only\nand caused the server-to-server forward streaming RPC code to get\nexercised more and unearthed the problem.\n\n[1] https://github.com/hashicorp/nomad/blob/v0.8.0/nomad/rpc.go#L501-L515\n[2] https://github.com/hashicorp/nomad/pull/5654\n[3] https://github.com/hashicorp/nomad/blob/v0.9.1/client/servers/manager.go#L198-L216\n[4] https://github.com/hashicorp/nomad/blob/v0.9.1/client/client.go#L1603\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"111d615099714d7e8caabcb8dba9bcb528bf8fef","date":"2019-07-12 11:27:47 -0400","message":"Fixed LXC reference","refs":[],"body":"","author_name":"Carlos Neira","author_email":"cneirabustos@gmail.com"},{"hash":"4bdea1770539488a7a9b6e66813b322c4a586fa6","date":"2019-07-12 11:45:56 -0400","message":"Update jail-task-driver.html.md","refs":[],"body":"","author_name":"Carlos Neira","author_email":"cneirabustos@gmail.com"},{"hash":"0a58242d55d96d99519fc6dabd499044636f2160","date":"2019-07-13 00:47:43 +0800","message":"update changelog","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8181d59c7ba8c9659535d8a5e0f4d227b8ab9764","date":"2019-07-12 16:52:19 -0400","message":"fixup","refs":[],"body":"","author_name":"cneira","author_email":"cneirabustos@gmail.com"},{"hash":"bcf3b8eefb81a21a720a74b0d3210f972e9c3799","date":"2019-07-12 16:52:22 -0400","message":"Merge branch 'jail-task-driver' of https://github.com/cneira/nomad into jail-task-driver","refs":[],"body":"","author_name":"cneira","author_email":"cneirabustos@gmail.com"},{"hash":"290ddea792372dab4467cd8837b29f0868a58281","date":"2019-07-12 17:08:23 -0400","message":"fixup","refs":[],"body":"","author_name":"cneira","author_email":"cneirabustos@gmail.com"},{"hash":"e129c41ab298eda8eeb6d5e7665091efe7754419","date":"2019-07-13 07:29:48 +0800","message":"Merge pull request #5954 from hashicorp/b-fix-streaming-rpc-tls","refs":[],"body":"rpc: use tls wrapped connection for streaming rpc","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"52ffcbe37d18d2e93e18bc6e6d8a18083ffe60ff","date":"2019-07-15 10:55:31 +0800","message":"changelog GH-5954","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"6844736d4bf42ff91e1f41dda9c7f115b52ac7ab","date":"2019-07-15 10:56:47 +0800","message":"sort changelog entries","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b2d40e7ef79145e382d00686e00bc19a66588b8f","date":"2019-07-15 18:34:53 +0300","message":"take NodeID from url in api for node eligibility","refs":[],"body":"","author_name":"Eli Shvartsman","author_email":"eli@shvar.com"},{"hash":"c59fde4b3e1b9d42cbcd3fe845e714dc858433af","date":"2019-07-15 11:12:25 -0500","message":"Merge pull request #5952 from cneira/jail-task-driver","refs":[],"body":"Added Community task driver for FreeBSD jails","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"2d5aa6de681d5c33bc113536042873e4fcfa8d46","date":"2019-07-15 11:30:31 -0500","message":"Merge pull request #5938 from RenaudWasTaken/master","refs":[],"body":"Updated the TensorRT demo to use the official NVIDIA image","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"596b5aaf7ed572e60727942e69a118122b247692","date":"2019-07-15 12:14:32 -0500","message":"UI: Add copy button for client/allocation UUIDs (#5926)","refs":[],"body":"The button shows a success icon and tooltip on click, and resets\r\nafter two seconds.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"143448614bd20f732a46c62ccf950234f95391d3","date":"2019-07-15 14:11:11 -0700","message":"Added line around interoperability to Nomad Downloads page.","refs":["origin/yishan/revised-download-doc"],"body":"","author_name":"Yishan Lin","author_email":"ylin10@bu.edu"},{"hash":"457c3f8ce54ea676ec0abd8458648e8fc06692b5","date":"2019-07-16 10:51:22 -0700","message":"Add interoperability support line to Nomad Downloads documentation page.","refs":[],"body":"Added line around interoperability to Downloads page.","author_name":"Yishan Lin","author_email":"yishan@hashicorp.com"},{"hash":"cacf79e6ac3a2cc4f6a6b3bcc8c47d11cd0d3b3a","date":"2019-07-16 16:09:12 -0400","message":"Merge pull request #5960 from shvar/master","refs":[],"body":"take NodeID from url in api for node eligibility","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"121c97475d532d7fbe762d83647d11282f714cfd","date":"2019-07-17 10:43:13 +0700","message":"address review feedback","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"66bef39dd564899a15dcaf0afd41204d7b0555f0","date":"2019-07-17 11:01:59 +0700","message":"log unrecoverable errors","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"15caf5cf8c571d0659a6c87d1d59fe29fe9bfbfd","date":"2019-07-17 12:02:24 +0800","message":"Merge pull request #5837 from hashicorp/b-consul-restore-sync-2","refs":[],"body":"Avoid de-registering slowly restored services","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b352af92ca60b6318fe042631ca3478d5323bdc7","date":"2019-07-17 12:14:56 +0800","message":"Merge pull request #5948 from hashicorp/b-stats-recover-plugin-shutdown","refs":[],"body":"Collect driver stats when driver plugins are restarted","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"bcfb39da832b3d42c6c65ecb5a632776d5578166","date":"2019-07-17 09:25:00 -0700","message":"Merge pull request #5791 from hashicorp/b-plan-snapshotindex","refs":[],"body":"nomad: include snapshot index when submitting plans","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"0965379f27279bafbab5ba3d9d7f1dc37e89b751","date":"2019-07-17 13:25:17 -0400","message":"Merge pull request #5870 from hashicorp/b-nmd-1529-alloc-stop-missing-header","refs":[],"body":"api: return X-Nomad-Index header on allocation stop","author_name":"Chris Baker","author_email":"cgbaker@hashicorp.com"},{"hash":"87d716ed0b363d0e32dfa71eae1d8d2714a4455d","date":"2019-07-17 15:02:58 -0500","message":"UI: Add page titles (#5924)","refs":[],"body":"This uses ember-page-title to add dynamic page titles throughout the\r\nroute hierarchy. When there’s more than one region, the current\r\ncurrent region is added before the final entry of “- Nomad”.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"412997f5668c23262161fe7c3a33b90a6d0ad3a5","date":"2019-07-17 17:28:40 -0400","message":"pid_collector getAllPids -> getAllPidsByScanning","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"d3ef456bd7da6e003589be4fffcd04111e3116a8","date":"2019-07-09 18:47:51 -0400","message":"resource_container_linux new getAllPidsByCgroup","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"3834616691d108e759dcde4868a7b3fde4b02cb3","date":"2019-07-09 18:48:16 -0400","message":"executor use e.getAllPids()","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"1a9c598fc2385531b5f1e92333d3484f7aaab0f2","date":"2019-07-10 13:45:32 -0400","message":"executor_universal_linux getAllPids chooses cgroup when available","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"ab3e6259d08db9c8be80d4b7ec96ba288146c7c5","date":"2019-07-17 17:28:10 -0400","message":"executor_unix and _windows stub getAllPids ByScanning","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"b66c6cfc2d3c2aa04c5c1c14e10410a59bc1f0b8","date":"2019-07-17 15:20:45 -0700","message":"e2e: enable_debug=true for all agents","refs":[],"body":"Enables the pprof http endpoint for debugging.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"9c418c224b5749126423a4a82b05bbe2b3dcb199","date":"2019-07-17 15:22:21 -0700","message":"consul: fix deadlock in check-based restarts","refs":[],"body":"Fixes #5395\nAlternative to #5957\n\nMake task restarting asynchronous when handling check-based restarts.\nThis matches the pre-0.9 behavior where TaskRunner.Restart was an\nasynchronous signal. The check-based restarting code was not designed\nto handle blocking in TaskRunner.Restart. 0.9 made it reentrant and\ncould easily overwhelm the buffered update chan and deadlock.\n\nMany thanks to @byronwolfman for his excellent debugging, PR, and\nreproducer!\n\nI created this alternative as changing the functionality of\nTaskRunner.Restart has a much larger impact. This approach reverts to\nold known-good behavior and minimizes the number of places changes are\nmade.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"80b1344653cb2443961d8b4787a69762cb351664","date":"2019-07-18 07:13:41 +0700","message":"Update consul-template dependency to latest","refs":[],"body":"To pick up the fix in\nhttps://github.com/hashicorp/consul-template/pull/1231 .\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b73882882e0f0b04ecd62ed3b28b9cd980fc515d","date":"2019-07-18 06:55:27 -0700","message":"e2e: debug log level for everyone!","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b4b2b42e2834dd399813b428668bb46204153927","date":"2019-07-18 07:08:27 -0700","message":"Update command/agent/consul/check_watcher.go","refs":[],"body":"Co-Authored-By: Mahmood Ali <mahmood@hashicorp.com>","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"4b93a08a21b5fcb035c9f24ebc50da21be6ae490","date":"2019-06-19 15:08:02 -0400","message":"blocked_evals system evals indexed by job and node","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"2d8bfb8d11ba1b7a579cb418ffd106025ed75583","date":"2019-06-19 15:10:57 -0400","message":"system_sched submits failed evals as blocked","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"7e18bd6e4ac3469e008d2d2501289743a39f90d8","date":"2019-06-21 16:44:34 -0400","message":"fsm attach UnblockNode on node updates","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"e6820cdc092c12d6e1595f1f39bfd5f34ea44fc1","date":"2019-06-26 09:55:08 -0400","message":"blocked_evals_test Test_UnblockNode","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5ee4ffbae3688793cc31bd203f49617e0cd560d3","date":"2019-07-17 15:28:30 -0400","message":"blocked_evals reset system evals on Flush","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"cdaec89cd13d04d710aad4e4f1536b18a8c5fe3a","date":"2019-07-17 15:37:25 -0400","message":"worker comment system -> core","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"e0edd1156e4648d285844120d251ad66c7633263","date":"2019-07-17 15:57:10 -0400","message":"blocked_evals_test disable calls Flush","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"7bd881cbf71793f91b089508e01374429695d1a2","date":"2019-07-18 10:57:27 -0400","message":"default e.getAllPids in executor_basic","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c7ab4a6fdb46551f4c7caeb8863b9f7289ef76b4","date":"2019-07-18 22:24:07 +0700","message":"changelog GH-5837 and GH-5948","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"17636727e171b36dc8dcb268892389ed2cae898d","date":"2019-07-18 08:22:14 -0700","message":"consul: add test for check watcher deadlock","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"e70542f15dffe019c3f17ceb968cf6261a284e95","date":"2019-07-18 13:04:20 -0400","message":"tasks_test assert merging behavior around Canonicalize","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"eb7d87e1d98a10cfc00529faa60e23ddd8ad6ab2","date":"2019-07-11 17:01:32 -0400","message":"jobs update stanza canonicalize and default AutoPromote","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"9b077bfd2068baf4a7245a1d852b6413464f8a63","date":"2019-07-17 17:55:26 -0400","message":"jobs_test AutoRevert and AutoPromote merged differently","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5f4475574ded1804dbf6117e174664112d76e51e","date":"2019-07-18 16:13:15 -0400","message":"Merge pull request #5900 from hashicorp/f-system-sched-blocked-evals","refs":[],"body":"System scheduler blocked evals","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"858d18df0467293ab7e49c35165bfa113455dc28","date":"2019-07-18 13:13:40 -0700","message":"Merge pull request #5975 from hashicorp/b-check-watcher-deadlock","refs":[],"body":"consul: fix deadlock in check-based restarts","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6e1fbfd3b224f575bf25088e213991fb8dec4441","date":"2019-07-19 06:49:13 +0700","message":"Merge pull request #5976 from hashicorp/b-consul-template-update-20190718","refs":[],"body":"Update consul-template dependency to latest","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"81544bac72e71f1fb7bf44dbd2608427388be8cc","date":"2019-07-19 09:21:20 +0530","message":"Update index.html.md","refs":[],"body":"","author_name":"tariq87","author_email":"tariq.siddiqui@r1soft.com"},{"hash":"f3fdd0f09dd685c342b61a59e68fbd6f0d8d3280","date":"2019-07-19 10:51:36 -0400","message":"CHANGELOG core system jobs blocked","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"e34c60ea1ea4052b5109aeffdeee86a417b68847","date":"2019-07-19 11:07:03 -0400","message":"Merge pull request #5951 from hashicorp/b-cpu-pid-scan","refs":[],"body":"reduce CPU usage running large numbers of clients","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"1b8c5eded42978af5c2a5fabeb4d6ba29cb222fa","date":"2019-07-19 11:09:17 -0400","message":"CHANGELOG client cpu usage","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"f87d362f6ff8d36abc2e0b800492fb2563fef3b4","date":"2019-07-19 08:21:17 -0700","message":"Merge pull request #5974 from hashicorp/e2e-terraform-debug","refs":[],"body":"e2e: enable_debug=true for all agents","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"fdb14bd6e1487203b89ec313c8b034cbcb6eb624","date":"2019-07-19 08:25:31 -0700","message":"changelog: add #5791 and #5975","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"8833fb89c4af27a6f030476bf4ac1f37b01b7456","date":"2019-07-19 11:57:13 -0400","message":"Merge pull request #5953 from hashicorp/b-job-update-auto_revert-merge","refs":[],"body":"jobs update stanza merging cleanup","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"e31db578e0df04cd1260f79ee6509071bf8b3c43","date":"2019-07-19 10:04:39 -0700","message":"add formatting for hcl parsing error messages (#5972)","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"47e92896a4733f3791d1269fdbefcdd82fb6e5b1","date":"2019-07-19 10:14:19 -0700","message":"update changelog","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"f61ec2335e15363b9abb42d95269e2bee15bb8d1","date":"2019-07-19 12:45:28 -0500","message":"Fix links to namespace and quotas guides","refs":[],"body":"","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"7a97514dc394e67645397627888be2ddbf732183","date":"2019-07-19 14:43:14 -0400","message":"Merge pull request #5983 from tariq87/patch-1","refs":[],"body":"Update index.html.md","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"1cd86141d96e673c4cfaf65f1ca8e31c3116f5b3","date":"2019-07-20 16:55:07 +0200","message":"chore: Format hcl configurations","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"1a3483c51321c395fed7507bdc2ada0ac5d62c89","date":"2019-07-20 18:21:43 +0200","message":"Merge pull request #5987 from hashicorp/dani/format-samples","refs":[],"body":"chore: Format hcl configurations","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"623ada810d0e49e953215e7efd5dc66a9cbe9004","date":"2019-07-22 18:34:59 +0800","message":"Clarify script checks requiring shell","refs":[],"body":"Closes https://github.com/hashicorp/nomad/issues/5981\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"037d613f111e40bb71c5c6ddc24d5e65576b7dd6","date":"2019-07-22 19:41:07 +0800","message":"Merge pull request #5989 from hashicorp/d-fix-bashism-text","refs":[],"body":"Clarify script checks requiring shell","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e0126123ab1ba848f72458538bc6118c978245e6","date":"2019-07-22 17:49:19 +0200","message":"logmon: Workaround golang/go#29119","refs":[],"body":"There's a bug in go1.11 that causes some io operations on windows to\nreturn incorrect errors for some cases when Stat-ing files. To avoid\nupgrading to go1.12 in a point release, here we loosen up the cases\nwhere we will attempt to create fifos, and add some logging of\nunderlying stat errors to help with debugging.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"b2cfc5ee1204fa437ad43d1d6006ae9a1e869f5a","date":"2019-07-22 13:54:25 -0500","message":"Merge pull request #5985 from hashicorp/b-enterprise-docs-guides-links","refs":[],"body":"Fix links to namespace and quotas guides","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"cab04997f06d9a3c4aee031e1874bb063a5dc690","date":"2019-07-22 15:16:13 -0400","message":"executor_universal_linux raw_exec cgroup failure is not fatal","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"12c6ceb27b751b6688c06858bef576470728a840","date":"2019-07-22 12:49:48 -0700","message":"logmon: ensure errors are still handled properly","refs":[],"body":"...and add a comment to switch back to the old error handling once we\nswitch to Go 1.12.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"1a90b2d08273e34669d2823cb891f28c600eb993","date":"2019-07-22 13:05:01 -0700","message":"logmon: fix comment formattinglogmon: fix comment formattinglogmon: fix comment formattinglogmon: fix comment formattinglogmon: fix comment formatting","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"e05e290ec71fecb987bb1cb5383907c77570c043","date":"2019-07-22 16:52:34 -0400","message":"Merge pull request #5991 from hashicorp/b-cgroup-error-non-fatal","refs":[],"body":"executor_universal_linux raw_exec cgroup failure is not fatal","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c033c93ef6d7d29b3e91823836e3ff3d385fb038","date":"2019-07-22 13:53:13 -0700","message":"Merge pull request #5990 from hashicorp/b-hack-goworkaround","refs":[],"body":"logmon: Workaround golang/go#29119","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"4999923574186583ce7a007865f745ecbc55ceb9","date":"2019-07-22 21:42:36 +0000","message":"Generate files for 0.9.4-rc1 release","refs":[],"body":"","author_name":"Nomad Release bot","author_email":"nomad@hashicorp.com"},{"hash":"4c8d743bd3c1c0399791b80c453437a650ae22aa","date":"2019-07-22 19:58:32 -0500","message":"Update CHANGELOG.md","refs":["origin/f-host-volumes"],"body":"","author_name":"Preetha","author_email":"preetha@hashicorp.com"},{"hash":"014bcbb5ca3a1ef2480e8b6d1a82519b6da6d2e1","date":"2019-07-23 12:00:45 -0500","message":"Release v0.9.4-rc1","refs":["tag: v0.9.4-rc1"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com","tag":"v0.9.4-rc1"},{"hash":"31d674bf399c0dd3ef6c2caf5b1595bad98b2564","date":"2019-07-23 12:07:49 -0500","message":"remove generated code","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"98c56c2257f9372cd9a664b7ab394d8ce57475b8","date":"2019-07-23 12:09:39 -0500","message":"Merge branch 'master' of github.com:hashicorp/nomad","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"9aa27140941104bd1d15a439d237a5e810051cf0","date":"2019-07-23 12:16:53 -0500","message":"Add download link for Nomad 0.9.4 rc1","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"1147fd6278dae7a267eee767240ea3e2a6ec5d6a","date":"2019-07-23 14:40:32 -0500","message":"UI: Remove ember-native-dom-helpers (#5959)","refs":[],"body":"This also includes migration of some tests to async.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"e91f74d36861f09edeb897fef6c3f09c2abebaae","date":"2019-07-23 14:48:39 -0500","message":"UI: Remove unused route (#5925)","refs":[],"body":"This is an extraneous addition from #4612.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"eafad84d3ae94a7a945b58943513f7a6cecc7e2f","date":"2019-07-23 14:50:38 -0500","message":"Update changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f046ec31e5d684b20ade7ad68b0490f06e8373a6","date":"2019-07-23 15:37:34 -0500","message":"UI: Add allocation directory sorting (#5914)","refs":[],"body":"When sorting by size, directories are sorted by name, as size\r\nisn’t displayed.\r\n\r\nThis includes a change to the positioning of sort arrows for all tables,\r\nmoving them closer to the text, because in some cases, the arrows\r\nfor right-aligned columns were ambiguously positioned.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"e30a24edf19c73d54cfaf71d11973a2587c4c695","date":"2019-07-24 11:55:22 +0300","message":"driver/docker: support unix destination mount path in windows","refs":[],"body":"","author_name":"Ilya Guterman","author_email":"ilya.guterman@iqoqo.co"},{"hash":"2d48ce99911c7d1fa32dde63d6db827bd57b762c","date":"2019-07-23 15:52:24 +0200","message":"Support for hot reloading log levels","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"e55f70a4f5ae8616759e829c7e553bc9df619ba1","date":"2019-07-24 13:54:04 +0200","message":"Merge pull request #5996 from hashicorp/f-reload-log-level","refs":[],"body":"Support for hot reloading log levels","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"0fed5eb16fcfc1a1eaf7233f7e8bbba80e5d35d7","date":"2019-07-24 11:57:52 -0400","message":"docs for linux raw_exec cgroups","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c7cd018655a63c945e7cc90895ab45904177fc85","date":"2019-07-24 12:10:05 -0400","message":"executor_universal_linux log a link to the docs on cgroup error","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"c93ed2106b3d3fd3973233fc4aa6180810f405f3","date":"2019-07-24 13:27:54 -0400","message":"Merge pull request #6008 from hashicorp/doc-cgroup-raw-exec","refs":[],"body":"document cgroup raw exec","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"fbdc4ee5369fcc91194b3afda01f936cbd47afcf","date":"2019-07-24 21:03:46 -0600","message":"Clarify encryption keys are shared across datacenters","refs":[],"body":"#5973","author_name":"Spencer Owen","author_email":"owenspencer@gmail.com"},{"hash":"cf419a7b0261153737ce9b9d8eb6c80ade736cb8","date":"2019-07-25 15:23:10 -0700","message":"docs: cluster -> region","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"9212f405d8e1ed6c3f7032da6cd600ce51129a27","date":"2019-07-26 06:54:23 +0800","message":"Update go-getter to v1.1.0","refs":[],"body":"","author_name":"hmalphettes","author_email":"hmalphettes@gmail.com"},{"hash":"e76bb99915a4a6b9586df152bc5131462e8ca1e4","date":"2019-07-25 21:03:20 -0500","message":"fix grammar","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"0a10832e7cc58b0ee6d8bdd82e19290f74004f12","date":"2019-07-22 23:19:39 +0800","message":"use go1.11 in windows CI","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"beeb31e66d6971c19f28489276b1a9ac84545ec6","date":"2019-07-26 13:45:00 +0800","message":"Merge pull request #5993 from hashicorp/b-appveyor-go1.11","refs":[],"body":"use go1.11 in windows CI","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"66bf8eb59909bd4b65278d3e9e07e06ab1edb239","date":"2019-07-18 13:57:47 +0100","message":"Allow the job GC interval to be configured from default of 5 minutes","refs":[],"body":"","author_name":"Pete Woods","author_email":"pete.woods@circleci.com"},{"hash":"d07ea34b0cf6009b17e38234a8e617de7df013a5","date":"2019-07-24 14:17:33 +0100","message":"Add job status metrics","refs":[],"body":"This avoids having to write services to repeatedly hit the jobs API\n","author_name":"Pete Woods","author_email":"pete.woods@circleci.com"},{"hash":"80185938a8bda74a28e4f8b381c677f87ffb13a4","date":"2019-07-26 11:24:36 -0700","message":"Merge pull request #6010 from spuder/patch-1","refs":[],"body":"Clarify encryption keys are shared across datacenters","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"c0ba4eeac9361880b072647add9799076199fcc3","date":"2019-07-26 14:49:36 -0500","message":"Merge branch 'master' into f-ui/alloc-fs","refs":[],"body":"# Conflicts:\n#\tui/app/templates/allocations/allocation/task/index.hbs\n#\tui/app/templates/allocations/allocation/task/logs.hbs\n","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"6c0cd2155dd30a7af8a8aa98b7a684cbe6ad15dc","date":"2019-07-29 09:58:03 -0500","message":"Change UI changelog entries to be length-sorted","refs":[],"body":"Thanks to @notnoop for letting me know about this:\nhttps://github.com/hashicorp/nomad/pull/6007#discussion_r308052454\n","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"83b78cfdf8cc2ecad942d3c30090f9a99378288f","date":"2019-07-29 08:00:28 -0700","message":"docs: job names are unique by region/namespace","refs":[],"body":"\"globally\" is incorrect here unless you're running 1 region or at least\nonly 1 per planet.\n\nSorted link list at the bottom as well.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"0395310fb6359fe96960ca532113652efcb3fe6d","date":"2019-07-29 08:14:20 -0700","message":"docs: mention acls & sentinel are multi-region","refs":[],"body":"The reference architecture neglected to mention ACLs and Sentinel\npolicies are the exception to \"no data is shared between regions.\"\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"164d16650734cacaae9fdc8f331a5aec97e25027","date":"2019-07-29 09:09:41 -0700","message":"Merge pull request #6001 from Iqoqo/allow-unix-container-path-in-lcow","refs":[],"body":"driver/docker: support unix destination mount path in windows","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"a6c96eade56f0b8880edbec3c4392934492f09bf","date":"2019-07-29 09:09:54 -0700","message":"Revert \"driver/docker: support unix destination mount path in windows\"","refs":[],"body":"","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},{"hash":"ef8bbe14f42a6d2c02e57cdc3f83f71e719cb012","date":"2019-07-29 16:38:18 -0400","message":"Service and Batch Job Preemption Guide (#5853)","refs":[],"body":"* fix navigation issue for spread guide\r\n\r\n* skeleton for preemption guide\r\n\r\n* background info, challenge, and pre-reqs\r\n\r\n* steps\r\n\r\n* rewording of intro\r\n\r\n* re-wording\r\n\r\n* adding more detail to intro\r\n\r\n* clarify use of preemption in intro\r\n","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"0a2797210d29f42bddf9e3e7834515e758475f28","date":"2019-07-29 13:47:06 -0700","message":"Merge pull request #6027 from hashicorp/docs-ref-arch","refs":[],"body":"docs: mention acls & sentinel are multi-region","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"1b181fcaa9d535b745ace857be4f71b203fd52cb","date":"2019-07-29 17:11:14 -0400","message":"fix typo for link to acl bootstrap reset process (#6032)","refs":[],"body":"","author_name":"Omar Khawaja","author_email":"Omar-Khawaja@users.noreply.github.com"},{"hash":"89578c6847fb871b29afa06199301463b85eb6bc","date":"2019-07-29 14:45:53 -0700","message":"Merge pull request #6028 from hashicorp/revert-6001-allow-unix-container-path-in-lcow","refs":[],"body":"Revert \"driver/docker: support unix destination mount path in windows\"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"50df5a20f4b95b61c19d16d79894ed8366092b1d","date":"2019-07-30 11:25:29 +0200","message":"Fix typo in Spreads key in JSON Job Specification","refs":[],"body":"","author_name":"Gustav","author_email":"grddev@gmail.com"},{"hash":"39525d7496caedc5c99dc0e96ca1c1d5d1179d5e","date":"2019-07-30 14:54:52 +0200","message":"Update example setup to use non-deprecated join","refs":[],"body":"","author_name":"James Rasell","author_email":"jrasell@users.noreply.github.com"},{"hash":"feae5297e0809c3a6d6fb75abda689f4d005b598","date":"2019-07-30 08:13:04 -0700","message":"Merge pull request #6026 from hashicorp/docs-job-name","refs":[],"body":"docs: job names are unique by region/namespace","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"177d4efe422f0af43c07b7dc07e338bce065dac1","date":"2019-07-30 11:55:57 -0500","message":"Add log level reloading to changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"7f0acdb3412e309b22df1eb52b8b867fb5d6985b","date":"2019-07-30 13:37:44 -0500","message":"Fix broken link","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"a81aa846a45fb8248551b12616287cb57c418cd6","date":"2019-07-30 19:05:18 +0000","message":"Generate files for 0.9.4 release","refs":[],"body":"","author_name":"Nomad Release bot","author_email":"nomad@hashicorp.com"},{"hash":"b60ace2b85ae6132d874ebfdae4a41112168d806","date":"2019-07-30 15:50:40 -0500","message":"Release date in changelog","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"6c4863c5f61b0cdfb609927f6f67e17d90454197","date":"2019-07-30 15:51:17 -0500","message":"Release v0.9.4","refs":["tag: v0.9.4"],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com","tag":"v0.9.4"},{"hash":"ebd7002683ec7f2e0d9c2defe8852ff99ae66af9","date":"2019-07-30 15:56:05 -0500","message":"remove generated code and change version to 0.10.0","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"f09d2ef4c5691bdc5795c87f019841cdbb426ba2","date":"2019-07-30 16:46:13 -0500","message":"Update to latest downloadable release","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"2152d57df384133d5792d058da3ff6ccb24f43cf","date":"2019-07-30 16:58:01 -0500","message":"UI: Add IPv6 bracket-wrapping to network serializer (#6007)","refs":[],"body":"This addresses the issue raised by @pznamensky in #5966.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"c52edb32873a043f827f103768c6c0c6df51b122","date":"2019-07-30 15:54:29 -0700","message":"Merge pull request #5978 from pete-woods/configurable-job-gc-interval","refs":[],"body":"command/agent: allow the job GC interval to be configured","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"756177c70cea02b6935a8bedb1f128f05fba16ec","date":"2019-07-30 15:56:50 -0700","message":"changelog: add #5978","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"a21ae527832288f44d8b752c34000627a99e0e26","date":"2019-06-26 14:51:23 -0700","message":"Move common stream frame decoding to a util","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"07f1c89cc58917282877f8cf7b557b7037ce7529","date":"2019-06-26 14:52:41 -0700","message":"Use the stream decode util and never opt to use the plain query param","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"871fe105a2f8d87a81e11da0d29a0603261a9167","date":"2019-06-26 14:53:01 -0700","message":"Tweak log window math","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a993a305cdb1c3318a38cb26a7919f5a0405b689","date":"2019-06-27 09:21:00 -0700","message":"New task-file component","refs":[],"body":"Based on the task-log component. Commonalities will be refactored.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"caf48ee3e6e599c1f2b2fe0a879d4a58e1abfd1b","date":"2019-06-27 12:10:34 -0700","message":"Extract a streaming-file component from the task-log component","refs":[],"body":"The new streaming-file component takes an arbitrary logger component\nalong with some mode flags and handles things like polling, DOM updates,\nand scroll position.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"45c8f37157cdef3a7a5420a3e2c1dc6927062bf5","date":"2019-07-02 07:52:47 -0700","message":"image-file component for showing an image and image metadata","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"8966bc0830b3461583b0d3b014705547a5f45a9e","date":"2019-07-02 12:51:33 -0700","message":"Styles for the image-file component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"0698e119c82a617b89434949cd41d987c48171d2","date":"2019-07-02 12:59:15 -0700","message":"Address WindowResizable refactor","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"6ec7fafaa5538f9b0bbe41cfb380520a9048928a","date":"2019-07-02 12:59:57 -0700","message":"Markup for the image-file component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"8403cbaa53fb6ee5e4fa17cbc92ff99845b626b1","date":"2019-07-02 13:01:07 -0700","message":"Refactored and image support of the task-file component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a60960690156b303405bcba1f535bd2e23a6ac34","date":"2019-07-02 15:36:38 -0700","message":"Add a plainText mode","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c335aced9b2582d5fed101d389a20eb233ccc4d4","date":"2019-07-02 15:37:17 -0700","message":"Custom Log instance to deal with API quirks","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ccbe31f0d6f32f81551d0ac436bf08facaf41974","date":"2019-07-20 11:46:54 -0700","message":"Always escape < and > to avoid inadvertently rendering html","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"fea37310688c215e9f6c9ca7cebfe361ec8e0e4d","date":"2019-07-20 12:00:20 -0700","message":"Integrate the task-file component with the fs explorer pages","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"bd9d73ba5d529efa3c9f294f9769a1d0c6b2cf4f","date":"2019-07-20 21:01:39 -0700","message":"Fix a bug where tail calls for files weren't getting the correct params","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c4dd61d1cd5d841c53106bd4044efd8c107034ba","date":"2019-07-24 23:42:51 -0700","message":"Mirage factory for file system fixtures","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"97c45096df5f434d75f315edf104c5b39731f3ac","date":"2019-07-25 00:47:46 -0700","message":"Use the alloc file factory for the fs stat and fs ls end points","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"33f1da9bbdce789113f654ddf4d66cdc84a836fd","date":"2019-07-25 01:12:44 -0700","message":"cat, stream, and readat mocks for alloc fs","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"4b037bde7f1e6481a12805431de031040768c8ca","date":"2019-07-25 10:52:59 -0700","message":"Add hollow variation to empty-message","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"55349dcceee341a3aeaa4530a097659bd49b028b","date":"2019-07-25 10:53:45 -0700","message":"Add unsupported file type state","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"8f496e8b65d4e367953be916cd4e139135208962","date":"2019-07-25 22:44:29 -0700","message":"Refactor existing fs tests to use new mirage factories","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7294f38a3276550c3b89b49a93d59948f2f1c4ab","date":"2019-07-26 00:38:36 -0700","message":"Integration tests for the image-file component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"6bd54f734364df35d38417cbb03b93174fed96fa","date":"2019-07-30 17:20:44 -0700","message":"Test coverage for streaming file component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c4516158b0a3fb06fac723e4f1439acbf0d93781","date":"2019-07-30 17:21:12 -0700","message":"Test coverage for task-file component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"0471f28e9e1e557c989191f125d5e0f4b18f014c","date":"2019-07-30 17:21:42 -0700","message":"Add file mocks to every mirage scenario","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b60bc8c17d4456f494205963c047b2ab88074642","date":"2019-04-29 13:15:12 -0400","message":"Add network stanza to group","refs":[],"body":"Adds a network stanza and additional options to the task group level\nin prep for allowing shared networking between tasks of an alloc.\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"a91df654028006e29911dc6fc3a6816248b7a6dd","date":"2019-04-29 15:39:55 -0400","message":"fix tests from introducing new struct fields","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"6b5df13121d7c8c7ca4e5fea8b3da8e8bc93c3cb","date":"2019-05-03 10:26:26 -0400","message":"structs: Add validations for task group networks","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"7f7476c50055acd5dfe60832f47d457dc85b05da","date":"2019-05-08 09:57:20 -0400","message":"fix structs comment","refs":[],"body":"Co-Authored-By: nickethier <ncethier@gmail.com>","author_name":"Danielle","author_email":"dani@builds.terrible.systems"},{"hash":"592de6ffeca040f2e02db0da92b53b4c370965f5","date":"2019-05-08 13:55:57 -0400","message":"structs: refactor network validation to seperate fn","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"bfe78419139b422adfee472bd4c47a66a37fe5b3","date":"2019-05-08 13:56:15 -0400","message":"agent: simplify if block","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"e20fa7ccc17b487ef0237badc4aea7bc94bd55a0","date":"2019-04-29 13:35:15 -0400","message":"Add network lifecycle management","refs":[],"body":"Adds a new Prerun and Postrun hooks to manage set up of network namespaces\non linux. Work still needs to be done to make the code platform agnostic and\nsupport Docker style network initalization.\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4a8a96fa1a104b9d0c37c3f02cd5948cb186c751","date":"2019-05-03 12:05:30 -0400","message":"ar: initial driver based network management","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"bc71cafcee2dbf37367e5b20149c5b7917b6011a","date":"2019-05-08 10:30:10 -0400","message":"plugin/driver: fix tests and add new dep to vendor","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"c39e8dca6e5a9e820c1f8f25c2f87f0cc8b1079a","date":"2019-05-08 10:30:50 -0400","message":"ar: move linux specific code to it's own file and add tests","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"c742f8b580f916077a7b4ee39b367ff053d17afc","date":"2019-05-08 11:09:35 -0400","message":"ar: cleanup lint errors","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"16343ae23a708137b1121f225f8313afad4ae47b","date":"2019-05-08 13:29:31 -0400","message":"ar: add tests for network hook","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"35de444e9bb8becf468fa099cd933480295612e3","date":"2019-05-08 13:45:20 -0400","message":"ar: plumb error handling into alloc runner hook initialization","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"da3978b377621bea37880fb5793123c7ac9c62a3","date":"2019-05-13 21:26:39 -0400","message":"plugins/driver: make DriverNetworkManager interface optional","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"508ff3cf2fce9e877a5d32456ec62f6a90b67bff","date":"2019-05-13 22:42:46 -0400","message":"ar: fix test that failed due to error renaming","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"56d5fe704a63d837eb23ea2323480aaf4519a527","date":"2019-05-21 00:11:48 -0400","message":"ar: rearrange network hook to support building on windows","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"9fa47daf5c7e857da884a39a485259d7a9487ba9","date":"2019-05-21 22:17:15 -0400","message":"ar: fix lint errors","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"e26192ad49cb2600326afa7946ea439dd495e6cb","date":"2019-04-29 13:37:23 -0400","message":"Driver networking support","refs":[],"body":"Adds support for passing network isolation config into drivers and\nimplements support in the rawexec driver as a proof of concept\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"51b69601ab984e62b75b88e33b6cefe4d919bddb","date":"2019-05-13 20:59:31 -0400","message":"docker: support shared network namespaces","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"67ea2e9305cd6db0b8a481d5d6b7a9ff903f918f","date":"2019-06-14 22:16:31 -0400","message":"docker: add additional commens","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"c8c1ad748ed093b2dfbaadb7e2c3d58be3b0b88d","date":"2019-06-14 22:32:55 -0400","message":"docker: fix driver test from changed func args","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4fdb0dab1c34a609f4b516d91038c8f2187bed0d","date":"2019-06-14 23:06:31 -0400","message":"docker: add nil check on network isolation spec","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"d28d8651000daf42cdd74d387db8987e83ad4a7a","date":"2019-06-16 23:56:20 -0400","message":"executor: support network namespacing on universal executor","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"1ff85f09f3fe6e337b0d0b044fb09d8e92a9fc86","date":"2019-06-14 01:35:27 -0400","message":"executor: cleanup netns handling in executor","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"eb2a2cd76eaf530c335a760c82297814ac233b73","date":"2019-06-24 08:29:26 -0700","message":"connect: add group.service stanza support","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"02db1a1b877f8d9044255b41824e4f59bf5163a9","date":"2019-06-20 00:00:31 -0700","message":"vendor: update consul/api@v1.5.1 for connect fields","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"1ba097bbd5d5d73425fd12bc03f085dd3d53e7d8","date":"2019-06-25 15:11:09 -0700","message":"api: add missing Networks field to alloc resources","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"15a0fdf3d3c1e3807974a7bcdcebfa22a06fc24c","date":"2019-06-25 15:13:07 -0700","message":"structs: deepcopy shared alloc resources","refs":[],"body":"Also DRY up Networks code by using Networks.Copy\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"e15005bdcb9100e2726dbd36f4ad1b801c4c5116","date":"2019-06-11 00:29:12 -0400","message":"networking: Add new bridge networking mode implementation","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"dc08ec8783afe29440188b8ef9425c44d50618e1","date":"2019-06-13 23:05:57 -0400","message":"ar: plumb client config for networking into the network hook","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"0cdefcf1f33ea7c64cd3a00b5297c5c447114c1b","date":"2019-06-14 01:27:16 -0400","message":"website: add new networking related client config docs","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"cf65bbe47c3b4de8fba5ec0d8ae97d3520e660c4","date":"2019-06-14 11:42:32 -0400","message":"docker: allow configuration of infra image","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4aefe5654d91aa82972dfe5bf05d74a42277f923","date":"2019-06-18 00:34:50 -0400","message":"vendor: add cni libs","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"e910fdbb32d15e5319b1eb8b2120fd8100305172","date":"2019-06-18 00:55:43 -0400","message":"fix failing tests","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"4cb99a111224d57c0ab1c892e043cd5af0d7ba5f","date":"2019-06-18 13:12:23 -0400","message":"scheduler: fix disk constraints","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"f5a68698c15bb2b800d2f9ff4dbd1cc9290ebb90","date":"2019-06-20 17:00:33 -0400","message":"Update website/source/docs/drivers/docker.html.md","refs":[],"body":"Co-Authored-By: Michael Schurter <michael.schurter@gmail.com>","author_name":"Nick Ethier","author_email":"ncethier@gmail.com"},{"hash":"b5618163430a89b6face0cf333b91a00a66ae6e6","date":"2019-07-03 13:29:47 -0500","message":"Scheduler changes to support network at task group level","refs":[],"body":"Also includes unit tests for binpacker and preemption.\nThe tests verify that network resources specified at the\ntask group level are properly accounted for\n","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"5a1dd79179c582e94fd9188f5f9f11f95669fff7","date":"2019-07-05 10:54:00 -0500","message":"Code review feedback","refs":[],"body":"","author_name":"Preetha Appan","author_email":"preetha@hashicorp.com"},{"hash":"4dd5cd103d74f4c558b3264b4d0325823ed37e5a","date":"2019-06-18 18:52:47 -0400","message":"remove unused file","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"0bd157cc3b04fb090dd0d54affcae71496102ce8","date":"2019-06-20 00:02:23 -0400","message":"client: add autofetch for CNI plugins","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"54ce4d1f7ef4913cb12c03dbc98bcd903f7787c9","date":"2019-06-20 00:05:45 -0400","message":"client: remove debugging lines","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"1072084ff38251aae59bb77803ddf7087e5b3f84","date":"2019-07-17 10:27:54 -0400","message":"Apply suggestions from code review","refs":[],"body":"Co-Authored-By: Mahmood Ali <mahmood@hashicorp.com>","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"0b8fc5d0184e2085a5e82ecd4e1b1caffdb7fbe1","date":"2019-07-17 12:00:55 -0400","message":"client/cni: updated comments and simplified logic to auto download plugins","refs":["origin/f-network-namespaces"],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"8262ddf5eb8dcfe4f872ae5b81de643b55f99c41","date":"2019-07-31 02:27:51 -0500","message":"Merge pull request #6035 from jrasell/patch-6","refs":[],"body":"Update example setup to use non-deprecated join","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"19cdfb621b65d1d7184a9d08aace59386c15985a","date":"2019-07-31 02:28:19 -0500","message":"Merge pull request #6034 from grddev/patch-1","refs":[],"body":"Fix typo in Spreads key in JSON Job Specification","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a465046d9cbc042ac942b663ebd085361d77b519","date":"2019-07-31 01:39:59 -0700","message":"fixup-integrate-file-component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"be5c88fd4fcbd8252d47914d50a2bb130c145e7f","date":"2019-07-31 01:40:39 -0700","message":"Remove errant server logging line","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"e277cc53086f7e7246aaf1046def882d5193dc50","date":"2019-07-31 01:41:00 -0700","message":"Update factory-based fs tests to sort properly","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"3fef9836f14df62ce32dab3b82dce8dd96cafa95","date":"2019-07-31 11:03:17 -0400","message":"Merge network namespaces work into master (#6046)","refs":[],"body":"Merge network namespaces work into master","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"d4919cebdc1b4676665b757770b67b535ccb0cf8","date":"2019-07-24 11:20:55 +0300","message":"driver/docker: use default network mode","refs":[],"body":"fallback to docker default network mode instead of explicit bridge for linux\nor nat for windows\n","author_name":"Ilya Guterman","author_email":"ilya.guterman@iqoqo.co"},{"hash":"78b2ee72aa3faa358918414b2693ab5e72ceac51","date":"2019-07-31 16:05:48 -0500","message":"Fix documentation namespace API property (#6051)","refs":[],"body":"","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"6c2392ca648db7de919a77cd235e43ad2b51b11a","date":"2019-08-01 08:32:43 -0400","message":"api: add follow param to file stream endpoint (#6049)","refs":[],"body":"The `/v1/client/fs/stream endpoint` supports tailing a file by writing\r\nchunks out as they come in. But not all browsers support streams\r\n(ex IE11) so we need to be able to tail a file without streaming.\r\n\r\nThe fs stream and logs endpoint use the same implementation for\r\nfilesystem streaming under the hood, but the fs stream always passes\r\nthe `follow` parameter set to true. This adds the same toggle to the\r\nfs stream endpoint that we have for logs. It defaults to true for\r\nbackwards compatibility.","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"3fd0c7220c6b4b25d611b35f3e7e17d2b19dad6b","date":"2019-08-01 09:49:41 -0500","message":"Fix namespace parameter name (#6056)","refs":[],"body":"I missed this in #6051.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"473ef7a662f50a75ac0f062e5f93e12e0ed40b71","date":"2019-08-01 11:17:46 -0500","message":"Add page titles to filesystem routes (#6024)","refs":[],"body":"","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"7beee8761869777a7be3058a6bc23f78c54c9f3d","date":"2019-08-01 19:54:08 +0300","message":"driver/docker: support unix destination mount path in windows","refs":[],"body":"This reverts commit a6c96eade56f0b8880edbec3c4392934492f09bf.\n","author_name":"Ilya Guterman","author_email":"ilya.guterman@iqoqo.co"},{"hash":"3107274f4ca0b5a28121557c3d93fc979146b194","date":"2019-08-01 09:56:32 -0700","message":"Merge pull request #6061 from Iqoqo/allow-unix-container-path-in-lcow-2","refs":[],"body":"driver/docker: support unix destination mount path in windows","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"dca40b57373cbfa12ac344c7f3c612ee5033eccd","date":"2019-08-01 09:58:12 -0700","message":"Merge pull request #5999 from Iqoqo/use-default-network-for-docker","refs":[],"body":"driver/docker: use default network mode","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b91581a28f29838b0f6cf30e1fbc17dc8fd8148c","date":"2019-08-01 12:59:09 -0700","message":"Merge pull request #6009 from hmalphettes/f-update-go-getter","refs":[],"body":"Update go-getter@1.1.0 to fix #3491","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"9ef22a4805002624a791fc676b00fb5b379db991","date":"2019-08-01 13:05:12 -0700","message":"changelog: add #6009 and reorg #6007","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"488cd7e24eb73bb398fd75979d5206b4a3a3b9a0","date":"2019-08-02 10:07:41 +0800","message":"Check if driver handle is nil before execing","refs":[],"body":"Defend against tr.getDriverHandle being nil.  Exec handler checks if\ntask is running, but it may be stopped between check and driver handler\nfetching.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"2e0d67cbbbb67ddb503ce1f058a0267cec8d437d","date":"2019-08-02 09:48:28 -0500","message":"Merge pull request #6065 from hashicorp/b-nil-driver-exec","refs":[],"body":"Check if driver handle is nil before execing","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f3762abd998022a55931cbaf446d093023958f09","date":"2019-08-02 23:55:52 +0800","message":"make: always honor GO_TAGS in dev","refs":[],"body":"Our build scripts pass `$(GO_TAGS)` to `-tags` go compile flags, except\nfor `make dev`, where `$(NOMAD_UI_TAG)` is used.  This change ensures\n`make dev` is inline with the rest of makefile targets.\n\nI use the flag primarily to enable the nomad ui using the committed\ncompiled assets without regenerating them, as I find using stale ui\nsatisfactory most of the time.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"87b9bd302a7b7d3509e3d09ef5f1e206f406fe9e","date":"2019-08-05 15:00:53 -0500","message":"Add more comments to clarify job.Stable field","refs":[],"body":"","author_name":"Preetha Appan","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"b6ae5e9d624a32961393ffc6bf124b554cb973d0","date":"2019-08-05 15:30:47 -0500","message":"Render consul templates using task env only (#6055)","refs":[],"body":"When rendering a task consul template, ensure that only task environment\r\nvariables are used.\r\n\r\nCurrently, `consul-template` always falls back to host process\r\nenvironment variables when key isn't a task env var[1].  Thus, we add\r\nan empty entry for each host process env-var not found in task env-vars.\r\n\r\n[1] https://github.com/hashicorp/consul-template/blob/bfa5d0e133688920afd1e012404f765182e3d5e0/template/funcs.go#L61-L75\r\n\r\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"692cd9c19e7291db9d2bbb8946aab3b80b805ee9","date":"2019-08-05 14:28:02 -0700","message":"job region defaults to client node region if 'global' or none provided (#6064)","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"84ff32f8d2a4ecccef1b6d5135e159e00cbe7384","date":"2019-08-05 16:49:40 -0500","message":"Merge pull request #6076 from hashicorp/f-comment-stable-field","refs":[],"body":"Add more comments to clarify job.Stable field","author_name":"Preetha","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"5d0529c01561f4beed271067d9f398a11b360898","date":"2019-08-05 15:08:04 -0700","message":"vault: fix race in accessor revocations","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"fc55f65802416712dcefa013b352dd341d298e6b","date":"2019-08-05 17:40:39 -0700","message":"update changelog","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"34213f4c855561f3f0f0d415c7a6852b234cf0bc","date":"2019-08-06 09:55:35 -0500","message":"Remove transition animation from sort arrows (#6067)","refs":[],"body":"It may be an Ember bug: in some circumstances, the\r\nember-transitioning-in class was persisting in table\r\nsort links even after the transition completed. This\r\nchanges the transition animations to be targeted only\r\nfor breadcrumbs and directory links.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"75e5e033fd47ec2251c0da37ffcc568c4c02af9b","date":"2019-07-30 15:40:45 -0700","message":"consul: add Connect structs","refs":[],"body":"Refactor all Consul structs into {api,structs}/services.go because\napi/tasks.go didn't make sense anymore and structs/structs.go is\ngigantic.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"7e08a2fe4589026ea521e3aea5fa22f6186e73c4","date":"2019-08-06 10:40:14 -0700","message":"vault: fix deadlock in SetConfig","refs":[],"body":"This seems to be the minimum viable patch for fixing a deadlock between\nestablishConnection and SetConfig.\n\nSetConfig calls tomb.Kill+tomb.Wait while holding v.lock.\nestablishConnection needs to acquire v.lock to exit but SetConfig is\nholding v.lock until tomb.Wait exits. tomb.Wait can't exit until\nestablishConnect does!\n\n```\n  SetConfig -> tomb.Wait\n     ^              |\n     |              v\n  v.lock <- establishConnection\n```\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"21753013be2e29cf58f90113293d35b70a45d938","date":"2019-08-06 11:17:10 -0700","message":"vault: ensure SetConfig calls are serialized","refs":[],"body":"This is a defensive measure as SetConfig should only be called serially.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"d19644569761f97ab52d4410548d7445feb03822","date":"2019-08-06 14:28:47 -0700","message":"Merge pull request #6077 from hashicorp/b-vault-revlock","refs":[],"body":"vault: fix race in accessor revocations","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"7d452bf86fa68e580e229361231fd5ddab28dcf3","date":"2019-08-06 15:30:17 -0700","message":"Merge pull request #6082 from hashicorp/b-vault-deadlock","refs":[],"body":"vault: fix deadlock in SetConfig","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"d0abe89d1a1ba1b5b8eb31df580a5e8c89982530","date":"2019-08-06 15:43:38 -0700","message":"Merge pull request #6045 from hashicorp/f-connect-groupservice","refs":[],"body":"consul: add Connect structs","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"d45a32240f776744014817e199b4337e6927ecc9","date":"2019-08-07 08:02:16 -0700","message":"Merge pull request #6003 from pete-woods/add-job-status-metrics","refs":[],"body":"nomad: add job status metrics","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"c5e026a816533be710d1e2ed124b3822ac21dd22","date":"2019-08-07 08:04:16 -0700","message":"changelog: add #6003","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"1bdb111127cb3f8882a1ecca49e6cd837cbeeef5","date":"2019-08-07 09:50:35 -0700","message":"add create and modify timestamps to evaluations (#5881)","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"ad43dc830e7551f25302485b166ddcb6c9ff1580","date":"2019-08-07 10:55:26 -0700","message":"remove #6064 from 0.10.0 changelog","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"e97c91191c5f0f2f9533b4d35dd0fbcc00fef5fc","date":"2019-08-07 15:08:38 -0700","message":"Use a data-uri instead of an image for the image-file-test","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"55039b6b828d1882a063d60c5bcaab0ba4c11cc7","date":"2019-08-07 15:11:32 -0700","message":"Minor fixes from code review","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"26e74fe2e211a490210cf80b26a3bd197e5bcf0c","date":"2019-08-07 15:29:14 -0700","message":"Make a dedicated fs-breadcrumbs component","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"55d8ff4b0b6b44880a97a4f866f03cfff058c5a3","date":"2019-08-07 15:29:57 -0700","message":"Add additional troublesome characters to the alloc-file name factory","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"57009442b1b6d8eea4e409a51c264862041b1b71","date":"2019-08-07 18:43:36 -0500","message":"Add field \"kind\" to task for use in connect tasks","refs":[],"body":"","author_name":"Preetha Appan","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"186a620ef1d013fb20a9f0eab168bcff1fe8a308","date":"2019-08-07 17:34:41 -0700","message":"Include all client fs endpoints in the hosts block","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"038fc27ef046d3e5e5bcc6b00f37ab8bd145ec50","date":"2019-08-07 17:35:15 -0700","message":"Always preload the alloc node so the client can be dialed first","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"ed55a7b09a4401dc39fbfaf56886c9af52d8eeee","date":"2019-08-07 17:35:43 -0700","message":"Test that the client is contacted correctly, and the server is used as a fallback","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a8c90f5352659cd9b9af64fa6a20e2f8289d48ea","date":"2019-08-08 09:26:46 -0500","message":"Fix navigation via clicking recent allocation row (#6087)","refs":[],"body":"This fixes the recent allocation rows to navigate when clicking within them\r\nrather than just on the link, which matches the cursor behaviour.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"1db15003fcca672a9c673330ef944c9ef608bb2e","date":"2019-08-08 09:29:10 -0500","message":"Update changelog with #6087","refs":[],"body":"","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"0fad368fe927167450a7415a2dbb8758fcf23045","date":"2019-08-08 09:58:10 -0700","message":"Limit the width of the right page layout column","refs":[],"body":"This was causing elements to flow off the page, since the element was\nassuming 100% but also had a 250px margin for the left column.\n\nThis had previously been \"fixed\" by setting overflow-x: auto, but that\nresulted in tooltips from being clipped.\n\nThis is a better solution to the same problem.\n","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"8c301f07bdf3289af5ac5461992368ea745c34ae","date":"2019-08-08 11:03:41 -0600","message":"Fix Rkt driver requirements list (#6093)","refs":[],"body":"","author_name":"defau1t","author_email":"robin5693@gmail.com"},{"hash":"4b814be995e8eb3575ce53870cd740457bc672a4","date":"2019-08-08 14:52:52 -0400","message":"Revert \"client: remove debugging lines\"","refs":[],"body":"This reverts commit 54ce4d1f7ef4913cb12c03dbc98bcd903f7787c9.\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"144fb1bfeed051ac388401e83ab8ab80e63b028a","date":"2019-08-08 15:10:19 -0400","message":"Revert \"client: add autofetch for CNI plugins\"","refs":[],"body":"This reverts commit 0bd157cc3b04fb090dd0d54affcae71496102ce8.\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"ab1aa050ed8f04fa0cb484cb88e2fec2121a2c2a","date":"2019-08-08 15:26:49 -0400","message":"Revert CNI auto-download (#6095)","refs":[],"body":"Revert CNI auto-download ","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"5cd863cea6bd5e99329561b47712c77c40ebcb6e","date":"2019-08-08 14:40:12 -0500","message":"Merge pull request #6090 from hashicorp/f-task-kind","refs":[],"body":"Add field \"kind\" to task for use in connect tasks","author_name":"Preetha","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"a728ed13e1718f795d41c022273b6604b72e221b","date":"2019-08-08 15:41:47 -0700","message":"Prevent a change in height when switching from a dir to a file","refs":[],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"b4aab30d7e30167cb3fedb9826f04aa5515390cb","date":"2019-08-09 08:25:11 -0400","message":"tests: break out command, command/agent on Travis (#6094)","refs":[],"body":"The command and command/agent packages are taking 5+ minutes on Travis\r\nand this contributes to build timeouts. While this doesn't address\r\nunderlying issues, breaking these out can reduce re-runs until that\r\nwork is done.","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"ff7c0d0406d0199821e45e61e51a055bb723077d","date":"2019-08-09 10:16:45 -0400","message":"syntax fix; add example for alloc exec -task","refs":[],"body":"","author_name":"David Cohen","author_email":"dcohen@hashicorp.com"},{"hash":"07ce33a747cecafd1e703fc16a1be4ca7a46019c","date":"2019-08-09 15:18:53 -0400","message":"Add sidecar_task stanza parsing (#6104)","refs":[],"body":"* jobspec: breakup parse.go into smaller files\r\n\r\n* add sidecar_task parsing to jobspec and api\r\n\r\n* jobspec: combine service parsing logic for task and group service stanzas\r\n\r\n* api: use slice of ConsulUpstream values instead of pointers\r\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"ad72d166ee6143e6283c10d4ffa3dbc76bedc8f9","date":"2019-07-25 16:42:11 +0200","message":"jobspec: Add Volume and VolumeMount declarations","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"8514893d1dca53442b37eca58f6ce96f0c43470d","date":"2019-07-25 16:44:08 +0200","message":"structs: Add declarations of basic structs for volume support","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"86b4296f9d1bdf56433b28fb9b6eb1a51ee020f1","date":"2019-07-25 16:45:41 +0200","message":"client: Add parsing and registration of HostVolume configuration","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"a216daedceec43f36b2309d2281c50d58246097b","date":"2019-07-25 16:46:18 +0200","message":"api: Allow submission of jobs with volumes","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"709abbc6756d94965850066667c08df5131c16e8","date":"2019-07-25 16:46:29 +0200","message":"scheduler: Add a feasability checker for Host Vols","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"c3c003dbd6238169a50f1461513e5bdb4acbc134","date":"2019-07-25 16:48:28 +0200","message":"client: Add volume_hook for mounting volumes","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"0f5cf5fa91455a3e86e516a60d97de82cc1a7bfe","date":"2019-07-31 18:39:08 +0200","message":"Update scheduler/feasible.go","refs":[],"body":"Co-Authored-By: Mahmood Ali <mahmood@hashicorp.com>","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"af5d42c0580df2c7dd33d815ced9bb54397ff8a9","date":"2019-08-01 11:33:26 +0200","message":"structs: Unify Volume and VolumeRequest","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"7b7be83aefbd89ccc6b05cea842bcc9c51e793df","date":"2019-08-01 11:55:42 +0200","message":"HostVolumeConfig: Source -> Path","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"869f1da310796cb897f3f70296c41a0715bc1e4c","date":"2019-08-05 13:33:02 +0200","message":"structs: Document VolumeMount","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"346444be357d6bfc7ee882b23bae7303e514d1a8","date":"2019-07-25 15:43:44 +0200","message":"api: Add HostVolumeInfo to response parsing","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"f478c8cc24c50c8efd8bbc399812518363e206d5","date":"2019-07-25 15:44:19 +0200","message":"cli: Display host volume info in nomad node status","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"a86a07770e272c22f9644dbe4007717b18ad6bea","date":"2019-08-09 12:47:09 +0200","message":"command: Cleanup node-status","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"065688da40053c99730a06c6b4bc052008ac919a","date":"2019-05-08 13:14:24 +0200","message":"acl: Add HostVolume ACLs","refs":[],"body":"This adds an initial implementation of ACLs for HostVolumes.\n\nBecause HostVolumes are a cluster-wide resource, they cannot be tied to\na namespace, thus here we allow similar wildcard definitions based on\ntheir names, tied to a set of capabilities.\n\nInitially, the only available capabilities are deny, or mount. These\nmay be extended in the future to allow read-fs, mount-readonly and\nsimilar capabilities.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"547a454b01e852fb3d9db80081d12eaea0526b1d","date":"2019-07-25 16:32:19 +0200","message":"job_endpoint: Validate volume permissions","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"e57cf06b0d70020866c8217b0effcb80d26cc2cb","date":"2019-08-12 15:41:14 +0200","message":"fixup rebase","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"c486143ced1c8a5df87cba0c70558a0555cc464f","date":"2019-08-12 16:22:27 +0200","message":"Copy documentation to api/tasks","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"0c80fcbd768781c4523dfeffe35bffef590e1592","date":"2019-08-12 16:58:37 +0200","message":"Merge pull request #6100 from hashicorp/f-host-volumes","refs":[],"body":"Host Volumes Support: Rollup Edition","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"ddde2598ce2ae6b71e6bb6e8f4e6bfa833424ba6","date":"2019-08-12 11:03:04 -0400","message":"tests: partial revert of splitting-out command pkg tests (#6101)","refs":[],"body":"GOTEST_PKG_EXCLUDE overrides GOTEST_PKG entirely, so having both in\r\nthe same test run isn't supported and results in a whole lot of extra\r\ntests being run.","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"b03c8c1049e031dfe030bf1752245442429fd6ed","date":"2019-08-12 11:22:48 -0400","message":"Merge pull request #6068 from hashicorp/r-always-honor-gotags","refs":[],"body":"make: always honor GO_TAGS in dev","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"9363acd4ac8640e0b213d80fbf417fcb87949ec3","date":"2019-01-31 14:31:10 +0100","message":"ci: Migrate to CircleCI","refs":[],"body":"This commit provides an initial migration of general testing CI\ninfrastructure to CircleCI.\n\nIt uses CircleCI 2.1 paramereterised jobs to provide two base\nconfigurations: a vm based `test-machine`, and docker based\n`test-container`.\n\nJobs that require root, docker, or other similar features require the\nmachine based jobs, but others should be ran using the `test-container` package\nas they are both cheaper and faster to run.\n","author_name":"Danielle Tomlinson","author_email":"dani@hashicorp.com"},{"hash":"17866d6600f19db0c4ec09cc7c94917e95708c13","date":"2019-04-17 13:37:16 +0200","message":"Test Rocket","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"287618078e692ab380d92f42f5cd79169b306e56","date":"2019-04-17 13:47:49 +0200","message":"Don't log env","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"31d7e00bf911f2ff5b7ede18c478de12c4486224","date":"2019-05-10 16:14:18 +0200","message":"makefile: Recover verbose handling","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"066cfc118950809d76189546bfdae85f74e1bfbf","date":"2019-05-16 14:14:34 +0100","message":"DRY up config","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"b2ada16be0600e892c6b25f544f4b072aa01fd6d","date":"2019-05-16 14:19:18 +0100","message":"Use script to install protoc","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"9f8013712fa2244baa59d936520bccfa54538dcc","date":"2019-05-16 14:24:07 +0100","message":"ci: Generate structs when testing","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"c8d1a75dbcc9a816c98f42af51393cc829833471","date":"2019-08-12 15:30:47 +0200","message":"update docker file and switch to go 1.12.7","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"2ae346a91d61a4e7161ffbeeb49767c663dd6523","date":"2019-08-12 18:34:06 +0200","message":"fix paths","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"5496040a84f9569587567381a3233e5b9c30ff81","date":"2019-08-12 18:39:54 +0200","message":"Add maketask for manual image builds","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"3ccb893583bc69f643a5aa6c758a565db72de05b","date":"2019-08-12 18:48:25 +0200","message":"api requires mount","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"05b95d133ad12c546835156bc48c7b56bb13e074","date":"2019-08-12 20:35:13 +0200","message":"Merge pull request #5681 from hashicorp/dani/circleci","refs":[],"body":"Add CircleCI Configuration","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"66a9a7c4d22e6a4d18ff27246d8fe3ff7c7b846e","date":"2019-08-08 14:45:24 -0500","message":"Add validation for kind field if it is a consul connect proxy","refs":[],"body":"","author_name":"Preetha Appan","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"306cfd66c40715da3515777b58589a9f9e0bafc4","date":"2019-08-09 16:40:51 -0500","message":"Improve validation logic and add table driven tests","refs":[],"body":"","author_name":"Preetha Appan","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"57551775d81335d7b2a862df448d3df55836f364","date":"2019-08-12 11:41:14 -0500","message":"Fix type for kind","refs":[],"body":"","author_name":"Preetha Appan","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"e4e7ca074d0d1427bf318feef2f52c38d58a4980","date":"2019-08-02 15:35:51 -0400","message":"update consul-template to latest version","refs":[],"body":"pulls in configuration option for blacklisting template functions from:\nhttps://github.com/hashicorp/consul-template/pull/1243\nhttps://github.com/hashicorp/consul-template/pull/1246\n\npulls in configuration option for file sandboxing from:\nhttps://github.com/hashicorp/consul-template/pull/1249\nhttps://github.com/hashicorp/consul-template/pull/1254\n\npulls in vault KVv2 read fixes from:\nhttps://github.com/hashicorp/consul-template/pull/1253\n","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"ffb83e1ef182e04b8f625112cfe5cbaf1f314e08","date":"2019-08-02 15:20:14 -0400","message":"client/template: configuration for function blacklist and sandboxing","refs":[],"body":"When rendering a task template, the `plugin` function is no longer\npermitted by default and will raise an error. An operator can opt-in\nto permitting this function with the new `template.function_blacklist`\nfield in the client configuration.\n\nWhen rendering a task template, path parameters for the `file`\nfunction will be treated as relative to the task directory by\ndefault. Relative paths or symlinks that point outside the task\ndirectory will raise an error. An operator can opt-out of this\nprotection with the new `template.disable_file_sandbox` field in the\nclient configuration.\n","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"d15d1de85e37a397aae6ee42500c5d2e9c64a1d4","date":"2019-08-12 17:03:30 -0500","message":"Apply suggestions from code review","refs":[],"body":"Co-Authored-By: Michael Schurter <mschurter@hashicorp.com>","author_name":"Preetha","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"34180de2716979f5ef7b5937dca0c9fdf9b21e9d","date":"2019-08-12 17:41:40 -0500","message":"More code review feedback","refs":[],"body":"","author_name":"Preetha Appan","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"ca40bbee41f12ad297baf6e0a2ed886f22a26654","date":"2019-08-12 20:19:58 -0400","message":"circleci: fix test reports and some refactoring","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"0caf7e27508d4073c688b9cca3f22fee5deba540","date":"2019-08-13 08:19:01 -0500","message":"website: Add TOC links in page body (#6113)","refs":[],"body":"This adds the “Jump to section” feature from Terraform’s documentation.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"3f891ed9b598179e4ff0bd341a22dba728e82f05","date":"2019-08-13 09:22:47 -0400","message":"parameterize golang version","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7a2ff00cd756d5855133cfe22adeabeaea6155b7","date":"2019-08-13 09:53:20 -0400","message":"Merge pull request #6122 from hashicorp/b-circleci-trs","refs":[],"body":"circleci: fix test reports and some refactoring","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"4e80282bd14364a9944b06f0f5354d61a80dea70","date":"2019-08-13 10:04:45 -0400","message":"Honor GO_TAGS env-var","refs":[],"body":"Allow honoring `GO_TAGS` environment variable if set.  Currently, users\nmust set variable as a makefile argument e.g. `make GO_TAGS=ui dev`, and\nthis allows us to use env-var syntax (e.g. `GO_TAGS=ui make dev`) and\nmake it convenient to set GO_TAGS globally.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b3d2c8721625ce6fa2a8ea133cd8c21c829cecc6","date":"2019-08-13 10:12:57 -0400","message":"Allow per-user local customizations of makefile","refs":[],"body":"Allow users to customize their makefiles by adding custom\ntargets/variables without checking them in.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"829c9dc78fc0ab9e6bc96970a35e7e5b5304d5a8","date":"2019-08-13 10:30:10 -0400","message":"Merge pull request #6123 from hashicorp/r-makefile-tweaks-20190513","refs":[],"body":"Ease user customizations of Makefile","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e7ff3e855d14e0b1f3b911da7fe4d106a91a226a","date":"2019-08-13 11:05:30 -0500","message":"Merge pull request #6097 from hashicorp/f-kind-validate","refs":[],"body":"Add validation for kind field if it is a consul connect proxy","author_name":"Preetha","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"dfd673f3c6cf6a03777df864e05b6ed12a413763","date":"2019-08-14 15:10:10 +0200","message":"Fix missing plugin driver capabilities (#6128)","refs":[],"body":"NetIsolationModes and MustInitiateNetwork were left out of the\r\ndriver Capabilities when using an external task driver plugin\r\n\r\nSigned-off-by: Lucas BEE <pouulet@gmail.com>","author_name":"Lucas BEE","author_email":"pouulet@gmail.com"},{"hash":"6448ed1056f7650c22d0944439018bccb19f165c","date":"2019-08-14 10:23:33 -0400","message":"move `nomad init` outputs to go-bindata assets","refs":[],"body":"","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"843de4e2f759f3926ad745bdbba4901275e2f141","date":"2019-08-14 11:23:36 -0400","message":"ci: add GOMAXPROCS=1 to lint step to avoid OOM","refs":[],"body":"","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"e145d3ba30202d9118bd0b226d61dab5301d5cc6","date":"2019-08-14 15:29:37 -0400","message":"agent: add optional param to -dev flag for connect (#6126)","refs":[],"body":"Consul Connect must route traffic between network namespaces through a\r\npublic interface (i.e. not localhost). In order to support testing in\r\ndev mode, users needed to manually set the interface which doesn't\r\nmake for a smooth experience.\r\n\r\nThis commit adds a facility for adding optional parameters to the\r\n`nomad agent -dev` flag and uses it to add a `-dev=connect` flag that\r\nbinds to a public interface on the host.","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"a321145457df2edf39a1e620fbba6d3d6b328585","date":"2019-08-12 13:51:38 -0700","message":"Encode characters in file paths to ensure proper URIs","refs":["origin/f-ui/alloc-fs-files","f-ui/alloc-fs-files"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"79502536286092fbfe7cd9c668e48290049921be","date":"2019-08-15 08:57:27 -0400","message":"changelog: -dev=connect feature","refs":[],"body":"","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"aaba483787121dcdce079e7aa5c33083d1758819","date":"2019-08-15 11:22:37 -0400","message":"Builtin Admission Controller Framework (#6116)","refs":[],"body":"* nomad: add admission controller framework\r\n\r\n* nomad: add admission controller framework and Consul Connect hooks\r\n\r\n* run admission controllers before checking permissions\r\n\r\n* client: add default node meta for connect configurables\r\n\r\n* nomad: remove validateJob func since it has been moved to admission controller\r\n\r\n* nomad: use new TaskKind type\r\n\r\n* client: use consts for connect sidecar image and log level\r\n\r\n* Apply suggestions from code review\r\n\r\nCo-Authored-By: Michael Schurter <mschurter@hashicorp.com>\r\n\r\n* nomad: add job register test with connect sidecar\r\n\r\n* Update nomad/job_endpoint_hooks.go\r\n\r\nCo-Authored-By: Michael Schurter <mschurter@hashicorp.com>\r\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"04f5ab391f5587d3c29f55ddfcf95d663daa3b08","date":"2019-08-15 19:05:55 +0200","message":"Add NetworkIsolation in TaskConfig (#6135)","refs":[],"body":"NetworkIsolation was left out of the task config when using an\r\nexternal task driver plugin","author_name":"Lucas BEE","author_email":"pouulet@gmail.com"},{"hash":"3cd0bcae82375671139ea869a1288f9331f41d21","date":"2019-08-15 10:54:00 -0700","message":"Merge pull request #6103 from groovemonkey/master","refs":[],"body":"syntax fix; add example for alloc exec -task","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6db7a8ce32f2e6d7fc05c7560b181847bc3f1236","date":"2019-08-15 14:06:21 -0400","message":"--payload -> --data for curl; consistent @payload","refs":[],"body":"","author_name":"Charlie Voiselle","author_email":"464492+angrycub@users.noreply.github.com"},{"hash":"478195a06b3a3d4615cc1d1309787cc5e97697cc","date":"2019-08-15 14:27:08 -0400","message":"Merge pull request #6138 from hashicorp/docs-fix-data-flag","refs":[],"body":"--payload -> --data for curl; consistent @payload","author_name":"Charlie Voiselle","author_email":"464492+angrycub@users.noreply.github.com"},{"hash":"056d4dfa5e38bc8eba4f0c3436fdfdcdeaf7da8e","date":"2019-08-16 03:20:42 -0700","message":"Add a link to the discussion forum on the resources page","refs":["origin/d-add-discuss-link","d-add-discuss-link"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"a921c21c8ea2d4c9ef7852e4f6c51d14e5241e4f","date":"2019-08-16 15:01:50 +0200","message":"docker: Fix issue where an exec may never timeout","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"83a75b310d60b6e9f3c6ca6d43c0a5ee104ef3fd","date":"2019-08-16 15:53:50 +0200","message":"Merge pull request #6144 from hashicorp/b-docker-exec","refs":[],"body":"docker: Fix issue where an exec may never timeout","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"39cf666925f4a74974a5c584dfd159afe7c575f1","date":"2019-08-16 12:44:57 -0400","message":"link-local addresses can be fingerprinted","refs":[],"body":"Added note to document that link-local addresses can be fingerprinted in\ncases where no routable address can be found.  Crosslinked to\n`\"fingerprint.network.disallow_link_local\"` because they are somewhat\nrelated and it is documented at a reasonable distance from this setting.\n","author_name":"Charlie Voiselle","author_email":"464492+angrycub@users.noreply.github.com"},{"hash":"bc03834672f21115c469cea023e58c2c84fc5476","date":"2019-08-16 13:33:26 -0400","message":"Rewording based on reviews","refs":["origin/docs-cv-prefer-routable"],"body":"","author_name":"Charlie Voiselle","author_email":"464492+angrycub@users.noreply.github.com"},{"hash":"1cb0cf3f7fa45f2b5485a16c38a852743ab0eaee","date":"2019-08-17 18:01:29 -0700","message":"Merge pull request #6142 from hashicorp/d-add-discuss-link","refs":[],"body":"Add a link to the discussion forum on the resources page","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"f0df324149525973326e13d8e94a8850a858c2aa","date":"2019-08-19 12:17:01 +0300","message":"Bump up github.com/hashicorp/go-syslog","refs":[],"body":"","author_name":"Dmitry","author_email":"dmitry.wagin@ya.ru"},{"hash":"354da0f60c3ef264fbe5cb1ddc2e004061e6a569","date":"2019-08-19 10:36:28 -0700","message":"Merge pull request #6048 from hashicorp/f-ui/alloc-fs-files","refs":[],"body":"UI: Alloc FS: File Viewer","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"992db3346c420c8442b742fc9f04d49ba01aff52","date":"2019-08-14 14:07:52 -0400","message":"command: add `-connect` flag to job init","refs":[],"body":"Adds an example job for Consul Connect integration as well as an\nannotated example job.\n","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"6a09397baaabce6807e90fe2a960a83e40f2587f","date":"2019-08-19 15:22:12 -0400","message":"Merge pull request #6149 from hashicorp/docs-cv-prefer-routable","refs":[],"body":"link-local addresses can be fingerprinted","author_name":"Charlie Voiselle","author_email":"464492+angrycub@users.noreply.github.com"},{"hash":"866d5e7b94fb52078a61e8d0eb682f16bfc80659","date":"2019-08-19 15:35:03 -0700","message":"vendor: update testify to v1.4.0","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"65aa4757b8b9ed914c550e88174cbc47b8be5874","date":"2019-08-19 17:16:26 -0700","message":"Use the standard empty state when a dir is empty","refs":["origin/f-ui/alloc-fs-empty-dir-state","f-ui/alloc-fs-empty-dir-state"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"6fee34f591861c6b86180a7714247686fd04107f","date":"2019-08-20 01:22:46 -0400","message":"sidecar_task override in connect admission controller (#6140)","refs":[],"body":"* structs: use seperate SidecarTask struct for sidecar_task stanza and add merge\r\n\r\n* nomad: merge SidecarTask into proxy task during connect Mutate hook\r\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"22c0fb19cff39e6fa41a94d54610a7491481884c","date":"2019-08-20 13:17:08 +0300","message":"added version github.com/hashicorp/go-syslog","refs":[],"body":"","author_name":"Dmitry","author_email":"dmitry.wagin@ya.ru"},{"hash":"642584e5a970b489878c31eef02c0eff46878eea","date":"2019-08-20 13:34:36 +0300","message":"updated vendor/vendor.json","refs":[],"body":"","author_name":"Dmitry","author_email":"dmitry.wagin@ya.ru"},{"hash":"97705ed6b3597fbb1de9f7eaa8ac23f8626a94dc","date":"2019-08-20 09:29:37 -0400","message":"Merge pull request #5911 from hashicorp/b-rpc-consistent-reads","refs":[],"body":"Block rpc handling until state store is caught up","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"c4a45a6bbcb7b036062bf2796d6fe17cf7da74a0","date":"2019-08-19 09:17:38 -0400","message":"add optional task field to group service checks","refs":[],"body":"","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"02f6a71daeb21a024cb5076396f49acc1c3775a7","date":"2019-08-20 08:36:08 -0500","message":"Add ability to control Mirage logging via query (#6105)","refs":[],"body":"This lets us turn Mirage logging on without editing any\r\nfiles, which makes it easier to switch between branches.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"b8ebfb8c1218cfd0610958bf45f012262fc39be5","date":"2019-08-20 07:22:16 -0700","message":"Merge pull request #6156 from hashicorp/vendor-testify","refs":[],"body":"vendor: update testify to v1.4.0","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"1783a7a5d8ee0e61391f11d9499143e3ea0e6016","date":"2019-08-20 09:27:44 -0700","message":"Merge pull request #6158 from hashicorp/f-ui/alloc-fs-empty-dir-state","refs":[],"body":"UI: Use the standard empty message when an fs dir is empty","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7b038acdb71c75aba24741b455ff719a39c58e3f","date":"2019-08-20 09:39:47 -0700","message":"Remove the temporary allocationFileExplorer mirage scenario","refs":["origin/f-ui/alloc-fs","f-ui/alloc-fs"],"body":"","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"c29d836dd9e99ea1edc4cc489f19bdd33e84dfab","date":"2019-08-20 10:18:23 -0700","message":"Merge pull request #5871 from hashicorp/f-ui/alloc-fs","refs":[],"body":"UI: Allocation file system explorer","author_name":"Michael Lange","author_email":"dingoeatingfuzz@gmail.com"},{"hash":"7f358b3d485a6b16707b622f19d4d661544d96c1","date":"2019-08-20 11:38:48 -0400","message":"test: require root for linux devmode test","refs":[],"body":"","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"697a0e4e4962b9e35599f10df788ae189eeeb05c","date":"2019-08-20 17:55:21 +0000","message":"add node.region to interpolation documentation to address #6164","refs":["origin/docs-interpolation-node-region"],"body":"","author_name":"Chris Baker","author_email":"1675087+cgbaker@users.noreply.github.com"},{"hash":"4d6eb2c5905afaa62e2bc44bcabb251b143193eb","date":"2019-08-20 14:16:14 -0400","message":"Merge pull request #6165 from hashicorp/docs-interpolation-node-region","refs":[],"body":"add node.region to interpolation documentation","author_name":"Chris Baker","author_email":"1675087+cgbaker@users.noreply.github.com"},{"hash":"35d920fbb79e7dd6de745c26022d590b82db8a8c","date":"2019-08-20 14:22:03 -0400","message":"Merge pull request #6152 from dwagin/master","refs":[],"body":"Bump up github.com/hashicorp/go-syslog for better BSD support","author_name":"Chris Baker","author_email":"1675087+cgbaker@users.noreply.github.com"},{"hash":"eeacb87f3b6033a9b7fe96cf7bd0783601094630","date":"2019-08-14 15:02:00 -0700","message":"connect: register group services with Consul","refs":[],"body":"Fixes #6042\n\nAdd new task group service hook for registering group services like\nConnect-enabled services.\n\nDoes not yet support checks.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"7e9ec7f3c59d4cf2b98fb5ad1d25f49c7534b23a","date":"2019-08-19 15:43:06 -0400","message":"structs: add taskgroup networks and services to plan diffs","refs":[],"body":"Adds a check for differences in `job.Diff` so that task group networks\nand services, including new Consul connect stanzas, show up in the job\nplan outputs.\n","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"9e4950f36da0310d9a1f936c8d3e93b2886743d4","date":"2019-08-20 13:23:23 -0700","message":"ci: require Consul 1.6.0-rc1","refs":[],"body":"","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"b3c13b564f42c35d5c62638577c76245d8238b97","date":"2019-08-20 14:45:38 -0700","message":"Merge pull request #6157 from hashicorp/f-connect-register","refs":[],"body":"Register connect enabled group services with Consul","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"6dcf4f29b1494571d31068e62920fe4601df8bd8","date":"2019-08-21 08:56:37 -0500","message":"UI: Add CircleCI job (#6125)","refs":["origin/f-connect-register-checks"],"body":"This adds a job to test the UI on CircleCI, including the sort of branch\r\npattern-matching from #5839, so .-ui/ branches only have that job\r\nand not the non-UI ones.\r\n\r\nI considered having an entire workflow for UI, which could have separate\r\njobs for linting vs Ember tests, but the lint commands take so little time\r\nthat it didn’t seem worth it.\r\n\r\nThere’s no use of nvm to change the Node version as the Docker image\r\nis what controls that. It’s annoying to have to update the version in multiple\r\nplaces, but probably infrequent.","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"74675ab348e99c5a613b2a1972eb773c9e0cb928","date":"2019-08-21 12:42:53 -0400","message":"structs: validate no tcp checks for connect services (#6169)","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"41292055de1260cda54f6e8a22718672cb7cc375","date":"2019-08-21 20:57:05 +0200","message":"scheduler: Implicit constraint on readonly hostvol","refs":["origin/dani/scheduler-vol-ro"],"body":"When a Client declares a volume is ReadOnly, we should only schedule it\nfor requests for ReadOnly volumes. This change means that if a host\nexposes a readonly volume, we then validate that the group level\nrequests for the volume are all read only for that host.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"d844f37be2570a57ce7f0ea3c49e9c34c1c43fc1","date":"2019-08-21 20:13:16 +0200","message":"acls: Break mount acl into mount-rw and mount-ro","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"6527c38f997dc6dbbeb8c83f7eac815209203683","date":"2019-08-21 22:19:58 +0200","message":"clientconfig: Fix parsing multiple host volumes","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"3081e4433035eefefb8ac75bf4620ddd3209dd09","date":"2019-08-21 22:22:14 +0200","message":"Merge pull request #6180 from hashicorp/dani/readonly-acl","refs":[],"body":"Fine grained ACLs for Host Volumes","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"282b672a2c864493b2b8cf050602f020d0c1e7ff","date":"2019-08-21 22:34:41 +0200","message":"api: Fix definition of HostVolumeInfo","refs":[],"body":"","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"36d5fb35f7bcfb3734d58ff07adc899dfc9bebe2","date":"2019-08-21 22:36:27 +0200","message":"Merge pull request #6183 from hashicorp/dani/fix-multiparse","refs":[],"body":"clientconfig: Fix parsing multiple host volumes","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"30da2b8f6c3aa860113c9d313c695a05eff5bb97","date":"2019-08-22 00:13:28 +0200","message":"Merge pull request #6184 from hashicorp/dani/fix-api","refs":[],"body":"api: Fix definition of HostVolumeInfo","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"2d2b23d7889f9386ff50b003a6b6467ba43d0a10","date":"2019-08-21 16:18:23 +0200","message":"remove hidden field from host volumes","refs":[],"body":"We're not shipping support for \"hidden\" volumes in 0.10 any more, I'll\nconvert this to an issue+mini RFC for future enhancement.\n","author_name":"Danielle Lancashire","author_email":"dani@hashicorp.com"},{"hash":"fbddb9281be0cafaabc95746887678a698fa8666","date":"2019-08-22 08:49:54 +0200","message":"Merge pull request #6175 from hashicorp/dani/remove-hidden-vols","refs":[],"body":"remove hidden field from host volumes","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"2364fb2da1f38960d973b6ab776d5332832232d8","date":"2019-08-22 08:11:24 -0500","message":"UI: Add creation time to evaluations table (#6050)","refs":[],"body":"","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"91bccfc83bddbd10a7a833cb7d674f807d2587ae","date":"2019-08-22 10:10:20 -0400","message":"ci: Use more recent base machine executor image","refs":[],"body":"This fixes a frequent failure in `test-rkt` jobs where dpkg installation\nfails.\n\nThe image used currently, circleci/classic:201808-01, has unattended\nupgrades enabled accidentally, which runs on every build.  This means\nthat tools get modified unexpectedly during builds, and apt-get commands\nmay fail as the unattended upgrade is holding package database lock.\n\nThis updates `test-rkt` job only because the new image breaks\n`test-docker` job (e.g. https://circleci.com/gh/hashicorp/nomad/2641 ),\nand I punted on investigating test-docker for another day.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"5eee9ee59f71d907ca77da65ce2b6f32dc5e2f6f","date":"2019-08-22 11:10:05 -0400","message":"Merge pull request #6187 from hashicorp/c-circleci-tweak-20190822","refs":[],"body":"ci: Use more recent base machine executor image for test-rkt","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"43d89f864e17b44da2cb3e16df2ffe614ec3aaa4","date":"2019-08-12 15:41:39 -0700","message":"connect: task hook for bootstrapping envoy sidecar","refs":[],"body":"Fixes #6041\n\nUnlike all other Consul operations, boostrapping requires Consul be\navailable. This PR tries Consul 3 times with a backoff to account for\nthe group services being asynchronously registered with Consul.\n","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"72193f99bed61a13974d313fbed1aed95bdcada9","date":"2019-08-22 10:58:31 -0700","message":"Merge pull request #6121 from hashicorp/f-connect-bootstrap","refs":[],"body":"connect: task hook for bootstrapping envoy sidecar","author_name":"Michael Schurter","author_email":"mschurter@hashicorp.com"},{"hash":"10e675c2009fc3fa045be40371bd28d35b2e9080","date":"2019-08-22 15:54:23 -0500","message":"Remove most Netlify configuration (#6194)","refs":[],"body":"This removes the in-repository Netlify configuration. There are now two\r\nsites backed by the repository, so we must use the web UI to\r\ncontrol the build settings, as having the configuration in-repository\r\noverrides the web UI settings.\r\n\r\nThe build settings for the two sites are below, as of this commit. See\r\nthe extra step in nomad-ui site’s build step that copies the _redirects\r\nfile to the correct destination so things are properly forwarded when\r\nyou visit the deployment.\r\n\r\nnomad-ui:\r\n\r\nbase directory: ui\r\nbuild command: ember build && mkdir -p ui-dist/ui && mv dist/* ui-dist/ui/ && cp ../.netlify/ui-redirects ui-dist/_redirects\r\npublish directory: ui/ui-dist\r\n\r\nnomad-website:\r\n\r\nbase directory: website\r\nbuild command: bundle exec middleman build\r\npublish directory: website/build","author_name":"Buck Doyle","author_email":"buck@hashicorp.com"},{"hash":"28b0650dc982bebe46d7b7c10bb927efd7d16d1a","date":"2019-08-22 17:35:15 -0500","message":"Bring 0.9.5 changes to changelog on master branch","refs":[],"body":"","author_name":"Preetha","author_email":"460133+preetapan@users.noreply.github.com"},{"hash":"974ff0392c3f0ca52634a7818b66efec3170ff64","date":"2019-08-22 21:53:52 -0400","message":"ar: fix bridge networking port mapping when port.To is unset (#6190)","refs":[],"body":"","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"0ccca0ad593dd888628e6bff625f334c316e9713","date":"2019-08-23 09:44:40 -0400","message":"use  golang 1.12","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3e1f58449575e027c49956efdd7951480e2e7521","date":"2019-08-23 12:26:47 -0400","message":"update circleci builds to use  golang 1.12.9","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"25e38c82570263e922163969cd1ce28d13fe2bd3","date":"2019-08-23 12:49:02 -0400","message":"Consul service meta (#6193)","refs":[],"body":"* adds meta object to service in job spec, sends it to consul\r\n\r\n* adds tests for service meta\r\n\r\n* fix tests\r\n\r\n* adds docs\r\n\r\n* better hashing for service meta, use helper for copying meta when registering service\r\n\r\n* tried to be DRY, but looks like it would be more work to use the\r\nhelper function\r\n","author_name":"Jerome Gravel-Niquet","author_email":"jeromegn@gmail.com"},{"hash":"c7c8b011220a6eddf0ea7bc8b31b48c5eb2d2a8d","date":"2019-08-23 11:49:24 -0400","message":"agent: -dev=connect mode bind to 0.0.0.0","refs":[],"body":"The dev mode flag for connect was binding to the default interface's\nIP, but this makes for a bad user experience for the CLI which will\ndefault to 127.0.0.1. If we bind to 0.0.0.0 instead the CLI will work\nwithout further configuration by the user.\n","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"0c4718378b12bba651e6df74e0872831aed11da0","date":"2019-08-23 14:37:21 -0400","message":"Merge pull request #6200 from hashicorp/r-golang-1.12.9","refs":[],"body":"Update golang to 1.12.9","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"01983ae59b067ceadb89e4191d6a617a57285aa0","date":"2019-08-23 14:58:34 -0400","message":"initialize device manager stats interval","refs":[],"body":"Fixes a bug where we cpu is pigged at 100% due to collecting devices\nstatistics.  The passed stats interval was ignored, and the default zero\nvalue causes a very tight loop of stats collection.\n\nFWIW, in my testing, it took 2.5-3ms to collect nvidia GPU stats, on a\n`g2.2xlarge` ec2 instance.\n\nThe stats interval defaults to 1 second and is user configurable.  I\nbelieve this is too frequent as a default, and I may advocate for\nreducing it to a value closer to 5s or 10s, but keeping it as is for\nnow.\n\nFixes https://github.com/hashicorp/nomad/issues/6057 .\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"07373be85cec02183ace5c307efd06519c676570","date":"2019-08-14 11:36:21 -0400","message":"govendor fetch github.com/hashicorp/go-getter@6be654f","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"5fc06cd65fe6e5925740ddfc827a810ab3fbf564","date":"2019-08-14 11:37:16 -0400","message":"taskrunner getter set Umask for go-getter, setuid test","refs":[],"body":"","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"4877face879f98f5dd9f908e52c4dfd83bfc5638","date":"2019-08-23 16:49:41 -0400","message":"Merge pull request #6203 from hashicorp/b-chroot-setuid-110","refs":[],"body":"exec driver setuid go-getter update","author_name":"Lang Martin","author_email":"lang@hashicorp.com"},{"hash":"a72a0f8832e3dfe7de86f3c03c4b946f1c1fcb56","date":"2019-08-23 18:29:49 -0400","message":"Merge pull request #5676 from hashicorp/f-b-upgrade-ugorji-dep-20190508","refs":[],"body":"Update ugorji/go to latest","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e8ebde4ca266924ddb1d52851b5ad953fc2846f5","date":"2019-08-16 10:03:31 -0400","message":"clientConfig.Copy() to copy template config too","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e87d9cc8a689685e0a346f9b7dc71ef3d53c6cdc","date":"2019-08-23 19:00:57 -0400","message":"Merge pull request #6146 from hashicorp/b-config-template-copy","refs":[],"body":"clientConfig.Copy() to copy template config too","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"f4571cb9a9176d331dd216b0b4362b60d0eb08e4","date":"2019-08-23 21:21:50 -0400","message":"use a new image with proper protoc dependency","refs":[],"body":"Fixes `test-devices` job\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b6bf83ad72d427b108a7c9a85aab17d4e0bea0ba","date":"2019-08-23 21:39:17 -0400","message":"use circleci/golang images directly","refs":[],"body":"We currently use an container image for `test-devices` job only; while\nall other jobs use machine executor.\n\nThis allows us to switch golang and protoc verions easily without\nmanually managing Docker images (which requires building them manually\non a dev machines, etc).  All that while, we install dependencies on\nevery build in all other jobs..\n\n`test-devices` now is one of the fastest jobs and isn't a constraint or\na bottleneck, so increasing its overhead by few seconds doesn't hurt the\noverall developer iteration.\n\nIf we split tests effectively later, we can revisit.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"b4a80a7eea58f8932a4f6e4b81e5ddd93781e20e","date":"2019-08-24 08:16:03 -0400","message":"Merge pull request #6201 from hashicorp/b-device-stats-interval","refs":[],"body":"initialize device manager stats interval","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"cc3da4a441968404dde88335fbee51e2affdfe5e","date":"2019-08-24 08:19:44 -0400","message":"logmon: revert workaround for Windows go1.11 bug","refs":[],"body":"Revert e0126123ab1ba848f72458538bc6118c978245e6 now that we are running\nwith Golang 1.12, and https://github.com/golang/go/issues/29119 is no\nlonger relevant.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"a80643e46d154c620c7c64709d1a7ba4cb7c288f","date":"2019-08-25 11:03:49 -0400","message":"Don't persist allocs of destroyed alloc runners","refs":[],"body":"This fixes a bug where allocs that have been GCed get re-run again after client\nis restarted.  A heavily-used client may launch thousands of allocs on startup\nand get killed.\n\nThe bug is that an alloc runner that gets destroyed due to GC remains in\nclient alloc runner set.  Periodically, they get persisted until alloc is\ngced by server.  During that  time, the client db will contain the alloc\nbut not its individual tasks status nor completed state.  On client restart,\nclient assumes that alloc is pending state and re-runs it.\n\nHere, we fix it by ensuring that destroyed alloc runners don't persist any alloc\nto the state DB.\n\nThis is a short-term fix, as we should consider revamping client state\nmanagement.  Storing alloc and task information in non-transaction non-atomic\nconcurrently while alloc runner is running and potentially changing state is a\nrecipe for bugs.\n\nFixes https://github.com/hashicorp/nomad/issues/5984\nRelated to https://github.com/hashicorp/nomad/pull/5890\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"eb5160427f446cfc8251ad8d3f746ad1893ee156","date":"2019-08-26 10:08:14 -0400","message":"Merge pull request #6204 from hashicorp/c-circleci-tweaks-20190824","refs":[],"body":"ci: use circleci/golang images directly","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"7c1fe3eae5f1f9744f730a049c1318d697e51bea","date":"2019-08-26 10:10:20 -0400","message":"logmon: log stat error to help debugging","refs":[],"body":"","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"3d9e44d40f4fbde1e8f99617799df096a4f060a3","date":"2019-08-26 07:29:08 -0700","message":"Update middleman-hashicorp container (#6185)","refs":[],"body":"","author_name":"Nick Fagerlund","author_email":"nick@hashicorp.com"},{"hash":"925eed89c69ecd1f984d8e422e71650e2525ba75","date":"2019-08-26 10:52:51 -0400","message":"Merge pull request #6205 from hashicorp/b-no-golang-29119-workaround","refs":[],"body":"logmon: revert workaround for Windows go1.11 bug","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"8066f9b8f0326c43c2ef354c609fdb1c195c4edc","date":"2019-08-26 17:01:49 +0200","message":"Merge pull request #6181 from hashicorp/dani/scheduler-vol-ro","refs":[],"body":"scheduler: Implicit constraint on readonly hostvol","author_name":"Danielle","author_email":"dani@hashicorp.com"},{"hash":"ff3dedd5346fa5b7737a33a19d838d8e928430cf","date":"2019-08-26 13:45:58 -0400","message":"Write to client store while holding lock","refs":[],"body":"Protect against a race where destroying and persist state goroutines\nrace.\n\nThe downside is that the database io operation will run while holding\nthe lock and may run indefinitely.  The risk of lock being long held is\nslow destruction, but slow io has bigger problems.\n","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"e2efeb4911e481f59b5326fdb73dd0c7e9ea67aa","date":"2019-08-26 13:24:59 -0400","message":"init: add generated assets into bindata","refs":[],"body":"","author_name":"Tim Gross","author_email":"tim@0x74696d.com"},{"hash":"f61637026e7547011914f2cc7d439e02b5928fc5","date":"2019-08-26 17:26:18 -0400","message":"Merge pull request #6207 from hashicorp/b-gc-destroyed-allocs-rerun","refs":[],"body":"Don't persist allocs of destroyed alloc runners","author_name":"Mahmood Ali","author_email":"mahmood@hashicorp.com"},{"hash":"d29fa2b48ccec42fb120a29c4cdd03b0c52a2441","date":"2019-08-27 07:36:32 -0700","message":"remove network stanza from job init --short example jobspec (#6179)","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"80dfa33223313f1136610a161bf1c1636540482c","date":"2019-08-27 08:38:07 -0700","message":"expose nomad namespace as environment variable in allocation #5692 (#6192)","refs":[],"body":"","author_name":"Jasmine Dahilig","author_email":"jasmine@dahilig.com"},{"hash":"51750f573238696e859134e8561605b393afaf7a","date":"2019-08-27 23:41:38 -0400","message":"Add environment variables for connect upstreams (#6171)","refs":[],"body":"* taskenv: add connect upstream env vars + test\r\n\r\n* set taskenv upstreams instead of appending\r\n\r\n* Update client/taskenv/env.go\r\n\r\nCo-Authored-By: Michael Schurter <mschurter@hashicorp.com>\r\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"},{"hash":"f631ec6c2de954b98f66e15ffbf4eb67bf012380","date":"2019-08-27 23:59:36 -0400","message":"cli: display group ports and address in alloc status command output (#6189)","refs":["HEAD -> master","origin/master","origin/HEAD"],"body":"* cli: display group ports and address in alloc status command output\r\n\r\n* add assertions for port.To = -1 case and convert assertions to testify\r\n","author_name":"Nick Ethier","author_email":"nethier@hashicorp.com"}],"latest":{"hash":"f50c358988c8f6c51288bf18c500257558ffd8bc","date":"2018-10-25 13:40:15 -0500","message":"remove unnecessary return","refs":[],"body":"Co-Authored-By: preetapan <preetha@hashicorp.com>","author_name":"Michael Schurter","author_email":"michael.schurter@gmail.com"},"total":2854}